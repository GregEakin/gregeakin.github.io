(()=>{"use strict";var i={d:(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},V={},P=(i.r(V),i.d(V,{DIRECTION:()=>c,H:()=>fe,V:()=>ge}),{}),I=(i.r(P),i.d(P,{DIRECTION:()=>c,FontData:()=>h,NOSTRETCH:()=>a,mergeOptions:()=>n}),{}),R=(i.r(I),i.d(I,{LineBBox:()=>o}),{}),F=(i.r(R),i.d(R,{LinebreakVisitor:()=>Ae,Linebreaks:()=>be,NOBREAK:()=>g}),{}),G=(i.r(F),i.d(F,{CommonOutputJax:()=>b,FONTPATH:()=>Ne}),{}),_=(i.r(G),i.d(G,{ARROWDX:()=>De,ARROWX:()=>Le,ARROWY:()=>Oe,CommonArrow:()=>Qe,CommonBorder:()=>_e,CommonBorder2:()=>He,CommonDiagonalArrow:()=>Je,CommonDiagonalStrike:()=>ze,PADDING:()=>We,SOLID:()=>Te,THICKNESS:()=>A,arrowBBox:()=>Ge,arrowBBoxHD:()=>Pe,arrowBBoxW:()=>Ie,arrowDef:()=>Re,arrowHead:()=>y,diagonalArrowDef:()=>Fe,fullBBox:()=>v,fullBorder:()=>Ve,fullPadding:()=>Ee,sideIndex:()=>B,sideNames:()=>je}),{}),H=(i.r(_),i.d(_,{CommonWrapper:()=>C,SPACE:()=>qe}),{}),z=(i.r(H),i.d(H,{CommonWrapperFactory:()=>$e}),{}),J=(i.r(z),i.d(z,{CommonTeXAtomMixin:()=>Ye}),{}),Q=(i.r(J),i.d(J,{CommonTextNodeMixin:()=>Ze}),{}),X=(i.r(Q),i.d(Q,{CommonXmlNodeMixin:()=>ts}),{}),U=(i.r(X),i.d(X,{CommonMactionMixin:()=>ss,TooltipData:()=>es}),{}),K=(i.r(U),i.d(U,{CommonMathMixin:()=>is}),{}),q=(i.r(K),i.d(K,{CommonMencloseMixin:()=>rs}),{}),$=(i.r(q),i.d(q,{CommonMfencedMixin:()=>as}),{}),Y=(i.r($),i.d($,{CommonMfracMixin:()=>ns}),{}),Z=(i.r(Y),i.d(Y,{CommonMglyphMixin:()=>os}),{}),tt=(i.r(Z),i.d(Z,{CommonMiMixin:()=>hs}),{}),et=(i.r(tt),i.d(tt,{CommonMmultiscriptsMixin:()=>cs,NextScript:()=>ds,ScriptNames:()=>ls}),{}),st=(i.r(et),i.d(et,{CommonMnMixin:()=>ps}),{}),it=(i.r(st),i.d(st,{CommonMoMixin:()=>us}),{}),rt=(i.r(it),i.d(it,{CommonMpaddedMixin:()=>ms}),{}),at=(i.r(rt),i.d(rt,{CommonMrootMixin:()=>gs}),{}),nt=(i.r(at),i.d(at,{CommonInferredMrowMixin:()=>xs,CommonMrowMixin:()=>fs}),{}),ot=(i.r(nt),i.d(nt,{CommonMsMixin:()=>bs}),{}),ht=(i.r(ot),i.d(ot,{CommonMspaceMixin:()=>As}),{}),dt=(i.r(ht),i.d(ht,{CommonMsqrtMixin:()=>Bs}),{}),lt=(i.r(dt),i.d(dt,{CommonMsubMixin:()=>vs,CommonMsubsupMixin:()=>ks,CommonMsupMixin:()=>ys}),{}),ct=(i.r(lt),i.d(lt,{BREAK_BELOW:()=>Cs,CommonMtableMixin:()=>Ms}),{}),pt=(i.r(ct),i.d(ct,{CommonMtdMixin:()=>Ns}),{}),ut=(i.r(pt),i.d(pt,{CommonMtextMixin:()=>Ls}),{}),mt=(i.r(ut),i.d(ut,{CommonMlabeledtrMixin:()=>Os,CommonMtrMixin:()=>Ds}),{}),gt=(i.r(mt),i.d(mt,{CommonMoverMixin:()=>Ts,CommonMunderMixin:()=>Ws,CommonMunderoverMixin:()=>js}),{}),ft=(i.r(gt),i.d(gt,{CommonScriptbaseMixin:()=>Es}),{}),xt=(i.r(ft),i.d(ft,{CommonSemanticsMixin:()=>Vs}),{}),bt=(i.r(xt),i.d(xt,{SvgWrapper:()=>N}),{}),At=(i.r(bt),i.d(bt,{ZeroFontDataUrl:()=>Is}),{}),Bt=(i.r(At),i.d(At,{SvgMath:()=>Rs}),{}),vt=(i.r(Bt),i.d(Bt,{SvgInferredMrow:()=>zs,SvgMrow:()=>Hs}),{}),yt=(i.r(vt),i.d(vt,{SvgMi:()=>Qs}),{}),kt=(i.r(yt),i.d(yt,{AddPaths:()=>function(t,e,s){for(const s of Object.keys(e)){var i=parseInt(s);Us.charOptions(t,i).p=e[i]}for(const e of Object.keys(s)){var r=parseInt(e);Us.charOptions(t,r).c=s[r]}return t},DIRECTION:()=>c,FontData:()=>h,NOSTRETCH:()=>a,SvgFontData:()=>Us,mergeOptions:()=>n}),{}),wt=(i.r(kt),i.d(kt,{SvgMo:()=>Ks}),{}),St=(i.r(wt),i.d(wt,{SvgMn:()=>$s}),{}),Ct=(i.r(St),i.d(St,{SvgMs:()=>Zs}),{}),Mt=(i.r(Ct),i.d(Ct,{SvgMtext:()=>ei}),{}),Nt=(i.r(Mt),i.d(Mt,{SvgMerror:()=>ii}),{}),Lt=(i.r(Nt),i.d(Nt,{SvgMspace:()=>ai}),{}),Dt=(i.r(Lt),i.d(Lt,{SvgMpadded:()=>oi}),{}),Ot=(i.r(Dt),i.d(Dt,{SvgMphantom:()=>di}),{}),Wt=(i.r(Ot),i.d(Ot,{SvgMfrac:()=>ci}),{}),Tt=(i.r(Wt),i.d(Wt,{SvgMsqrt:()=>ui}),{}),jt=(i.r(Tt),i.d(Tt,{SvgMroot:()=>gi}),{}),Et=(i.r(jt),i.d(jt,{SvgMfenced:()=>xi}),{}),Vt=(i.r(Et),i.d(Et,{SvgScriptbase:()=>bi}),{}),Pt=(i.r(Vt),i.d(Vt,{SvgMsub:()=>ki,SvgMsubsup:()=>Si,SvgMsup:()=>wi}),{}),It=(i.r(Pt),i.d(Pt,{SvgMover:()=>Oi,SvgMunder:()=>Di,SvgMunderover:()=>Wi}),{}),Rt=(i.r(It),i.d(It,{AlignX:()=>Ei,SvgMmultiscripts:()=>Vi}),{}),Ft=(i.r(Rt),i.d(Rt,{SvgMtable:()=>Ii}),{}),Gt=(i.r(Ft),i.d(Ft,{SvgMlabeledtr:()=>Hi,SvgMtr:()=>_i}),{}),_t=(i.r(Gt),i.d(Gt,{SvgMtd:()=>Ji}),{}),Ht=(i.r(_t),i.d(_t,{SvgMaction:()=>Xi}),{}),zt=(i.r(Ht),i.d(Ht,{ARROWDX:()=>De,ARROWX:()=>Le,ARROWY:()=>Oe,Arrow:()=>O,Border:()=>Yi,Border2:()=>Zi,CommonArrow:()=>Qe,CommonBorder:()=>_e,CommonBorder2:()=>He,CommonDiagonalArrow:()=>Je,CommonDiagonalStrike:()=>ze,DiagonalArrow:()=>D,DiagonalStrike:()=>tr,PADDING:()=>We,RenderLine:()=>$i,SOLID:()=>Te,THICKNESS:()=>A,arrowBBox:()=>Ge,arrowBBoxHD:()=>Pe,arrowBBoxW:()=>Ie,arrowDef:()=>Re,arrowHead:()=>y,computeLineData:()=>Ki,diagonalArrowDef:()=>Fe,fullBBox:()=>v,fullBorder:()=>Ve,fullPadding:()=>Ee,lineData:()=>L,lineOffset:()=>qi,sideIndex:()=>B,sideNames:()=>je}),{}),Jt=(i.r(zt),i.d(zt,{SvgMenclose:()=>er}),{}),Qt=(i.r(Jt),i.d(Jt,{SvgAnnotation:()=>or,SvgAnnotationXML:()=>hr,SvgSemantics:()=>nr,SvgXmlNode:()=>dr}),{}),Xt=(i.r(Qt),i.d(Qt,{SvgMglyph:()=>cr}),{}),Ut=(i.r(Xt),i.d(Xt,{SvgTeXAtom:()=>ur}),{}),Kt=(i.r(Ut),i.d(Ut,{SvgTextNode:()=>mr}),{}),qt=(i.r(Kt),i.d(Kt,{SvgHtmlNode:()=>fr}),{}),$t=(i.r(qt),i.d(qt,{SvgWrappers:()=>xr}),{}),Yt=(i.r($t),i.d($t,{SvgWrapperFactory:()=>br}),{}),Zt=(i.r(Yt),i.d(Yt,{FontCache:()=>Ar}),{}),te=(i.r(Zt),i.d(Zt,{DefaultFont:()=>vr,fontName:()=>Br}),{});i.r(te),i.d(te,{SVG:()=>W,SVGNS:()=>yr,XLINKNS:()=>kr});const t=("undefined"!=typeof window?window:global).MathJax._.components.global,ee=(t.GLOBAL,t.isObject,t.combineConfig,t.combineDefaults),se=t.combineWithMathJax,ie=(t.MathJax,MathJax._.core.OutputJax.AbstractOutputJax),re=MathJax._.core.MathItem,d=(re.protoItem,re.AbstractMathItem,re.STATE),e=(re.newState,MathJax._.core.MmlTree.MmlNode),l=e.TEXCLASS,ae=e.TEXCLASSNAMES,ne=(e.MATHVARIANTS,e.indentAttributes,e.AbstractMmlNode,e.AbstractMmlTokenNode,e.AbstractMmlLayoutNode,e.AbstractMmlBaseNode,e.AbstractMmlEmptyNode,e.TextNode),oe=e.XMLNode,he=MathJax._.mathjax.mathjax,s=MathJax._.util.Options,r=(s.isObject,s.APPEND,s.REMOVE,s.OPTIONS,s.Expandable,s.expandable,s.makeArray,s.keys,s.copy,s.insert,s.defaultOptions),de=s.userOptions,le=(s.selectOptions,s.selectOptionsFromKeys,s.separateOptions),ce=s.lookup,pe=MathJax._.util.AsyncLoad.asyncLoad,ue=MathJax._.util.Retries,me=(ue.handleRetriesFor,ue.retryAfter),c={None:"",Vertical:"v",Horizontal:"h"},ge=c.Vertical,fe=c.Horizontal;const a={dir:c.None};function n(t,e,s){return(s?r(t,{[e]:s}):t)[e]}class h{get CLASS(){return this.constructor}static charOptions(t,e){const s=t[e];if(Array.isArray(s))return 3===s.length&&(s[3]={}),s[3];throw Error("Character data hasn't been loaded for 0x"+e.toString(16).toUpperCase())}static defineDynamicFiles(t,i=""){const r={};return(t||[]).forEach(([e,t,s])=>{r[e]={extension:i,file:e,variants:t,delimiters:s||[],promise:null,failed:!1,setup:t=>{r[e].failed=!0}}}),r}static dynamicSetup(t,e,s,i={},r=null){const a=t?this.dynamicExtensions.get(t):null;(t?a.files:this.dynamicFiles)[e].setup=e=>{Object.keys(s).forEach(t=>e.defineChars(t,s[t])),e.defineDelimiters(i),t&&this.adjustDelimiters(e.delimiters,Object.keys(i),a.sizeN,a.stretchN),r&&e.addDynamicFontCss(r)}}static adjustDelimiters(s,t,i,r){t.forEach(t=>{const e=s[parseInt(t)];"dir"in e&&(e.variants&&(e.variants=this.adjustArrayIndices(e.variants,i)),e.stretchv&&(e.stretchv=this.adjustArrayIndices(e.stretchv,r)))})}static adjustArrayIndices(t,e){return t.map(t=>t<0?e-1-t:t)}static addExtension(t,e=""){const s={name:t.name,prefix:e||`[${t.name}-extension]/${this.JAX.toLowerCase()}/dynamic`,files:this.defineDynamicFiles(t.ranges,t.name),sizeN:this.defaultSizeVariants.length,stretchN:this.defaultStretchVariants.length};this.dynamicExtensions.set(t.name,s);for(const[e,s]of[["options","OPTIONS"],["variants","defaultVariants"],["variantSmp","VariantSmp"],["cssFonts","defaultCssFonts"],["accentMap","defaultAccentMap"],["moMap","defaultMoMap"],["mnMap","defaultMnMap"],["parameters","defaultParams"],["chars","defaultChars"],["sizeVariants","defaultSizeVariants"],["stretchVariants","defaultStretchVariants"]])n(this,s,t[e]);t.delimiters&&(Object.assign(this.defaultDelimiters,t.delimiters),this.adjustDelimiters(this.defaultDelimiters,Object.keys(t.delimiters),s.sizeN,s.stretchN))}constructor(t=null){this.variant={},this.delimiters={},this.cssFontMap={},this.cssFontPrefix="",this.remapChars={},this.skewIcFactor=.75;const e=this.CLASS;this.options=de(r({},e.OPTIONS),t),this.params=Object.assign({},e.defaultParams),this.sizeVariants=[...e.defaultSizeVariants],this.stretchVariants=[...e.defaultStretchVariants],this.defineCssFonts(e.defaultCssFonts),this.cssFamilyPrefix=e.defaultCssFamilyPrefix,this.createVariants(e.defaultVariants),this.defineDelimiters(e.defaultDelimiters),Object.keys(e.defaultChars).forEach(t=>this.defineChars(t,e.defaultChars[t])),this.defineRemap("accent",e.defaultAccentMap),this.defineRemap("mo",e.defaultMoMap),this.defineRemap("mn",e.defaultMnMap),this.defineDynamicCharacters(e.dynamicFiles),e.dynamicExtensions.forEach(t=>this.defineDynamicCharacters(t.files))}setOptions(t){r(this.options,t)}addExtension(t,e=""){var s=this.constructor.JAX.toLowerCase(),s={name:t.name,prefix:e||`[${t.name}-extension]/${s}/dynamic`,files:this.CLASS.defineDynamicFiles(t.ranges,e),sizeN:this.sizeVariants.length,stretchN:this.stretchVariants.length};this.CLASS.dynamicExtensions.set(t.name,s),r(this.options,t.options||{}),r(this.params,t.parameters||{}),n(this,"sizeVariants",t.sizeVariants),n(this,"stretchVariants",t.stretchVariants),n(this.constructor,"VariantSmp",t.variantSmp),this.defineCssFonts(n({cssFonts:{}},"cssFonts",t.cssFonts)),this.createVariants(n({variants:[]},"variants",t.variants)),t.delimiters&&(this.defineDelimiters(n({delimiters:{}},"delimiters",t.delimiters)),this.CLASS.adjustDelimiters(this.delimiters,Object.keys(t.delimiters),s.sizeN,s.stretchN));for(const e of Object.keys(t.chars||{}))this.defineChars(e,t.chars[e]);return this.defineRemap("accent",t.accentMap),this.defineRemap("mo",t.moMap),this.defineRemap("mn",t.mnMap),t.ranges&&this.defineDynamicCharacters(s.files),[]}get styles(){return this._styles}set styles(t){this._styles=t}createVariant(t,e=null,s=null){const i={linked:[],chars:Object.create(e?this.variant[e].chars:{})};this.variant[s]&&(Object.assign(i.chars,this.variant[s].chars),this.variant[s].linked.push(i.chars),i.chars=Object.create(i.chars)),this.remapSmpChars(i.chars,t),this.variant[t]=i}remapSmpChars(e,t){const s=this.CLASS;let i=s.VariantSmp[t];if(i="string"==typeof i?s.VariantSmp[i]:i){var r=s.SmpRemap,a=[null,null,s.SmpRemapGreekU,s.SmpRemapGreekL];for(const[t,n,o]of s.SmpRanges){const s=i[t];if(s){for(let t=n;t<=o;t++)if(930!==t){const i=s+t-n;e[t]=this.smpChar(r[i]||i)}if(a[t])for(const i of Object.keys(a[t]).map(t=>parseInt(t)))e[i]=this.smpChar(s+a[t][i])}}const n=i[5]||{};for(const t of Object.keys(n))e[t]=this.smpChar(i[5][t])}}smpChar(t){return[,,,{smp:t}]}createVariants(t){for(const e of t)this.createVariant(e[0],e[1],e[2])}defineChars(t,e){var s=this.variant[t];Object.assign(s.chars,e);for(const t of s.linked)Object.assign(t,e)}defineCssFonts(t){Object.assign(this.cssFontMap,t);for(const e of Object.keys(t))"unknown"===this.cssFontMap[e][0]&&(this.cssFontMap[e][0]=this.options.unknownFamily)}defineDelimiters(t){Object.assign(this.delimiters,t)}defineRemap(t,e){e&&(Object.hasOwn(this.remapChars,t)||(this.remapChars[t]={}),Object.assign(this.remapChars[t],e))}defineDynamicCharacters(t){for(const s of Object.keys(t)){var e=t[s];for(const t of Object.keys(e.variants))this.defineChars(t,this.flattenRanges(e.variants[t],e));this.defineDelimiters(this.flattenRanges(e.delimiters,e))}}flattenRanges(t,e){const s={};for(const i of t)if(Array.isArray(i))for(let t=i[0];t<=i[1];t++)s[t]=e;else s[i]=e;return s}dynamicFileName(t){var e=t.extension?this.CLASS.dynamicExtensions.get(t.extension).prefix:this.options.dynamicPrefix;return t.file.match(/^(?:[/[]|[a-z]+:\/\/|[a-z]:)/i)?t.file:e+"/"+t.file.replace(/(\.js)?$/,".js")}loadDynamicFile(e){return t=this,h=function*(){return e.failed?Promise.reject(new Error(`dynamic file '${e.file}' failed to load`)):(e.promise||(e.promise=pe(this.dynamicFileName(e)).catch(t=>{e.failed=!0,console.warn(t)})),e.promise.then(()=>e.setup(this)))},new(o=(o=n=void 0)||Promise)(function(s,e){function i(t){try{a(h.next(t))}catch(t){e(t)}}function r(t){try{a(h.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?s(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(i,r)}a((h=h.apply(t,n||[])).next())});var t,n,o,h}loadDynamicFiles(){const e=this.CLASS.dynamicFiles,t=Object.keys(e).map(t=>this.loadDynamicFile(e[t]));for(const e of this.CLASS.dynamicExtensions.values())t.push(...Object.keys(e.files).map(t=>this.loadDynamicFile(e.files[t])));return Promise.all(t)}loadDynamicFilesSync(){if(!he.asyncIsSynchronous)throw Error("MathJax(loadDynamicFilesSync): mathjax.asyncLoad must be specified and synchronous\n    Try importing #js/../components/require.mjs and #js/util/asyncLoad/node.js");const e=this.CLASS.dynamicFiles;Object.keys(e).forEach(t=>this.loadDynamicFileSync(e[t]));for(const e of this.CLASS.dynamicExtensions.values())Object.keys(e.files).forEach(t=>this.loadDynamicFileSync(e.files[t]))}loadDynamicFileSync(e){if(!e.promise){e.promise=Promise.resolve();try{he.asyncLoad(this.dynamicFileName(e))}catch(t){e.failed=!0,console.warn(t)}e.setup(this)}}addDynamicFontCss(t,e){}getDelimiter(t){var e=this.delimiters[t];return!e||"dir"in e?e:(this.delimiters[t]=null,me(this.loadDynamicFile(e)),null)}getSizeVariant(t,e){t=this.getDelimiter(t);return t&&t.variants&&(e=t.variants[e]),this.sizeVariants[e]}getStretchVariant(t,e){t=this.getDelimiter(t);return this.stretchVariants[t.stretchv?t.stretchv[e]:0]}getStretchVariants(e){return[0,1,2,3].map(t=>this.getStretchVariant(e,t))}getChar(t,e){var s=this.variant[t].chars[e];if(!s||Array.isArray(s))return s;{const i=this.variant[t];return delete i.chars[e],i.linked.forEach(t=>delete t[e]),me(this.loadDynamicFile(s)),null}}getVariant(t){return this.variant[t]}getCssFont(t){return this.cssFontMap[t]||["serif",!1,!1]}getFamily(t){return this.cssFamilyPrefix?this.cssFamilyPrefix+", "+t:t}getRemappedChar(t,e){return(this.remapChars[t]||{})[e]}}h.OPTIONS={unknownFamily:"serif",dynamicPrefix:"."},h.JAX="common",h.NAME="",h.defaultVariants=[["normal"],["bold","normal"],["italic","normal"],["bold-italic","italic","bold"],["double-struck","bold"],["fraktur","normal"],["bold-fraktur","bold","fraktur"],["script","italic"],["bold-script","bold-italic","script"],["sans-serif","normal"],["bold-sans-serif","bold","sans-serif"],["sans-serif-italic","italic","sans-serif"],["sans-serif-bold-italic","bold-italic","bold-sans-serif"],["monospace","normal"],["-smallop","normal"],["-largeop","normal"],["-tex-calligraphic","italic"],["-tex-bold-calligraphic","bold-italic"],["-tex-oldstyle","normal"],["-tex-bold-oldstyle","bold"],["-tex-mathit","italic"],["-tex-variant","normal"]],h.defaultCssFonts={normal:["unknown",!1,!1],bold:["unknown",!1,!0],italic:["unknown",!0,!1],"bold-italic":["unknown",!0,!0],"double-struck":["unknown",!1,!0],fraktur:["unknown",!1,!1],"bold-fraktur":["unknown",!1,!0],script:["cursive",!1,!1],"bold-script":["cursive",!1,!0],"sans-serif":["sans-serif",!1,!1],"bold-sans-serif":["sans-serif",!1,!0],"sans-serif-italic":["sans-serif",!0,!1],"sans-serif-bold-italic":["sans-serif",!0,!0],monospace:["monospace",!1,!1],"-smallop":["unknown",!1,!1],"-largeop":["unknown",!1,!1],"-tex-calligraphic":["cursive",!0,!1],"-tex-bold-calligraphic":["cursive",!0,!0],"-tex-oldstyle":["unknown",!1,!1],"-tex-bold-oldstyle":["unknown",!1,!0],"-tex-mathit":["unknown",!0,!1],"-tex-variant":["unknown",!1,!1]},h.defaultCssFamilyPrefix="",h.VariantSmp={bold:[119808,119834,120488,120514,120782,{988:120778,989:120779}],italic:[119860,119886,120546,120572],"bold-italic":[119912,119938,120604,120630],script:[119964,119990],"bold-script":[120016,120042],fraktur:[120068,120094],"double-struck":[120120,120146,,,120792],"bold-fraktur":[120172,120198],"sans-serif":[120224,120250,,,120802],"bold-sans-serif":[120276,120302,120662,120688,120812],"sans-serif-italic":[120328,120354],"sans-serif-bold-italic":[120380,120406,120720,120746],monospace:[120432,120458,,,120822]},h.SmpRanges=[[0,65,90],[1,97,122],[2,913,937],[3,945,969],[4,48,57]],h.SmpRemap={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},h.SmpRemapGreekU={8711:25,1012:17},h.SmpRemapGreekL={977:27,981:29,982:31,1008:28,1009:30,1013:26,8706:25},h.defaultAccentMap={94:"ˆ",126:"˜",768:"ˋ",769:"ˊ",770:"ˆ",771:"˜",772:"ˉ",774:"˘",775:"˙",776:"¨",778:"˚",780:"ˇ",8594:"⃗"},h.defaultMoMap={45:"−"},h.defaultMnMap={45:"−"},h.defaultParams={x_height:.442,quad:1,num1:.676,num2:.394,num3:.444,denom1:.686,denom2:.345,sup1:.413,sup2:.363,sup3:.289,sub1:.15,sub2:.247,sup_drop:.386,sub_drop:.05,delim1:2.39,delim2:1,axis_height:.25,rule_thickness:.06,big_op_spacing1:.111,big_op_spacing2:.167,big_op_spacing3:.2,big_op_spacing4:.6,big_op_spacing5:.1,surd_height:.06,scriptspace:.05,nulldelimiterspace:.12,delimiterfactor:901,delimitershortfall:.3,rule_factor:1.25,min_rule_thickness:1.25,separation_factor:1.75,extra_ic:.033,extender_factor:.333},h.defaultDelimiters={},h.defaultChars={},h.defaultSizeVariants=[],h.defaultStretchVariants=[],h.dynamicFiles={},h.dynamicExtensions=new Map;const xe=MathJax._.core.Tree.Visitor.AbstractVisitor,p=MathJax._.util.BBox.BBox;class o extends p{static from(t,e,s=null){const i=new this;return Object.assign(i,t),i.lineLeading=e,s&&(i.indentData=s),i}constructor(t,e=null){super(t),this.indentData=null,this.isFirst=!1,this.originalL=this.L,e&&(this.start=e)}append(t){this.isFirst&&(t.originalL+=t.L,t.L=0),t.indentData&&(this.indentData=t.indentData),this.lineLeading=t.lineLeading,super.append(t),this.isFirst=t.isFirst}copy(){const t=o.from(this,this.lineLeading);return t.indentData=this.indentData,t.lineLeading=this.lineLeading,t}getIndentData(t){let{indentalign:e,indentshift:s,indentalignfirst:i,indentshiftfirst:r,indentalignlast:a,indentshiftlast:n}=t.attributes.getAllAttributes();"indentalign"===i&&(i=t.attributes.getInherited("indentalign")),"indentshift"===r&&(r=t.attributes.getInherited("indentshift")),"indentalign"===a&&(a=e),"indentshift"===n&&(n=s),this.indentData=[[i,r],[e,s],[a,n]]}copyIndentData(t){return t.indentData.map(([t,e])=>[t,e])}}const u=MathJax._.core.MmlTree.OperatorDictionary,m=(u.OPDEF,u.MO,u.RANGES,u.getRange,u.MMLSPACING,u.OPTABLE),g=1e6;class be extends xe{breakToWidth(t,e){}}class Ae extends be{constructor(){super(...arguments),this.PENALTY={newline:t=>0,nobreak:t=>g,goodbreak:t=>t-200*this.state.depth,badbreak:t=>t+200*this.state.depth,auto:t=>t},this.FACTORS={depth:t=>t+800*this.state.depth,width:t=>t+Math.floor((this.state.width-this.state.w)/this.state.width*2500),tail:t=>t+Math.floor(this.state.width/Math.max(1e-4,this.state.mathLeft-this.state.w)*500),open:(t,e)=>{var s=e.node.prevClass;if(s===l.BIN||s===l.REL||s===l.OP)return t+5e3;const i=this.getPrevious(e);if(i&&("postfix"!==i.attributes.get("form")||"nobreak"===i.attributes.get("linebreak")))return t+5e3;const r=e.node.Parent;return null!=r&&r.isKind("mmultiscripts")&&e.node===this.getFirstToken(r)&&r.childNodes.filter(t=>t.isKind("mprescripts")).length?g:t-500},close:(t,e)=>{var s;const i=e.node.Parent;return null==i||!i.isKind("msubsup")||i.isKind("mmultiscripts")&&null!=(s=i.childNodes[1])&&s.isKind("mprescripts")||e.node!==this.getLastToken(i.childNodes[0])?t+500:g},space:(t,e)=>{const s=e;if(!s.canBreak)return g;e=s.getBBox().w;return e<0?g:e<1?t:t-100*(e+4)},separator:t=>t+500,fuzz:t=>.99*t},this.TEXCLASS={[l.BIN]:t=>t-250,[l.REL]:t=>t-500}}breakToWidth(e,s){var t=this.state,i=(this.state=this.createState(e),this.state.width=s,e.breakCount);for(let t=0;t<=i;t++)(e.lineBBox[t]||e.getLineBBox(t)).w>s&&this.breakLineToWidth(e,t);for(const[e,s]of this.state.breaks){if(null===s){const s=e.coreMO();s.setBreakStyle(s.node.attributes.get("linebreakstyle")||"before")}else e.setBreakAt(s);e.invalidateBBox()}this.state=t}createState(t){t=t.getBBox().w;return{breaks:new Set,potential:[],width:0,w:0,prevWidth:0,prevBreak:null,depth:0,mathWidth:t,mathLeft:t}}breakLineToWidth(t,e){const s=this.state;s.potential=[],s.w=0,s.prevWidth=0,s.prevBreak=null,s.depth=0,this.visitNode(t,e)}addWidth(t,e=null){(e=null===e?t.L+t.w+t.R:e)&&(e*=t.rscale,this.state.w+=e,this.state.potential.length&&(this.state.potential[0][4]+=e),this.processBreak())}processBreak(){const t=this.state;for(;t.potential.length&&t.w>this.state.width;){const e=t.potential.pop(),[s,,i,r,a]=e;t.breaks.add(s),t.w=t.potential.reduce((t,e)=>t+e[4],r+a),t.prevBreak&&t.prevWidth+i<=t.width?(t.breaks.delete(t.prevBreak[0]),t.prevWidth+=i):t.prevWidth=i+r,t.potential.forEach(t=>t[2]-=i),t.prevBreak=e,t.mathLeft-=i}}pushBreak(t,e,s,i){const r=this.state;if(!(e>=g||0===r.w&&0===r.prevWidth)){for(;r.potential.length&&r.potential[0][1]>this.FACTORS.fuzz(e);){const t=r.potential.shift();r.potential.length&&(r.potential[0][4]+=t[4])}r.potential.unshift([[t,i],e,r.w-((null==(t=r.prevBreak)?void 0:t[3])||0),s,0])}}getBorderLR(t){t=t.styleData;if(!t)return[0,0];var e=(null==(e=null==t?void 0:t.border)?void 0:e.width)||[0,0,0,0],t=(null==t?void 0:t.padding)||[0,0,0,0];return[e[3]+t[3],e[1]+t[1]]}getFirstToken(t){return t.isToken?t:this.getFirstToken(t.childNodes[0])}getLastToken(t){return t.isToken?t:this.getLastToken(t.childNodes[t.childNodes.length-1])}visitNode(t,e){t&&(this.state.depth++,t.node.isEmbellished&&!t.node.isKind("mo")?this.visitEmbellishedOperator(t,e):super.visitNode(t,e),this.state.depth--)}visitDefault(t,e){var s,i=t.getLineBBox(e);if(t.node.isToken||t.node.linebreakContainer||null==(s=t.childNodes)||!s[0])this.addWidth(i);else{const[s,r]=this.getBorderLR(t);0===e&&this.addWidth(i,i.L+s),this.visitNode(t.childNodes[0],e),e===t.breakCount&&this.addWidth(i,i.R+r)}}visitEmbellishedOperator(t,e){const s=t.coreMO(),i=o.from(t.getOuterBBox(),t.linebreakOptions.lineleading);i.getIndentData(s.node);var r=s.getBreakStyle(s.node.attributes.get("linebreakstyle")),a=s.processIndent("",i.indentData[1][1],"",i.indentData[0][1],this.state.width)[1],n=this.moPenalty(s);if("before"===r)this.pushBreak(t,n,a-i.L,null),this.addWidth(i);else{this.addWidth(i);const e=("after"===r?0:(s.multChar?s.multChar.getBBox():i).w)+a;this.pushBreak(t,n,e,null)}}visitMoNode(t,e){const s=t,i=o.from(s.getOuterBBox(),s.linebreakOptions.lineleading);i.getIndentData(s.node);var r=s.getBreakStyle(s.node.attributes.get("linebreakstyle")),a=s.processIndent("",i.indentData[1][1],"",i.indentData[0][1],this.state.width)[1],n=this.moPenalty(s);if("before"===r)this.pushBreak(t,n,a-i.L,null),this.addWidth(i);else{this.addWidth(i);const e=("after"===r?0:(s.multChar?s.multChar.getBBox():i).w)+a;this.pushBreak(t,n,e,null)}}moPenalty(t){const{linebreak:e,fence:s,form:i}=t.node.attributes.getList("linebreak","fence","form"),r=this.FACTORS;let a=r.tail(r.width(0));var n=s&&"prefix"===i||t.node.texClass===l.OPEN,o=s&&"postfix"===i||t.node.texClass===l.CLOSE;return n&&(a=r.open(a,t),this.state.depth++),o&&(a=r.close(a,t),this.state.depth--),a=(this.TEXCLASS[t.node.texClass]||(t=>t))(a),(this.PENALTY[e]||(t=>t))(r.depth(a))}getPrevious(t){let e=t.node,s=e.parent,i=s.childIndex(e);for(;s&&(s.notParent||s.isKind("mrow"))&&0===i;)s=(e=s).parent,i=s.childIndex(e);if(!s||!i)return null;const r=s.childNodes[i-1];return r.isEmbellished?r.coreMO():null}visitMspaceNode(t,e){const s=t.getLineBBox(e),i=t;if(i.canBreak){const e=this.mspacePenalty(i);s.getIndentData(t.node);var r=t.processIndent("",s.indentData[1][1],"",s.indentData[0][1],this.state.width)[1];this.pushBreak(t,e,r-s.w,null)}this.addWidth(s)}mspacePenalty(t){const e=t.node.attributes.get("linebreak"),s=this.FACTORS,i=s.space(s.tail(s.width(0)),t);return(this.PENALTY[e]||(t=>t))(s.depth(i))}visitMtextNode(t,e){if(t.getText().match(/ /)){const s=t,i=(s.clearBreakPoints(),s.textWidth(" ")),r=t.getBBox(),[a,n]=this.getBorderLR(t),o=(this.addWidth(r,r.L+a),s.childNodes);for(const e of o.keys()){const a=o[e];if(a.node.isKind("text")){const n=a.node.getText().split(/ /),o=n.pop();for(const a of n.keys())this.addWidth(r,s.textWidth(n[a])),this.pushBreak(t,this.mtextPenalty(),-i,[e,a+1]),this.addWidth(r,i);this.addWidth(r,s.textWidth(o))}else this.addWidth(a.getBBox())}this.addWidth(r,r.R+n)}else this.visitDefault(t,e)}mtextPenalty(){const t=this.FACTORS;return t.depth(t.tail(t.width(0)))}visitMrowNode(e,t){var t=e.lineBBox[t]||e.getLineBBox(t),[s,i]=t.start||[0,0],[r,a]=t.end||[e.childNodes.length-1,0],[n,o]=this.getBorderLR(e);this.addWidth(t,t.L+n);for(let t=s;t<=r;t++)this.visitNode(e.childNodes[t],t===s?i:t===r?a:0);this.addWidth(t,t.R+o)}visitInferredMrowNode(t,e){this.state.depth--,this.visitMrowNode(t,e),this.state.depth++}visitMfracNode(t,e){const s=t;!s.node.attributes.get("bevelled")&&s.getOuterBBox().w>this.state.width&&(this.breakToWidth(s.childNodes[0],this.state.width),this.breakToWidth(s.childNodes[1],this.state.width)),this.visitDefault(t,e)}visitMsqrtNode(t,e){if(t.getOuterBBox().w>this.state.width){const e=t,s=e.childNodes[e.base];this.breakToWidth(s,this.state.width-e.rootWidth()),e.getStretchedSurd()}this.visitDefault(t,e)}visitMrootNode(t,e){this.visitMsqrtNode(t,e)}visitMsubNode(t,e){this.visitDefault(t,e);const s=t,i=s.getOffset()[0],r=s.scriptChild.getOuterBBox(),[a,n]=this.getBorderLR(t);this.addWidth(s.getLineBBox(e),i+a+r.rscale*r.w+s.font.params.scriptspace+n)}visitMsupNode(t,e){this.visitDefault(t,e);const s=t,i=s.getOffset()[0],r=s.scriptChild.getOuterBBox(),[a,n]=this.getBorderLR(t);this.addWidth(s.getLineBBox(e),i+a+r.rscale*r.w+s.font.params.scriptspace+n)}visitMsubsupNode(t,e){this.visitDefault(t,e);const s=t,i=s.subChild.getOuterBBox(),r=s.supChild.getOuterBBox(),a=s.getAdjustedIc(),n=Math.max(i.rscale*i.w,a+r.rscale*r.w)+s.font.params.scriptspace,[o,h]=this.getBorderLR(t);this.addWidth(t.getLineBBox(e),o+n+h)}visitMmultiscriptsNode(t,e){var s,i=t,r=i.scriptData;r.numPrescripts&&(s=Math.max(r.psup.rscale*r.psup.w,r.psub.rscale*r.psub.w),this.addWidth(t.getLineBBox(e),s+i.font.params.scriptspace)),this.visitDefault(t,e),r.numScripts&&(s=Math.max(r.sup.rscale*r.sup.w,r.sub.rscale*r.sub.w),this.addWidth(t.getLineBBox(e),s+i.font.params.scriptspace))}visitMfencedNode(t,e){var s=t,i=t.getLineBBox(e),[r,a]=this.getBorderLR(t);0===e&&this.addWidth(i,i.L+r),this.visitNode(s.mrow,e),e===t.breakCount&&this.addWidth(i,i.R+a)}visitMactionNode(t,e){var s=t,i=t.getLineBBox(e),[r,a]=this.getBorderLR(t);0===e&&this.addWidth(i,i.L+r),this.visitNode(s.selected,e),e===t.breakCount&&this.addWidth(i,i.R+a)}}for(const Or of Object.keys(m.postfix)){const Wr=m.postfix[Or][3];Wr&&Wr.fence&&(Wr.linebreakstyle="after")}m.infix["⁡"]=[...m.infix["⁡"]],m.infix["⁡"][3]={linebreak:"nobreak"};const f=MathJax._.util.lengths,Be=f.BIGDIMEN,ve=(f.UNITS,f.RELUNITS,f.MATHSPACE,f.length2em),ye=f.percent,x=f.em,ke=f.px,we=MathJax._.util.Styles,Se=we.TRBL,Ce=(we.WSC,we.Styles),Me=MathJax._.util.StyleJson.StyleJsonSheet,Ne="@mathjax/%%FONT%%-font";class b extends ie{get forceInlineBreaks(){return!1}constructor(t={},e=null,s=null){const[i,r]=t.fontData instanceof h?[t.fontData.constructor,t.fontData]:[t.fontData||s,null],[a,n]=le(t,i.OPTIONS),o=(super(a),this.factory=this.options.wrapperFactory||new e,(this.factory.jax=this).styleJson=this.options.styleJson||new Me,this.font=r||new i(n),this.font.setOptions({mathmlSpacing:this.options.mathmlSpacing}),this.unknownCache=new Map,this.options.linebreaks.LinebreakVisitor||Ae);this.linebreaks=new o(this.factory)}setAdaptor(t){super.setAdaptor(t),"auto"===this.options.htmlHDW&&(this.options.htmlHDW=t.canMeasureNodes?"ignore":"force")}addExtension(t,e=""){return this.font.addExtension(t,e)}typeset(t,e){this.setDocument(e);var s=this.createNode();return this.toDOM(t,s,e),s}createNode(){var t=this.constructor.NAME;return this.html("mjx-container",{class:"MathJax",jax:t})}setScale(t,e){let s=this.getInitialScale()*this.options.scale;if("scale"===e.node.attributes.get("overflow")&&this.math.display){const t=e.getOuterBBox().w,i=this.math.metrics.containerWidth/this.pxPerEm;t>i&&t&&(s*=i/t)}1!==s&&this.adaptor.setStyle(t,"fontSize",ye(s))}getInitialScale(){return this.math.metrics.scale}toDOM(t,e,s=null){this.setDocument(s),this.math=t,this.container=e,this.pxPerEm=t.metrics.ex/this.font.params.x_height,this.executeFilters(this.preFilters,t,s,e),this.nodeMap=new Map,t.root.attributes.getAllInherited().overflow=this.options.displayOverflow;var i=t.root.attributes.get("overflow"),i=(this.adaptor.setAttribute(e,"overflow",i),"linebreak"===i&&this.getLinebreakWidth(),this.options.linebreaks.inline&&!t.display);let r=!!t.root.getProperty("inlineMarked");!r||i&&this.forceInlineBreaks===t.root.getProperty("inlineForced")||(this.unmarkInlineBreaks(t.root),t.root.removeProperty("inlineMarked"),t.root.removeProperty("inlineForced"),r=!1),i&&!r&&(this.markInlineBreaks(null==(i=t.root.childNodes)?void 0:i[0]),t.root.setProperty("inlineMarked",!0),t.root.setProperty("inlineForced",this.forceInlineBreaks)),t.root.setTeXclass(null);i=this.factory.wrap(t.root);this.setScale(e,i),this.processMath(i,e),this.nodeMap=null,this.executeFilters(this.postFilters,t,s,e)}getBBox(t,e){this.setDocument(e),(this.math=t).root.setTeXclass(null),this.nodeMap=new Map;e=this.factory.wrap(t.root).getOuterBBox();return this.nodeMap=null,e}getLinebreakWidth(){var t=this.math.metrics.containerWidth/this.pxPerEm,e=this.math.root.attributes.get("maxwidth")||this.options.linebreaks.width;this.containerWidth=ve(e,t,1,this.pxPerEm)}markInlineBreaks(i){if(i){var r=this.forceInlineBreaks;let e=!1,s=!1,t="";for(const a of i.childNodes)if(t)s=this.markInlineBreak(s,r,t,i,a),t="",e=!1;else if(a.isEmbellished){if(a===i.childNodes[0])continue;const n=a.coreMO(),o=n.texClass,h=n.attributes.get("linebreak"),d=n.attributes.get("linebreakstyle");(o===l.BIN||o===l.REL||o===l.ORD&&n.hasSpacingAttributes()||"auto"!==h)&&"nobreak"!==h&&("before"===d?e&&"auto"===h||(s=this.markInlineBreak(s,r,h,i,a,n)):t=h),e="newline"===h&&"after"===d}else if(a.isKind("mspace")){const t=a.attributes.get("linebreak");"nobreak"!==t&&a.canBreak&&(s=this.markInlineBreak(s,r,t,i,a)),e="newline"===t}else e=!1,a.isKind("mstyle")&&!a.attributes.get("style")&&!a.attributes.hasExplicit("mathbackground")||a.isKind("semantics")?(this.markInlineBreaks(a.childNodes[0]),a.getProperty("process-breaks")&&(a.setProperty("inline-breaks",!0),a.childNodes[0].setProperty("inline-breaks",!0),i.parent.setProperty("process-breaks","true"))):a.isKind("mrow")&&a.attributes.get("data-semantic-added")&&(this.markInlineBreaks(a),a.getProperty("process-breaks")&&(a.setProperty("inline-breaks",!0),i.parent.setProperty("process-breaks","true")))}}markInlineBreak(t,e,s,i,r,a=null){return r.setProperty("breakable",!0),e&&"newline"!==s?(r.setProperty("forcebreak",!0),null!=a&&a.setProperty("forcebreak",!0)):(r.removeProperty("forcebreak"),null!=a&&a.removeProperty("forcebreak"),"newline"===s&&r.setProperty("newline",!0)),t||(i.setProperty("process-breaks",!0),i.parent.setProperty("process-breaks",!0),t=!0),t}unmarkInlineBreaks(t){if(t&&(t.removeProperty("forcebreak"),t.removeProperty("breakable"),t.getProperty("process-breaks"))){t.removeProperty("process-breaks");for(const e of t.childNodes)this.unmarkInlineBreaks(e)}}getMetrics(t){this.setDocument(t);const e=this.adaptor,s=this.getMetricMaps(t);for(const i of t.math){const t=e.parent(i.start.node);if(i.state()<d.METRICS&&t){const e=s[i.display?1:0],{em:r,ex:a,containerWidth:n,scale:o,family:h}=e.get(t);i.setMetrics(r,a,n,o),this.options.mtextInheritFont&&(i.outputData.mtextFamily=h),this.options.merrorInheritFont&&(i.outputData.merrorFamily=h),i.state(d.METRICS)}}}getMetricsFor(t,e){var s=this.options.mtextInheritFont||this.options.merrorInheritFont,t=this.getTestElement(t,e),s=Object.assign(Object.assign({},this.measureMetrics(t,s)),{display:e});return this.adaptor.remove(t),s}getMetricMaps(t){const e=this.adaptor,s=[new Map,new Map];for(const i of t.math){const t=e.parent(i.start.node);if(t&&i.state()<d.METRICS){const e=s[i.display?1:0];e.has(t)||e.set(t,this.getTestElement(t,i.display))}}const i=this.options.mtextInheritFont||this.options.merrorInheritFont,r=[new Map,new Map];for(const t of r.keys())for(const e of s[t].keys())r[t].set(e,this.measureMetrics(s[t].get(e),i));for(const t of r.keys())for(const i of s[t].values())e.remove(i);return r}getTestElement(t,e){const s=this.adaptor;if(!this.testInline){this.testInline=this.html("mjx-test",{style:{display:"inline-block",width:"100%","font-style":"normal","font-weight":"normal","font-size":"100%","font-size-adjust":"none","text-indent":0,"text-transform":"none","letter-spacing":"normal","word-spacing":"normal",overflow:"hidden",height:"1px","margin-right":"-1px"}},[this.html("mjx-left-box",{style:{display:"inline-block",width:0,float:"left"}}),this.html("mjx-ex-box",{style:{position:"absolute",overflow:"hidden",width:"1px",height:"60ex"}}),this.html("mjx-right-box",{style:{display:"inline-block",width:0,float:"right"}})]),this.testDisplay=s.clone(this.testInline),s.setStyle(this.testDisplay,"display","table"),s.setStyle(this.testDisplay,"margin-right",""),s.setStyle(s.firstChild(this.testDisplay),"display","none");const t=s.lastChild(this.testDisplay);s.setStyle(t,"display","table-cell"),s.setStyle(t,"width","10000em"),s.setStyle(t,"float","")}return s.append(t,s.clone(e?this.testDisplay:this.testInline))}measureMetrics(t,e){const s=this.adaptor,i=e?s.fontFamily(t):"",r=s.fontSize(t),[a,n]=s.nodeSize(s.childNode(t,1)),o=a?n/60:r*this.options.exFactor;return{em:r,ex:o,containerWidth:a?"table"===s.getStyle(t,"display")?s.nodeSize(s.lastChild(t))[0]-1:s.nodeBBox(s.lastChild(t)).left-s.nodeBBox(s.firstChild(t)).left-2:1e6,scale:Math.max(this.options.minScale,this.options.matchFontHeight?o/this.font.params.x_height/r:1),family:i}}styleSheet(t){if(this.setDocument(t),this.styleJson.clear(),this.styleJson.addStyles(this.constructor.commonStyles),"getStyles"in t)for(const e of t.getStyles())this.styleJson.addStyles(e);return this.addWrapperStyles(this.styleJson),this.addFontStyles(this.styleJson),this.html("style",{id:"MJX-styles"},[this.text("\n"+this.styleJson.cssText+"\n")])}addFontStyles(t){t.addStyles(this.font.styles)}addWrapperStyles(t){for(const e of this.factory.getKinds())this.addClassStyles(this.factory.getNodeClass(e),t)}addClassStyles(t,e){t.addStyles(e,this)}insertStyles(t){}setDocument(t){t&&(this.document=t,this.adaptor.document=t.document)}html(t,e={},s=[],i){return this.adaptor.node(t,e,s,i)}text(t){return this.adaptor.text(t)}fixed(t,e=3){return Math.abs(t)<6e-4?"0":t.toFixed(e).replace(/\.?0+$/,"")}measureText(t,e,s=["",!1,!1]){var i=this.unknownText(t,e);if("-explicitFont"===e){const t=this.cssFontStyles(s);this.adaptor.setAttributes(i,{style:t})}return this.measureTextNodeWithCache(i,t,e,s)}measureTextNodeWithCache(t,e,s,i=["",!1,!1]){"-explicitFont"===s&&(s=[i[0],i[1]?"T":"F",i[2]?"T":"F",""].join("-")),this.unknownCache.has(s)||this.unknownCache.set(s,new Map);const r=this.unknownCache.get(s),a=r.get(e);if(a)return a;i=this.measureTextNode(t);return r.set(e,i),i}cssFontStyles(t,e={}){var[t,s,i]=t;return e["font-family"]=this.font.getFamily(t),s&&(e["font-style"]="italic"),i&&(e["font-weight"]="bold"),e}getFontData(t){return t=t||new Ce,[this.font.getFamily(t.get("font-family")),"italic"===t.get("font-style"),"bold"===t.get("font-weight")]}}b.NAME="Common",b.OPTIONS=Object.assign(Object.assign({},ie.OPTIONS),{scale:1,minScale:.5,mtextInheritFont:!1,merrorInheritFont:!1,mtextFont:"",merrorFont:"serif",mathmlSpacing:!1,skipAttributes:{},exFactor:.5,displayAlign:"center",displayIndent:"0",displayOverflow:"overflow",linebreaks:{inline:!0,width:"100%",lineleading:.2,LinebreakVisitor:null},font:"",htmlHDW:"auto",wrapperFactory:null,fontData:null,fontPath:Ne,styleJson:null}),b.commonStyles={'mjx-container[overflow="scroll"][display]':{overflow:"auto clip","min-width":"initial !important"},'mjx-container[overflow="truncate"][display]':{overflow:"hidden clip","min-width":"initial !important"},"mjx-container[display]":{display:"block","text-align":"center","justify-content":"center",margin:"calc(1em - 2px) 0",padding:"2px 0"},'mjx-container[display][width="full"]':{display:"flex"},'mjx-container[justify="left"]':{"text-align":"left","justify-content":"left"},'mjx-container[justify="right"]':{"text-align":"right","justify-content":"right"}};const Le=4,De=1,Oe=2,A=.067,We=.2,Te=A+"em solid",B={top:0,right:1,bottom:2,left:3},je=Object.keys(B),v=t=>new Array(4).fill(t.thickness+t.padding),Ee=t=>new Array(4).fill(t.padding),Ve=t=>new Array(4).fill(t.thickness),y=t=>Math.max(t.padding,t.thickness*(t.arrowhead.x+t.arrowhead.dx+1)),Pe=(t,e)=>{var s,i;return t.childNodes[0]&&({h:s,d:i}=t.childNodes[0].getBBox(),e[0]=e[2]=Math.max(0,t.thickness*t.arrowhead.y-(s+i)/2)),e},Ie=(t,e)=>{var s;return t.childNodes[0]&&(s=t.childNodes[0].getBBox()["w"],e[1]=e[3]=Math.max(0,t.thickness*t.arrowhead.y-s/2)),e},Re={up:[-Math.PI/2,!1,!0,"verticalstrike"],down:[Math.PI/2,!1,!0,"verticakstrike"],right:[0,!1,!1,"horizontalstrike"],left:[Math.PI,!1,!1,"horizontalstrike"],updown:[Math.PI/2,!0,!0,"verticalstrike uparrow downarrow"],leftright:[0,!0,!1,"horizontalstrike leftarrow rightarrow"]},Fe={updiagonal:[-1,0,!1,"updiagonalstrike northeastarrow"],northeast:[-1,0,!1,"updiagonalstrike updiagonalarrow"],southeast:[1,0,!1,"downdiagonalstrike"],northwest:[1,Math.PI,!1,"downdiagonalstrike"],southwest:[-1,Math.PI,!1,"updiagonalstrike"],northeastsouthwest:[-1,0,!0,"updiagonalstrike northeastarrow updiagonalarrow southwestarrow"],northwestsoutheast:[1,0,!0,"downdiagonalstrike northwestarrow southeastarrow"]},Ge={up:t=>Ie(t,[y(t),0,t.padding,0]),down:t=>Ie(t,[t.padding,0,y(t),0]),right:t=>Pe(t,[0,y(t),0,t.padding]),left:t=>Pe(t,[0,t.padding,0,y(t)]),updown:t=>Ie(t,[y(t),0,y(t),0]),leftright:t=>Pe(t,[0,y(t),0,y(t)])},_e=function(e){return t=>{const s=B[t];return[t,{renderer:e,bbox:t=>{const e=[0,0,0,0];return e[s]=t.thickness+t.padding,e},border:t=>{const e=[0,0,0,0];return e[s]=t.thickness,e}}]}},He=function(a){return(t,e,s)=>{const i=B[e],r=B[s];return[t,{renderer:a,bbox:t=>{const e=t.thickness+t.padding,s=[0,0,0,0];return s[i]=s[r]=e,s},border:t=>{const e=[0,0,0,0];return e[i]=e[r]=t.thickness,e},remove:e+" "+s}]}},ze=function(s){return t=>{var e="mjx-"+t.charAt(0)+"strike";return[t+"diagonalstrike",{renderer:s(e),bbox:v}]}},Je=function(o){return t=>{const[r,a,n,e]=Fe[t];return[t+"arrow",{renderer:(t,e)=>{var[s,i]=t.arrowAW(),i=t.arrow(i,r*(s-a),n);o(t,i)},bbox:t=>{var{a:e,x:s,y:i}=t.arrowData(),[r,a,n]=[t.arrowhead.x,t.arrowhead.y,t.arrowhead.dx],[r,n]=t.getArgMod(r+n,a),a=i+(e<r?t.thickness*n*Math.sin(r-e):0),i=s+(r>Math.PI/2-e?t.thickness*n*Math.sin(r+e-Math.PI/2):0);return[a,i,a,i]},remove:e}]}},Qe=function(h){return t=>{const[a,n,o,e]=Re[t];return[t+"arrow",{renderer:(t,e)=>{var{w:s,h:i,d:r}=t.getBBox(),[i,r]=o?[i+r,"X"]:[s,"Y"],s=t.getOffset(r),i=t.arrow(i,a,n,r,s);h(t,i)},bbox:Ge[t],remove:e}]}},Xe=MathJax._.core.Tree.Wrapper.AbstractWrapper,k=MathJax._.util.string,Ue=(k.sortLength,k.quotePattern,k.unicodeChars),w=(k.unicodeString,k.isPercent),S=k.split;k.replaceUnicode,k.toEntity;function Ke(t,e,s){return e?t?2/18:5/18:t?s<2/18?0:2/18:s}const qe={[x(0)]:"0",[x(2/18)]:"1",[x(3/18)]:"2",[x(4/18)]:"3",[x(5/18)]:"4",[x(6/18)]:"5"};class C extends Xe{static addStyles(t,e){t.addStyles(this.styles)}get jax(){return this.factory.jax}get adaptor(){return this.factory.jax.adaptor}get metrics(){return this.factory.jax.math.metrics}get containerWidth(){return this.jax.containerWidth}get linebreaks(){return this.jax.linebreaks}get linebreakOptions(){return this.jax.options.linebreaks}get fixesPWidth(){return!this.node.notParent&&!this.node.isToken}get breakCount(){var t;return this._breakCount<0&&(t=this.node,this._breakCount=t.isEmbellished?this.coreMO().embellishedBreakCount:t.arity<0&&!t.linebreakContainer&&this.childNodes[0].isStack?this.childNodes[0].breakCount:0),this._breakCount}breakTop(t,e){return this.node.linebreakContainer||!this.parent?t:this.parent.breakTop(t,this)}constructor(t,e,s=null){super(t,e),this.parent=null,this.dom=null,this.removedStyles=null,this.styles=null,this.styleData=null,this.variant="",this.bboxComputed=!1,this._breakCount=-1,this.lineBBox=[],this.stretch=a,this.font=null,this.parent=s,this.font=t.jax.font,this.bbox=p.zero(),this.getStyles(),this.getStyleData(),this.getVariant(),this.getScale(),this.getSpace(),this.childNodes=e.childNodes.map(t=>{t=this.wrap(t);return t.bbox.pwidth&&(e.notParent||e.isKind("math"))&&(this.bbox.pwidth=p.fullWidth),t})}wrap(t,e=null){var s=this.factory.wrap(t,e||this);return e&&e.childNodes.push(s),this.jax.nodeMap.set(t,s),s}getBBox(t=!0){if(this.bboxComputed)return this.bbox;var e=t?this.bbox:p.zero();return this.computeBBox(e),this.bboxComputed=t,e}getOuterBBox(t=!0){var e;const s=this.getBBox(t);if(!this.styleData)return s;const i=this.styleData.padding,r=(null==(e=this.styleData.border)?void 0:e.width)||[0,0,0,0],a=s.copy();for(const[,t,e]of p.boxSides)a[e]+=i[t]+r[t];return a}getUnbrokenHD(){const e=this.breakCount+1;let s=0,i=0;for(let t=0;t<e;t++){const{h:e,d:r}=this.getLineBBox(t);e>s&&(s=e),r>i&&(i=r)}return[s,i]}computeBBox(t,e=!1){t.empty();for(const e of this.childNodes)t.append(e.getOuterBBox());t.clean(),this.fixesPWidth&&this.setChildPWidths(e)&&this.computeBBox(t,!0)}getLineBBox(t){if(!this.lineBBox[t]){var e=this.breakCount;if(e){const s=this.embellishedBBox(t)||this.computeLineBBox(t);this.lineBBox[t]=s,0===t&&(!this.node.isKind("mo")&&this.node.isEmbellished?s.originalL=this.getBBox().L:s.L=this.getBBox().L),t===e&&(s.R=this.getBBox().R)}else{e=this.getOuterBBox();this.lineBBox[t]=o.from(e,this.linebreakOptions.lineleading)}}return this.lineBBox[t]}embellishedBBox(t){if(!this.node.isEmbellished||this.node.isKind("mo"))return null;const e=this.coreMO();return e.moLineBBox(t,e.embellishedBreakStyle,this.getOuterBBox())}computeLineBBox(t){return this.getChildLineBBox(this.childNodes[0],t)}getBreakNode(t){var e;if(!t.start)return[this,null];var[t,s]=t.start;if(this.node.isEmbellished)return[this,this.coreMO()];const i=(null!=(e=null==(e=this.childNodes[0])?void 0:e.node)&&e.isInferred?this.childNodes[0]:this).childNodes;return this.node.isToken||!i[t]?[this,null]:i[t].getBreakNode(i[t].getLineBBox(s))}getChildLineBBox(t,e){var s=this.breakCount;let i=t.getLineBBox(e);return(this.styleData||this.bbox.L||this.bbox.R)&&(i=i.copy()),this.addMiddleBorders(i),0===e?(i.L+=this.bbox.L,this.addLeftBorders(i)):e===s&&(i.R+=this.bbox.R,this.addRightBorders(i)),i}addLeftBorders(t){var e,s;this.styleData&&(e=this.styleData.border,s=this.styleData.padding,t.w+=((null==(t=null==e?void 0:e.width)?void 0:t[3])||0)+((null==s?void 0:s[3])||0))}addMiddleBorders(t){var e,s,i;this.styleData&&(s=this.styleData.border,i=this.styleData.padding,t.h+=((null==(e=null==s?void 0:s.width)?void 0:e[0])||0)+((null==i?void 0:i[0])||0),t.d+=((null==(e=null==s?void 0:s.width)?void 0:e[2])||0)+((null==i?void 0:i[2])||0))}addRightBorders(t){var e,s;this.styleData&&(e=this.styleData.border,s=this.styleData.padding,t.w+=((null==(t=null==e?void 0:e.width)?void 0:t[1])||0)+((null==s?void 0:s[1])||0))}setChildPWidths(t,e=null,s=!0){if(t)return!1;s&&(this.bbox.pwidth="");let i=!1;for(const a of this.childNodes){var r=a.getBBox();r.pwidth&&a.setChildPWidths(t,null===e?r.w:e,s)&&(i=!0)}return i}breakToWidth(t){}invalidateBBox(t=!0){(this.bboxComputed||0<=this._breakCount)&&(this.bboxComputed=!1,this.lineBBox=[],this._breakCount=-1,this.parent&&t&&this.parent.invalidateBBox())}copySkewIC(t){var e=this.childNodes[0],s=(null!=(s=null==e?void 0:e.bbox)&&s.sk&&(t.sk=e.bbox.sk),null!=(s=null==e?void 0:e.bbox)&&s.dx&&(t.dx=e.bbox.dx),this.childNodes[this.childNodes.length-1]);null!=(e=null==s?void 0:s.bbox)&&e.ic&&(t.ic=s.bbox.ic,t.w+=t.ic)}getStyles(){var t=this.node.attributes.getExplicit("style");if(t){const i=this.styles=new Ce(t);for(let t=0,e=C.removeStyles.length;t<e;t++){var s=C.removeStyles[t];i.get(s)&&(this.removedStyles||(this.removedStyles={}),this.removedStyles[s]=i.get(s),i.set(s,""))}}}getStyleData(){if(this.styles){const n=Array(4).fill(0),o=Array(4).fill(0),h=Array(4),d=Array(4);let t=!1,e=!1;for(var[s,i]of p.boxSides){var r="border"+s,a=this.styles.get(r+"Width"),a=(a&&(e=!0,o[i]=Math.max(0,this.length2em(a,1)),h[i]=this.styles.get(r+"Style")||"solid",d[i]=this.styles.get(r+"Color")),this.styles.get("padding"+s));a&&(t=!0,n[i]=Math.max(0,this.length2em(a,1)))}this.styleData=t||e?{padding:n,border:e?{width:o,style:h,color:d}:null}:null}}getVariant(){if(this.node.isToken){const e=this.node.attributes;let t=e.get("mathvariant");if(e.hasExplicit("mathvariant"))this.font.getVariant(t)||(console.warn("Invalid variant: "+t),t="normal");else{const s=e.getList("fontfamily","fontweight","fontstyle");if(this.removedStyles){const e=this.removedStyles;e.fontFamily&&(s.family=e.fontFamily),e.fontWeight&&(s.weight=e.fontWeight),e.fontStyle&&(s.style=e.fontStyle)}s.fontfamily&&(s.family=s.fontfamily),s.fontweight&&(s.weight=s.fontweight),s.fontstyle&&(s.style=s.fontstyle),s.weight&&s.weight.match(/^\d+$/)&&(s.weight=600<parseInt(s.weight)?"bold":"normal"),t=s.family?this.explicitVariant(s.family,s.weight,s.style):(this.node.getProperty("variantForm")&&(t="-tex-variant"),t=(C.BOLDVARIANTS[s.weight]||{})[t]||t,(C.ITALICVARIANTS[s.style]||{})[t]||t)}this.variant=t}}explicitVariant(t,e,s){let i=this.styles;return(i=i||(this.styles=new Ce)).set("fontFamily",t),e&&i.set("fontWeight",e),s&&i.set("fontStyle",s),"-explicitFont"}getScale(){let t=1;const e=this.parent,s=e?e.bbox.scale:1,i=this.node.attributes,r=Math.min(i.get("scriptlevel"),2);let a=i.get("fontsize"),n=this.node.isToken||this.node.isKind("mstyle")?i.get("mathsize"):i.getInherited("mathsize");if(0!==r&&(t=Math.pow(i.get("scriptsizemultiplier"),r)),this.removedStyles&&this.removedStyles.fontSize&&!a&&(a=this.removedStyles.fontSize),"1"!==(n=a&&!i.hasExplicit("mathsize")?a:n)&&(t*=this.length2em(n,1,1)),0!==r){const e=this.length2em(i.get("scriptminsize"),.4,1);t<e&&(t=e)}this.bbox.scale=t,this.bbox.rscale=t/s}getSpace(){var t=this.isTopEmbellished(),e=this.node.hasSpacingAttributes();this.jax.options.mathmlSpacing||e?t&&this.getMathMLSpacing():this.getTeXSpacing(t,e)}getMathMLSpacing(){const t=this.node.coreMO(),e=t.coreParent(),s=e.parent;if(s&&s.isKind("mrow")&&1!==s.childNodes.length){var i=s.childIndex(e);if(null!==i){const r=t.getProperty("noDictDef"),a=t.attributes,n=0<a.get("scriptlevel");this.bbox.L=a.isSet("lspace")?Math.max(0,this.length2em(a.get("lspace"))):Ke(n,r,t.lspace),this.bbox.R=a.isSet("rspace")?Math.max(0,this.length2em(a.get("rspace"))):Ke(n,r,t.rspace),i&&(i=s.childNodes[i-1]).isEmbellished&&(i=this.jax.nodeMap.get(i).getBBox()).R&&(this.bbox.L=Math.max(0,this.bbox.L-i.R))}}}getTeXSpacing(t,e){if(!e){const t=this.node.texSpacing();t&&(this.bbox.L=this.length2em(t))}if(t||e){const t=this.node.coreMO().attributes;t.isSet("lspace")&&(this.bbox.L=Math.max(0,this.length2em(t.get("lspace")))),t.isSet("rspace")&&(this.bbox.R=Math.max(0,this.length2em(t.get("rspace"))))}}isTopEmbellished(){return this.node.isEmbellished&&!(this.node.parent&&this.node.parent.isEmbellished)}core(){return this.jax.nodeMap.get(this.node.core())}coreMO(){return this.jax.nodeMap.get(this.node.coreMO())}coreRScale(){let t=this.bbox.rscale,e=this.coreMO();for(;e!==this&&e;)t*=e.bbox.rscale,e=e.parent;return t}getRScale(){let t=1,e=this;for(;e;)t*=e.bbox.rscale,e=e.parent;return t}getText(){let t="";if(this.node.isToken)for(const e of this.node.childNodes)e instanceof ne&&(t+=e.getText());return t}canStretch(t){if(this.stretch=a,this.node.isEmbellished){const e=this.core();e&&e.node!==this.node&&e.canStretch(t)&&(this.stretch=e.stretch)}return this.stretch.dir!==c.None}getAlignShift(){let{indentalign:t,indentshift:e,indentalignfirst:s,indentshiftfirst:i}=this.node.attributes.getAllAttributes();return"indentalign"!==s&&(t=s),"indentshift"!==i&&(e=i),this.processIndent(t,e)}processIndent(t,e,s="",i="",r=this.metrics.containerWidth){return this.jax.math.display?(s&&"auto"!==s||(s=this.jax.math.root.getProperty("inlineMarked")?"left":this.jax.options.displayAlign),i&&"auto"!==i||(i=this.jax.math.root.getProperty("inlineMarked")?"0":this.jax.options.displayIndent),"auto"===t&&(t=s),"auto"===e&&(e=i,"right"!==t||e.match(/^\s*0[a-z]*\s*$/)||(e=("-"+e.trim()).replace(/^--/,""))),[t,this.length2em(e,r)]):["left",0]}getAlignX(t,e,s){return"right"===s?t-(e.w+e.R)*e.rscale:"left"===s?e.L*e.rscale:(t-e.w*e.rscale)/2}getAlignY(t,e,s,i,r){return"top"===r?t-s:"bottom"===r?i-e:"center"===r?(t-s-(e-i))/2:0}getWrapWidth(t){return this.childNodes[t].getBBox().w}getChildAlign(t){return"left"}percent(t){return ye(t)}em(t){return x(t)}px(t,e=-Be){return ke(t,e,this.metrics.em)}length2em(t,e=1,s=null){null===s&&(s=this.bbox.scale);var i=this.font.params.rule_thickness,r=ce(t,{medium:1,thin:2/3,thick:5/3},0);return r?r*i:ve(t,e,s,this.jax.pxPerEm)}unicodeChars(s,t=this.variant){let e=Ue(s);t=this.font.getVariant(t);if(t&&t.chars){const s=t.chars;e=e.map(t=>{var e;return(null==(e=null==(e=s[t])?void 0:e[3])?void 0:e.smp)||t})}return e}remapChars(t){return t}mmlText(t){return this.node.factory.create("text").setText(t)}mmlNode(t,e={},s=[]){return this.node.factory.create(t,e,s)}createMo(t){const e=this.node.factory,s=e.create("text").setText(t),i=e.create("mo",{stretchy:!0},[s]),r=(i.inheritAttributesFrom(this.node),i.parent=this.node.parent,this.wrap(i));return r.parent=this,r}getVariantChar(t,e){const s=this.font.getChar(t,e)||[0,0,0,{unknown:!0}];return 3===s.length&&(s[3]={}),s}html(t,e={},s=[]){return this.jax.html(t,e,s)}}C.kind="unknown",C.styles={},C.removeStyles=["fontSize","fontFamily","fontWeight","fontStyle","fontVariant","font"],C.skipAttributes={fontfamily:!0,fontsize:!0,fontweight:!0,fontstyle:!0,color:!0,background:!0,class:!0,href:!0,style:!0,xmlns:!0},C.BOLDVARIANTS={bold:{normal:"bold",italic:"bold-italic",fraktur:"bold-fraktur",script:"bold-script","sans-serif":"bold-sans-serif","sans-serif-italic":"sans-serif-bold-italic"},normal:{bold:"normal","bold-italic":"italic","bold-fraktur":"fraktur","bold-script":"script","bold-sans-serif":"sans-serif","sans-serif-bold-italic":"sans-serif-italic"}},C.ITALICVARIANTS={italic:{normal:"italic",bold:"bold-italic","sans-serif":"sans-serif-italic","bold-sans-serif":"sans-serif-bold-italic"},normal:{italic:"normal","bold-italic":"bold","sans-serif-italic":"sans-serif","sans-serif-bold-italic":"bold-sans-serif"}};class $e extends MathJax._.core.Tree.WrapperFactory.AbstractWrapperFactory{constructor(){super(...arguments),this.jax=null}get Wrappers(){return this.node}}function Ye(t){return class extends t{computeBBox(t,e=!1){super.computeBBox(t,e),this.childNodes[0]&&this.childNodes[0].bbox.ic&&(t.ic=this.childNodes[0].bbox.ic)}}}function Ze(t){return class extends t{remappedText(t,e){var s=this.parent.stretch.c;return s?[s]:this.parent.remapChars(this.unicodeChars(t,e))}computeBBox(s,i=0){var r=this.parent.variant,t=this.node.getText();if("-explicitFont"===r){const i=this.jax.getFontData(this.parent.styles),{w:e,h:d,d:l}=this.jax.measureText(t,r,i);s.h=d,s.d=l,s.w=e}else{const i=this.remappedText(t,r);let e="";s.empty();for(let t=0;t<i.length;t++){var[a,n,o,h]=this.getVariantChar(r,i[t]);if(h.unknown)e+=String.fromCodePoint(i[t]);else if(e=this.addUtextBBox(s,e,r),this.updateBBox(s,a,n,o),s.ic=h.ic||0,s.sk=h.sk||0,s.dx=h.dx||0,h.oc&&!(t<i.length-1)){a=this.parent.childNodes;if(this.node===a[a.length-1].node){const c=this.parent.parent.node;let t=c.isKind("mrow")||c.isInferred?c.childNodes[c.childIndex(this.parent.node)+1]:null;(t=null!=t&&t.isKind("mo")&&"⁢"===t.getText()?c.childNodes[c.childIndex(t)+1]:t)&&t.attributes.get("mathvariant")===r?s.oc=h.oc:s.ic=h.oc}}}this.addUtextBBox(s,e,r),1<i.length&&(s.sk=0),s.clean()}}addUtextBBox(t,e,s){var i;return e&&({h:e,d:s,w:i}=this.jax.measureText(e,s),this.updateBBox(t,e,s,i)),""}updateBBox(t,e,s,i){t.w+=i,e>t.h&&(t.h=e),s>t.d&&(t.d=s)}getStyles(){}getVariant(){}getScale(){}getSpace(){}}}function ts(t){class e extends t{constructor(t,e,s=null){super(t,e,s),this.rscale=this.getRScale()}computeBBox(t,e=0){var s=this.node.getXML(),i=this.getHDW(s,"use","force"),{h:i,d:s,w:r}=i?this.splitHDW(i):this.measureXmlNode(s);t.w=r,t.h=i,t.d=s}getHTML(){let t=this.adaptor.clone(this.node.getXML());var e=this.getFontStyles();return!this.getHDW(t,"force")&&1===this.jax.options.scale||(t=this.addHDW(t,e)),this.html("mjx-html",{variant:this.parent.variant,style:e},[t])}getHDW(t,e,s=e){var i=this.jax.options.htmlHDW,t=this.adaptor.getAttribute(t,"data-mjx-hdw");return!t||i!==e&&i!==s?null:t}splitHDW(t){const e=1/this.metrics.scale,[s,i,r]=S(t).map(t=>this.length2em(t||"0")*e);return{h:s,d:i,w:r}}getFontStyles(){var t;const e=this.adaptor,s=this.metrics;return{"font-family":(null==(t=this.parent.styles)?void 0:t.get("font-family"))||s.family||e.fontFamily(e.parent(this.jax.math.start.node))||"initial","font-size":this.jax.fixed(s.em*this.rscale)+"px"}}measureXmlNode(t){const e=this.adaptor,s=this.html("mjx-xml-block",{style:{display:"inline-block"}},[e.clone(t)]),i=this.html("mjx-baseline",{style:{display:"inline-block",width:0,height:0}}),r=this.getFontStyles(),a=this.html("mjx-measure-xml",{style:r},[i,s]),n=this.jax.container;e.append(e.parent(this.jax.math.start.node),n),e.append(n,a);var t=this.metrics,t=t.em*t.scale*this.rscale,{left:o,right:h,bottom:d,top:l}=e.nodeBBox(s),h=(h-o)/t,o=(e.nodeBBox(i).top-l)/t,d=(d-l)/t-o;return e.remove(n),e.remove(a),{w:h,h:o,d:d}}getStyles(){}getScale(){}getVariant(){}}return e.autoStyle=!1,e.styles={"mjx-measure-xml":{position:"absolute",left:0,top:0,display:"inline-block","line-height":"normal","white-space":"normal"},"mjx-html":{display:"inline-block","line-height":"normal","text-align":"initial","white-space":"initial"},"mjx-html-holder":{display:"block",position:"absolute",top:0,left:0,bottom:0,right:0}},e}$e.defaultNodes={};const es={dx:".2em",dy:".1em",postDelay:600,clearDelay:100,hoverTimer:new Map,clearTimer:new Map,stopTimers:(t,e)=>{e.clearTimer.has(t)&&(clearTimeout(e.clearTimer.get(t)),e.clearTimer.delete(t)),e.hoverTimer.has(t)&&(clearTimeout(e.hoverTimer.get(t)),e.hoverTimer.delete(t))}};function ss(t){return class extends t{get selected(){var t=this.node.attributes.get("selection"),t=Math.max(1,Math.min(this.childNodes.length,t))-1;return this.childNodes[t]||this.wrap(this.node.selected)}getParameters(){var t=this.node.attributes.get("data-offsets"),[t,e]=S(t||"");this.tipDx=this.length2em(t||es.dx),this.tipDy=this.length2em(e||es.dy)}constructor(t,e,s=null){super(t,e,s);const i=this.constructor.actions,r=this.node.attributes.get("actiontype"),[a,n]=i.get(r)||[(t,e)=>{},{}];this.action=a,this.data=n,this.getParameters()}computeBBox(t,e=!1){t.updateFrom(this.selected.getOuterBBox()),this.selected.setChildPWidths(e)}get breakCount(){return this.node.isEmbellished?this.selected.coreMO().embellishedBreakCount:this.selected.breakCount}computeLineBBox(t){return this.getChildLineBBox(this.selected,t)}}}function is(t){return class extends t{getWrapWidth(t){return this.parent?this.getBBox().w:this.metrics.containerWidth/this.jax.pxPerEm}computeBBox(t,e=!1){super.computeBBox(t,e);const s=this.node.attributes;if(!this.parent&&this.jax.math.display&&"linebreak"===s.get("overflow")){const e=this.containerWidth;t.w>e&&this.childNodes[0].breakToWidth(e),t.updateFrom(this.childNodes[0].getBBox())}}}}function rs(t){return class extends t{getParameters(){const t=this.node.attributes,e=t.get("data-padding"),s=(void 0!==e&&(this.padding=this.length2em(e,We)),t.get("data-thickness"));void 0!==s&&(this.thickness=this.length2em(s,A));var i=t.get("data-arrowhead");if(void 0!==i){const[t,e,s]=S(i);this.arrowhead={x:t?parseFloat(t):Le,y:e?parseFloat(e):Oe,dx:s?parseFloat(s):De}}}getNotations(){const t=this.constructor.notations;for(const s of S(this.node.attributes.get("notation"))){var e=t.get(s);e&&((this.notations[s]=e).renderChild&&(this.renderChild=e.renderer))}}removeRedundantNotations(){for(const t of Object.keys(this.notations))if(this.notations[t]){const e=this.notations[t].remove||"";for(const s of e.split(/ /))delete this.notations[s]}}initializeNotations(){for(const t of Object.keys(this.notations)){const e=this.notations[t].init;e&&e(this)}}getBBoxExtenders(){var t=[0,0,0,0];for(const e of Object.keys(this.notations))this.maximizeEntries(t,this.notations[e].bbox(this));return t}getPadding(){const e=[0,0,0,0];for(const t of Object.keys(this.notations)){const s=this.notations[t].border;s&&this.maximizeEntries(e,s(this))}return[0,1,2,3].map(t=>this.TRBL[t]-e[t])}maximizeEntries(e,s){for(let t=0;t<e.length;t++)e[t]<s[t]&&(e[t]=s[t])}getOffset(t){var[e,s,i,r]=this.TRBL,t=("X"===t?s-r:i-e)/2;return.001<Math.abs(t)?t:0}getArgMod(t,e){return[Math.atan2(e,t),Math.sqrt(t*t+e*e)]}arrow(t,e,s,i=0,r){return null}arrowData(){var[t,e]=[this.padding,this.thickness],e=e*(this.arrowhead.x+Math.max(1,this.arrowhead.dx)),{h:s,d:i,w:r}=this.childNodes[0].getBBox(),s=s+i,i=Math.sqrt(s*s+r*r),a=Math.max(t,e*r/i),t=Math.max(t,e*s/i),[e,i]=this.getArgMod(r+2*a,s+2*t);return{a:e,W:i,x:a,y:t}}arrowAW(){var{h:t,d:e,w:s}=this.childNodes[0].getBBox(),[i,r,a,n]=this.TRBL;return this.getArgMod(n+s+r,i+t+e+a)}createMsqrt(t){const e=this.node.factory.create("msqrt"),s=(e.inheritAttributesFrom(this.node),e.childNodes[0]=t.node,this.wrap(e));return s.parent=this,s}sqrtTRBL(){var t=this.msqrt.getBBox(),e=this.msqrt.childNodes[0].getBBox();return[t.h-e.h,0,t.d-e.d,t.w-e.w]}constructor(t,e,s=null){super(t,e,s),this.notations={},this.renderChild=null,this.msqrt=null,this.padding=We,this.thickness=A,this.arrowhead={x:Le,y:Oe,dx:De},this.TRBL=[0,0,0,0],this.getParameters(),this.getNotations(),this.removeRedundantNotations(),this.initializeNotations(),this.TRBL=this.getBBoxExtenders()}computeBBox(t,e=!1){var[s,i,r,a]=this.TRBL,n=this.childNodes[0].getBBox();t.combine(n,a,0),t.h+=s,t.d+=r,t.w+=i,this.setChildPWidths(e)}}}function as(t){return class extends t{createMrow(){const t=this.node.factory.create("inferredMrow");t.inheritAttributesFrom(this.node),this.mrow=this.wrap(t),this.mrow.parent=this}addMrowChildren(){const t=this.node,e=this.mrow;this.addMo(t.open),this.childNodes.length&&e.childNodes.push(this.childNodes[0]);let s=0;for(const i of this.childNodes.slice(1))this.addMo(t.separators[s++]),e.childNodes.push(i);this.addMo(t.close),e.stretchChildren()}addMo(t){if(t){const e=this.wrap(t);this.mrow.childNodes.push(e),e.parent=this.mrow}}constructor(t,e,s=null){super(t,e,s),this.mrow=null,this.createMrow(),this.addMrowChildren()}computeBBox(t,e=!1){t.updateFrom(this.mrow.getOuterBBox()),this.setChildPWidths(e)}get breakCount(){return this.mrow.breakCount}computeLineBBox(t){return this.mrow.getLineBBox(t)}}}function ns(t){return class extends t{getFractionBBox(t,e,s){var i=this.childNodes[0].getOuterBBox(),r=this.childNodes[1].getOuterBBox(),a=this.font.params.axis_height,{T:e,u:s,v:n}=this.getTUV(e,s);t.combine(i,0,a+e+Math.max(i.d*i.rscale,s)),t.combine(r,0,a-e-Math.max(r.h*r.rscale,n)),t.w+=2*this.pad+.2}getTUV(t,e){var s=this.font.params,i=s.axis_height,r=(t?3.5:1.5)*e;return{T:(t?3.5:1.5)*e,u:(t?s.num1:s.num2)-i-r,v:(t?s.denom1:s.denom2)+i-r}}getAtopBBox(t,e){var{u:e,v:s,nbox:i,dbox:r}=this.getUVQ(e);t.combine(i,0,e),t.combine(r,0,-s),t.w+=2*this.pad}getUVQ(t){var e=this.childNodes[0].getOuterBBox(),s=this.childNodes[1].getOuterBBox(),i=this.font.params;let[r,a]=t?[i.num1,i.denom1]:[i.num3,i.denom2];t=(t?7:3)*i.rule_thickness;let n=r-e.d*e.scale-(s.h*s.scale-a);return n<t&&(r+=(t-n)/2,a+=(t-n)/2,n=t),{u:r,v:a,q:n,nbox:e,dbox:s}}getBevelledBBox(t,e){var{u:e,v:s,delta:i,nbox:r,dbox:a}=this.getBevelData(e),n=this.bevel.getOuterBBox();t.combine(r,0,e),t.combine(n,t.w-i/2,0),t.combine(a,t.w-i/2,s)}getBevelData(t){var e=this.childNodes[0].getOuterBBox(),s=this.childNodes[1].getOuterBBox(),t=t?.4:.15,i=Math.max(e.scale*(e.h+e.d),s.scale*(s.h+s.d))+2*t,r=this.font.params.axis_height;return{H:i,delta:t,u:e.scale*(e.d-e.h)/2+r+t,v:s.scale*(s.d-s.h)/2+r-t,nbox:e,dbox:s}}isDisplay(){var{displaystyle:t,scriptlevel:e}=this.node.attributes.getList("displaystyle","scriptlevel");return t&&0===e}constructor(t,e,s=null){if(super(t,e,s),this.bevel=null,this.pad=this.node.getProperty("withDelims")?0:this.font.params.nulldelimiterspace,this.node.attributes.get("bevelled")){const t=this.getBevelData(this.isDisplay())["H"],e=this.bevel=this.createMo("/");e.node.attributes.set("symmetric",!0),e.canStretch(c.Vertical),e.getStretchedVariant([t],!0)}}computeBBox(t,e=!1){t.empty();var{linethickness:s,bevelled:i}=this.node.attributes.getList("linethickness","bevelled"),r=this.isDisplay();let a=null;if(i)this.getBevelledBBox(t,r);else{const e=this.length2em(String(s),.06);a=-2*this.pad,0===e?this.getAtopBBox(t,r):(this.getFractionBBox(t,r,e),a-=.2),a+=t.w}t.clean(),this.setChildPWidths(e,a)}canStretch(t){return!1}getChildAlign(t){const e=this.node.attributes;return e.get("bevelled")?"left":e.get(["numalign","denomalign"][t])}getWrapWidth(t){const e=this.node.attributes;return e.get("bevelled")?this.childNodes[t].getOuterBBox().w:this.getBBox().w-(this.length2em(e.get("linethickness"))?.2:0)-2*this.pad}}}function os(t){return class extends t{constructor(t,e,s=null){super(t,e,s),this.getParameters()}getParameters(){const{width:t,height:e,valign:s,src:i,index:r}=this.node.attributes.getList("width","height","valign","src","index");if(i)this.width="auto"===t?1:this.length2em(t),this.height="auto"===e?1:this.length2em(e),this.valign=this.length2em(s||"0");else{const t=String.fromCodePoint(parseInt(r)),e=this.node.factory;this.charWrapper=this.wrap(e.create("text").setText(t)),this.charWrapper.parent=this}}computeBBox(t,e=0){this.charWrapper?t.updateFrom(this.charWrapper.getBBox()):(t.w=this.width,t.h=this.height+this.valign,t.d=-this.valign)}}}function hs(t){return class extends t{computeBBox(t,e=0){super.computeBBox(t),this.copySkewIC(t)}}}const ds={base:"subList",subList:"supList",supList:"subList",psubList:"psupList",psupList:"psubList"},ls=["sup","sup","psup","psub"];function cs(t){return class extends t{combinePrePost(t,e){const s=new p(t);return s.combine(e,0,0),s}getScriptData(){const t=this.scriptData={base:null,sub:p.empty(),sup:p.empty(),psub:p.empty(),psup:p.empty(),numPrescripts:0,numScripts:0},e=this.getScriptBBoxLists();this.combineBBoxLists(t.sub,t.sup,e.subList,e.supList),this.combineBBoxLists(t.psub,t.psup,e.psubList,e.psupList),t.base=e.base[0],t.numPrescripts=e.psubList.length,t.numScripts=e.subList.length}getScriptBBoxLists(){const t={base:[],subList:[],supList:[],psubList:[],psupList:[]};let e="base";for(const s of this.childNodes)e=s.node.isKind("mprescripts")?"psubList":(t[e].push(s.getOuterBBox()),ds[e]);return this.firstPrescript=t.subList.length+t.supList.length+2,this.padLists(t.subList,t.supList),this.padLists(t.psubList,t.psupList),t}padLists(t,e){t.length>e.length&&e.push(p.empty())}combineBBoxLists(e,s,i,r){for(let t=0;t<i.length;t++){var[a,n,o]=this.getScaledWHD(i[t]),[h,d,l]=this.getScaledWHD(r[t]),a=Math.max(a,h);e.w+=a,s.w+=a,n>e.h&&(e.h=n),o>e.d&&(e.d=o),d>s.h&&(s.h=d),l>s.d&&(s.d=l)}}getScaledWHD(t){var{w:t,h:e,d:s,rscale:i}=t;return[t*i,e*i,s*i]}getCombinedUV(){var t=this.scriptData,e=this.combinePrePost(t.sub,t.psub),t=this.combinePrePost(t.sup,t.psup);return this.getUVQ(e,t)}addPrescripts(t,e,s){var i,r=this.scriptData;return r.numPrescripts&&(i=this.font.params.scriptspace,t.combine(r.psup,i,e),t.combine(r.psub,i,s)),t}addPostscripts(t,e,s){var i,r=this.scriptData;return r.numScripts&&(i=t.w,t.combine(r.sup,i,e),t.combine(r.sub,i,s),t.w+=this.font.params.scriptspace),t}constructor(...t){super(...t),this.scriptData=null,this.firstPrescript=0,this.getScriptData()}appendScripts(t){t.empty();var[e,s]=this.getCombinedUV();return this.addPrescripts(t,e,s),t.append(this.scriptData.base),this.addPostscripts(t,e,s),t.clean(),t}computeLineBBox(t){var e=this.baseChild.breakCount,s=this.baseChild.getLineBBox(t).copy();let i=s;var[r,a]=this.getCombinedUV();return 0===t?((i=o.from(this.addPrescripts(p.zero(),r,a),this.linebreakOptions.lineleading)).append(s),this.addLeftBorders(i),i.L=this.bbox.L):t===e&&(i=this.addPostscripts(i,r,a),this.addRightBorders(i),i.R=this.bbox.R),this.addMiddleBorders(i),i}getUVQ(i,r){if(!this.UVQ){let[t,e,s]=[0,0,0];0===i.w?t=this.getU():0===r.w?t=-this.getV():[t,e,s]=super.getUVQ(i,r),this.UVQ=[t,e,s]}return this.UVQ}}}function ps(t){return class extends t{remapChars(t){if(t.length){var e=this.font.getRemappedChar("mn",t[0]);if(e){const s=this.unicodeChars(e,this.variant);1===s.length?t[0]=s[0]:t=s.concat(t.slice(1))}}return t}}}function us(t){return class extends t{get breakCount(){return this.breakStyle?1:0}get embellishedBreakCount(){return this.embellishedBreakStyle?1:0}get embellishedBreakStyle(){return this.breakStyle||this.getBreakStyle()}protoBBox(t){var e=this.stretch.dir!==c.None;e&&null===this.size&&this.getStretchedVariant([0]),e&&this.size<0||(super.computeBBox(t),0!==t.w||!this.node.attributes.hasExplicit("fence")||""!==this.node.getText()||this.node.texClass!==l.OPEN&&this.node.texClass!==l.CLOSE||this.jax.options.mathmlSpacing||(t.R=this.font.params.nulldelimiterspace),this.copySkewIC(t))}getAccentOffset(){var t=p.empty();return this.protoBBox(t),-t.w/2}getCenterOffset(t=null){return t||(t=p.empty(),super.computeBBox(t)),(t.h+t.d)/2+this.font.params.axis_height-t.h}getStretchedVariant(e,s=!1){if(this.stretch.dir!==c.None){var i=this.getWH(e),r=this.getSize("minsize",0),a=this.getSize("maxsize",1/0),n=this.node.getProperty("mathaccent"),i=Math.max(r,Math.min(a,i)),a=this.font.params.delimiterfactor/1e3,o=this.font.params.delimitershortfall,h=r||s?i:n?Math.min(i/a,i+o):Math.max(i*a,i-o),r=this.stretch,d=r.c||this.getText().codePointAt(0);let t=0;if(r.sizes)for(const e of r.sizes){if(e>=h)return n&&t&&t--,void this.setDelimSize(d,t);t++}r.stretch?(this.size=-1,this.invalidateBBox(),this.getStretchBBox(e,this.checkExtendedHeight(i,r),r)):this.setDelimSize(d,t-1)}}setDelimSize(t,e){var s=this.stretch,e=(this.variant=this.font.getSizeVariant(t,e),this.size=e,s.schar&&s.schar[Math.min(e,s.schar.length-1)]||t);this.stretch=Object.assign(Object.assign({},s),{c:e}),this.childNodes[0].invalidateBBox()}getSize(t,e){const s=this.node.attributes;return e=s.isSet(t)?this.length2em(s.get(t),1,1):e}getWH(t){if(0===t.length)return 0;if(1===t.length)return t[0];var[t,e]=t,s=this.font.params.axis_height;return this.node.attributes.get("symmetric")?2*Math.max(t-s,e+s):t+e}getStretchBBox(t,e,s){Object.hasOwn(s,"min")&&s.min>e&&(e=s.min);let[i,r,a]=s.HDW;if(this.stretch.dir===c.Vertical)[i,r]=this.getBaseline(t,e,s);else if(a=e,this.stretch.hd&&!this.jax.options.mathmlSpacing){const t=this.font.params.extender_factor;i=i*(1-t)+this.stretch.hd[0]*t,r=r*(1-t)+this.stretch.hd[1]*t}this.bbox.h=i,this.bbox.d=r,this.bbox.w=a}getBaseline(t,e,s){var i=2===t.length&&t[0]+t[1]===e,[e,r]=i?t:[e,0];let[a,n]=[e+r,0];if(this.node.attributes.get("symmetric")){const t=this.font.params.axis_height;i&&(a=2*Math.max(e-t,r+t)),n=a/2-t}else if(i)n=r;else{const[t,e]=s.HDW||[.75,.25];n=e*(a/(t+e))}return[a-n,n]}checkExtendedHeight(t,e){var s;return e.fullExt&&([e,s]=e.fullExt,t=s+Math.ceil(Math.max(0,t-s)/e)*e),t}setBreakStyle(t=""){if(this.breakStyle=this.node.parent.isEmbellished&&!t?"":this.getBreakStyle(t),this.breakCount&&this.multChar){const t=this.parent.node.childIndex(this.node),e=this.parent.node.childNodes[t+1];e&&e.setTeXclass(this.multChar.node)}}getBreakStyle(t=""){const e=this.node.attributes;let s=t||("newline"===e.get("linebreak")||this.node.getProperty("forcebreak")?e.get("linebreakstyle"):"");return s="infixlinebreakstyle"===s?e.get(s):s}getMultChar(){var t=this.node.attributes.get("linebreakmultchar");t&&"⁢"===this.getText()&&"⁢"!==t&&(this.multChar=this.createMo(t))}constructor(t,e,s=null){super(t,e,s),this.size=null,this.isAccent=this.node.isAccent,this.getMultChar(),this.setBreakStyle()}computeBBox(t,e=0){if(this.protoBBox(t),this.node.attributes.get("symmetric")&&this.stretch.dir!==c.Horizontal){const e=this.getCenterOffset(t);t.h+=e,t.d-=e}this.node.getProperty("mathaccent")&&(this.stretch.dir===c.None||0<=this.size)&&(t.w=0)}computeLineBBox(t){return this.moLineBBox(t,this.breakStyle)}moLineBBox(t,e,s=null){var i=this.node.attributes.get("lineleading"),i=this.length2em(i,this.linebreakOptions.lineleading);if(0===t&&"before"===e){const t=o.from(p.zero(),i);return t.originalL=this.bbox.L,this.bbox.L=0,t}let r=o.from(s||this.getOuterBBox(),i);return 1===t&&("after"===e?(r.w=r.h=r.d=0,r.isFirst=!0,this.bbox.R=0):"duplicate"===e?r.L=0:this.multChar&&(r=o.from(this.multChar.getOuterBBox(),i)),r.getIndentData(this.node)),r}canStretch(t){if(this.stretch.dir!==c.None)return this.stretch.dir===t;if(!this.node.attributes.get("stretchy"))return!1;const e=this.getText();if(1!==Array.from(e).length)return!1;var s=this.font.getDelimiter(e.codePointAt(0));return this.stretch=s&&s.dir===t?s:a,this.stretch.dir!==c.None}getVariant(){this.node.attributes.get("largeop")?this.variant=this.node.attributes.get("displaystyle")?"-largeop":"-smallop":this.node.attributes.hasExplicit("mathvariant")||!1!==this.node.getProperty("pseudoscript")?super.getVariant():this.variant="-tex-variant"}remapChars(t){const e=this.node.getProperty("primes");if(e)return Ue(e);if(1===t.length){const e=this.node.coreParent().parent,s=this.isAccent&&!e.isKind("mrow")?"accent":"mo",i=this.font.getRemappedChar(s,t[0]);i&&(t=this.unicodeChars(i,this.variant))}return t}}}function ms(t){return class extends t{getDimens(){var t=this.node.attributes.getList("width","height","depth","lspace","voffset"),e=this.childNodes[0].getOuterBBox();let{w:s,h:i,d:r}=e;var a=s,n=i,o=r;let h=0,d=0,l=0;""!==t.width&&(s=this.dimen(t.width,e,"w",0)),""!==t.height&&(i=this.dimen(t.height,e,"h",0)),""!==t.depth&&(r=this.dimen(t.depth,e,"d",0)),""!==t.voffset&&(d=this.dimen(t.voffset,e)),""!==t.lspace&&(h=this.dimen(t.lspace,e));t=this.node.attributes.get("data-align");return t&&(l=this.getAlignX(s,e,t)),[n,o,a,i-n,r-o,s-a,h,d,l]}dimen(t,e,s="",i=null){const r=(t=String(t)).match(/width|height|depth/),a=r?e[r[0].charAt(0)]:s?e[s]:0;let n=this.length2em(t,a)||0;return t.match(/^[-+]/)&&s&&(n+=a),n=null!=i?Math.max(i,n):n}setBBoxDimens(t){var[e,s,i,r,a,n]=this.getDimens();t.w=i+n,t.h=e+r,t.d=s+a}computeBBox(t,e=!1){if(this.setBBoxDimens(t),this.childNodes[0].getOuterBBox().w>t.w){const e=this.node.attributes.get("data-overflow");("linebreak"===e||"auto"===e&&"linebreak"===this.jax.math.root.attributes.get("overflow"))&&(this.childNodes[0].breakToWidth(t.w),this.setBBoxDimens(t))}this.setChildPWidths(e,t.w)}getWrapWidth(t){return this.getBBox().w}getChildAlign(t){return this.node.attributes.get("data-align")||"left"}}}function gs(t){return class extends t{get root(){return 1}combineRootBBox(t,e,s){var i=this.childNodes[this.root].getOuterBBox(),e=this.getRootDimens(e,s)[1];t.combine(i,0,e)}getRootDimens(t,e){var s=this.surd,i=this.childNodes[this.root].getOuterBBox(),r=(s.size<0?.5:.6)*t.w,{w:a,rscale:n}=i,o=Math.max(a,r/n),a=Math.max(0,o-a);return[o*n-r,this.rootHeight(i,t,s.size,e),a]}rootHeight(t,e,s,i){e=e.h+e.d;return(s<0?1.9:.55*e)-(e-i)+Math.max(0,t.d*t.rscale)}rootWidth(){var t=this.childNodes[this.root].getOuterBBox();return.4+t.w*t.rscale}}}function fs(t){return class extends t{stretchChildren(){const s=[];for(const i of this.childNodes)i.canStretch(c.Vertical)&&s.push(i);const i=s.length,r=this.childNodes.length;if(i&&1<r){let t=0,e=0;var a=1<i&&i===r;for(const s of this.childNodes){const i=s.stretch.dir===c.None;if(a||i){const i=s.getBBox().rscale;var[n,o]=s.getUnbrokenHD();o*=i,(n*=i)>t&&(t=n),o>e&&(e=o)}}for(const i of s){const s=i.coreRScale();i.coreMO().getStretchedVariant([t/s,e/s])}}}get fixesPWidth(){return!1}get breakCount(){return this._breakCount<0&&(this._breakCount=this.childNodes.length?this.childNodes.reduce((t,e)=>t+e.breakCount,0):0),this._breakCount}breakTop(t,e){return this.isStack?this.parent.breakTop(this,this):this}constructor(t,e,s=null){super(t,e,s),this.dh=0;this.isStack=!this.parent||this.parent.node.isInferred||this.parent.breakTop(this,this)!==this,this.stretchChildren();for(const t of this.childNodes)if(t.bbox.pwidth){this.bbox.pwidth=p.fullWidth;break}}computeBBox(t,e=!1){var s=this.breakCount;this.lineBBox=s?[new o({h:.75,d:.25,w:0},[0,0])]:[],t.empty();for(const e of this.childNodes.keys()){const i=this.childNodes[e];t.append(i.getOuterBBox()),s&&this.computeChildLineBBox(i,e)}t.clean(),s&&!this.coreMO().node.isEmbellished&&this.computeLinebreakBBox(t),this.fixesPWidth&&this.setChildPWidths(e)&&this.computeBBox(t,!0),this.vboxAdjust(t)}computeLinebreakBBox(t){var e;t.empty();const s=this.isStack,i=this.lineBBox,r=i.length-1;if(s)for(const t of i.keys()){const e=i[t];this.addMiddleBorders(e),0===t&&this.addLeftBorders(e),t===r&&this.addRightBorders(e)}let a=0;for(const s of i.keys()){const r=i[s];t.combine(r,0,a),a-=Math.max(.25,r.d)+r.lineLeading+Math.max(.75,(null==(e=i[s+1])?void 0:e.h)||0)}s?(i[0].L=this.bbox.L,i[r].R=this.bbox.R):(t.w=Math.max(...this.lineBBox.map(t=>t.w)),this.shiftLines(t.w),this.jax.math.display||this.linebreakOptions.inline||(t.pwidth=p.fullWidth,this.node.isInferred&&(this.parent.bbox.pwidth=p.fullWidth))),t.clean()}vboxAdjust(t){if(this.parent){const e=this.breakCount,s=this.parent.node.attributes.get("data-vertical-align");if(e&&"bottom"===s)this.dh=e?t.d-this.lineBBox[e-1].d:0;else{if(!("center"===s||e&&"middle"===s))return void(this.dh=0);{const{h:e,d:s}=t,i=this.font.params.axis_height;this.dh=(e+s)/2+i-e}}t.h+=this.dh,t.d-=this.dh}}computeChildLineBBox(e,s){const t=this.lineBBox[this.lineBBox.length-1],i=(t.end=[s,0],t.append(e.getLineBBox(0)),e.breakCount+1);if(1!==i)for(let t=1;t<i;t++){const i=new o({h:.75,d:.25,w:0});i.start=i.end=[s,t],i.isFirst=!0,i.append(e.getLineBBox(t)),this.lineBBox.push(i)}}getLineBBox(t){return this.getBBox(),this.isStack?super.getLineBBox(t):o.from(this.getOuterBBox(),this.linebreakOptions.lineleading)}shiftLines(t){var e,s;const i=this.lineBBox,r=i.length-1,[a,n]=(null==(e=i[1].indentData)?void 0:e[0])||["left","0"];for(const e of i.keys()){const o=i[e],[h,d]=0===e?[a,n]:(null==(s=o.indentData)?void 0:s[e===r?2:1])||["left","0"],[l,c]=this.processIndent(h,d,a,n,t);o.L=0,o.L=this.getAlignX(t,o,l)+c}}setChildPWidths(t,e=null,s=!0){return this.breakCount?!t&&(null!==e&&this.bbox.w!==e&&(this.bbox.w=e,this.shiftLines(e)),!0):super.setChildPWidths(t,e,s)}breakToWidth(t){this.linebreaks.breakToWidth(this,t)}}}function xs(t){return class extends t{getScale(){this.bbox.scale=this.parent.bbox.scale,this.bbox.rscale=1}}}function bs(t){return class extends t{createText(t){const e=this.wrap(this.mmlText(t));return e.parent=this,e}constructor(t,e,s=null){super(t,e,s);const i=this.node.attributes,r=i.getList("lquote","rquote");"monospace"!==this.variant&&(i.isSet("lquote")||'"'!==r.lquote||(r.lquote="“"),i.isSet("rquote")||'"'!==r.rquote||(r.rquote="”")),this.childNodes.unshift(this.createText(r.lquote)),this.childNodes.push(this.createText(r.rquote))}}}function As(t){return class extends t{get canBreak(){return this.node.canBreak}get breakCount(){return this.breakStyle?1:0}setBreakStyle(t=""){this.breakStyle=t||(this.node.hasNewline||this.node.getProperty("forcebreak")?"before":"")}constructor(t,e,s=null){super(t,e,s),this.setBreakStyle()}computeBBox(t,e=0){const s=this.node.attributes;t.w=this.length2em(s.get("width"),0),t.h=this.length2em(s.get("height"),0),t.d=this.length2em(s.get("depth"),0)}computeLineBBox(t){const e=this.node.attributes.get("data-lineleading"),s=this.length2em(e,this.linebreakOptions.lineleading),i=o.from(p.zero(),s);return 1===t&&(i.getIndentData(this.node),i.w=this.getBBox().w,i.isFirst=0===i.w),i}}}function Bs(t){return class extends t{get base(){return 0}get root(){return null}combineRootBBox(t,e,s){}getPQ(t){var e=this.font.params.rule_thickness,s=this.font.params.surd_height,i=this.node.attributes.get("displaystyle")?this.font.params.x_height:e;return[i,t.h+t.d>this.surdH?(t.h+t.d-(this.surdH-e-s-i/2))/2:s+i/4]}getRootDimens(t,e){return[0,0,0,0]}rootWidth(){return 1.25}getStretchedSurd(){var t=this.font.params.rule_thickness,e=this.font.params.surd_height,s=this.node.attributes.get("displaystyle")?this.font.params.x_height:t,{h:i,d:r}=this.childNodes[this.base].getOuterBBox();this.surdH=i+r+t+e+s/4,this.surd.getStretchedVariant([this.surdH-r,r],!0)}constructor(t,e,s=null){super(t,e,s),this.surd=this.createMo("√"),this.surd.canStretch(c.Vertical),this.getStretchedSurd()}computeBBox(t,e=!1){t.empty();var s=this.surd.getBBox(),i=new p(this.childNodes[this.base].getOuterBBox()),r=this.getPQ(s)[1],a=this.font.params.rule_thickness,n=this.font.params.surd_height,r=i.h+r+a,[a]=this.getRootDimens(s,r);t.h=r+n,this.combineRootBBox(t,s,r),t.combine(s,a,r-s.h),t.combine(i,a+s.w,0),t.clean(),this.setChildPWidths(e)}invalidateBBox(){super.invalidateBBox(),this.surd.childNodes[0].invalidateBBox()}}}function vs(t){return(t=class extends t{get scriptChild(){return this.childNodes[this.node.sub]}getOffset(){return[this.baseIsChar?0:this.getAdjustedIc(),-this.getV()]}}).useIC=!1,t}function ys(t){return class extends t{get scriptChild(){return this.childNodes[this.node.sup]}getOffset(){return[this.getAdjustedIc()-(this.baseRemoveIc?0:this.baseIc),this.getU()]}}}function ks(t){t=class extends t{constructor(){super(...arguments),this.UVQ=null}get subChild(){return this.childNodes[this.node.sub]}get supChild(){return this.childNodes[this.node.sup]}get scriptChild(){return this.supChild}getUVQ(t=this.subChild.getOuterBBox(),e=this.supChild.getOuterBBox()){const s=this.baseCore,i=s.getLineBBox(s.breakCount);if(this.UVQ)return this.UVQ;var r=this.font.params,a=3*r.rule_thickness,n=this.length2em(this.node.attributes.get("subscriptshift"),r.sub2),o=this.baseCharZero(i.d*this.baseScale+r.sub_drop*t.rscale),e=e.d*e.rscale,t=t.h*t.rscale;let[h,d]=[this.getU(),Math.max(o,n)],l=h-e-(t-d);if(l<a){d+=a-l;const t=.8*r.x_height-(h-e);0<t&&(h+=t,d-=t)}return h=Math.max(this.length2em(this.node.attributes.get("superscriptshift"),h),h),d=Math.max(this.length2em(this.node.attributes.get("subscriptshift"),d),d),l=h-e-(t-d),this.UVQ=[h,-d,l],this.UVQ}appendScripts(t){var[e,s]=[this.subChild.getOuterBBox(),this.supChild.getOuterBBox()],i=this.getBaseWidth(),r=this.getAdjustedIc(),[a,n]=this.getUVQ(),o=t.d-this.baseChild.getLineBBox(this.baseChild.breakCount).d;return t.combine(e,i+(this.baseIsChar?0:r),n-o),t.combine(s,i+r,a-o),t.w+=this.font.params.scriptspace,t}};return t.useIC=!1,t}const ws=MathJax._.util.numeric,M=ws.sum,Ss=ws.max,Cs=.333;function Ms(t){return class extends t{get tableRows(){return this.childNodes}findContainer(){let t=this,e=t.parent;for(;e&&(e.node.notParent||e.node.isKind("mrow"));)e=(t=e).parent;this.container=e,this.containerI=t.node.childPosition()}getPercentageWidth(){var t;this.hasLabels?this.bbox.pwidth=p.fullWidth:(t=this.node.attributes.get("width"),w(t)&&(this.bbox.pwidth=t))}stretchRows(){const e=this.node.attributes.get("equalrows"),s=e?this.getEqualRowHeight():0,{H:i,D:r}=e?this.getTableData():{H:[0],D:[0]},a=this.tableRows;for(let t=0;t<this.numRows;t++){var n=e?[(s+i[t]-r[t])/2,(s-i[t]+r[t])/2]:null;a[t].stretchChildren(n)}}stretchColumns(){var e=this.getColumnAttributes("columnwidth",0);for(let t=0;t<this.numCols;t++){var s="number"==typeof this.cWidths[t]?this.cWidths[t]:null;this.stretchColumn(t,s),null!==s&&this.breakColumn(t,s,e[t])}}stretchColumn(t,e){const s=[];for(const e of this.tableRows){const i=e.getChild(t);if(i){const t=i.childNodes[0];t.stretch.dir===c.None&&t.canStretch(c.Horizontal)&&s.push(t)}}const i=s.length,r=this.childNodes.length;if(i&&1<r&&null===e){e=0;const s=1<i&&i===r;for(const i of this.tableRows){const r=i.getChild(t);if(r){const t=r.childNodes[0],i=t.stretch.dir===c.None;if(s||i){const s=t.getBBox(i)["w"];s>e&&(e=s)}}}}if(null!==e)for(const t of s)t.coreMO().getStretchedVariant([Math.max(e,t.getBBox().w)/t.coreRScale()])}breakColumn(s,i,r){if("linebreak"===this.jax.math.root.attributes.get("overflow")&&this.jax.math.display){const a=this.getTableData()["D"];let t=0,e=0;for(const r of this.tableRows){const n=r.getChild(s);if(n&&n.getBBox().w>i){n.childNodes[0].breakToWidth(i);const s=n.getBBox();a[t]=Math.max(a[t],s.d),s.w>e&&(e=s.w)}t++}("fit"===r||"auto"===r||w(r)||e>this.cWidths[s])&&(this.cWidths[s]=e)}}getTableData(){if(this.data)return this.data;const i=new Array(this.numRows).fill(0),r=new Array(this.numRows).fill(0),a=new Array(this.numCols).fill(0),t=new Array(this.numRows),n=new Array(this.numRows),o=[0],h=this.tableRows;for(let s=0;s<h.length;s++){let e=0;const d=h[s],l=d.node.attributes.get("rowalign");for(let t=0;t<d.numCells;t++){const n=d.getChild(t);e=this.updateHDW(n,t,s,l,i,r,a,e),this.recordPWidthCell(n,t)}t[s]=i[s],n[s]=r[s],d.labeled&&(e=this.updateHDW(d.childNodes[0],0,s,l,i,r,o,e)),this.extendHD(s,i,r,e),this.extendHD(s,t,n,e)}return this.data={H:i,D:r,W:a,NH:t,ND:n,L:o[0]},this.data}updateHDW(t,e,s,i,r,a,n,o){let{h,d,w:l}=t.getBBox();var c=t.parent.bbox.rscale;1!==t.parent.bbox.rscale&&(h*=c,d*=c,l*=c),this.node.getProperty("useHeight")&&(h<.75&&(h=.75),d<.25&&(d=.25));let p=0;return"baseline"!==(i=t.node.attributes.get("rowalign")||i)&&"axis"!==i&&(p=h+d,h=d=0),h>r[s]&&(r[s]=h),d>a[s]&&(a[s]=d),p>o&&(o=p),n&&l>n[e]&&(n[e]=l),o}extendHD(t,e,s,i){i=(i-(e[t]+s[t]))/2;i<1e-5||(e[t]+=i,s[t]+=i)}recordPWidthCell(t,e){t.childNodes[0]&&t.childNodes[0].getBBox().pwidth&&this.pwidthCells.push([t,e])}setColumnPWidths(){var t,e,s=this.cWidths;for([t,e]of this.pwidthCells)t.setChildPWidths(!1,s[e])&&(t.invalidateBBox(),t.getBBox())}getBBoxHD(t){const[e,s]=this.getAlignmentRow();if(null===s){const s=this.font.params.axis_height,r=t/2;return{top:[0,t],center:[r,r],bottom:[t,0],baseline:[r,r],axis:[r+s,r-s]}[e]||[r,r]}var i=this.getVerticalPosition(s,e);return[i,t-i]}getBBoxLR(){var s;if(this.hasLabels){const s=this.node.attributes,r=s.get("side");let[t,e]=this.getPadAlignShift(r);var i=this.hasLabels&&!!s.get("data-width-includes-label");return i&&this.frame&&this.fSpace[0]&&(t-=this.fSpace[0]),"center"!==e||i?"left"===r?[t,0]:[0,t]:[t,t]}return[(null==(s=this.bbox)?void 0:s.L)||0,0]}getPadAlignShift(t){var e=this.getTableData()["L"];let s=e+this.length2em(this.node.attributes.get("minlabelspacing"));var[e,i]=null==this.styles?["",""]:[this.styles.get("padding-left"),this.styles.get("padding-right")];(e||i)&&(s=Math.max(s,this.length2em(e||"0"),this.length2em(i||"0")));let[r,a]=this.getAlignShift();return r===t&&(a="left"===t?Math.max(s,a)-s:Math.min(-s,a)+s),[s,r,a]}getWidth(){return this.pWidth||this.getBBox().w}adjustWideTable(){const t=this.node.attributes;var e,s;"auto"===t.get("width")&&([e,s]=this.getPadAlignShift(t.get("side")),s=Math.max(this.containerWidth/10,this.containerWidth-e-("center"===s?e:0)),this.naturalWidth()>s&&this.adjustColumnWidths(s))}naturalWidth(){const t=this.getComputedWidths();return M(t.concat(this.cLines,this.cSpace))+2*this.fLine+this.fSpace[0]+this.fSpace[2]}getEqualRowHeight(){const{H:e,D:s}=this.getTableData(),t=Array.from(e.keys()).map(t=>e[t]+s[t]);return Math.max(...t)}getComputedWidths(){const e=this.getTableData().W;let t=Array.from(e.keys()).map(t=>("number"==typeof this.cWidths[t]?this.cWidths:e)[t]);return t=this.node.attributes.get("equalcolumns")?Array(t.length).fill(Ss(t)):t}getColumnWidths(){var t=this.node.attributes.get("width");if(this.node.attributes.get("equalcolumns"))return this.getEqualColumns(t);var e=this.getColumnAttributes("columnwidth",0);return"auto"===t?this.getColumnWidthsAuto(e):w(t)?this.getColumnWidthsPercent(e):this.getColumnWidthsFixed(e,this.length2em(t))}getEqualColumns(t){var e,s=Math.max(1,this.numCols);let i;if("auto"===t){const t=this.getTableData()["W"];i=Ss(t)}else i=w(t)?this.percent(1/s):(e=M([].concat(this.cLines,this.cSpace))+this.fSpace[0]+this.fSpace[2],Math.max(0,this.length2em(t)-e)/s);return Array(this.numCols).fill(i)}getColumnWidthsAuto(t){return t.map(t=>"auto"===t||"fit"===t?null:w(t)?t:this.length2em(t))}getColumnWidthsPercent(s){const i=s.includes("fit"),r=(i?this.getTableData():{W:null})["W"];return Array.from(s.keys()).map(t=>{var e=s[t];return"fit"===e?null:"auto"===e?i?r[t]:null:w(e)?e:this.length2em(e)})}getColumnWidthsFixed(s,t){const e=Array.from(s.keys()),i=e.filter(t=>"fit"===s[t]),r=e.filter(t=>"auto"===s[t]),a=i.length||r.length,n=(a?this.getTableData():{W:null})["W"],o=t-M([].concat(this.cLines,this.cSpace))-this.fSpace[0]-this.fSpace[2];let h=o;e.forEach(t=>{var e=s[t];h-="fit"===e||"auto"===e?n[t]:this.length2em(e,o)});const d=a&&0<h?h/a:0;return e.map(t=>{var e=s[t];return"fit"===e?n[t]+d:"auto"===e?n[t]+(0===i.length?d:0):this.length2em(e,o)})}adjustColumnWidths(i){const r=this.getTableData()["W"],e=this.getColumnAttributes("columnwidth",0),a=Array.from(e.keys()),n=[...a.filter(t=>"fit"===e[t]).sort((t,e)=>r[e]-r[t]),...a.filter(t=>"auto"===e[t]).sort((t,e)=>r[e]-r[t]),...a.filter(t=>w(e[t])).sort((t,e)=>r[e]-r[t]),...a.filter(t=>"fit"!==e[t]&&"auto"!==e[t]&&!w(e[t])).sort((t,e)=>r[e]-r[t])];if(n.length){this.cWidths=a.map(t=>("number"==typeof this.cWidths[t]?this.cWidths:r)[t]);i=i-M([].concat(this.cLines,this.cSpace))-this.fSpace[0]-this.fSpace[2];let e=M(this.cWidths)-i,t=0,s=0;for(;s<n.length&&!((t+=r[n[s++]])&&e/t<Cs););e=1-e/t,n.slice(0,s).forEach(t=>this.cWidths[t]*=e)}}getVerticalPosition(e,t){var s=this.node.attributes.get("equalrows"),{H:i,D:r}=this.getTableData(),a=s?this.getEqualRowHeight():0,n=this.getRowHalfSpacing();let o=this.fLine;for(let t=0;t<e;t++)o+=n[t]+(s?a:i[t]+r[t])+n[t+1]+this.rLines[t];var[h,d]=s?[(a+i[e]-r[e])/2,(a-i[e]+r[e])/2]:[i[e],r[e]];return o+={top:0,center:n[e]+(h+d)/2,bottom:n[e]+h+d+n[e+1],baseline:n[e]+h,axis:n[e]+h-.25}[t]||0}getFrameSpacing(){const t=this.fframe?this.convertLengths(this.getAttributeArray("framespacing")):[0,0];t[2]=t[0];var e,s=this.node.attributes.get("data-array-padding");return s&&([s,e]=this.convertLengths(S(s)),t[0]=s,t[2]=e),t}getEmHalfSpacing(t,e,s=1){const i=this.addEm(e,2/s);return i.unshift(this.em(t[0]*s)),i.push(this.em(t[1]*s)),i}getRowHalfSpacing(){const t=this.rSpace.map(t=>t/2);return t.unshift(this.fSpace[1]),t.push(this.fSpace[1]),t}getColumnHalfSpacing(){const t=this.cSpace.map(t=>t/2);return t.unshift(this.fSpace[0]),t.push(this.fSpace[2]),t}getAlignmentRow(){var[t,e]=S(this.node.attributes.get("align"));if(null==e)return[t,null];let s=parseInt(e);return s<0&&(s+=this.numRows+1),[t,s<1||s>this.numRows?null:s-1]}getColumnAttributes(t,e=1){const s=this.numCols-e,i=this.getAttributeArray(t);if(0===i.length)return null;for(;i.length<s;)i.push(i[i.length-1]);return i.length>s&&i.splice(s),i}getRowAttributes(t,e=1){const s=this.numRows-e,i=this.getAttributeArray(t);if(0===i.length)return null;for(;i.length<s;)i.push(i[i.length-1]);return i.length>s&&i.splice(s),i}getAttributeArray(t){var e=this.node.attributes.get(t);return e?S(e):[this.node.attributes.getDefault(t)]}addEm(t,e=1){return t?t.map(t=>this.em(t/e)):null}convertLengths(t){return t?t.map(t=>this.length2em(t)):null}constructor(t,e,s=null){super(t,e,s),this.numCols=0,this.numRows=0,this.data=null,this.pwidthCells=[],this.pWidth=0,this.numCols=Ss(this.tableRows.map(t=>t.numCells)),this.numRows=this.childNodes.length,this.hasLabels=this.childNodes.reduce((t,e)=>t||e.node.isKind("mlabeledtr"),!1),this.findContainer(),this.isTop=!this.container||this.container.node.isKind("math")&&!this.container.parent,this.isTop&&(this.jax.table=this),this.getPercentageWidth();const i=this.node.attributes,r=i.get("frame");this.frame="none"!==r,this.fframe=this.frame||void 0!==i.get("data-frame-styles"),this.fLine=this.frame?.07:0,this.fSpace=this.getFrameSpacing(),this.cSpace=this.convertLengths(this.getColumnAttributes("columnspacing")),this.rSpace=this.convertLengths(this.getRowAttributes("rowspacing")),this.cLines=this.getColumnAttributes("columnlines").map(t=>"none"===t?0:.07),this.rLines=this.getRowAttributes("rowlines").map(t=>"none"===t?0:.07),this.cWidths=this.getColumnWidths(),this.adjustWideTable(),this.stretchColumns(),this.stretchRows()}getStyles(){super.getStyles();const t=this.node.attributes.get("data-frame-styles");if(t){this.styles||(this.styles=new Ce(""));var e=t.split(/ /);for(const t of Se.keys()){var s=e[t];"none"!==s&&this.styles.set("border-"+Se[t],".07em "+s)}}}computeBBox(t,e=0){const{H:s,D:i}=this.getTableData();let r,a;if(this.node.attributes.get("equalrows")){const t=this.getEqualRowHeight();r=M([].concat(this.rLines,this.rSpace))+t*this.numRows}else r=M(s.concat(i,this.rLines,this.rSpace));r+=2*(this.fLine+this.fSpace[1]),a=this.naturalWidth();var n=this.node.attributes.get("width"),[o,h]=("auto"!==n&&(a=Math.max(this.length2em(n,0)+2*this.fLine,a)),this.getBBoxHD(r)),[o,h]=(t.h=o,t.d=h,t.w=a,this.getBBoxLR());t.L=o,t.R=h,w(n)||this.setColumnPWidths()}setChildPWidths(t,e,s){var i=this.node.attributes.get("width");if(!w(i))return!1;this.hasLabels||(this.bbox.pwidth="",this.container.bbox.pwidth="");var{w:r,L:a,R:n}=this.bbox,o=this.node.attributes.get("data-width-includes-label"),i=Math.max(r,this.length2em(i,Math.max(e,a+r+n)))-(o?a+n:0),e=this.node.attributes.get("equalcolumns")?Array(this.numCols).fill(this.percent(1/Math.max(1,this.numCols))):this.getColumnAttributes("columnwidth",0);return this.cWidths=this.getColumnWidthsFixed(e,i),this.pWidth=this.naturalWidth(),this.isTop&&(this.bbox.w=this.pWidth),this.setColumnPWidths(),this.pWidth!==r&&this.parent.invalidateBBox(),this.pWidth!==r}getAlignShift(){return this.isTop?super.getAlignShift():[this.container.getChildAlign(this.containerI),0]}}}function Ns(t){return class extends t{get fixesPWidth(){return!1}invalidateBBox(){this.bboxComputed=!1,this.lineBBox=[]}getWrapWidth(t){const e=this.parent.parent,s=this.parent,i=this.node.childPosition()-(s.labeled?1:0);return("number"==typeof e.cWidths[i]?e.cWidths:e.getTableData().W)[i]}getChildAlign(t){return this.node.attributes.get("columnalign")}}}function Ls(t){t=class extends t{constructor(){super(...arguments),this.breakPoints=[]}textWidth(t){let e=this.textNode;if(!e){const t=this.node.factory.create("text");t.parent=this.node,(e=this.textNode=this.factory.wrap(t)).parent=this}return e.node.setText(t),e.invalidateBBox(!1),e.getBBox().w}get breakCount(){return this.breakPoints.length}getVariant(){var t,e=this.jax.options,s=this.jax.math.outputData,i=(!!s.merrorFamily||!!e.merrorFont)&&this.node.Parent.isKind("merror");s.mtextFamily||e.mtextFont||i?(t=this.node.attributes.get("mathvariant"),i=(t=this.constructor.INHERITFONTS[t]||this.jax.font.getCssFont(t))[0]||(i?s.merrorFamily||e.merrorFont:s.mtextFamily||e.mtextFont),this.variant=this.explicitVariant(i,t[2]?"bold":"",t[1]?"italic":"")):super.getVariant()}setBreakAt(t){this.breakPoints.push(t)}clearBreakPoints(){this.breakPoints=[]}computeLineBBox(t){const e=o.from(this.getOuterBBox(),this.linebreakOptions.lineleading);return this.breakCount&&(e.w=this.getBreakWidth(t),0===t?(e.R=0,this.addLeftBorders(e)):(e.L=0,e.indentData=[["left","0"],["left","0"],["left","0"]],t===this.breakCount&&this.addRightBorders(e))),e}getBreakWidth(t){const e=this.childNodes;let[s,i]=this.breakPoints[t-1]||[0,0];var[r,t]=this.breakPoints[t]||[e.length,0];let a=e[s].node.getText().split(/ /);if(s===r)return this.textWidth(a.slice(i,t).join(" "));let n=this.textWidth(a.slice(i).join(" "));for(;++s<r&&s<e.length;)n+=e[s].getBBox().w;return s<e.length&&(a=e[s].node.getText().split(/ /),n+=this.textWidth(a.slice(0,t).join(" "))),n}};return t.INHERITFONTS={normal:["",!1,!1],bold:["",!1,!0],italic:["",!0,!1],"bold-italic":["",!0,!0]},t}function Ds(t){return class extends t{get numCells(){return this.childNodes.length}get labeled(){return!1}get tableCells(){return this.childNodes}getChild(t){return this.childNodes[t]}getChildBBoxes(){return this.childNodes.map(t=>t.getBBox())}stretchChildren(s=null){const e=[],i=this.labeled?this.childNodes.slice(1):this.childNodes;for(const s of i){const i=s.childNodes[0];i.canStretch(c.Vertical)&&e.push(i)}const r=e.length,a=this.childNodes.length;if(r&&1<a&&!s){let t=0,e=0;var n=1<r&&r===a;for(const s of i){const i=s.childNodes[0],r=i.stretch.dir===c.None;if(n||r){const{h:s,d:a}=i.getBBox(r);s>t&&(t=s),a>e&&(e=a)}}s=[t,e]}if(s)for(const i of e){const e=i.coreRScale();i.coreMO().getStretchedVariant(s.map(t=>t*e))}}get fixesPWidth(){return!1}}}function Os(t){return class extends t{get numCells(){return Math.max(0,this.childNodes.length-1)}get labeled(){return!0}get tableCells(){return this.childNodes.slice(1)}getChild(t){return this.childNodes[t+1]}getChildBBoxes(){return this.childNodes.slice(1).map(t=>t.getBBox())}}}function Ws(t){return class extends t{get scriptChild(){return this.childNodes[this.node.under]}constructor(...t){super(...t),this.stretchChildren()}computeBBox(t,e=!1){var s,i,r,a,n;this.hasMovableLimits()?super.computeBBox(t,e):(t.empty(),s=this.baseChild.getOuterBBox(),i=this.scriptChild.getOuterBBox(),r=this.getUnderKV(s,i)[1],a=this.isLineBelow?0:this.getDelta(this.scriptChild,!0),[a,n]=this.getDeltaW([s,i],[0,-a]),t.combine(s,a,0),t.combine(i,n,r),t.d+=this.font.params.big_op_spacing5,t.clean(),this.setChildPWidths(e))}}}function Ts(t){return class extends t{get scriptChild(){return this.childNodes[this.node.over]}constructor(...t){super(...t),this.stretchChildren()}computeBBox(t){if(this.hasMovableLimits())super.computeBBox(t);else{t.empty();const r=this.baseChild.getOuterBBox(),a=this.scriptChild.getOuterBBox();this.node.attributes.get("accent")&&(r.h=Math.max(r.h,this.font.params.x_height*this.baseScale));var e=this.getOverKU(r,a)[1],s=this.isLineAbove?0:this.getDelta(this.scriptChild),[s,i]=this.getDeltaW([r,a],[0,s]);t.combine(r,s,0),t.combine(a,i,e),t.h+=this.font.params.big_op_spacing5,t.clean()}}}}function js(t){return class extends t{get underChild(){return this.childNodes[this.node.under]}get overChild(){return this.childNodes[this.node.over]}get subChild(){return this.underChild}get supChild(){return this.overChild}constructor(...t){super(...t),this.stretchChildren()}computeBBox(t){if(this.hasMovableLimits())super.computeBBox(t);else{t.empty();const n=this.overChild.getOuterBBox(),o=this.baseChild.getOuterBBox(),h=this.underChild.getOuterBBox();this.node.attributes.get("accent")&&(o.h=Math.max(o.h,this.font.params.x_height*this.baseScale));var e=this.getOverKU(o,n)[1],s=this.getUnderKV(o,h)[1],i=this.getDelta(this.overChild),r=this.getDelta(this.underChild,!0),[r,i,a]=this.getDeltaW([o,h,n],[0,this.isLineBelow?0:-r,this.isLineAbove?0:i]),r=(t.combine(o,r,0),t.combine(n,a,e),t.combine(h,i,s),this.font.params.big_op_spacing5);t.h+=r,t.d+=r,t.clean()}}}}function Es(t){return(t=class extends t{get baseChild(){return this.childNodes[this.node.base]}get scriptChild(){return this.childNodes[1]}getBaseCore(){let t=this.getSemanticBase()||this.childNodes[0],e=null==t?void 0:t.node;for(;t&&(1===t.childNodes.length&&(e.isKind("mrow")||e.isKind("TeXAtom")||e.isKind("mstyle")||e.isKind("mpadded")&&!e.getProperty("vbox")||e.isKind("mphantom")||e.isKind("semantics"))||e.isKind("munderover")&&t.isMathAccent);)this.setBaseAccentsFor(t),t=t.childNodes[0],e=null==t?void 0:t.node;return t||(this.baseHasAccentOver=this.baseHasAccentUnder=!1),t||this.childNodes[0]}setBaseAccentsFor(t){t.node.isKind("munderover")&&(null===this.baseHasAccentOver&&(this.baseHasAccentOver=!!t.node.attributes.get("accent")),null===this.baseHasAccentUnder&&(this.baseHasAccentUnder=!!t.node.attributes.get("accentunder")))}getSemanticBase(){var t=this.node.attributes.getExplicit("data-semantic-fencepointer");return this.getBaseFence(this.baseChild,t)}getBaseFence(t,e){if(!t||!t.node.attributes||!e)return null;if(t.node.attributes.getExplicit("data-semantic-id")===e)return t;for(const s of t.childNodes){const t=this.getBaseFence(s,e);if(t)return t}return null}getBaseScale(){let t=this.baseCore,e=1;for(;t&&t!==this;)e*=t.getOuterBBox().rscale,t=t.parent;return e}getBaseIc(){return this.baseCore.getOuterBBox().ic*this.baseScale}getAdjustedIc(){return this.baseIc?1.05*this.baseIc+.05:0}isCharBase(){const t=this.baseCore;return(t.node.isKind("mo")&&null===t.size||t.node.isKind("mi")||t.node.isKind("mn"))&&1===t.bbox.rscale&&1===Array.from(t.getText()).length}checkLineAccents(){this.node.isKind("munderover")&&(this.node.isKind("mover")?this.isLineAbove=this.isLineAccent(this.scriptChild):this.node.isKind("munder")?this.isLineBelow=this.isLineAccent(this.scriptChild):(this.isLineAbove=this.isLineAccent(this.overChild),this.isLineBelow=this.isLineAccent(this.underChild)))}isLineAccent(t){const e=t.coreMO().node;return e.isToken&&"―"===e.getText()}getBaseWidth(){var t=this.baseChild.getLineBBox(this.baseChild.breakCount);return t.w*t.rscale-(this.baseRemoveIc?this.baseIc:0)+this.font.params.extra_ic}getOffset(){return[0,0]}baseCharZero(t){var e=!!this.baseCore.node.attributes.get("largeop"),s=!(!this.baseCore.node.isKind("mo")||!this.baseCore.size),i=this.baseScale;return!this.baseIsChar||e||s||1!==i?t:0}getV(){const t=this.baseCore,e=t.getLineBBox(t.breakCount),s=this.scriptChild.getOuterBBox(),i=this.font.params,r=this.length2em(this.node.attributes.get("subscriptshift"),i.sub1);return Math.max(this.baseCharZero(e.d*this.baseScale+i.sub_drop*s.rscale),r,s.h*s.rscale-.8*i.x_height)}getU(){const t=this.baseCore,e=t.getLineBBox(t.breakCount),s=this.scriptChild.getOuterBBox(),i=this.font.params,r=this.node.attributes.getList("displaystyle","superscriptshift"),a=this.node.getProperty("texprimestyle")?i.sup3:r.displaystyle?i.sup1:i.sup2,n=this.length2em(r.superscriptshift,a);return Math.max(this.baseCharZero(e.h*this.baseScale-i.sup_drop*s.rscale),n,s.d*s.rscale+.25*i.x_height)}hasMovableLimits(){const t=this.node.attributes.get("displaystyle"),e=this.baseChild.coreMO().node;return!t&&!!e.attributes.get("movablelimits")}getOverKU(t,e){var s=this.node.attributes.get("accent"),i=this.font.params,e=e.d*e.rscale,r=i.rule_thickness*i.separation_factor,a=this.baseHasAccentOver?r:0,r=this.isLineAbove?3*i.rule_thickness:r,s=(s?r:Math.max(i.big_op_spacing1,i.big_op_spacing3-Math.max(0,e)))-a;return[s,t.h*t.rscale+s+e]}getUnderKV(t,e){var s=this.node.attributes.get("accentunder"),i=this.font.params,e=e.h*e.rscale,r=i.rule_thickness*i.separation_factor,a=this.baseHasAccentUnder?r:0,r=this.isLineBelow?3*i.rule_thickness:r,s=(s?r:Math.max(i.big_op_spacing2,i.big_op_spacing4-e))-a;return[s,-(t.d*t.rscale+s+e)]}getDeltaW(e,t=[0,0,0]){const s=this.node.attributes.get("align"),i=e.map(t=>t.w*t.rscale),r=(i[0]-=this.baseRemoveIc&&!this.baseCore.node.attributes.get("largeop")?this.baseIc:0,Math.max(...i)),a=[];let n=0;for(const e of i.keys())a[e]=("center"===s?(r-i[e])/2:"right"===s?r-i[e]:0)+t[e],a[e]<n&&(n=-a[e]);if(n)for(const e of a.keys())a[e]+=n;return[1,2].map(t=>a[t]+=e[t]?e[t].dx*e[0].rscale:0),a}getDelta(t,e=!1){var s=this.node.attributes.get("accent");let{sk:i,ic:r}=this.baseCore.getOuterBBox();return s&&(i-=t.getOuterBBox().sk),((s&&!e?i:0)+this.font.skewIcFactor*r)*this.baseScale}stretchChildren(){const e=[];for(const s of this.childNodes)s.canStretch(c.Horizontal)&&e.push(s);const s=e.length,i=this.childNodes.length;if(s&&1<i){let t=0;var r=1<s&&s===i;for(const e of this.childNodes){const s=e.stretch.dir===c.None;if(r||s){const{w:i,rscale:a}=e.getOuterBBox(s);i*a>t&&(t=i*a)}}for(const s of e){const e=s.coreMO();null===e.size&&e.getStretchedVariant([t/s.coreRScale()])}}}constructor(t,e,s=null){super(t,e,s),this.baseScale=1,this.baseIc=0,this.baseRemoveIc=!1,this.baseIsChar=!1,this.baseHasAccentOver=null,this.baseHasAccentUnder=null,this.isLineAbove=!1,this.isLineBelow=!1,this.isMathAccent=!1;t=this.baseCore=this.getBaseCore();t&&(this.setBaseAccentsFor(t),this.baseScale=this.getBaseScale(),this.baseIc=this.getBaseIc(),this.baseIsChar=this.isCharBase(),this.isMathAccent=this.baseIsChar&&this.scriptChild&&void 0!==this.scriptChild.coreMO().node.getProperty("mathaccent"),this.checkLineAccents(),this.baseRemoveIc=!this.isLineAbove&&!this.isLineBelow&&(!this.constructor.useIC||this.isMathAccent))}computeBBox(t,e=!1){t.empty(),t.append(this.baseChild.getOuterBBox()),this.appendScripts(t),t.clean(),this.setChildPWidths(e)}appendScripts(t){var e=this.getBaseWidth(),[s,i]=this.getOffset();return t.combine(this.scriptChild.getOuterBBox(),e+s,i),t.w+=this.font.params.scriptspace,t}get breakCount(){return this._breakCount<0&&(this._breakCount=this.node.isEmbellished?this.coreMO().embellishedBreakCount:this.node.linebreakContainer?0:this.childNodes[0].breakCount),this._breakCount}breakTop(t,e){return this.node.linebreakContainer||!this.parent||this.node.childIndex(e.node)?t:this.parent.breakTop(t,this)}computeLineBBox(t){var e=this.breakCount;if(!e)return o.from(this.getOuterBBox(),this.linebreakOptions.lineleading);var s=this.baseChild.getLineBBox(t).copy();return t<e?(0===t&&this.addLeftBorders(s),this.addMiddleBorders(s)):(this.appendScripts(s),this.addMiddleBorders(s),this.addRightBorders(s)),s}}).useIC=!0,t}function Vs(t){return class extends t{computeBBox(t,e=0){if(this.childNodes.length){const{w:e,h:s,d:i}=this.childNodes[0].getBBox();t.w=e,t.h=s,t.d=i}}get breakCount(){return this.node.isEmbellished?this.coreMO().embellishedBreakCount:this.childNodes[0].breakCount}}}class N extends C{constructor(){super(...arguments),this.dx=0,this.utext=""}toSVG(t){this.toEmbellishedSVG(t)||this.addChildren(this.standardSvgNodes(t))}toEmbellishedSVG(t){if(t.length<=1||!this.node.isEmbellished)return!1;const e=this.coreMO().embellishedBreakStyle,s=[];for(var[i,r]of[[t[0],"before"],[t[1],"after"]])e!==r?(this.toSVG([i]),s.push(this.dom[0]),this.place(0,0)):s.push(this.createSvgNodes([i])[0]);return this.dom=s,!0}addChildren(t){let e=0;for(const i of this.childNodes){i.toSVG(t);var s=i.getOuterBBox();i.dom&&i.place(e+s.L*s.rscale,0),e+=(s.L+s.w+s.R)*s.rscale}}standardSvgNodes(t){t=this.createSvgNodes(t);return this.handleStyles(),this.handleScale(),this.handleBorder(),this.handleColor(),this.handleAttributes(),t}createSvgNodes(t){this.dom=t.map(t=>this.svg("g",{"data-mml-node":this.node.kind}));for(const e of(t=this.handleHref(t)).keys())this.adaptor.append(t[e],this.dom[e]);return this.dom}handleHref(t){const r=this.node.attributes.get("href");if(!r)return t;let a=0;const n=this.node.isEmbellished&&!this.node.isKind("mo");return t.map(t=>{t=this.adaptor.append(t,this.svg("a",{href:r}));var{h:e,d:s,w:i}=n?this.getOuterBBox():this.getLineBBox(a);return this.adaptor.append(this.dom[a++],this.svg("rect",{"data-hitbox":!0,fill:"none",stroke:"none","pointer-events":"all",width:this.fixed(i),height:this.fixed(e+s),x:1===a||n?this.fixed(-this.dx):0,y:this.fixed(-s)})),t})}handleStyles(){if(this.styles){const s=this.styles.cssText;s&&this.dom.forEach(t=>this.adaptor.setAttribute(t,"style",s));var t=((null==(t=this.styleData)?void 0:t.padding)||[0,0,0,0])[3],e=((null==(e=null==(e=this.styleData)?void 0:e.border)?void 0:e.width)||[0,0,0,0])[3];(t||e)&&(this.dx=t+e)}}handleScale(){if(1!==this.bbox.rscale){const e="scale("+this.fixed(this.bbox.rscale/1e3,3)+")";this.dom.forEach(t=>this.adaptor.setAttribute(t,"transform",e))}}handleColor(){var t;const a=this.adaptor,n=this.node.attributes,e=n.getExplicit("mathcolor")||n.getExplicit("color"),o=n.getExplicit("mathbackground")||n.getExplicit("background")||(null==(t=this.styles)?void 0:t.get("background-color"));if(e&&this.dom.forEach(t=>{a.setAttribute(t,"fill",e),a.setAttribute(t,"stroke",e)}),o){let r=0;const n=this.node.isEmbellished&&!this.node.isKind("mo");this.dom.forEach(t=>{var{h:e,d:s,w:i}=n?this.getOuterBBox():this.getLineBBox(r++),i=this.svg("rect",{fill:o,x:1===r||n?this.fixed(-this.dx):0,y:this.fixed(-s),width:this.fixed(i),height:this.fixed(e+s),"data-bgcolor":!0}),e=a.firstChild(t);e?a.insert(i,e):a.append(t,i)})}}handleBorder(){var e,s=null==(e=this.styleData)?void 0:e.border;if(s){const b=N.borderFuzz,A=this.adaptor;let t=0;var i=this.dom.length-1,r=this.node.isEmbellished&&!this.node.isKind("mo");for(const e of this.dom){var a=i&&t?0:1,n=i&&t!==i?0:1,o=r?this.getOuterBBox():this.getLineBBox(t++),[o,h,d]=[o.h+b,o.d+b,o.w+b],l=[d,o],c=[-b,o],p=[d,-h],u=[-b,-h],m=[d-n*s.width[1],o-s.width[0]],o=[-b+a*s.width[3],o-s.width[0]],d=[d-n*s.width[1],-h+s.width[2]],h=[-b+a*s.width[3],-h+s.width[2]],g=[[c,l,m,o],[p,l,m,d],[u,p,d,h],[u,c,o,h]],f=A.firstChild(e),x=a*this.dx;for(const b of[0,1,2,3])if(s.width[b]&&(3!==b||a)&&(1!==b||n)){const A=g[b];"dashed"===s.style[b]||"dotted"===s.style[b]?this.addBorderBroken(A,s.color[b],s.style[b],s.width[b],b,e,x):this.addBorderSolid(A,s.color[b],f,e,x)}}}}addBorderSolid(t,e,s,i,r){t=this.svg("polygon",{points:t.map(([t,e])=>this.fixed(t-r)+","+this.fixed(e)).join(" "),stroke:"none"});e&&this.adaptor.setAttribute(t,"fill",e),s?this.adaptor.insert(t,s):this.adaptor.append(i,t)}addBorderBroken(t,e,s,i,r,a,n){const o="dotted"===s,h=i/2,[d,l,c,p]=[[h,-h,-h,-h],[-h,h,-h,-h],[h,h,-h,h],[h,h,h,-h]][r],[u,m]=t,g=u[0]+d-n,f=u[1]+l,x=m[0]+c-n,b=m[1]+p,A=Math.abs(r%2?b-f:x-g),B=o?Math.ceil(A/(2*i)):Math.ceil((A-i)/(4*i)),v=A/(4*B+1),y=this.svg("line",{x1:this.fixed(g),y1:this.fixed(f),x2:this.fixed(x),y2:this.fixed(b),"stroke-width":this.fixed(i),stroke:e,"stroke-linecap":o?"round":"square","stroke-dasharray":(o?[1,this.fixed(A/B-.002)]:[this.fixed(v),this.fixed(3*v)]).join(" ")}),k=this.adaptor,w=k.firstChild(a);w?k.insert(y,w):k.append(a,y)}handleAttributes(){const e=this.adaptor,s=this.node.attributes,i=s.getAllDefaults(),t=N.skipAttributes;for(const r of s.getExplicitNames())!1!==t[r]&&(r in i||t[r]||e.hasAttribute(this.dom[0],r))||this.dom.forEach(t=>e.setAttribute(t,r,s.getExplicit(r)));if(s.get("class"))for(const i of S(s.get("class")))this.dom.forEach(t=>e.addClass(t,i))}place(t,e,s=null){s||(t+=this.dx*this.bbox.rscale),(t||e)&&(s||(s=this.dom[0],e=this.handleId(e)),t=`translate(${this.fixed(t)},${this.fixed(e)})`,e=this.adaptor.getAttribute(s,"transform")||"",this.adaptor.setAttribute(s,"transform",t+(e?" "+e:"")))}handleId(t){if(!this.node.attributes||!this.node.attributes.get("id"))return t;const e=this.adaptor,{h:s,rscale:i}=this.getBBox(),r=e.childNodes(this.dom[0]);r.forEach(t=>e.remove(t));var a=this.svg("g",{"data-idbox":!0,transform:`translate(0,${this.fixed(-s)})`},r);return e.append(this.dom[0],this.svg("text",{"data-id-align":!0},[this.text("")])),e.append(this.dom[0],a),t+s*i}firstChild(t=this.dom[0]){const e=this.adaptor;let s=e.firstChild(t);return s=(s=s&&"text"===e.kind(s)&&e.getAttribute(s,"data-id-align")?e.firstChild(e.next(s)):s)&&"rect"===e.kind(s)&&e.getAttribute(s,"data-hitbox")?e.next(s):s}placeChar(t,e,s,i,r=null,a=!1){null===r&&(r=this.variant);var n=t.toString(16).toUpperCase(),[,,o,h]=this.getVariantChar(r,t);if(h.unknown)return this.utext+=String.fromCodePoint(t),a?0:this.addUtext(e,s,i,r);a=this.addUtext(e,s,i,r);if("p"in h){const t=h.p?"M"+h.p+"Z":"";return this.place(e+=a,s,this.adaptor.append(i,this.charNode(r,n,t))),o+a}if("c"in h){const t=this.adaptor.append(i,this.svg("g",{"data-c":n}));this.place(e+a,s,t),e=0;for(const i of this.unicodeChars(h.c,r))e+=this.placeChar(i,e,s,t,r);return e+a}return o}addUtext(t,e,s,i){var r=this.utext;if(!r)return 0;this.utext="";s=this.adaptor.append(s,this.jax.unknownText(r,i));return this.place(t,e,s),this.jax.measureTextNodeWithCache(s,r,i).w}charNode(t,e,s){return"none"!==this.jax.options.fontCache?this.useNode(t,e,s):this.pathNode(e,s)}pathNode(t,e){return this.svg("path",{"data-c":t,d:e})}useNode(t,e,s){var i=this.svg("use",{"data-c":e}),t="#"+this.jax.fontCache.cachePath(t,e,s);return this.adaptor.setAttribute(i,"href",t,this.jax.options.useXlink?kr:null),i}drawBBox(){const{w:t,h:e,d:s}=this.getOuterBBox(),i=((null==(a=null==(a=this.styleData)?void 0:a.border)?void 0:a.width)||[0,0,0,0])[3],r={style:{opacity:.25}};i&&(r.transform=`translate(${this.fixed(-i)}, 0)`);var a=this.svg("g",r,[this.svg("rect",{fill:"red",height:this.fixed(e),width:this.fixed(t)}),this.svg("rect",{fill:"green",height:this.fixed(s),width:this.fixed(t),y:this.fixed(-s)})]),n=this.dom[0]||this.parent.dom[0];this.adaptor.append(n,a)}html(t,e={},s=[]){return this.jax.html(t,e,s)}svg(t,e={},s=[]){return this.jax.svg(t,e,s)}text(t){return this.jax.text(t)}fixed(t,e=1){return this.jax.fixed(1e3*t,e)}}N.kind="unknown",N.borderFuzz=.005;const Ps=MathJax._.core.MmlTree.MmlNodes.math.MmlMath,Is=["url(data:application/x-font-woff;charset=utf-8;base64,","T1RUTwAJAIAAAwAQQ0ZGIGnFMZkAAARQAAAAlE9TLzJpUWOBAAABAAAAAGBjbWFwAAwAUwAABAQAAAAs","aGVhZCFRvpAAAACcAAAANmhoZWEC8AD9AAAA1AAAACRobXR4A+gAAAAABOQAAAAIbWF4cAACUAAAAAD4","AAAABm5hbWVNb8+2AAABYAAAAqNwb3N0AAMAAAAABDAAAAAgAAEAAAABAABVWOu4Xw889QADA+gAAAAA","3ym+2AAAAADfKb7YAAAAAAPoAAAAAAADAAIAAAAAAAAAAQAAAu79EgAAA+gAAAAAAAAAAQAAAAAAAAAA","AAAAAAAAAAIAAFAAAAIAAAADA+gB9AAFAAACigK7AAAAjAKKArsAAAHfADEBAgAAAAAAAAAAAAAAAAAA","AAEAAAAAAAAAAAAAAABYWFhYAEAAIAAgAu79EgAAAu4C7gAAAAEAAAAAAXcAAAAgACAAAAAAACIBngAB","AAAAAAAAAAEAQQABAAAAAAABAAsAAAABAAAAAAACAAcAIQABAAAAAAADABUAxgABAAAAAAAEABMANgAB","AAAAAAAFAAsApQABAAAAAAAGABIAbwABAAAAAAAHAAEAQQABAAAAAAAIAAEAQQABAAAAAAAJAAEAQQAB","AAAAAAAKAAEAQQABAAAAAAALAAEAQQABAAAAAAAMAAEAQQABAAAAAAANAAEAQQABAAAAAAAOAAEAQQAB","AAAAAAAQAAsAAAABAAAAAAARAAcAIQADAAEECQAAAAIAXwADAAEECQABABYACwADAAEECQACAA4AKAAD","AAEECQADACoA2wADAAEECQAEACYASQADAAEECQAFABYAsAADAAEECQAGACQAgQADAAEECQAHAAIAXwAD","AAEECQAIAAIAXwADAAEECQAJAAIAXwADAAEECQAKAAIAXwADAAEECQALAAIAXwADAAEECQAMAAIAXwAD","AAEECQANAAIAXwADAAEECQAOAAIAXwADAAEECQAQABYACwADAAEECQARAA4AKG1qeC1sbS16ZXJvAG0A","agB4AC0AbABtAC0AegBlAHIAb1JlZ3VsYXIAUgBlAGcAdQBsAGEAcm1qeC1sbS16ZXJvIFJlZ3VsYXIA","bQBqAHgALQBsAG0ALQB6AGUAcgBvACAAUgBlAGcAdQBsAGEAcm1qeC1sbS16ZXJvUmVndWxhcgBtAGoA","eAAtAGwAbQAtAHoAZQByAG8AUgBlAGcAdQBsAGEAclZlcnNpb24gMC4xAFYAZQByAHMAaQBvAG4AIAAw","AC4AMSA6bWp4LWxtLXplcm8gUmVndWxhcgAgADoAbQBqAHgALQBsAG0ALQB6AGUAcgBvACAAUgBlAGcA","dQBsAGEAcgAAAAABAAMAAQAAAAwABAAgAAAABAAEAAEAAAAg//8AAAAg////4QABAAAAAAADAAAAAAAA","AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAEAQABAQETbWp4LWxtLXplcm9SZWd1bGFyAAEBASf4GwD4","HAL4HQP4HgSLi/mC+nwFHQAAAIYPHQAAAIkRix0AAACUEgAFAQEMHyoxNlZlcnNpb24gMC4xbWp4LWxt","LXplcm8gUmVndWxhcm1qeC1sbS16ZXJvUmVndWxhcnNwYWNlAAAAAYsAAgEBAwaLDvp8DgAAAAAD6AAA",') format("woff")'].join(""),Rs=((T=class extends is(N){handleDisplay(){var[i,r]=this.getAlignShift();if("center"!==i&&this.adaptor.setAttribute(this.jax.container,"justify",i),this.bbox.pwidth===p.fullWidth){if(this.adaptor.setAttribute(this.jax.container,"width","full"),this.jax.table){let{L:t,w:e,R:s}=this.jax.table.getOuterBBox();"right"===i?s=Math.max(s||-r,-r):"left"===i?t=Math.max(t||r,r):"center"===i&&(e+=2*Math.abs(r)),this.jax.minwidth=Math.max(0,t+e+s)}}else this.jax.shift=r}toSVG(t){super.toSVG(t);const e=this.adaptor;"block"===this.node.attributes.get("display")&&(e.setAttribute(this.jax.container,"display","true"),this.handleDisplay())}setChildPWidths(t,e=null,s){return super.setChildPWidths(t,this.parent?e:this.metrics.containerWidth/this.jax.pxPerEm,!1)}}).kind=Ps.prototype.kind,T.styles={'mjx-container[jax="SVG"] mjx-break':{"white-space":"normal","line-height":"0","clip-path":"rect(0 0 0 0)","font-family":"MJX-ZERO ! important"},'mjx-break[size="0"]':{"letter-spacing":"-0.999em"},'mjx-break[size="1"]':{"letter-spacing":"-0.889em"},'mjx-break[size="2"]':{"letter-spacing":"-0.833em"},'mjx-break[size="3"]':{"letter-spacing":"-0.778em"},'mjx-break[size="4"]':{"letter-spacing":"-0.722em"},'mjx-break[size="5"]':{"letter-spacing":"-0.667em"},'mjx-container[jax="SVG"] mjx-break[newline]::before':{"white-space":"pre",content:'"\\A"'},'mjx-break[newline] + svg[width="0.054ex"]':{"margin-right":"-1px"},"mjx-break[prebreak]":{"letter-spacing":"-.999em"},"@font-face /* zero */":{"font-family":"MJX-ZERO",src:Is}},T),Fs=MathJax._.core.MmlTree.MmlNodes.mrow,Gs=Fs.MmlMrow,_s=Fs.MmlInferredMrow,Hs=((T=class extends fs(N){constructor(){super(...arguments),this.linebreakCount=0}toSVG(t){this.getBBox();var e=this.linebreakCount=this.isStack?0:this.breakCount;t=e||!this.node.isInferred?this.standardSvgNodes(t):this.getSvgNodes(t),this.addChildren(t),e&&this.placeLines(t)}getSvgNodes(t){var e;return this.dh&&(e=this.svg("g",{transform:`translate(0 ${this.fixed(this.dh)})`}),t=[this.adaptor.append(t[0],e)]),this.dom=t}placeLines(t){var e=this.lineBBox,s=this.jax.math.display;let i=this.dh;for(const a of t.keys()){var r=e[a];this.place(r.L||0,i,t[a]),i-=Math.max(.25,r.d)+(s?r.lineLeading:0)+Math.max(.75,(null==(r=e[a+1])?void 0:r.h)||0)}}createSvgNodes(t){var e=this.linebreakCount;if(!e)return super.createSvgNodes(t);const s=this.adaptor,i=this.node.isInferred?{"data-mjx-linestack":!0}:{"data-mml-node":this.node.kind},r=(this.dom=[s.append(t[0],this.svg("g",i))],this.dom=[s.append(this.handleHref(t)[0],this.dom[0])],Array(e));for(let t=0;t<=e;t++)r[t]=s.append(this.dom[0],this.svg("g",{"data-mjx-linebox":!0,"data-mjx-lineno":t}));return r}addChildren(e){let s=0,i=0;for(const o of this.childNodes){var r,a,n=o.breakCount;if(o.toSVG(e.slice(i,i+n+1)),o.dom){let t=0;for(const i of o.dom)i&&(r=t?0:o.dx,a=o.getLineBBox(t++),s+=(a.L+r)*a.rscale,this.place(s,0,i),s+=(a.w+a.R-r)*a.rscale),n&&(s=0);if(n){const e=o.getLineBBox(n);s+=(e.w+e.R)*e.rscale}}i+=n}}}).kind=Gs.prototype.kind,T),zs=((T=class extends xs(Hs){}).kind=_s.prototype.kind,T),Js=MathJax._.core.MmlTree.MmlNodes.mi.MmlMi,Qs=((T=class extends hs(N){}).kind=Js.prototype.kind,T),Xs=MathJax._.core.MmlTree.MmlNodes.mo.MmlMo;class Us extends h{static charOptions(t,e){return super.charOptions(t,e)}static addExtension(t,e=""){super.addExtension(t,e),n(this,"variantCacheIds",t.cacheIds)}}Us.OPTIONS=Object.assign(Object.assign({},h.OPTIONS),{dynamicPrefix:"./svg/dynamic"}),Us.JAX="SVG";(T=class extends us(N){toSVG(t){const e=this.node.attributes,s=e.get("symmetric")&&this.stretch.dir!==c.Horizontal,i=this.stretch.dir!==c.None,r=(i&&null===this.size&&this.getStretchedVariant([]),this.standardSvgNodes(t));if(1<r.length&&"duplicate"!==this.breakStyle){const t="after"===this.breakStyle?1:0;this.adaptor.remove(r[t]),r[t]=null}if(i&&this.size<0)this.stretchSvg();else{const t=s||e.get("largeop")?this.fixed(this.getCenterOffset()):"0",i=this.node.getProperty("mathaccent")?this.fixed(this.getAccentOffset()):"0";"0"===t&&"0"===i||(r[0]&&this.adaptor.setAttribute(r[0],"transform",`translate(${i} ${t})`),r[1]&&this.adaptor.setAttribute(r[1],"transform",`translate(${i} ${t})`)),r[0]&&this.addChildren([r[0]]),r[1]&&(this.multChar||this).addChildren([r[1]])}}stretchSvg(){var t=this.stretch.stretch,e=this.getStretchVariants(),s=this.getBBox();this.stretch.dir===c.Vertical?this.stretchVertical(t,e,s):this.stretchHorizontal(t,e,s)}getStretchVariants(){const t=this.stretch.c||this.getText().codePointAt(0),e=[];for(const s of this.stretch.stretch.keys())e[s]=this.font.getStretchVariant(t,s);return e}stretchVertical(t,e,s){var{h:i,d:r,w:a}=s,n=this.addTop(t[0],e[0],i,a),o=this.addBot(t[2],e[2],r,a);if(4===t.length){const[s,h]=this.addMidV(t[3],e[3],a);this.addExtV(t[1],e[1],i,-s,n,0,a),this.addExtV(t[1],e[1],-h,r,0,o,a)}else this.addExtV(t[1],e[1],i,r,n,o,a)}stretchHorizontal(t,e,s){var i=s.w,r=this.addLeft(t[0],e[0]),a=this.addRight(t[2],e[2],i);if(4===t.length){const[s,n]=this.addMidH(t[3],e[3],i),o=i/2;this.addExtH(t[1],e[1],o,r,o-s),this.addExtH(t[1],e[1],o,n-o,a,o)}else this.addExtH(t[1],e[1],i,r,a)}getChar(t,e){e=this.font.getChar(e,t)||[0,0,0,null];return[e[0],e[1],e[2],e[3]||{}]}addGlyph(t,e,s,i,r=null){if(r)return this.placeChar(t,s,i,r,e);if(this.dom[0]){const r=this.placeChar(t,s,i,this.dom[0],e);if(!this.dom[1])return r}return this.placeChar(t,s,i,this.dom[1],e)}addTop(t,e,s,i){if(!t)return 0;var[r,a,n]=this.getChar(t,e);return this.addGlyph(t,e,(i-n)/2,s-r),r+a}addExtV(t,e,s,i,r,a,n){if(t){r=Math.max(0,r-.1),a=Math.max(0,a-.1);const o=this.adaptor,[h,d,l]=this.getChar(t,e),c=s+i-r-a,p=1.5*c/(h+d),u=(p*(h-d)-c)/2;c<=0||(s=this.svg("svg",{width:this.fixed(l),height:this.fixed(c),y:this.fixed(a-i),x:this.fixed((n-l)/2),viewBox:[0,u,l,c].map(t=>this.fixed(t)).join(" ")}),this.addGlyph(t,e,0,0,s),r=o.lastChild(s),o.setAttribute(r,"transform",`scale(1,${this.jax.fixed(p)})`),this.dom[0]&&o.append(this.dom[0],s),this.dom[1]&&o.append(this.dom[1],this.dom[0]?o.clone(s):s))}}addBot(t,e,s,i){if(!t)return 0;var[r,a,n]=this.getChar(t,e);return this.addGlyph(t,e,(i-n)/2,a-s),r+a}addMidV(t,e,s){if(!t)return[0,0];var[i,r,a]=this.getChar(t,e),n=(r-i)/2+this.font.params.axis_height;return this.addGlyph(t,e,(s-a)/2,n),[i+n,r-n]}addLeft(t,e){return t?this.addGlyph(t,e,0,0):0}addExtH(t,e,s,i,r,a=0){if(t){r=Math.max(0,r-.1),i=Math.max(0,i-.1);const n=this.adaptor,[o,h,d]=this.getChar(t,e),l=s-i-r,c=o+h+.2,p=l/d*1.5,u=-(h+.1);l<=0||(s=this.svg("svg",{width:this.fixed(l),height:this.fixed(c),x:this.fixed(a+i),y:this.fixed(u),viewBox:[(p*d-l)/2,u,l,c].map(t=>this.fixed(t)).join(" ")}),this.addGlyph(t,e,0,0,s),r=n.lastChild(s),n.setAttribute(r,"transform",`scale(${this.jax.fixed(p)},1)`),this.dom[0]&&n.append(this.dom[0],s),this.dom[1]&&n.append(this.dom[1],this.dom[0]?n.clone(s):s))}}addRight(t,e,s){if(!t)return 0;var i=this.getChar(t,e)[2];return this.addGlyph(t,e,s-i,0)}addMidH(t,e,s){if(!t)return[0,0];var i=this.getChar(t,e)[2];return this.addGlyph(t,e,(s-i)/2,0),[(s-i)/2,(s+i)/2]}}).kind=Xs.prototype.kind;const Ks=T,qs=MathJax._.core.MmlTree.MmlNodes.mn.MmlMn,$s=((T=class extends ps(N){}).kind=qs.prototype.kind,T),Ys=MathJax._.core.MmlTree.MmlNodes.ms.MmlMs,Zs=((T=class extends bs(N){}).kind=Ys.prototype.kind,T),ti=MathJax._.core.MmlTree.MmlNodes.mtext.MmlMtext,ei=((T=class extends Ls(N){toSVG(r){if(this.breakCount){const t=this.standardSvgNodes(r),h=this.textNode.node,d=this.childNodes;for(const r of t.keys()){var a=[t[r]];let[e,s]=this.breakPoints[r-1]||[0,0];var[n,o]=this.breakPoints[r]||[d.length,0];let i=d[e].node.getText().split(/ /);if(e===n)h.setText(i.slice(s,o).join(" ")),this.textNode.toSVG(a);else{h.setText(i.slice(s).join(" ")),this.textNode.toSVG(a);let t=this.textNode.getBBox().w;for(;++e<n&&e<d.length;){const r=d[e];r.toSVG(a),r.dom&&r.place(t,0),t+=r.getBBox().w}e<d.length&&(i=d[e].node.getText().split(/ /),h.setText(i.slice(0,o).join(" ")),this.textNode.toSVG(a),this.textNode.place(t,0))}}}else super.toSVG(r)}}).kind=ti.prototype.kind,T),si=MathJax._.core.MmlTree.MmlNodes.merror.MmlMerror,ii=((T=class extends N{toSVG(t){var t=this.standardSvgNodes(t),{h:e,d:s,w:i}=this.getBBox(),i=(this.adaptor.append(this.dom[0],this.svg("rect",{"data-background":!0,width:this.fixed(i),height:this.fixed(e+s),y:this.fixed(-s)})),this.node.attributes.get("title"));i&&this.adaptor.append(this.dom[0],this.svg("title",{},[this.adaptor.text(i)])),this.addChildren(t)}}).kind=si.prototype.kind,T.styles={'g[data-mml-node="merror"] > g':{fill:"red",stroke:"red"},'g[data-mml-node="merror"] > rect[data-background]':{fill:"yellow",stroke:"none"}},T),ri=MathJax._.core.MmlTree.MmlNodes.mspace.MmlMspace,ai=((T=class extends As(N){}).kind=ri.prototype.kind,T),ni=MathJax._.core.MmlTree.MmlNodes.mpadded.MmlMpadded,oi=((T=class extends ms(N){toSVG(e){if(!this.toEmbellishedSVG(e)){let t=this.standardSvgNodes(e);var[,,,,,e,s,i,r]=this.getDimens(),a=this.node.attributes.get("data-align")||"left",s=s+r-(e<0&&"left"!==a?"center"===a?e/2:e:0);(s||i)&&(t=[this.adaptor.append(t[0],this.svg("g"))],this.place(s,i,t[0])),this.addChildren(t)}}}).kind=ni.prototype.kind,T),hi=MathJax._.core.MmlTree.MmlNodes.mphantom.MmlMphantom,di=((T=class extends N{toSVG(t){this.standardSvgNodes(t)}}).kind=hi.prototype.kind,T),li=MathJax._.core.MmlTree.MmlNodes.mfrac.MmlMfrac,ci=((T=class extends ns(N){toSVG(t){if(!this.toEmbellishedSVG(t)){this.standardSvgNodes(t);var{linethickness:e,bevelled:t}=this.node.attributes.getList("linethickness","bevelled"),s=this.isDisplay();if(t)this.makeBevelled(s);else{const t=this.length2em(String(e),.06);0===t?this.makeAtop(s):this.makeFraction(s,t)}}}makeFraction(t,e){const s=this.dom,{numalign:i,denomalign:r}=this.node.attributes.getList("numalign","denomalign"),[a,n]=this.childNodes,o=a.getOuterBBox(),h=n.getOuterBBox(),d=this.font.params,l=d.axis_height,c=this.node.getProperty("withDelims")?0:d.nulldelimiterspace,p=Math.max((o.L+o.w+o.R)*o.rscale,(h.L+h.w+h.R)*h.rscale),u=this.getAlignX(p,o,i)+.1+c,m=this.getAlignX(p,h,r)+.1+c,{T:g,u:f,v:x}=this.getTUV(t,e);a.toSVG(s),a.place(u,l+g+Math.max(o.d*o.rscale,f)),n.toSVG(s),n.place(m,l-g-Math.max(h.h*h.rscale,x)),this.adaptor.append(s[0],this.svg("rect",{width:this.fixed(p+.2),height:this.fixed(e),x:this.fixed(c),y:this.fixed(l-e/2)}))}makeAtop(t){const e=this.dom,{numalign:s,denomalign:i}=this.node.attributes.getList("numalign","denomalign"),[r,a]=this.childNodes,n=r.getOuterBBox(),o=a.getOuterBBox(),h=this.font.params,d=this.node.getProperty("withDelims")?0:h.nulldelimiterspace,l=Math.max((n.L+n.w+n.R)*n.rscale,(o.L+o.w+o.R)*o.rscale),c=this.getAlignX(l,n,s)+d,p=this.getAlignX(l,o,i)+d,{u,v:m}=this.getUVQ(t);r.toSVG(e),r.place(c,u),a.toSVG(e),a.place(p,-m)}makeBevelled(t){const e=this.dom,[s,i]=this.childNodes,{u:r,v:a,delta:n,nbox:o,dbox:h}=this.getBevelData(t),d=(o.L+o.w+o.R)*o.rscale;s.toSVG(e),this.bevel.toSVG(e),i.toSVG(e),s.place(o.L*o.rscale,r),this.bevel.place(d-n/2,0),i.place(d+this.bevel.getOuterBBox().w+h.L*h.rscale-n,a)}}).kind=li.prototype.kind,T),pi=MathJax._.core.MmlTree.MmlNodes.msqrt.MmlMsqrt,ui=((T=class extends Bs(N){constructor(){super(...arguments),this.dx=0}addRoot(t,e,s,i){return 0}toSVG(t){const e=this.surd,s=this.childNodes[this.base],i=this.root?this.childNodes[this.root]:null,r=e.getBBox(),a=s.getOuterBBox(),n=this.getPQ(r)[1],o=this.font.params.surd_height*this.bbox.scale,h=a.h+n+o,d=this.standardSvgNodes(t);e.toSVG(d);var t=this.addRoot(d,i,r,h),l=this.adaptor.append(d[0],this.svg("g"));s.toSVG([l]),e.place(t,h-r.h),s.place(t+r.w,0),this.adaptor.append(d[d.length-1],this.svg("rect",{width:this.fixed(a.w),height:this.fixed(o),x:this.fixed(t+r.w),y:this.fixed(h-o)}))}}).kind=pi.prototype.kind,T),mi=MathJax._.core.MmlTree.MmlNodes.mroot.MmlMroot,gi=((T=class extends gs(ui){addRoot(t,e,s,i){e.toSVG(t);var[t,s,i]=this.getRootDimens(s,i),r=e.getOuterBBox();return e.place(i*r.rscale,s),t}}).kind=mi.prototype.kind,T),fi=MathJax._.core.MmlTree.MmlNodes.mfenced.MmlMfenced,xi=((T=class extends as(N){toSVG(t){t=this.standardSvgNodes(t);this.setChildrenParent(this.mrow),this.mrow.toSVG(t),this.setChildrenParent(this)}setChildrenParent(t){for(const e of this.childNodes)e.parent=t}}).kind=fi.prototype.kind,T),bi=((T=class extends Es(N){toSVG(t){var e,s,i;this.toEmbellishedSVG(t)||(t=this.standardSvgNodes(t),e=this.getBaseWidth(),[s,i]=this.getOffset(),this.baseChild.toSVG(t),this.baseChild.place(0,0),this.scriptChild.toSVG([t[t.length-1]]),this.scriptChild.place(e+s,i))}}).kind="scriptbase",T),Ai=MathJax._.core.MmlTree.MmlNodes.msubsup,Bi=Ai.MmlMsubsup,vi=Ai.MmlMsub,yi=Ai.MmlMsup,ki=((T=class extends vs(bi){}).kind=vi.prototype.kind,T),wi=((T=class extends ys(bi){}).kind=yi.prototype.kind,T),Si=((T=class extends ks(bi){toSVG(t){if(!this.toEmbellishedSVG(t)){const e=this.standardSvgNodes(t),[s,i,r]=[this.baseChild,this.supChild,this.subChild],a=this.getBaseWidth(),n=this.getAdjustedIc(),[o,h]=this.getUVQ();s.toSVG(e);t=[e[e.length-1]];i.toSVG(t),r.toSVG(t),s.place(0,0),r.place(a+(this.baseIsChar?0:n),h),i.place(a+n,o)}}}).kind=Bi.prototype.kind,T),Ci=MathJax._.core.MmlTree.MmlNodes.munderover,Mi=Ci.MmlMunderover,Ni=Ci.MmlMunder,Li=Ci.MmlMover,Di=((T=class extends Ws(ki){toSVG(t){if(!this.toEmbellishedSVG(t))if(this.hasMovableLimits())super.toSVG(t);else{const i=this.standardSvgNodes(t),[r,a]=[this.baseChild,this.scriptChild],[n,o]=[r.getOuterBBox(),a.getOuterBBox()];r.toSVG(i),a.toSVG(i);var t=this.isLineBelow?0:this.getDelta(this.scriptChild,!0),e=this.getUnderKV(n,o)[1],[t,s]=this.getDeltaW([n,o],[0,-t]);r.place(t,0),a.place(s,e)}}}).kind=Ni.prototype.kind,T),Oi=((T=class extends Ts(wi){toSVG(t){if(!this.toEmbellishedSVG(t))if(this.hasMovableLimits())super.toSVG(t);else{const i=this.standardSvgNodes(t),[r,a]=[this.baseChild,this.scriptChild],[n,o]=[r.getOuterBBox(),a.getOuterBBox()];r.toSVG(i),a.toSVG(i);var t=this.isLineAbove?0:this.getDelta(this.scriptChild),e=this.getOverKU(n,o)[1],[t,s]=this.getDeltaW([n,o],[0,t]);r.place(t,0),a.place(s,e)}}}).kind=Li.prototype.kind,T),Wi=((T=class extends js(Si){toSVG(t){if(!this.toEmbellishedSVG(t))if(this.hasMovableLimits())super.toSVG(t);else{const a=this.standardSvgNodes(t),[n,o,h]=[this.baseChild,this.overChild,this.underChild],[d,l,c]=[n.getOuterBBox(),o.getOuterBBox(),h.getOuterBBox()];n.toSVG(a),h.toSVG(a),o.toSVG(a);var t=this.getDelta(this.overChild),e=this.getDelta(this.underChild,!0),s=this.getOverKU(d,l)[1],i=this.getUnderKV(d,c)[1],[e,t,r]=this.getDeltaW([d,c,l],[0,this.isLineBelow?0:-e,this.isLineAbove?0:t]);n.place(e,0),h.place(t,i),o.place(r,s)}}}).kind=Mi.prototype.kind,T),Ti=MathJax._.core.MmlTree.MmlNodes.mmultiscripts,ji=Ti.MmlMmultiscripts;function Ei(t){return{left:(t,e)=>0,center:(t,e)=>(e-t)/2,right:(t,e)=>e-t}[t]||((t,e)=>0)}Ti.MmlMprescripts,Ti.MmlNone;(T=class extends cs(Si){toSVG(e){if(!this.toEmbellishedSVG(e)){var e=this.standardSvgNodes(e),s=this.scriptData,i=this.node.getProperty("scriptalign")||"right left",[i,r]=S(i+" "+i),[a,n]=this.getCombinedUV();let t=0;s.numPrescripts&&(t=this.addScripts(this.dom[0],this.font.params.scriptspace,a,n,this.firstPrescript,s.numPrescripts,i));const o=this.baseChild;o.toSVG(e),o.place(t,0),this.breakCount&&(t=0),t+=o.getLineBBox(o.breakCount).w,s.numScripts&&this.addScripts(this.dom[this.dom.length-1],t,a,n,1,s.numScripts,r)}}addScripts(t,e,s,i,r,a,n){const o=this.adaptor,h=Ei(n),d=o.append(t,this.svg("g")),l=o.append(t,this.svg("g"));this.place(e,s,d),this.place(e,i,l);var c=r+2*a;let p=0;for(;r<c;){const[t,e]=[this.childNodes[r++],this.childNodes[r++]],[s,i]=[t.getOuterBBox(),e.getOuterBBox()],[a,n]=[s.rscale,i.rscale],o=Math.max(s.w*a,i.w*n);t.toSVG([l]),e.toSVG([d]),t.place(p+h(s.w*a,o),0),e.place(p+h(i.w*n,o),0),p+=o}return e+p}}).kind=ji.prototype.kind;const Vi=T,Pi=MathJax._.core.MmlTree.MmlNodes.mtable.MmlMtable,Ii=((T=class extends Ms(N){placeRows(e){var s=this.node.attributes.get("equalrows"),{H:i,D:r}=this.getTableData(),a=this.getEqualRowHeight(),n=this.getRowHalfSpacing(),o=[this.fLine,...this.rLines,this.fLine];let h=this.getBBox().h-o[0];for(let t=0;t<this.numRows;t++){const d=this.childNodes[t];[d.H,d.D]=this.getRowHD(s,a,i[t],r[t]),[d.tSpace,d.bSpace]=[n[t],n[t+1]],[d.tLine,d.bLine]=[o[t],o[t+1]],d.toSVG([e]),d.place(0,h-n[t]-d.H),h-=n[t]+d.H+d.D+n[t+1]+o[t+1]}}getRowHD(t,e,s,i){return t?[(e+s-i)/2,(e-s+i)/2]:[s,i]}handleColor(){super.handleColor();var t=this.firstChild();t&&this.adaptor.setAttribute(t,"width",this.fixed(this.getWidth()))}handleColumnLines(s){if("none"!==this.node.attributes.get("columnlines")){var i=this.getColumnAttributes("columnlines");if(i){var r=this.getColumnHalfSpacing(),a=this.cLines,n=this.getComputedWidths();let e=this.fLine;for(let t=0;t<i.length;t++)e+=r[t]+n[t]+r[t+1],"none"!==i[t]&&this.adaptor.append(s,this.makeVLine(e,i[t],a[t])),e+=a[t]}}}handleRowLines(s){if("none"!==this.node.attributes.get("rowlines")){var i=this.getRowAttributes("rowlines");if(i){var r=this.node.attributes.get("equalrows"),{H:a,D:n}=this.getTableData(),o=this.getEqualRowHeight(),h=this.getRowHalfSpacing(),d=this.rLines;let e=this.getBBox().h-this.fLine;for(let t=0;t<i.length;t++){var[l,c]=this.getRowHD(r,o,a[t],n[t]);e-=h[t]+l+c+h[t+1],"none"!==i[t]&&this.adaptor.append(s,this.makeHLine(e,i[t],d[t])),e-=d[t]}}}}handleFrame(t){var e,s,i,r;this.frame&&this.fLine&&({h:e,d:s,w:i}=this.getBBox(),r=this.node.attributes.get("frame"),this.adaptor.append(t,this.makeFrame(i,e,s,r)))}handlePWidth(t){if(!this.pWidth)return 0;const{w:e,L:s,R:i}=this.getBBox(),r=s+this.pWidth+i,a=this.getAlignShift()[0],n=Math.max(this.isTop?r:0,this.container.getWrapWidth(this.containerI))-s-i,o=e-(this.pWidth>n?n:this.pWidth),h="left"===a?0:"right"===a?o:o/2;if(h){const e=this.svg("g",{},this.adaptor.childNodes(t));this.place(h,0,e),this.adaptor.append(t,e)}return h}lineClass(t){return"mjx-"+t}makeFrame(t,e,s,i){var r=this.fLine;return this.svg("rect",this.setLineThickness(r,i,{"data-frame":!0,class:this.lineClass(i),width:this.fixed(t-r),height:this.fixed(e+s-r),x:this.fixed(r/2),y:this.fixed(r/2-s)}))}makeVLine(t,e,s){var{h:i,d:r}=this.getBBox(),a="dotted"===e?s/2:0,t=this.fixed(t+s/2);return this.svg("line",this.setLineThickness(s,e,{"data-line":"v",class:this.lineClass(e),x1:t,y1:this.fixed(a-r),x2:t,y2:this.fixed(i-a)}))}makeHLine(t,e,s){var i=this.getBBox().w,r="dotted"===e?s/2:0,t=this.fixed(t-s/2);return this.svg("line",this.setLineThickness(s,e,{"data-line":"h",class:this.lineClass(e),x1:this.fixed(r),y1:t,x2:this.fixed(i-r),y2:t}))}setLineThickness(t,e,s){return.07!==t&&(s["stroke-thickness"]=this.fixed(t),"solid"!==e&&(s["stroke-dasharray"]=("dotted"===e?"0,":"")+this.fixed(2*t))),s}handleLabels(t,e,s){var i,r;this.hasLabels&&(i=this.labels,r=this.node.attributes.get("side"),this.spaceLabels(),this.isTop?this.topTable(t,i,r):this.subTable(t,i,r,s))}spaceLabels(){const e=this.adaptor,t=this.getBBox().h,s=this.getTableData().L,i=this.getRowHalfSpacing();let r=t-this.fLine,a=e.firstChild(this.labels);for(let t=0;t<this.numRows;t++){const o=this.childNodes[t];var n;o.node.isKind("mlabeledtr")?(n=o.childNodes[0],r-=i[t]+o.H,o.placeCell(n,{x:0,y:r,w:s,lSpace:0,rSpace:0,lLine:0,rLine:0}),r-=o.D+i[t+1]+this.rLines[t],a=e.next(a)):r-=i[t]+o.H+o.D+i[t+1]+this.rLines[t]}}topTable(t,e,s){const i=this.adaptor,{h:r,d:a,w:n,L:o,R:h}=this.getBBox(),d=o+(this.pWidth||n)+h,l=this.getTableData().L,[,c,p]=this.getPadAlignShift(s),u=p+("right"===c?-d:"center"===c?-d/2:0)+o,m="matrix(1 0 0 -1 0 0)",g=`scale(${this.jax.fixed(1e3*this.font.params.x_height/this.metrics.ex,2)})`,f=`translate(0 ${this.fixed(r)}) ${m} `+g,x=this.svg("svg",{"data-table":!0,preserveAspectRatio:"left"===c?"xMinYMid":"right"===c?"xMaxYMid":"xMidYMid",viewBox:`${this.fixed(-u)} ${this.fixed(-r)} 1 `+this.fixed(r+a)},[this.svg("g",{transform:m},i.childNodes(t))]);e=this.svg("svg",{"data-labels":!0,preserveAspectRatio:"left"===s?"xMinYMid":"xMaxYMid",viewBox:["left"===s?0:this.fixed(l),this.fixed(-r),1,this.fixed(r+a)].join(" ")},[e]),i.append(t,this.svg("g",{transform:f},[x,e])),this.place(-o,0,t)}subTable(t,e,s,i){const r=this.adaptor,{w:a,L:n,R:o}=this.getBBox(),h=n+(this.pWidth||a)+o,d=this.getTableData().L,l=this.getAlignShift()[0],c=Math.max(h,this.container.getWrapWidth(this.containerI));this.place("left"===s?("left"===l?0:"right"===l?h-c+i:(h-c)/2+i)-n:("left"===l?c:"right"===l?h+i:(c+h)/2+i)-n-d,0,e),r.append(t,e)}constructor(t,e,s=null){super(t,e,s);const i={"data-labels":!0};this.isTop&&(i.transform="matrix(1 0 0 -1 0 0)"),this.labels=this.svg("g",i)}toSVG(t){var e=this.standardSvgNodes(t)[0],s=(this.placeRows(e),this.handleColumnLines(e),this.handleRowLines(e),this.handleFrame(e),this.handlePWidth(e));this.handleLabels(e,t[0],s)}}).kind=Pi.prototype.kind,T.styles={'g[data-mml-node="mtable"] > line[data-line], svg[data-table] > g > line[data-line]':{"stroke-width":"70px",fill:"none"},'g[data-mml-node="mtable"] > rect[data-frame], svg[data-table] > g > rect[data-frame]':{"stroke-width":"70px",fill:"none"},'g[data-mml-node="mtable"] > .mjx-dashed, svg[data-table] > g > .mjx-dashed':{"stroke-dasharray":"140"},'g[data-mml-node="mtable"] > .mjx-dotted, svg[data-table] > g > .mjx-dotted':{"stroke-linecap":"round","stroke-dasharray":"0,140"},'g[data-mml-node="mtable"] > g > svg':{overflow:"visible"}},T),Ri=MathJax._.core.MmlTree.MmlNodes.mtr,Fi=Ri.MmlMtr,Gi=Ri.MmlMlabeledtr,_i=((T=class extends Ds(N){placeCell(t,e){var{x:e,y:s,lSpace:i,w:r,rSpace:a,lLine:n,rLine:o}=e,h=1/this.getBBox().rscale,[d,l]=[this.H*h,this.D*h],[h,c]=[this.tSpace*h,this.bSpace*h],[e,s]=t.placeCell(e+i,s,r,d,l),r=i+r+a;return t.placeColor(-(e+i+n/2),-(l+c+s),r+(n+o)/2,d+l+h+c),r+o}placeCells(e){const t=this.parent,s=t.getColumnHalfSpacing(),i=[t.fLine,...t.cLines,t.fLine],r=t.getComputedWidths(),a=1/this.getBBox().rscale;let n=i[0];for(let t=0;t<this.numCells;t++){const o=this.getChild(t);o.toSVG(e),n+=this.placeCell(o,{x:n,y:0,lSpace:s[t]*a,rSpace:s[t+1]*a,w:r[t]*a,lLine:i[t]*a,rLine:i[t+1]*a})}}placeColor(){const t=1/this.getBBox().rscale,e=this.adaptor,s=this.firstChild();var i,r,a,n,o,h;s&&"rect"===e.kind(s)&&e.getAttribute(s,"data-bgcolor")&&([i,r]=[this.tLine/2*t,this.bLine/2*t],[a,n]=[this.tSpace*t,this.bSpace*t],[o,h]=[this.H*t,this.D*t],e.setAttribute(s,"y",this.fixed(-(h+n+r))),e.setAttribute(s,"width",this.fixed(this.parent.getWidth()*t)),e.setAttribute(s,"height",this.fixed(i+a+o+h+n+r)))}toSVG(t){t=this.standardSvgNodes(t);this.placeCells(t),this.placeColor()}}).kind=Fi.prototype.kind,T),Hi=((T=class extends Os(_i){toSVG(t){super.toSVG(t);const e=this.childNodes[0];e&&e.toSVG([this.parent.labels])}}).kind=Gi.prototype.kind,T),zi=MathJax._.core.MmlTree.MmlNodes.mtd.MmlMtd,Ji=((T=class extends Ns(N){placeCell(t,e,s,i,r){var a=this.getBBox(),n=Math.max(a.h,.75),o=Math.max(a.d,.25),h=this.node.attributes.get("columnalign"),d=this.node.attributes.get("rowalign"),s=this.getAlignX(s,a,h),a=this.getAlignY(i,r,n,o,d);return this.place(t+s,e+a),[s,a]}placeColor(t,e,s,i){const r=this.adaptor,a=this.firstChild();a&&"rect"===r.kind(a)&&r.getAttribute(a,"data-bgcolor")&&(r.setAttribute(a,"x",this.fixed(t)),r.setAttribute(a,"y",this.fixed(e)),r.setAttribute(a,"width",this.fixed(s)),r.setAttribute(a,"height",this.fixed(i)))}}).kind=zi.prototype.kind,T),Qi=MathJax._.core.MmlTree.MmlNodes.maction.MmlMaction,Xi=((T=class extends ss(N){setEventHandler(e,s,t=null){(t?[t]:this.dom).forEach(t=>t.addEventListener(e,s))}Px(t){return this.px(t)}toSVG(t){if(!this.toEmbellishedSVG(t)){const e=this.standardSvgNodes(t),a=this.selected;let r=0;this.dom.forEach(t=>{var{h:e,d:s,w:i}=a.getLineBBox(r++);this.adaptor.append(t,this.svg("rect",{width:this.fixed(i),height:this.fixed(e+s),x:1===r?this.fixed(-this.dx):0,y:this.fixed(-s),fill:"none","pointer-events":"all"}))}),a.toSVG(e);t=a.getOuterBBox();a.dom&&a.place(t.L*t.rscale,0),this.action(this,this.data)}}}).kind=Qi.prototype.kind,T.styles={'[jax="SVG"] mjx-tool':{display:"inline-block",position:"relative",width:0,height:0},'[jax="SVG"] mjx-tool > mjx-tip':{position:"absolute",top:0,left:0},"mjx-tool > mjx-tip":{display:"inline-block","line-height":0,padding:".2em",border:"1px solid #888","background-color":"#F8F8F8",color:"black","box-shadow":"2px 2px 5px #AAAAAA"},'g[data-mml-node="maction"][data-toggle]':{cursor:"pointer"},"mjx-status":{display:"block",position:"fixed",left:"1em",bottom:"1em","min-width":"25%",padding:".2em .4em",border:"1px solid #888","font-size":"90%","background-color":"#F8F8F8",color:"black"}},T.actions=new Map([["toggle",[(e,t)=>{e.dom.forEach(t=>{e.adaptor.setAttribute(t,"data-toggle",e.node.attributes.get("selection"))});const s=e.factory.jax.math,i=e.factory.jax.document,r=e.node;e.setEventHandler("click",t=>{s.end.node||(s.start.node=s.end.node=s.typesetRoot,s.start.n=s.end.n=0),r.nextToggleSelection(),s.rerender(i,r.attributes.get("data-maction-id")?d.ENRICHED:d.RERENDER),t.stopPropagation()})},{}]],["tooltip",[(i,s)=>{const r=i.childNodes[1];if(r)for(const a of i.dom){var t=i.firstChild(a);if(r.node.isKind("mtext")){const s=r.node.getText();i.adaptor.insert(i.svg("title",{},[i.text(s)]),t)}else{const r=i.adaptor,n=i.jax.container,e=i.node.factory.create("math",{},[i.childNodes[1].node]),o=i.html("mjx-tool",{},[i.html("mjx-tip")]),h=r.append(t,i.svg("foreignObject",{style:{display:"none"}},[o]));i.jax.processMath(i.jax.factory.wrap(e),r.firstChild(o)),i.childNodes[1].node.parent=i.node,i.setEventHandler("mouseover",t=>{s.stopTimers(a,s),s.hoverTimer.set(a,setTimeout(()=>{r.setStyle(o,"left","0"),r.setStyle(o,"top","0"),r.append(n,o);var t=r.nodeBBox(o),e=r.nodeBBox(a),s=(e.right-t.left)/i.metrics.em+i.tipDx,e=(e.bottom-t.bottom)/i.metrics.em+i.tipDy;r.setStyle(o,"left",i.Px(s)),r.setStyle(o,"top",i.Px(e))},s.postDelay)),t.stopPropagation()},a),i.setEventHandler("mouseout",t=>{s.stopTimers(a,s);var e=setTimeout(()=>r.append(h,o),s.clearDelay);s.clearTimer.set(a,e),t.stopPropagation()},a)}}},es]],["statusline",[(e,s)=>{const t=e.childNodes[1];if(t&&t.node.isKind("mtext")){const i=e.adaptor,r=t.node.getText();e.dom.forEach(t=>i.setAttribute(t,"data-statusline",r)),e.setEventHandler("mouseover",t=>{if(null===s.status){const t=i.body(i.document);s.status=i.append(t,e.html("mjx-status",{},[e.text(r)]))}t.stopPropagation()}),e.setEventHandler("mouseout",t=>{s.status&&(i.remove(s.status),s.status=null),t.stopPropagation()})}},{status:null}]]]),T),Ui=MathJax._.core.MmlTree.MmlNodes.menclose.MmlMenclose,Ki={top:(t,e,s,i)=>[0,t-i,s,t-i],right:(t,e,s,i)=>[s-i,-e,s-i,t],bottom:(t,e,s,i)=>[0,i-e,s,i-e],left:(t,e,s,i)=>[i,-e,i,t],vertical:(t,e,s,i)=>[s/2,t,s/2,-e],horizontal:(t,e,s,i)=>[0,(t-e)/2,s,(t-e)/2],up:(t,e,s,i)=>[i,i-e,s-i,t-i],down:(t,e,s,i)=>[i,t-i,s-i,i-e]},L=function(t,e,s=""){var{h:i,d:r,w:a}=t.getBBox(),n=t.thickness/2;return qi(Ki[e](i,r,a,n),t,s)},qi=function(t,e,s){return s&&(e=e.getOffset(s))&&("X"===s?(t[0]-=e,t[2]-=e):(t[1]-=e,t[3]-=e)),t},$i=function(i,r=""){return(t,e)=>{var s=t.line(L(t,i,r));t.adaptor.append(t.dom[0],s)}},Yi=function(s){return _e((t,e)=>{t.adaptor.append(t.dom[0],t.line(L(t,s)))})(s)},Zi=function(t,s,i){return He((t,e)=>{t.adaptor.append(t.dom[0],t.line(L(t,s))),t.adaptor.append(t.dom[0],t.line(L(t,i)))})(t,s,i)},tr=function(s){return ze(t=>(t,e)=>{t.adaptor.append(t.dom[0],t.line(L(t,s)))})(s)},D=function(t){return Je((t,e)=>{t.adaptor.append(t.dom[0],e)})(t)},O=function(t){return Qe((t,e)=>{t.adaptor.append(t.dom[0],e)})(t)},er=((T=class extends rs(N){line(t){var[t,e,s,i]=t;return this.svg("line",{x1:this.fixed(t),y1:this.fixed(e),x2:this.fixed(s),y2:this.fixed(i),"stroke-width":this.fixed(this.thickness)})}box(t,e,s,i=0){const r=this.thickness,a={x:this.fixed(r/2),y:this.fixed(r/2-s),width:this.fixed(t-r),height:this.fixed(e+s-r),fill:"none","stroke-width":this.fixed(r)};return i&&(a.rx=this.fixed(i)),this.svg("rect",a)}ellipse(t,e,s){var i=this.thickness;return this.svg("ellipse",{rx:this.fixed((t-i)/2),ry:this.fixed((e+s-i)/2),cx:this.fixed(t/2),cy:this.fixed((e-s)/2),fill:"none","stroke-width":this.fixed(i)})}path(t,...e){return this.svg("path",{d:e.map(t=>"string"==typeof t?t:this.fixed(t)).join(" "),style:{"stroke-width":this.fixed(this.thickness)},"stroke-linecap":"round","stroke-linejoin":t,fill:"none"})}fill(...t){return this.svg("path",{d:t.map(t=>"string"==typeof t?t:this.fixed(t)).join(" ")})}arrow(t,e,s,i="",r=0){const{w:a,h:n,d:o}=this.getBBox(),h=(t-a)/2,d=(n-o)/2,l=this.thickness,c=l/2,[p,u,m]=[l*this.arrowhead.x,l*this.arrowhead.y,l*this.arrowhead.dx],g=s?this.fill("M",a+h,d,"l",-(p+m),u,"l",m,c-u,"L",p-h,d+c,"l",m,u-c,"l",-(p+m),-u,"l",p+m,-u,"l",-m,u-c,"L",a+h-p,d-c,"l",-m,c-u,"Z"):this.fill("M",a+h,d,"l",-(p+m),u,"l",m,c-u,"L",-h,d+c,"l",0,-l,"L",a+h-p,d-c,"l",-m,c-u,"Z"),f=[];if(r&&f.push("X"===i?`translate(${this.fixed(-r)} 0)`:`translate(0 ${this.fixed(r)})`),e){const t=this.jax.fixed(180*-e/Math.PI);f.push(`rotate(${t} ${this.fixed(a/2)} ${this.fixed(d)})`)}return f.length&&this.adaptor.setAttribute(g,"transform",f.join(" ")),g}toSVG(t){const e=this.standardSvgNodes(t),s=this.getBBoxExtenders()[3],i={};0<s&&(i.transform="translate("+this.fixed(s)+", 0)");t=this.adaptor.append(e[0],this.svg("g",i));this.renderChild?this.renderChild(this,t):(this.childNodes[0].toSVG([t]),this.childNodes[0].place(0,0));for(const t of Object.keys(this.notations)){const s=this.notations[t];s.renderChild||s.renderer(this,e[0])}}}).kind=Ui.prototype.kind,T.notations=new Map([Yi("top"),Yi("right"),Yi("bottom"),Yi("left"),Zi("actuarial","top","right"),Zi("madruwb","bottom","right"),tr("up"),tr("down"),["horizontalstrike",{renderer:$i("horizontal","Y"),bbox:t=>[0,t.padding,0,t.padding]}],["verticalstrike",{renderer:$i("vertical","X"),bbox:t=>[t.padding,0,t.padding,0]}],["box",{renderer:(t,e)=>{var{w:s,h:i,d:r}=t.getBBox();t.adaptor.append(t.dom[0],t.box(s,i,r))},bbox:v,border:Ve,remove:"left right top bottom"}],["roundedbox",{renderer:(t,e)=>{var{w:s,h:i,d:r}=t.getBBox(),a=t.thickness+t.padding;t.adaptor.append(t.dom[0],t.box(s,i,r,a))},bbox:v}],["circle",{renderer:(t,e)=>{var{w:s,h:i,d:r}=t.getBBox();t.adaptor.append(t.dom[0],t.ellipse(s,i,r))},bbox:v}],["phasorangle",{renderer:(t,e)=>{var{w:s,h:i,d:r}=t.getBBox(),a=t.getArgMod(1.75*t.padding,i+r)[0],n=t.thickness/2,i=i+r,a=Math.cos(a);t.adaptor.append(t.dom[0],t.path("mitre","M",s,n-r,"L",n+a*n,n-r,"L",a*i+n,i-r-n))},bbox:t=>{var e=t.padding/2,t=t.thickness;return[2*e,e,e+t,3*e+t]},border:t=>[0,0,t.thickness,0],remove:"bottom"}],O("up"),O("down"),O("left"),O("right"),O("updown"),O("leftright"),D("updiagonal"),D("northeast"),D("southeast"),D("northwest"),D("southwest"),D("northeastsouthwest"),D("northwestsoutheast"),["longdiv",{renderer:(t,e)=>{var{w:s,h:i,d:r}=t.getBBox(),a=t.thickness/2,n=t.padding;t.adaptor.append(t.dom[0],t.path("round","M",a,a-r,"a",n-a/2,(i+r)/2-4*a,0,"0,1",0,i+r-2*a,"L",s-a,i-a))},bbox:t=>{var e=t.padding,t=t.thickness;return[e+t,e,e,2*e+t/2]}}],["radical",{renderer:(t,e)=>{t.msqrt.toSVG([e]);var s=t.sqrtTRBL()[3];t.place(-s,0,e)},init:t=>{t.msqrt=t.createMsqrt(t.childNodes[0])},bbox:t=>t.sqrtTRBL(),renderChild:!0}]]),T),sr=MathJax._.core.MmlTree.MmlNodes.semantics,ir=sr.MmlSemantics,rr=sr.MmlAnnotationXML,ar=sr.MmlAnnotation,nr=((T=class extends Vs(N){toSVG(t){this.toEmbellishedSVG(t)||(t=this.standardSvgNodes(t),this.childNodes.length&&this.childNodes[0].toSVG(t))}}).kind=ir.prototype.kind,T),or=((T=class extends N{toSVG(t){super.toSVG(t)}computeBBox(){return this.bbox}}).kind=ar.prototype.kind,T),hr=((T=class extends N{}).kind=rr.prototype.kind,T.styles={"foreignObject[data-mjx-xml]":{"font-family":"initial","line-height":"normal",overflow:"visible"}},T),dr=(T=ts(N),(E=class extends T{toSVG(t){var e=this.jax.math.metrics,e=e.em*e.scale*this.rscale,s=this.fixed(1/e,3),{w:i,h:r,d:a}=this.getBBox();this.dom=[this.adaptor.append(t[0],this.svg("foreignObject",{"data-mjx-xml":!0,y:this.jax.fixed(-r*e)+"px",width:this.jax.fixed(i*e)+"px",height:this.jax.fixed((r+a)*e)+"px",transform:`scale(${s}) matrix(1 0 0 -1 0 0)`},[this.getHTML()]))]}addHDW(t,e){t=this.html("mjx-html-holder",{style:e},[t]);var{h:s,d:i,w:r}=this.getBBox(),a=this.metrics.scale;return e.height=this.em((s+i)*a),e.width=this.em(r*a),e["vertical-align"]=this.em(-i*a),delete e["font-size"],delete e["font-family"],t}}).kind=oe.prototype.kind,E.styles=Object.assign({"foreignObject[data-mjx-html]":{overflow:"visible"}},T.styles),E),lr=MathJax._.core.MmlTree.MmlNodes.mglyph.MmlMglyph,cr=((T=class extends os(N){toSVG(t){var e,s,i,t=this.standardSvgNodes(t);this.charWrapper?this.charWrapper.toSVG(t):({src:e,alt:i}=this.node.attributes.getList("src","alt"),s=this.fixed(this.height),s={width:this.fixed(this.width),height:s,transform:"translate(0 "+this.fixed(this.height+(this.valign||0))+") matrix(1 0 0 -1 0 0)",preserveAspectRatio:"none","aria-label":i,href:e},i=this.svg("image",s),this.adaptor.append(t[0],i))}}).kind=lr.prototype.kind,T),pr=MathJax._.core.MmlTree.MmlNodes.TeXAtom.TeXAtom,ur=((E=class extends Ye(N){toSVG(t){super.toSVG(t),this.adaptor.setAttribute(this.dom[0],"data-mjx-texclass",ae[this.node.texClass])}}).kind=pr.prototype.kind,E),mr=((T=class extends Ze(N){static addStyles(t,e){t.addStyles({'mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c]':{"stroke-width":e.options.blacker}})}toSVG(e){const s=this.adaptor,i=this.parent.variant,r=this.node.getText();if(0!==r.length)if("-explicitFont"===i)this.dom=[s.append(e[0],this.jax.unknownText(r,i))];else{var a=this.remappedText(r,i);1<this.parent.childNodes.length?e=this.dom=[s.append(e[0],this.svg("g",{"data-mml-node":"text"}))]:this.dom=e;let t=0;for(const s of a)t+=this.placeChar(s,t,0,e[0],i,!0);this.addUtext(t,0,e[0],i)}}}).kind=ne.prototype.kind,T),gr=MathJax._.core.MmlTree.MmlNodes.HtmlNode.HtmlNode,fr=((E=class extends dr{}).kind=gr.prototype.kind,E),xr={[Rs.kind]:Rs,[Hs.kind]:Hs,[zs.kind]:zs,[Qs.kind]:Qs,[Ks.kind]:Ks,[$s.kind]:$s,[Zs.kind]:Zs,[ei.kind]:ei,[ii.kind]:ii,[ai.kind]:ai,[oi.kind]:oi,[di.kind]:di,[ci.kind]:ci,[ui.kind]:ui,[gi.kind]:gi,[xi.kind]:xi,[ki.kind]:ki,[wi.kind]:wi,[Si.kind]:Si,[Di.kind]:Di,[Oi.kind]:Oi,[Wi.kind]:Wi,[Vi.kind]:Vi,[Ii.kind]:Ii,[_i.kind]:_i,[Hi.kind]:Hi,[Ji.kind]:Ji,[Xi.kind]:Xi,[er.kind]:er,[nr.kind]:nr,[or.kind]:or,[hr.kind]:hr,[dr.kind]:dr,[cr.kind]:cr,[ur.kind]:ur,[mr.kind]:mr,[fr.kind]:fr,[N.kind]:N};class br extends $e{}br.defaultNodes=xr;class Ar{constructor(t){this.cache=new Map,this.defs=null,this.localID="",this.nextID=0,this.jax=t}cachePath(t,e,s){t="MJX-"+this.localID+(this.jax.font.getVariant(t).cacheID||"")+"-"+e;return this.cache.has(t)||(this.cache.set(t,s),this.jax.adaptor.append(this.defs,this.jax.svg("path",{id:t,d:s}))),t}clearLocalID(){this.localID=""}useLocalID(t=null){this.localID=(null==t?++this.nextID:t)+(""===t?"":"-")}clearCache(){this.cache=new Map,this.defs=this.jax.svg("defs")}getCache(){return this.defs}}const Br="mathjax-newcm",vr=null,yr="http://www.w3.org/2000/svg",kr="http://www.w3.org/1999/xlink";class W extends b{get forceInlineBreaks(){return!0}constructor(t={}){super(t,br,vr),this.minwidth=0,this.shift=0,this.svgStyles=null,this.fontCache=new Ar(this),this.options.matchFontHeight=!0}initialize(){"global"===this.options.fontCache&&this.fontCache.clearCache()}clearFontCache(){this.fontCache.clearCache()}reset(){this.clearFontCache()}escaped(t,e){return this.setDocument(e),this.html("span",{},[this.text(t.math)])}styleSheet(t){if(this.svgStyles)return this.svgStyles;t=this.svgStyles=super.styleSheet(t);return this.adaptor.setAttribute(t,"id",W.STYLESHEETID),t}insertStyles(t){this.svgStyles&&this.adaptor.insertRules(this.svgStyles,new Me(t).getStyleRules())}pageElements(t){return"global"!==this.options.fontCache||this.findCache(t)?null:this.svg("svg",{xmlns:yr,id:W.FONTCACHEID,style:{display:"none"}},[this.fontCache.getCache()])}findCache(t){const e=this.adaptor,s=e.tags(e.body(t.document),"svg");for(let t=s.length-1;0<=t;t--)if(this.adaptor.getAttribute(s[t],"id")===W.FONTCACHEID)return!0;return!1}getInitialScale(){return 1}processMath(t,e){var s=this.container,[e,i]=(this.container=e,this.createRoot(t));this.typesetSvg(t,e,i),t.node.getProperty("process-breaks")&&this.handleInlineBreaks(t,e,i),this.container=s}createRoot(t){const{w:e,h:s,d:i,pwidth:r}=t.getOuterBBox(),[a,n]=this.createSVG(s,i,e);if(r){const e=this.adaptor,i=(e.setStyle(a,"min-width",e.getStyle(a,"width")),e.setAttribute(a,"width",r),e.removeAttribute(a,"viewBox"),this.fixed(t.metrics.ex/(1e3*this.font.params.x_height),6));e.setAttribute(n,"transform",`scale(${i},-${i}) translate(0, ${this.fixed(1e3*-s,1)})`)}return[a,n]}createSVG(t,e,s){const i=this.math.metrics.em/1e3,r=Math.max(s,i),a=Math.max(t+e,i),n=this.svg("g",{stroke:"currentColor",fill:"currentColor","stroke-width":0,transform:"scale(1,-1)"}),o=this.adaptor,h=o.append(this.container,this.svg("svg",{xmlns:yr,width:this.ex(r),height:this.ex(a),role:"img",focusable:!1,style:{"vertical-align":this.ex(-e)},viewBox:[0,this.fixed(1e3*-t,1),this.fixed(1e3*r,1),this.fixed(1e3*a,1)].join(" ")},[n]));return.001===r&&(o.setAttribute(h,"preserveAspectRatio","xMidYMid slice"),s<0&&o.setStyle(this.container,"margin-right",this.ex(s))),"none"!==this.options.fontCache&&this.options.useXlink&&o.setAttribute(h,"xmlns:xlink",kr),[h,n]}typesetSvg(t,e,s){const i=this.adaptor;if(this.minwidth=this.shift=0,"local"===this.options.fontCache&&(this.fontCache.clearCache(),this.fontCache.useLocalID(this.options.localID),i.insert(this.fontCache.getCache(),s)),t.toSVG([s]),this.fontCache.clearLocalID(),this.minwidth)i.setStyle(e,"minWidth",this.ex(this.minwidth)),i.setStyle(this.container,"minWidth",this.ex(this.minwidth));else if(this.shift){const t=i.getAttribute(this.container,"justify")||"center";this.setIndent(e,t,this.shift)}}setIndent(t,e,s){"center"!==e&&"left"!==e||this.adaptor.setStyle(t,"margin-left",this.ex(s)),"center"!==e&&"right"!==e||this.adaptor.setStyle(t,"margin-right",this.ex(-s))}handleInlineBreaks(e,s,i){const r=e.childNodes[0].breakCount;if(r){const n=this.adaptor,o=n.firstChild(i),h=n.childNodes(n.firstChild(o)),d=e.childNodes[0].lineBBox;n.remove(i);for(let t=0;t<=r;t++){const r=d[t]||e.childNodes[0].getLineBBox(t),{h:l,d:c,w:p}=r,[u,m]=e.childNodes[0].getBreakNode(r),g=u.getBBox()["scale"],[f,x]=this.createSVG(l*g,c*g,p*g),b=n.append(x,n.clone(o,!1));for(const e of n.childNodes(h[t]))n.append(b,e);n.insert(f,s);var a=!(!m||!m.node.getProperty("forcebreak"));if(a&&"after"===m.node.attributes.get("linebreakstyle")){const e=u.parent.node.childIndex(u.node)+1,s=u.parent.childNodes[e],i=s?s.getLineBBox(0).originalL*g:0;i&&this.addInlineBreak(f,i,a)}else if(a||t){const e=u&&t?u.getLineBBox(0).originalL*g:0;!e&&a||this.addInlineBreak(f,e,a||!!u.node.getProperty("forcebreak"))}}n.childNodes(s).length&&n.append(n.firstChild(n.parent(s)),n.firstChild(s)),n.remove(s)}}addInlineBreak(t,e,s){const i=this.adaptor,r=x(e);s||i.insert(i.node("mjx-break",{prebreak:!0},[i.text(" ")]),t),i.insert(i.node("mjx-break",s?qe[r]?{size:qe[r]}:{style:"letter-spacing: "+x(e-1)}:{newline:!0},[i.text(" ")]),t)}ex(t){return t/=this.font.params.x_height,Math.abs(t)<.001?"0":t.toFixed(3).replace(/\.?0+$/,"")+"ex"}svg(t,e={},s=[]){return this.html(t,e,s,yr)}unknownText(t,e){const s=this.math.metrics,i=this.font.params.x_height/s.ex*s.em*1e3,r=this.svg("text",{"data-variant":e,transform:"scale(1,-1)","font-size":this.fixed(i,1)+"px"},[this.text(t)]),a=this.adaptor;if("-explicitFont"!==e){const s=Ue(t);if(1!==s.length||s[0]<119808||120831<s[0]){const[t,s,i]=this.font.getCssFont(e);a.setAttribute(r,"font-family",t),s&&a.setAttribute(r,"font-style","italic"),i&&a.setAttribute(r,"font-weight","bold")}}return r}measureTextNode(t){const e=this.adaptor,s=(t=e.clone(t),e.removeAttribute(t,"transform"),this.fixed(1e3*this.font.params.x_height,1)),i=this.svg("svg",{position:"absolute",visibility:"hidden",width:"1ex",height:"1ex",top:0,left:0,viewBox:[0,0,s,s].join(" ")},[t]);e.append(e.body(e.document),i);t=e.nodeSize(t,1e3,!0)[0];return e.remove(i),{w:t,h:.75,d:.2}}}W.NAME="SVG",W.OPTIONS=Object.assign(Object.assign({},b.OPTIONS),{blacker:3,fontCache:"local",localID:null,useXlink:!0}),W.commonStyles=Object.assign(Object.assign({},b.commonStyles),{'mjx-container[jax="SVG"]':{direction:"ltr","white-space":"nowrap"},'mjx-container[jax="SVG"] > svg':{overflow:"visible","min-height":"1px","min-width":"1px"},'mjx-container[jax="SVG"] > svg a':{fill:"blue",stroke:"blue"},"rect[sre-highlighter-added]:has(+ .mjx-selected)":{stroke:"black","stroke-width":"80px"}}),W.FONTCACHEID="MJX-SVG-global-cache",W.STYLESHEETID="MJX-SVG-styles",MathJax.loader&&MathJax.loader.checkVersion("output/svg","4.0.0","output"),se({_:{output:{common_ts:F,common:{Direction:V,FontData:P,LineBBox:I,LinebreakVisitor:R,Notation:G,Wrapper:_,WrapperFactory:H,Wrappers:{TeXAtom:z,TextNode:J,XmlNode:Q,maction:X,math:U,menclose:K,mfenced:q,mfrac:$,mglyph:Y,mi:Z,mmultiscripts:tt,mn:et,mo:st,mpadded:it,mroot:rt,mrow:at,ms:nt,mspace:ot,msqrt:ht,msubsup:dt,mtable:lt,mtd:ct,mtext:pt,mtr:ut,munderover:mt,scriptbase:gt,semantics:ft}},svg_ts:te,svg:{DefaultFont:Zt,FontCache:Yt,FontData:yt,Notation:Ht,Wrapper:xt,WrapperFactory:$t,Wrappers_ts:qt,Wrappers:{HtmlNode:Kt,TeXAtom:Xt,TextNode:Ut,maction:_t,math:At,menclose:zt,merror:Mt,mfenced:jt,mfrac:Ot,mglyph:Qt,mi:vt,mmultiscripts:It,mn:wt,mo:kt,mpadded:Lt,mphantom:Dt,mroot:Tt,mrow:Bt,ms:St,mspace:Nt,msqrt:Wt,msubsup:Vt,mtable:Rt,mtd:Gt,mtext:Ct,mtr:Ft,munderover:Pt,scriptbase:Et,semantics:Jt,zero:bt}}}}});const wr=MathJax._.components.package,Sr=(wr.PackageError,wr.Package),Cr=MathJax._.util.context,Mr=Cr.hasWindow,Nr=(Cr.context,Mr?"https://cdn.jsdelivr.net/npm/@mathjax/%%FONT%%-font":"@mathjax/%%FONT%%-font");var T="svg",Lr=W,Dr=Br,j=vr;if(MathJax.loader){ee(MathJax.config,T,MathJax.config.output||{});let t=MathJax.config[T],e=t.font||t.fontData||Dr;if("string"!=typeof e&&(t.fontData=e,t.font=e=e.NAME),"["!==e.charAt(0)){const Dr=t.fontPath||Nr,j=e.match(/^[a-z]+:/)?(e.match(/[^/:\\]*$/)||[T])[0]:e;ee(MathJax.config.loader,"paths",{[j]:j===e?Dr.replace(/%%FONT%%/g,e):e}),e=`[${j}]`}var E=e.substring(1,e.length-1);if(E===Dr&&j){const Lr=MathJax.config.loader[e+"/"+T]?.extraLoads;Lr&&MathJax.loader.addPackageData("output/"+T,{extraLoads:Lr}),se({_:{output:{fonts:{[E]:{[T+"_ts"]:{[j.NAME+"Font"]:j}}}}}}),ee(MathJax,"config",{output:{font:e},[T]:{fontData:j,dynamicPrefix:e+`/${T}/dynamic`}}),"chtml"===T&&ee(MathJax.config,T,{fontURL:Sr.resolvePath(e+`/${T}/woff2`,!1)})}else MathJax.loader.addPackageData("output/"+T,{extraLoads:[e+"/"+T]})}MathJax.startup&&(MathJax.startup.registerConstructor(T,Lr),MathJax.startup.useOutput(T))})();
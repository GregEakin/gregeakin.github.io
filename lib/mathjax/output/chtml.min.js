(()=>{"use strict";var i={d:(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},H={},R=(i.r(H),i.d(H,{DIRECTION:()=>u,H:()=>ge,V:()=>ue}),{}),E=(i.r(R),i.d(R,{DIRECTION:()=>u,FontData:()=>h,NOSTRETCH:()=>xe,mergeOptions:()=>r}),{}),F=(i.r(E),i.d(E,{LineBBox:()=>o}),{}),I=(i.r(F),i.d(F,{LinebreakVisitor:()=>Be,Linebreaks:()=>ye,NOBREAK:()=>l}),{}),_=(i.r(I),i.d(I,{CommonOutputJax:()=>g,FONTPATH:()=>Ne}),{}),V=(i.r(_),i.d(_,{CommonWrapperFactory:()=>Te}),{}),z=(i.r(V),i.d(V,{CommonWrapper:()=>y,SPACE:()=>We}),{}),U=(i.r(z),i.d(z,{ChtmlWrapper:()=>B,FONTSIZE:()=>Pe}),{}),J=(i.r(U),i.d(U,{CommonMathMixin:()=>He}),{}),K=(i.r(J),i.d(J,{ChtmlMath:()=>Ee}),{}),q=(i.r(K),i.d(K,{CommonMiMixin:()=>Fe}),{}),X=(i.r(q),i.d(q,{ChtmlMi:()=>_e}),{}),$=(i.r(X),i.d(X,{CommonMoMixin:()=>Ve}),{}),Q=(i.r($),i.d($,{Usage:()=>Ue}),{}),G=(i.r(Q),i.d(Q,{AddCSS:()=>function(t,e){for(const s of Object.keys(e)){const i=parseInt(s),a=e[i];a.c&&(a.c=a.c.replace(/\\[0-9A-F]+/gi,t=>String.fromCodePoint(parseInt(t.substring(1),16)))),Object.assign(h.charOptions(t,i),a)}return t},ChtmlFontData:()=>k,DIRECTION:()=>u,FontData:()=>h,NOSTRETCH:()=>xe,mergeOptions:()=>r}),{}),Y=(i.r(G),i.d(G,{ChtmlMo:()=>Je}),{}),Z=(i.r(Y),i.d(Y,{CommonMnMixin:()=>Ke}),{}),tt=(i.r(Z),i.d(Z,{ChtmlMn:()=>Xe}),{}),et=(i.r(tt),i.d(tt,{CommonMsMixin:()=>$e}),{}),st=(i.r(et),i.d(et,{ChtmlMs:()=>Ge}),{}),it=(i.r(st),i.d(st,{CommonMtextMixin:()=>Ye}),{}),at=(i.r(it),i.d(it,{ChtmlMtext:()=>ts}),{}),rt=(i.r(at),i.d(at,{CommonMspaceMixin:()=>es}),{}),nt=(i.r(rt),i.d(rt,{ChtmlMspace:()=>is}),{}),ot=(i.r(nt),i.d(nt,{CommonMpaddedMixin:()=>as}),{}),ht=(i.r(ot),i.d(ot,{ChtmlMpadded:()=>ns}),{}),lt=(i.r(ht),i.d(ht,{ARROWDX:()=>w,ARROWX:()=>C,ARROWY:()=>v,CommonArrow:()=>Bs,CommonBorder:()=>xs,CommonBorder2:()=>fs,CommonDiagonalArrow:()=>ys,CommonDiagonalStrike:()=>bs,PADDING:()=>S,SOLID:()=>j,THICKNESS:()=>M,arrowBBox:()=>gs,arrowBBoxHD:()=>cs,arrowBBoxW:()=>ms,arrowDef:()=>ps,arrowHead:()=>N,diagonalArrowDef:()=>us,fullBBox:()=>hs,fullBorder:()=>ds,fullPadding:()=>ls,sideIndex:()=>L,sideNames:()=>os}),{}),dt=(i.r(lt),i.d(lt,{CommonMencloseMixin:()=>ks}),{}),ct=(i.r(dt),i.d(dt,{ARROWDX:()=>w,ARROWX:()=>C,ARROWY:()=>v,Arrow:()=>A,Border:()=>vs,Border2:()=>Ms,CommonArrow:()=>Bs,CommonBorder:()=>xs,CommonBorder2:()=>fs,CommonDiagonalArrow:()=>ys,CommonDiagonalStrike:()=>bs,DiagonalArrow:()=>T,DiagonalStrike:()=>Ss,PADDING:()=>S,RenderElement:()=>ws,SOLID:()=>j,THICKNESS:()=>M,arrowBBox:()=>gs,arrowBBoxHD:()=>cs,arrowBBoxW:()=>ms,arrowDef:()=>ps,arrowHead:()=>N,diagonalArrowDef:()=>us,fullBBox:()=>hs,fullBorder:()=>ds,fullPadding:()=>ls,sideIndex:()=>L,sideNames:()=>os}),{}),mt=(i.r(ct),i.d(ct,{ChtmlMenclose:()=>Ns}),{}),pt=(i.r(mt),i.d(mt,{CommonInferredMrowMixin:()=>As,CommonMrowMixin:()=>Ts}),{}),ut=(i.r(pt),i.d(pt,{ChtmlInferredMrow:()=>Hs,ChtmlMrow:()=>Ps}),{}),gt=(i.r(ut),i.d(ut,{CommonMfencedMixin:()=>Rs}),{}),xt=(i.r(gt),i.d(gt,{ChtmlMfenced:()=>Fs}),{}),ft=(i.r(xt),i.d(xt,{CommonMfracMixin:()=>Is}),{}),bt=(i.r(ft),i.d(ft,{ChtmlMfrac:()=>Vs}),{}),yt=(i.r(bt),i.d(bt,{CommonMsqrtMixin:()=>zs}),{}),Bt=(i.r(yt),i.d(yt,{ChtmlMsqrt:()=>Js}),{}),kt=(i.r(Bt),i.d(Bt,{CommonMrootMixin:()=>Ks}),{}),Ct=(i.r(kt),i.d(kt,{ChtmlMroot:()=>Xs}),{}),wt=(i.r(Ct),i.d(Ct,{CommonMsubMixin:()=>$s,CommonMsubsupMixin:()=>Gs,CommonMsupMixin:()=>Qs}),{}),vt=(i.r(wt),i.d(wt,{CommonScriptbaseMixin:()=>Ys}),{}),Mt=(i.r(vt),i.d(vt,{ChtmlScriptbase:()=>Zs}),{}),St=(i.r(Mt),i.d(Mt,{ChtmlMsub:()=>ai,ChtmlMsubsup:()=>ni,ChtmlMsup:()=>ri}),{}),jt=(i.r(St),i.d(St,{CommonMoverMixin:()=>hi,CommonMunderMixin:()=>oi,CommonMunderoverMixin:()=>li}),{}),Lt=(i.r(jt),i.d(jt,{ChtmlMover:()=>gi,ChtmlMunder:()=>ui,ChtmlMunderover:()=>xi}),{}),Nt=(i.r(Lt),i.d(Lt,{CommonMmultiscriptsMixin:()=>yi,NextScript:()=>fi,ScriptNames:()=>bi}),{}),Tt=(i.r(Nt),i.d(Nt,{ChtmlMmultiscripts:()=>Ci}),{}),At=(i.r(Tt),i.d(Tt,{BREAK_BELOW:()=>Mi,CommonMtableMixin:()=>Si}),{}),Dt=(i.r(At),i.d(At,{ChtmlMtable:()=>Li}),{}),Ot=(i.r(Dt),i.d(Dt,{CommonMlabeledtrMixin:()=>Ti,CommonMtrMixin:()=>Ni}),{}),Wt=(i.r(Ot),i.d(Ot,{ChtmlMlabeledtr:()=>Pi,ChtmlMtr:()=>Wi}),{}),Pt=(i.r(Wt),i.d(Wt,{CommonMtdMixin:()=>Hi}),{}),Ht=(i.r(Pt),i.d(Pt,{ChtmlMtd:()=>Ei}),{}),Rt=(i.r(Ht),i.d(Ht,{CommonMactionMixin:()=>Ii,TooltipData:()=>Fi}),{}),Et=(i.r(Rt),i.d(Rt,{ChtmlMaction:()=>Vi}),{}),Ft=(i.r(Et),i.d(Et,{CommonMglyphMixin:()=>zi}),{}),It=(i.r(Ft),i.d(Ft,{ChtmlMglyph:()=>Ji}),{}),_t=(i.r(It),i.d(It,{CommonSemanticsMixin:()=>Ki}),{}),Vt=(i.r(_t),i.d(_t,{CommonXmlNodeMixin:()=>qi}),{}),zt=(i.r(Vt),i.d(Vt,{ChtmlAnnotation:()=>Zi,ChtmlAnnotationXML:()=>ta,ChtmlSemantics:()=>Yi,ChtmlXmlNode:()=>ea}),{}),Ut=(i.r(zt),i.d(zt,{CommonTeXAtomMixin:()=>sa}),{}),Jt=(i.r(Ut),i.d(Ut,{ChtmlTeXAtom:()=>aa}),{}),Kt=(i.r(Jt),i.d(Jt,{CommonTextNodeMixin:()=>ra}),{}),qt=(i.r(Kt),i.d(Kt,{ChtmlTextNode:()=>na}),{}),Xt=(i.r(qt),i.d(qt,{ChtmlHtmlNode:()=>ha}),{}),$t=(i.r(Xt),i.d(Xt,{ChtmlWrappers:()=>la}),{}),Qt=(i.r($t),i.d($t,{ChtmlWrapperFactory:()=>da}),{}),s=(i.r(Qt),i.d(Qt,{DefaultFont:()=>ma,fontName:()=>ca}),{}),Gt=(i.r(s),i.d(s,{CHTML:()=>O}),{});i.r(Gt),i.d(Gt,{AddFontIds:()=>function(t,e){const s={};for(const r of Object.keys(t)){var i=t[r];for(const t of Object.keys(i)){s[t]||(s[t]={});var a=i[t];if(r)for(const t of Object.keys(a)){const s=a[parseInt(t)];s[3]||(s[3]={}),e?s[3].ff=e+"-"+r:s[3].f=r}Object.assign(s[t],a)}}return s}});const t=("undefined"!=typeof window?window:global).MathJax._.components.global,Yt=(t.GLOBAL,t.isObject,t.combineConfig,t.combineDefaults),Zt=t.combineWithMathJax,te=(t.MathJax,MathJax._.core.OutputJax.AbstractOutputJax),ee=MathJax._.core.MathItem,se=(ee.protoItem,ee.AbstractMathItem,ee.STATE),e=(ee.newState,MathJax._.core.MmlTree.MmlNode),d=e.TEXCLASS,ie=e.TEXCLASSNAMES,ae=(e.MATHVARIANTS,e.indentAttributes,e.AbstractMmlNode,e.AbstractMmlTokenNode,e.AbstractMmlLayoutNode,e.AbstractMmlBaseNode,e.AbstractMmlEmptyNode,e.TextNode),re=e.XMLNode,ne=MathJax._.mathjax.mathjax,a=MathJax._.util.Options,oe=(a.isObject,a.APPEND,a.REMOVE,a.OPTIONS,a.Expandable,a.expandable,a.makeArray,a.keys,a.copy,a.insert,a.defaultOptions),he=a.userOptions,le=(a.selectOptions,a.selectOptionsFromKeys,a.separateOptions),de=a.lookup,ce=MathJax._.util.AsyncLoad.asyncLoad,me=MathJax._.util.Retries,pe=(me.handleRetriesFor,me.retryAfter),u={None:"",Vertical:"v",Horizontal:"h"},ue=u.Vertical,ge=u.Horizontal;const xe={dir:u.None};function r(t,e,s){return(s?oe(t,{[e]:s}):t)[e]}class h{get CLASS(){return this.constructor}static charOptions(t,e){const s=t[e];if(Array.isArray(s))return 3===s.length&&(s[3]={}),s[3];throw Error("Character data hasn't been loaded for 0x"+e.toString(16).toUpperCase())}static defineDynamicFiles(t,i=""){const a={};return(t||[]).forEach(([e,t,s])=>{a[e]={extension:i,file:e,variants:t,delimiters:s||[],promise:null,failed:!1,setup:t=>{a[e].failed=!0}}}),a}static dynamicSetup(t,e,s,i={},a=null){const r=t?this.dynamicExtensions.get(t):null;(t?r.files:this.dynamicFiles)[e].setup=e=>{Object.keys(s).forEach(t=>e.defineChars(t,s[t])),e.defineDelimiters(i),t&&this.adjustDelimiters(e.delimiters,Object.keys(i),r.sizeN,r.stretchN),a&&e.addDynamicFontCss(a)}}static adjustDelimiters(s,t,i,a){t.forEach(t=>{const e=s[parseInt(t)];"dir"in e&&(e.variants&&(e.variants=this.adjustArrayIndices(e.variants,i)),e.stretchv&&(e.stretchv=this.adjustArrayIndices(e.stretchv,a)))})}static adjustArrayIndices(t,e){return t.map(t=>t<0?e-1-t:t)}static addExtension(t,e=""){const s={name:t.name,prefix:e||`[${t.name}-extension]/${this.JAX.toLowerCase()}/dynamic`,files:this.defineDynamicFiles(t.ranges,t.name),sizeN:this.defaultSizeVariants.length,stretchN:this.defaultStretchVariants.length};this.dynamicExtensions.set(t.name,s);for(const[e,s]of[["options","OPTIONS"],["variants","defaultVariants"],["variantSmp","VariantSmp"],["cssFonts","defaultCssFonts"],["accentMap","defaultAccentMap"],["moMap","defaultMoMap"],["mnMap","defaultMnMap"],["parameters","defaultParams"],["chars","defaultChars"],["sizeVariants","defaultSizeVariants"],["stretchVariants","defaultStretchVariants"]])r(this,s,t[e]);t.delimiters&&(Object.assign(this.defaultDelimiters,t.delimiters),this.adjustDelimiters(this.defaultDelimiters,Object.keys(t.delimiters),s.sizeN,s.stretchN))}constructor(t=null){this.variant={},this.delimiters={},this.cssFontMap={},this.cssFontPrefix="",this.remapChars={},this.skewIcFactor=.75;const e=this.CLASS;this.options=he(oe({},e.OPTIONS),t),this.params=Object.assign({},e.defaultParams),this.sizeVariants=[...e.defaultSizeVariants],this.stretchVariants=[...e.defaultStretchVariants],this.defineCssFonts(e.defaultCssFonts),this.cssFamilyPrefix=e.defaultCssFamilyPrefix,this.createVariants(e.defaultVariants),this.defineDelimiters(e.defaultDelimiters),Object.keys(e.defaultChars).forEach(t=>this.defineChars(t,e.defaultChars[t])),this.defineRemap("accent",e.defaultAccentMap),this.defineRemap("mo",e.defaultMoMap),this.defineRemap("mn",e.defaultMnMap),this.defineDynamicCharacters(e.dynamicFiles),e.dynamicExtensions.forEach(t=>this.defineDynamicCharacters(t.files))}setOptions(t){oe(this.options,t)}addExtension(t,e=""){var s=this.constructor.JAX.toLowerCase(),s={name:t.name,prefix:e||`[${t.name}-extension]/${s}/dynamic`,files:this.CLASS.defineDynamicFiles(t.ranges,e),sizeN:this.sizeVariants.length,stretchN:this.stretchVariants.length};this.CLASS.dynamicExtensions.set(t.name,s),oe(this.options,t.options||{}),oe(this.params,t.parameters||{}),r(this,"sizeVariants",t.sizeVariants),r(this,"stretchVariants",t.stretchVariants),r(this.constructor,"VariantSmp",t.variantSmp),this.defineCssFonts(r({cssFonts:{}},"cssFonts",t.cssFonts)),this.createVariants(r({variants:[]},"variants",t.variants)),t.delimiters&&(this.defineDelimiters(r({delimiters:{}},"delimiters",t.delimiters)),this.CLASS.adjustDelimiters(this.delimiters,Object.keys(t.delimiters),s.sizeN,s.stretchN));for(const e of Object.keys(t.chars||{}))this.defineChars(e,t.chars[e]);return this.defineRemap("accent",t.accentMap),this.defineRemap("mo",t.moMap),this.defineRemap("mn",t.mnMap),t.ranges&&this.defineDynamicCharacters(s.files),[]}get styles(){return this._styles}set styles(t){this._styles=t}createVariant(t,e=null,s=null){const i={linked:[],chars:Object.create(e?this.variant[e].chars:{})};this.variant[s]&&(Object.assign(i.chars,this.variant[s].chars),this.variant[s].linked.push(i.chars),i.chars=Object.create(i.chars)),this.remapSmpChars(i.chars,t),this.variant[t]=i}remapSmpChars(e,t){const s=this.CLASS;let i=s.VariantSmp[t];if(i="string"==typeof i?s.VariantSmp[i]:i){var a=s.SmpRemap,r=[null,null,s.SmpRemapGreekU,s.SmpRemapGreekL];for(const[t,n,o]of s.SmpRanges){const s=i[t];if(s){for(let t=n;t<=o;t++)if(930!==t){const i=s+t-n;e[t]=this.smpChar(a[i]||i)}if(r[t])for(const i of Object.keys(r[t]).map(t=>parseInt(t)))e[i]=this.smpChar(s+r[t][i])}}const n=i[5]||{};for(const t of Object.keys(n))e[t]=this.smpChar(i[5][t])}}smpChar(t){return[,,,{smp:t}]}createVariants(t){for(const e of t)this.createVariant(e[0],e[1],e[2])}defineChars(t,e){var s=this.variant[t];Object.assign(s.chars,e);for(const t of s.linked)Object.assign(t,e)}defineCssFonts(t){Object.assign(this.cssFontMap,t);for(const e of Object.keys(t))"unknown"===this.cssFontMap[e][0]&&(this.cssFontMap[e][0]=this.options.unknownFamily)}defineDelimiters(t){Object.assign(this.delimiters,t)}defineRemap(t,e){e&&(Object.hasOwn(this.remapChars,t)||(this.remapChars[t]={}),Object.assign(this.remapChars[t],e))}defineDynamicCharacters(t){for(const s of Object.keys(t)){var e=t[s];for(const t of Object.keys(e.variants))this.defineChars(t,this.flattenRanges(e.variants[t],e));this.defineDelimiters(this.flattenRanges(e.delimiters,e))}}flattenRanges(t,e){const s={};for(const i of t)if(Array.isArray(i))for(let t=i[0];t<=i[1];t++)s[t]=e;else s[i]=e;return s}dynamicFileName(t){var e=t.extension?this.CLASS.dynamicExtensions.get(t.extension).prefix:this.options.dynamicPrefix;return t.file.match(/^(?:[/[]|[a-z]+:\/\/|[a-z]:)/i)?t.file:e+"/"+t.file.replace(/(\.js)?$/,".js")}loadDynamicFile(e){return t=this,h=function*(){return e.failed?Promise.reject(new Error(`dynamic file '${e.file}' failed to load`)):(e.promise||(e.promise=ce(this.dynamicFileName(e)).catch(t=>{e.failed=!0,console.warn(t)})),e.promise.then(()=>e.setup(this)))},new(o=(o=n=void 0)||Promise)(function(s,e){function i(t){try{r(h.next(t))}catch(t){e(t)}}function a(t){try{r(h.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?s(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(i,a)}r((h=h.apply(t,n||[])).next())});var t,n,o,h}loadDynamicFiles(){const e=this.CLASS.dynamicFiles,t=Object.keys(e).map(t=>this.loadDynamicFile(e[t]));for(const e of this.CLASS.dynamicExtensions.values())t.push(...Object.keys(e.files).map(t=>this.loadDynamicFile(e.files[t])));return Promise.all(t)}loadDynamicFilesSync(){if(!ne.asyncIsSynchronous)throw Error("MathJax(loadDynamicFilesSync): mathjax.asyncLoad must be specified and synchronous\n    Try importing #js/../components/require.mjs and #js/util/asyncLoad/node.js");const e=this.CLASS.dynamicFiles;Object.keys(e).forEach(t=>this.loadDynamicFileSync(e[t]));for(const e of this.CLASS.dynamicExtensions.values())Object.keys(e.files).forEach(t=>this.loadDynamicFileSync(e.files[t]))}loadDynamicFileSync(e){if(!e.promise){e.promise=Promise.resolve();try{ne.asyncLoad(this.dynamicFileName(e))}catch(t){e.failed=!0,console.warn(t)}e.setup(this)}}addDynamicFontCss(t,e){}getDelimiter(t){var e=this.delimiters[t];return!e||"dir"in e?e:(this.delimiters[t]=null,pe(this.loadDynamicFile(e)),null)}getSizeVariant(t,e){t=this.getDelimiter(t);return t&&t.variants&&(e=t.variants[e]),this.sizeVariants[e]}getStretchVariant(t,e){t=this.getDelimiter(t);return this.stretchVariants[t.stretchv?t.stretchv[e]:0]}getStretchVariants(e){return[0,1,2,3].map(t=>this.getStretchVariant(e,t))}getChar(t,e){var s=this.variant[t].chars[e];if(!s||Array.isArray(s))return s;{const i=this.variant[t];return delete i.chars[e],i.linked.forEach(t=>delete t[e]),pe(this.loadDynamicFile(s)),null}}getVariant(t){return this.variant[t]}getCssFont(t){return this.cssFontMap[t]||["serif",!1,!1]}getFamily(t){return this.cssFamilyPrefix?this.cssFamilyPrefix+", "+t:t}getRemappedChar(t,e){return(this.remapChars[t]||{})[e]}}h.OPTIONS={unknownFamily:"serif",dynamicPrefix:"."},h.JAX="common",h.NAME="",h.defaultVariants=[["normal"],["bold","normal"],["italic","normal"],["bold-italic","italic","bold"],["double-struck","bold"],["fraktur","normal"],["bold-fraktur","bold","fraktur"],["script","italic"],["bold-script","bold-italic","script"],["sans-serif","normal"],["bold-sans-serif","bold","sans-serif"],["sans-serif-italic","italic","sans-serif"],["sans-serif-bold-italic","bold-italic","bold-sans-serif"],["monospace","normal"],["-smallop","normal"],["-largeop","normal"],["-tex-calligraphic","italic"],["-tex-bold-calligraphic","bold-italic"],["-tex-oldstyle","normal"],["-tex-bold-oldstyle","bold"],["-tex-mathit","italic"],["-tex-variant","normal"]],h.defaultCssFonts={normal:["unknown",!1,!1],bold:["unknown",!1,!0],italic:["unknown",!0,!1],"bold-italic":["unknown",!0,!0],"double-struck":["unknown",!1,!0],fraktur:["unknown",!1,!1],"bold-fraktur":["unknown",!1,!0],script:["cursive",!1,!1],"bold-script":["cursive",!1,!0],"sans-serif":["sans-serif",!1,!1],"bold-sans-serif":["sans-serif",!1,!0],"sans-serif-italic":["sans-serif",!0,!1],"sans-serif-bold-italic":["sans-serif",!0,!0],monospace:["monospace",!1,!1],"-smallop":["unknown",!1,!1],"-largeop":["unknown",!1,!1],"-tex-calligraphic":["cursive",!0,!1],"-tex-bold-calligraphic":["cursive",!0,!0],"-tex-oldstyle":["unknown",!1,!1],"-tex-bold-oldstyle":["unknown",!1,!0],"-tex-mathit":["unknown",!0,!1],"-tex-variant":["unknown",!1,!1]},h.defaultCssFamilyPrefix="",h.VariantSmp={bold:[119808,119834,120488,120514,120782,{988:120778,989:120779}],italic:[119860,119886,120546,120572],"bold-italic":[119912,119938,120604,120630],script:[119964,119990],"bold-script":[120016,120042],fraktur:[120068,120094],"double-struck":[120120,120146,,,120792],"bold-fraktur":[120172,120198],"sans-serif":[120224,120250,,,120802],"bold-sans-serif":[120276,120302,120662,120688,120812],"sans-serif-italic":[120328,120354],"sans-serif-bold-italic":[120380,120406,120720,120746],monospace:[120432,120458,,,120822]},h.SmpRanges=[[0,65,90],[1,97,122],[2,913,937],[3,945,969],[4,48,57]],h.SmpRemap={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},h.SmpRemapGreekU={8711:25,1012:17},h.SmpRemapGreekL={977:27,981:29,982:31,1008:28,1009:30,1013:26,8706:25},h.defaultAccentMap={94:"ˆ",126:"˜",768:"ˋ",769:"ˊ",770:"ˆ",771:"˜",772:"ˉ",774:"˘",775:"˙",776:"¨",778:"˚",780:"ˇ",8594:"⃗"},h.defaultMoMap={45:"−"},h.defaultMnMap={45:"−"},h.defaultParams={x_height:.442,quad:1,num1:.676,num2:.394,num3:.444,denom1:.686,denom2:.345,sup1:.413,sup2:.363,sup3:.289,sub1:.15,sub2:.247,sup_drop:.386,sub_drop:.05,delim1:2.39,delim2:1,axis_height:.25,rule_thickness:.06,big_op_spacing1:.111,big_op_spacing2:.167,big_op_spacing3:.2,big_op_spacing4:.6,big_op_spacing5:.1,surd_height:.06,scriptspace:.05,nulldelimiterspace:.12,delimiterfactor:901,delimitershortfall:.3,rule_factor:1.25,min_rule_thickness:1.25,separation_factor:1.75,extra_ic:.033,extender_factor:.333},h.defaultDelimiters={},h.defaultChars={},h.defaultSizeVariants=[],h.defaultStretchVariants=[],h.dynamicFiles={},h.dynamicExtensions=new Map;const fe=MathJax._.core.Tree.Visitor.AbstractVisitor,c=MathJax._.util.BBox.BBox;class o extends c{static from(t,e,s=null){const i=new this;return Object.assign(i,t),i.lineLeading=e,s&&(i.indentData=s),i}constructor(t,e=null){super(t),this.indentData=null,this.isFirst=!1,this.originalL=this.L,e&&(this.start=e)}append(t){this.isFirst&&(t.originalL+=t.L,t.L=0),t.indentData&&(this.indentData=t.indentData),this.lineLeading=t.lineLeading,super.append(t),this.isFirst=t.isFirst}copy(){const t=o.from(this,this.lineLeading);return t.indentData=this.indentData,t.lineLeading=this.lineLeading,t}getIndentData(t){let{indentalign:e,indentshift:s,indentalignfirst:i,indentshiftfirst:a,indentalignlast:r,indentshiftlast:n}=t.attributes.getAllAttributes();"indentalign"===i&&(i=t.attributes.getInherited("indentalign")),"indentshift"===a&&(a=t.attributes.getInherited("indentshift")),"indentalign"===r&&(r=e),"indentshift"===n&&(n=s),this.indentData=[[i,a],[e,s],[r,n]]}copyIndentData(t){return t.indentData.map(([t,e])=>[t,e])}}const n=MathJax._.core.MmlTree.OperatorDictionary,be=(n.OPDEF,n.MO,n.RANGES,n.getRange,n.MMLSPACING,n.OPTABLE),l=1e6;class ye extends fe{breakToWidth(t,e){}}class Be extends ye{constructor(){super(...arguments),this.PENALTY={newline:t=>0,nobreak:t=>l,goodbreak:t=>t-200*this.state.depth,badbreak:t=>t+200*this.state.depth,auto:t=>t},this.FACTORS={depth:t=>t+800*this.state.depth,width:t=>t+Math.floor((this.state.width-this.state.w)/this.state.width*2500),tail:t=>t+Math.floor(this.state.width/Math.max(1e-4,this.state.mathLeft-this.state.w)*500),open:(t,e)=>{var s=e.node.prevClass;if(s===d.BIN||s===d.REL||s===d.OP)return t+5e3;const i=this.getPrevious(e);if(i&&("postfix"!==i.attributes.get("form")||"nobreak"===i.attributes.get("linebreak")))return t+5e3;const a=e.node.Parent;return null!=a&&a.isKind("mmultiscripts")&&e.node===this.getFirstToken(a)&&a.childNodes.filter(t=>t.isKind("mprescripts")).length?l:t-500},close:(t,e)=>{var s;const i=e.node.Parent;return null==i||!i.isKind("msubsup")||i.isKind("mmultiscripts")&&null!=(s=i.childNodes[1])&&s.isKind("mprescripts")||e.node!==this.getLastToken(i.childNodes[0])?t+500:l},space:(t,e)=>{const s=e;if(!s.canBreak)return l;e=s.getBBox().w;return e<0?l:e<1?t:t-100*(e+4)},separator:t=>t+500,fuzz:t=>.99*t},this.TEXCLASS={[d.BIN]:t=>t-250,[d.REL]:t=>t-500}}breakToWidth(e,s){var t=this.state,i=(this.state=this.createState(e),this.state.width=s,e.breakCount);for(let t=0;t<=i;t++)(e.lineBBox[t]||e.getLineBBox(t)).w>s&&this.breakLineToWidth(e,t);for(const[e,s]of this.state.breaks){if(null===s){const s=e.coreMO();s.setBreakStyle(s.node.attributes.get("linebreakstyle")||"before")}else e.setBreakAt(s);e.invalidateBBox()}this.state=t}createState(t){t=t.getBBox().w;return{breaks:new Set,potential:[],width:0,w:0,prevWidth:0,prevBreak:null,depth:0,mathWidth:t,mathLeft:t}}breakLineToWidth(t,e){const s=this.state;s.potential=[],s.w=0,s.prevWidth=0,s.prevBreak=null,s.depth=0,this.visitNode(t,e)}addWidth(t,e=null){(e=null===e?t.L+t.w+t.R:e)&&(e*=t.rscale,this.state.w+=e,this.state.potential.length&&(this.state.potential[0][4]+=e),this.processBreak())}processBreak(){const t=this.state;for(;t.potential.length&&t.w>this.state.width;){const e=t.potential.pop(),[s,,i,a,r]=e;t.breaks.add(s),t.w=t.potential.reduce((t,e)=>t+e[4],a+r),t.prevBreak&&t.prevWidth+i<=t.width?(t.breaks.delete(t.prevBreak[0]),t.prevWidth+=i):t.prevWidth=i+a,t.potential.forEach(t=>t[2]-=i),t.prevBreak=e,t.mathLeft-=i}}pushBreak(t,e,s,i){const a=this.state;if(!(e>=l||0===a.w&&0===a.prevWidth)){for(;a.potential.length&&a.potential[0][1]>this.FACTORS.fuzz(e);){const t=a.potential.shift();a.potential.length&&(a.potential[0][4]+=t[4])}a.potential.unshift([[t,i],e,a.w-((null==(t=a.prevBreak)?void 0:t[3])||0),s,0])}}getBorderLR(t){t=t.styleData;if(!t)return[0,0];var e=(null==(e=null==t?void 0:t.border)?void 0:e.width)||[0,0,0,0],t=(null==t?void 0:t.padding)||[0,0,0,0];return[e[3]+t[3],e[1]+t[1]]}getFirstToken(t){return t.isToken?t:this.getFirstToken(t.childNodes[0])}getLastToken(t){return t.isToken?t:this.getLastToken(t.childNodes[t.childNodes.length-1])}visitNode(t,e){t&&(this.state.depth++,t.node.isEmbellished&&!t.node.isKind("mo")?this.visitEmbellishedOperator(t,e):super.visitNode(t,e),this.state.depth--)}visitDefault(t,e){var s,i=t.getLineBBox(e);if(t.node.isToken||t.node.linebreakContainer||null==(s=t.childNodes)||!s[0])this.addWidth(i);else{const[s,a]=this.getBorderLR(t);0===e&&this.addWidth(i,i.L+s),this.visitNode(t.childNodes[0],e),e===t.breakCount&&this.addWidth(i,i.R+a)}}visitEmbellishedOperator(t,e){const s=t.coreMO(),i=o.from(t.getOuterBBox(),t.linebreakOptions.lineleading);i.getIndentData(s.node);var a=s.getBreakStyle(s.node.attributes.get("linebreakstyle")),r=s.processIndent("",i.indentData[1][1],"",i.indentData[0][1],this.state.width)[1],n=this.moPenalty(s);if("before"===a)this.pushBreak(t,n,r-i.L,null),this.addWidth(i);else{this.addWidth(i);const e=("after"===a?0:(s.multChar?s.multChar.getBBox():i).w)+r;this.pushBreak(t,n,e,null)}}visitMoNode(t,e){const s=t,i=o.from(s.getOuterBBox(),s.linebreakOptions.lineleading);i.getIndentData(s.node);var a=s.getBreakStyle(s.node.attributes.get("linebreakstyle")),r=s.processIndent("",i.indentData[1][1],"",i.indentData[0][1],this.state.width)[1],n=this.moPenalty(s);if("before"===a)this.pushBreak(t,n,r-i.L,null),this.addWidth(i);else{this.addWidth(i);const e=("after"===a?0:(s.multChar?s.multChar.getBBox():i).w)+r;this.pushBreak(t,n,e,null)}}moPenalty(t){const{linebreak:e,fence:s,form:i}=t.node.attributes.getList("linebreak","fence","form"),a=this.FACTORS;let r=a.tail(a.width(0));var n=s&&"prefix"===i||t.node.texClass===d.OPEN,o=s&&"postfix"===i||t.node.texClass===d.CLOSE;return n&&(r=a.open(r,t),this.state.depth++),o&&(r=a.close(r,t),this.state.depth--),r=(this.TEXCLASS[t.node.texClass]||(t=>t))(r),(this.PENALTY[e]||(t=>t))(a.depth(r))}getPrevious(t){let e=t.node,s=e.parent,i=s.childIndex(e);for(;s&&(s.notParent||s.isKind("mrow"))&&0===i;)s=(e=s).parent,i=s.childIndex(e);if(!s||!i)return null;const a=s.childNodes[i-1];return a.isEmbellished?a.coreMO():null}visitMspaceNode(t,e){const s=t.getLineBBox(e),i=t;if(i.canBreak){const e=this.mspacePenalty(i);s.getIndentData(t.node);var a=t.processIndent("",s.indentData[1][1],"",s.indentData[0][1],this.state.width)[1];this.pushBreak(t,e,a-s.w,null)}this.addWidth(s)}mspacePenalty(t){const e=t.node.attributes.get("linebreak"),s=this.FACTORS,i=s.space(s.tail(s.width(0)),t);return(this.PENALTY[e]||(t=>t))(s.depth(i))}visitMtextNode(t,e){if(t.getText().match(/ /)){const s=t,i=(s.clearBreakPoints(),s.textWidth(" ")),a=t.getBBox(),[r,n]=this.getBorderLR(t),o=(this.addWidth(a,a.L+r),s.childNodes);for(const e of o.keys()){const r=o[e];if(r.node.isKind("text")){const n=r.node.getText().split(/ /),o=n.pop();for(const r of n.keys())this.addWidth(a,s.textWidth(n[r])),this.pushBreak(t,this.mtextPenalty(),-i,[e,r+1]),this.addWidth(a,i);this.addWidth(a,s.textWidth(o))}else this.addWidth(r.getBBox())}this.addWidth(a,a.R+n)}else this.visitDefault(t,e)}mtextPenalty(){const t=this.FACTORS;return t.depth(t.tail(t.width(0)))}visitMrowNode(e,t){var t=e.lineBBox[t]||e.getLineBBox(t),[s,i]=t.start||[0,0],[a,r]=t.end||[e.childNodes.length-1,0],[n,o]=this.getBorderLR(e);this.addWidth(t,t.L+n);for(let t=s;t<=a;t++)this.visitNode(e.childNodes[t],t===s?i:t===a?r:0);this.addWidth(t,t.R+o)}visitInferredMrowNode(t,e){this.state.depth--,this.visitMrowNode(t,e),this.state.depth++}visitMfracNode(t,e){const s=t;!s.node.attributes.get("bevelled")&&s.getOuterBBox().w>this.state.width&&(this.breakToWidth(s.childNodes[0],this.state.width),this.breakToWidth(s.childNodes[1],this.state.width)),this.visitDefault(t,e)}visitMsqrtNode(t,e){if(t.getOuterBBox().w>this.state.width){const e=t,s=e.childNodes[e.base];this.breakToWidth(s,this.state.width-e.rootWidth()),e.getStretchedSurd()}this.visitDefault(t,e)}visitMrootNode(t,e){this.visitMsqrtNode(t,e)}visitMsubNode(t,e){this.visitDefault(t,e);const s=t,i=s.getOffset()[0],a=s.scriptChild.getOuterBBox(),[r,n]=this.getBorderLR(t);this.addWidth(s.getLineBBox(e),i+r+a.rscale*a.w+s.font.params.scriptspace+n)}visitMsupNode(t,e){this.visitDefault(t,e);const s=t,i=s.getOffset()[0],a=s.scriptChild.getOuterBBox(),[r,n]=this.getBorderLR(t);this.addWidth(s.getLineBBox(e),i+r+a.rscale*a.w+s.font.params.scriptspace+n)}visitMsubsupNode(t,e){this.visitDefault(t,e);const s=t,i=s.subChild.getOuterBBox(),a=s.supChild.getOuterBBox(),r=s.getAdjustedIc(),n=Math.max(i.rscale*i.w,r+a.rscale*a.w)+s.font.params.scriptspace,[o,h]=this.getBorderLR(t);this.addWidth(t.getLineBBox(e),o+n+h)}visitMmultiscriptsNode(t,e){var s,i=t,a=i.scriptData;a.numPrescripts&&(s=Math.max(a.psup.rscale*a.psup.w,a.psub.rscale*a.psub.w),this.addWidth(t.getLineBBox(e),s+i.font.params.scriptspace)),this.visitDefault(t,e),a.numScripts&&(s=Math.max(a.sup.rscale*a.sup.w,a.sub.rscale*a.sub.w),this.addWidth(t.getLineBBox(e),s+i.font.params.scriptspace))}visitMfencedNode(t,e){var s=t,i=t.getLineBBox(e),[a,r]=this.getBorderLR(t);0===e&&this.addWidth(i,i.L+a),this.visitNode(s.mrow,e),e===t.breakCount&&this.addWidth(i,i.R+r)}visitMactionNode(t,e){var s=t,i=t.getLineBBox(e),[a,r]=this.getBorderLR(t);0===e&&this.addWidth(i,i.L+a),this.visitNode(s.selected,e),e===t.breakCount&&this.addWidth(i,i.R+r)}}for(const Ba of Object.keys(be.postfix)){const ka=be.postfix[Ba][3];ka&&ka.fence&&(ka.linebreakstyle="after")}be.infix["⁡"]=[...be.infix["⁡"]],be.infix["⁡"][3]={linebreak:"nobreak"};const m=MathJax._.util.lengths,ke=m.BIGDIMEN,Ce=(m.UNITS,m.RELUNITS,m.MATHSPACE,m.length2em),we=m.percent,p=m.em,ve=m.px,Me=MathJax._.util.Styles,Se=Me.TRBL,je=(Me.WSC,Me.Styles),Le=MathJax._.util.StyleJson.StyleJsonSheet,Ne="@mathjax/%%FONT%%-font";class g extends te{get forceInlineBreaks(){return!1}constructor(t={},e=null,s=null){const[i,a]=t.fontData instanceof h?[t.fontData.constructor,t.fontData]:[t.fontData||s,null],[r,n]=le(t,i.OPTIONS),o=(super(r),this.factory=this.options.wrapperFactory||new e,(this.factory.jax=this).styleJson=this.options.styleJson||new Le,this.font=a||new i(n),this.font.setOptions({mathmlSpacing:this.options.mathmlSpacing}),this.unknownCache=new Map,this.options.linebreaks.LinebreakVisitor||Be);this.linebreaks=new o(this.factory)}setAdaptor(t){super.setAdaptor(t),"auto"===this.options.htmlHDW&&(this.options.htmlHDW=t.canMeasureNodes?"ignore":"force")}addExtension(t,e=""){return this.font.addExtension(t,e)}typeset(t,e){this.setDocument(e);var s=this.createNode();return this.toDOM(t,s,e),s}createNode(){var t=this.constructor.NAME;return this.html("mjx-container",{class:"MathJax",jax:t})}setScale(t,e){let s=this.getInitialScale()*this.options.scale;if("scale"===e.node.attributes.get("overflow")&&this.math.display){const t=e.getOuterBBox().w,i=this.math.metrics.containerWidth/this.pxPerEm;t>i&&t&&(s*=i/t)}1!==s&&this.adaptor.setStyle(t,"fontSize",we(s))}getInitialScale(){return this.math.metrics.scale}toDOM(t,e,s=null){this.setDocument(s),this.math=t,this.container=e,this.pxPerEm=t.metrics.ex/this.font.params.x_height,this.executeFilters(this.preFilters,t,s,e),this.nodeMap=new Map,t.root.attributes.getAllInherited().overflow=this.options.displayOverflow;var i=t.root.attributes.get("overflow"),i=(this.adaptor.setAttribute(e,"overflow",i),"linebreak"===i&&this.getLinebreakWidth(),this.options.linebreaks.inline&&!t.display);let a=!!t.root.getProperty("inlineMarked");!a||i&&this.forceInlineBreaks===t.root.getProperty("inlineForced")||(this.unmarkInlineBreaks(t.root),t.root.removeProperty("inlineMarked"),t.root.removeProperty("inlineForced"),a=!1),i&&!a&&(this.markInlineBreaks(null==(i=t.root.childNodes)?void 0:i[0]),t.root.setProperty("inlineMarked",!0),t.root.setProperty("inlineForced",this.forceInlineBreaks)),t.root.setTeXclass(null);i=this.factory.wrap(t.root);this.setScale(e,i),this.processMath(i,e),this.nodeMap=null,this.executeFilters(this.postFilters,t,s,e)}getBBox(t,e){this.setDocument(e),(this.math=t).root.setTeXclass(null),this.nodeMap=new Map;e=this.factory.wrap(t.root).getOuterBBox();return this.nodeMap=null,e}getLinebreakWidth(){var t=this.math.metrics.containerWidth/this.pxPerEm,e=this.math.root.attributes.get("maxwidth")||this.options.linebreaks.width;this.containerWidth=Ce(e,t,1,this.pxPerEm)}markInlineBreaks(i){if(i){var a=this.forceInlineBreaks;let e=!1,s=!1,t="";for(const r of i.childNodes)if(t)s=this.markInlineBreak(s,a,t,i,r),t="",e=!1;else if(r.isEmbellished){if(r===i.childNodes[0])continue;const n=r.coreMO(),o=n.texClass,h=n.attributes.get("linebreak"),l=n.attributes.get("linebreakstyle");(o===d.BIN||o===d.REL||o===d.ORD&&n.hasSpacingAttributes()||"auto"!==h)&&"nobreak"!==h&&("before"===l?e&&"auto"===h||(s=this.markInlineBreak(s,a,h,i,r,n)):t=h),e="newline"===h&&"after"===l}else if(r.isKind("mspace")){const t=r.attributes.get("linebreak");"nobreak"!==t&&r.canBreak&&(s=this.markInlineBreak(s,a,t,i,r)),e="newline"===t}else e=!1,r.isKind("mstyle")&&!r.attributes.get("style")&&!r.attributes.hasExplicit("mathbackground")||r.isKind("semantics")?(this.markInlineBreaks(r.childNodes[0]),r.getProperty("process-breaks")&&(r.setProperty("inline-breaks",!0),r.childNodes[0].setProperty("inline-breaks",!0),i.parent.setProperty("process-breaks","true"))):r.isKind("mrow")&&r.attributes.get("data-semantic-added")&&(this.markInlineBreaks(r),r.getProperty("process-breaks")&&(r.setProperty("inline-breaks",!0),i.parent.setProperty("process-breaks","true")))}}markInlineBreak(t,e,s,i,a,r=null){return a.setProperty("breakable",!0),e&&"newline"!==s?(a.setProperty("forcebreak",!0),null!=r&&r.setProperty("forcebreak",!0)):(a.removeProperty("forcebreak"),null!=r&&r.removeProperty("forcebreak"),"newline"===s&&a.setProperty("newline",!0)),t||(i.setProperty("process-breaks",!0),i.parent.setProperty("process-breaks",!0),t=!0),t}unmarkInlineBreaks(t){if(t&&(t.removeProperty("forcebreak"),t.removeProperty("breakable"),t.getProperty("process-breaks"))){t.removeProperty("process-breaks");for(const e of t.childNodes)this.unmarkInlineBreaks(e)}}getMetrics(t){this.setDocument(t);const e=this.adaptor,s=this.getMetricMaps(t);for(const i of t.math){const t=e.parent(i.start.node);if(i.state()<se.METRICS&&t){const e=s[i.display?1:0],{em:a,ex:r,containerWidth:n,scale:o,family:h}=e.get(t);i.setMetrics(a,r,n,o),this.options.mtextInheritFont&&(i.outputData.mtextFamily=h),this.options.merrorInheritFont&&(i.outputData.merrorFamily=h),i.state(se.METRICS)}}}getMetricsFor(t,e){var s=this.options.mtextInheritFont||this.options.merrorInheritFont,t=this.getTestElement(t,e),s=Object.assign(Object.assign({},this.measureMetrics(t,s)),{display:e});return this.adaptor.remove(t),s}getMetricMaps(t){const e=this.adaptor,s=[new Map,new Map];for(const i of t.math){const t=e.parent(i.start.node);if(t&&i.state()<se.METRICS){const e=s[i.display?1:0];e.has(t)||e.set(t,this.getTestElement(t,i.display))}}const i=this.options.mtextInheritFont||this.options.merrorInheritFont,a=[new Map,new Map];for(const t of a.keys())for(const e of s[t].keys())a[t].set(e,this.measureMetrics(s[t].get(e),i));for(const t of a.keys())for(const i of s[t].values())e.remove(i);return a}getTestElement(t,e){const s=this.adaptor;if(!this.testInline){this.testInline=this.html("mjx-test",{style:{display:"inline-block",width:"100%","font-style":"normal","font-weight":"normal","font-size":"100%","font-size-adjust":"none","text-indent":0,"text-transform":"none","letter-spacing":"normal","word-spacing":"normal",overflow:"hidden",height:"1px","margin-right":"-1px"}},[this.html("mjx-left-box",{style:{display:"inline-block",width:0,float:"left"}}),this.html("mjx-ex-box",{style:{position:"absolute",overflow:"hidden",width:"1px",height:"60ex"}}),this.html("mjx-right-box",{style:{display:"inline-block",width:0,float:"right"}})]),this.testDisplay=s.clone(this.testInline),s.setStyle(this.testDisplay,"display","table"),s.setStyle(this.testDisplay,"margin-right",""),s.setStyle(s.firstChild(this.testDisplay),"display","none");const t=s.lastChild(this.testDisplay);s.setStyle(t,"display","table-cell"),s.setStyle(t,"width","10000em"),s.setStyle(t,"float","")}return s.append(t,s.clone(e?this.testDisplay:this.testInline))}measureMetrics(t,e){const s=this.adaptor,i=e?s.fontFamily(t):"",a=s.fontSize(t),[r,n]=s.nodeSize(s.childNode(t,1)),o=r?n/60:a*this.options.exFactor;return{em:a,ex:o,containerWidth:r?"table"===s.getStyle(t,"display")?s.nodeSize(s.lastChild(t))[0]-1:s.nodeBBox(s.lastChild(t)).left-s.nodeBBox(s.firstChild(t)).left-2:1e6,scale:Math.max(this.options.minScale,this.options.matchFontHeight?o/this.font.params.x_height/a:1),family:i}}styleSheet(t){if(this.setDocument(t),this.styleJson.clear(),this.styleJson.addStyles(this.constructor.commonStyles),"getStyles"in t)for(const e of t.getStyles())this.styleJson.addStyles(e);return this.addWrapperStyles(this.styleJson),this.addFontStyles(this.styleJson),this.html("style",{id:"MJX-styles"},[this.text("\n"+this.styleJson.cssText+"\n")])}addFontStyles(t){t.addStyles(this.font.styles)}addWrapperStyles(t){for(const e of this.factory.getKinds())this.addClassStyles(this.factory.getNodeClass(e),t)}addClassStyles(t,e){t.addStyles(e,this)}insertStyles(t){}setDocument(t){t&&(this.document=t,this.adaptor.document=t.document)}html(t,e={},s=[],i){return this.adaptor.node(t,e,s,i)}text(t){return this.adaptor.text(t)}fixed(t,e=3){return Math.abs(t)<6e-4?"0":t.toFixed(e).replace(/\.?0+$/,"")}measureText(t,e,s=["",!1,!1]){var i=this.unknownText(t,e);if("-explicitFont"===e){const t=this.cssFontStyles(s);this.adaptor.setAttributes(i,{style:t})}return this.measureTextNodeWithCache(i,t,e,s)}measureTextNodeWithCache(t,e,s,i=["",!1,!1]){"-explicitFont"===s&&(s=[i[0],i[1]?"T":"F",i[2]?"T":"F",""].join("-")),this.unknownCache.has(s)||this.unknownCache.set(s,new Map);const a=this.unknownCache.get(s),r=a.get(e);if(r)return r;i=this.measureTextNode(t);return a.set(e,i),i}cssFontStyles(t,e={}){var[t,s,i]=t;return e["font-family"]=this.font.getFamily(t),s&&(e["font-style"]="italic"),i&&(e["font-weight"]="bold"),e}getFontData(t){return t=t||new je,[this.font.getFamily(t.get("font-family")),"italic"===t.get("font-style"),"bold"===t.get("font-weight")]}}g.NAME="Common",g.OPTIONS=Object.assign(Object.assign({},te.OPTIONS),{scale:1,minScale:.5,mtextInheritFont:!1,merrorInheritFont:!1,mtextFont:"",merrorFont:"serif",mathmlSpacing:!1,skipAttributes:{},exFactor:.5,displayAlign:"center",displayIndent:"0",displayOverflow:"overflow",linebreaks:{inline:!0,width:"100%",lineleading:.2,LinebreakVisitor:null},font:"",htmlHDW:"auto",wrapperFactory:null,fontData:null,fontPath:Ne,styleJson:null}),g.commonStyles={'mjx-container[overflow="scroll"][display]':{overflow:"auto clip","min-width":"initial !important"},'mjx-container[overflow="truncate"][display]':{overflow:"hidden clip","min-width":"initial !important"},"mjx-container[display]":{display:"block","text-align":"center","justify-content":"center",margin:"calc(1em - 2px) 0",padding:"2px 0"},'mjx-container[display][width="full"]':{display:"flex"},'mjx-container[justify="left"]':{"text-align":"left","justify-content":"left"},'mjx-container[justify="right"]':{"text-align":"right","justify-content":"right"}};class Te extends MathJax._.core.Tree.WrapperFactory.AbstractWrapperFactory{constructor(){super(...arguments),this.jax=null}get Wrappers(){return this.node}}Te.defaultNodes={};const Ae=MathJax._.core.Tree.Wrapper.AbstractWrapper,x=MathJax._.util.string,De=(x.sortLength,x.quotePattern,x.unicodeChars),f=(x.unicodeString,x.isPercent),b=x.split;x.replaceUnicode,x.toEntity;function Oe(t,e,s){return e?t?2/18:5/18:t?s<2/18?0:2/18:s}const We={[p(0)]:"0",[p(2/18)]:"1",[p(3/18)]:"2",[p(4/18)]:"3",[p(5/18)]:"4",[p(6/18)]:"5"};class y extends Ae{static addStyles(t,e){t.addStyles(this.styles)}get jax(){return this.factory.jax}get adaptor(){return this.factory.jax.adaptor}get metrics(){return this.factory.jax.math.metrics}get containerWidth(){return this.jax.containerWidth}get linebreaks(){return this.jax.linebreaks}get linebreakOptions(){return this.jax.options.linebreaks}get fixesPWidth(){return!this.node.notParent&&!this.node.isToken}get breakCount(){var t;return this._breakCount<0&&(t=this.node,this._breakCount=t.isEmbellished?this.coreMO().embellishedBreakCount:t.arity<0&&!t.linebreakContainer&&this.childNodes[0].isStack?this.childNodes[0].breakCount:0),this._breakCount}breakTop(t,e){return this.node.linebreakContainer||!this.parent?t:this.parent.breakTop(t,this)}constructor(t,e,s=null){super(t,e),this.parent=null,this.dom=null,this.removedStyles=null,this.styles=null,this.styleData=null,this.variant="",this.bboxComputed=!1,this._breakCount=-1,this.lineBBox=[],this.stretch=xe,this.font=null,this.parent=s,this.font=t.jax.font,this.bbox=c.zero(),this.getStyles(),this.getStyleData(),this.getVariant(),this.getScale(),this.getSpace(),this.childNodes=e.childNodes.map(t=>{t=this.wrap(t);return t.bbox.pwidth&&(e.notParent||e.isKind("math"))&&(this.bbox.pwidth=c.fullWidth),t})}wrap(t,e=null){var s=this.factory.wrap(t,e||this);return e&&e.childNodes.push(s),this.jax.nodeMap.set(t,s),s}getBBox(t=!0){if(this.bboxComputed)return this.bbox;var e=t?this.bbox:c.zero();return this.computeBBox(e),this.bboxComputed=t,e}getOuterBBox(t=!0){var e;const s=this.getBBox(t);if(!this.styleData)return s;const i=this.styleData.padding,a=(null==(e=this.styleData.border)?void 0:e.width)||[0,0,0,0],r=s.copy();for(const[,t,e]of c.boxSides)r[e]+=i[t]+a[t];return r}getUnbrokenHD(){const e=this.breakCount+1;let s=0,i=0;for(let t=0;t<e;t++){const{h:e,d:a}=this.getLineBBox(t);e>s&&(s=e),a>i&&(i=a)}return[s,i]}computeBBox(t,e=!1){t.empty();for(const e of this.childNodes)t.append(e.getOuterBBox());t.clean(),this.fixesPWidth&&this.setChildPWidths(e)&&this.computeBBox(t,!0)}getLineBBox(t){if(!this.lineBBox[t]){var e=this.breakCount;if(e){const s=this.embellishedBBox(t)||this.computeLineBBox(t);this.lineBBox[t]=s,0===t&&(!this.node.isKind("mo")&&this.node.isEmbellished?s.originalL=this.getBBox().L:s.L=this.getBBox().L),t===e&&(s.R=this.getBBox().R)}else{e=this.getOuterBBox();this.lineBBox[t]=o.from(e,this.linebreakOptions.lineleading)}}return this.lineBBox[t]}embellishedBBox(t){if(!this.node.isEmbellished||this.node.isKind("mo"))return null;const e=this.coreMO();return e.moLineBBox(t,e.embellishedBreakStyle,this.getOuterBBox())}computeLineBBox(t){return this.getChildLineBBox(this.childNodes[0],t)}getBreakNode(t){var e;if(!t.start)return[this,null];var[t,s]=t.start;if(this.node.isEmbellished)return[this,this.coreMO()];const i=(null!=(e=null==(e=this.childNodes[0])?void 0:e.node)&&e.isInferred?this.childNodes[0]:this).childNodes;return this.node.isToken||!i[t]?[this,null]:i[t].getBreakNode(i[t].getLineBBox(s))}getChildLineBBox(t,e){var s=this.breakCount;let i=t.getLineBBox(e);return(this.styleData||this.bbox.L||this.bbox.R)&&(i=i.copy()),this.addMiddleBorders(i),0===e?(i.L+=this.bbox.L,this.addLeftBorders(i)):e===s&&(i.R+=this.bbox.R,this.addRightBorders(i)),i}addLeftBorders(t){var e,s;this.styleData&&(e=this.styleData.border,s=this.styleData.padding,t.w+=((null==(t=null==e?void 0:e.width)?void 0:t[3])||0)+((null==s?void 0:s[3])||0))}addMiddleBorders(t){var e,s,i;this.styleData&&(s=this.styleData.border,i=this.styleData.padding,t.h+=((null==(e=null==s?void 0:s.width)?void 0:e[0])||0)+((null==i?void 0:i[0])||0),t.d+=((null==(e=null==s?void 0:s.width)?void 0:e[2])||0)+((null==i?void 0:i[2])||0))}addRightBorders(t){var e,s;this.styleData&&(e=this.styleData.border,s=this.styleData.padding,t.w+=((null==(t=null==e?void 0:e.width)?void 0:t[1])||0)+((null==s?void 0:s[1])||0))}setChildPWidths(t,e=null,s=!0){if(t)return!1;s&&(this.bbox.pwidth="");let i=!1;for(const r of this.childNodes){var a=r.getBBox();a.pwidth&&r.setChildPWidths(t,null===e?a.w:e,s)&&(i=!0)}return i}breakToWidth(t){}invalidateBBox(t=!0){(this.bboxComputed||0<=this._breakCount)&&(this.bboxComputed=!1,this.lineBBox=[],this._breakCount=-1,this.parent&&t&&this.parent.invalidateBBox())}copySkewIC(t){var e=this.childNodes[0],s=(null!=(s=null==e?void 0:e.bbox)&&s.sk&&(t.sk=e.bbox.sk),null!=(s=null==e?void 0:e.bbox)&&s.dx&&(t.dx=e.bbox.dx),this.childNodes[this.childNodes.length-1]);null!=(e=null==s?void 0:s.bbox)&&e.ic&&(t.ic=s.bbox.ic,t.w+=t.ic)}getStyles(){var t=this.node.attributes.getExplicit("style");if(t){const i=this.styles=new je(t);for(let t=0,e=y.removeStyles.length;t<e;t++){var s=y.removeStyles[t];i.get(s)&&(this.removedStyles||(this.removedStyles={}),this.removedStyles[s]=i.get(s),i.set(s,""))}}}getStyleData(){if(this.styles){const n=Array(4).fill(0),o=Array(4).fill(0),h=Array(4),l=Array(4);let t=!1,e=!1;for(var[s,i]of c.boxSides){var a="border"+s,r=this.styles.get(a+"Width"),r=(r&&(e=!0,o[i]=Math.max(0,this.length2em(r,1)),h[i]=this.styles.get(a+"Style")||"solid",l[i]=this.styles.get(a+"Color")),this.styles.get("padding"+s));r&&(t=!0,n[i]=Math.max(0,this.length2em(r,1)))}this.styleData=t||e?{padding:n,border:e?{width:o,style:h,color:l}:null}:null}}getVariant(){if(this.node.isToken){const e=this.node.attributes;let t=e.get("mathvariant");if(e.hasExplicit("mathvariant"))this.font.getVariant(t)||(console.warn("Invalid variant: "+t),t="normal");else{const s=e.getList("fontfamily","fontweight","fontstyle");if(this.removedStyles){const e=this.removedStyles;e.fontFamily&&(s.family=e.fontFamily),e.fontWeight&&(s.weight=e.fontWeight),e.fontStyle&&(s.style=e.fontStyle)}s.fontfamily&&(s.family=s.fontfamily),s.fontweight&&(s.weight=s.fontweight),s.fontstyle&&(s.style=s.fontstyle),s.weight&&s.weight.match(/^\d+$/)&&(s.weight=600<parseInt(s.weight)?"bold":"normal"),t=s.family?this.explicitVariant(s.family,s.weight,s.style):(this.node.getProperty("variantForm")&&(t="-tex-variant"),t=(y.BOLDVARIANTS[s.weight]||{})[t]||t,(y.ITALICVARIANTS[s.style]||{})[t]||t)}this.variant=t}}explicitVariant(t,e,s){let i=this.styles;return(i=i||(this.styles=new je)).set("fontFamily",t),e&&i.set("fontWeight",e),s&&i.set("fontStyle",s),"-explicitFont"}getScale(){let t=1;const e=this.parent,s=e?e.bbox.scale:1,i=this.node.attributes,a=Math.min(i.get("scriptlevel"),2);let r=i.get("fontsize"),n=this.node.isToken||this.node.isKind("mstyle")?i.get("mathsize"):i.getInherited("mathsize");if(0!==a&&(t=Math.pow(i.get("scriptsizemultiplier"),a)),this.removedStyles&&this.removedStyles.fontSize&&!r&&(r=this.removedStyles.fontSize),"1"!==(n=r&&!i.hasExplicit("mathsize")?r:n)&&(t*=this.length2em(n,1,1)),0!==a){const e=this.length2em(i.get("scriptminsize"),.4,1);t<e&&(t=e)}this.bbox.scale=t,this.bbox.rscale=t/s}getSpace(){var t=this.isTopEmbellished(),e=this.node.hasSpacingAttributes();this.jax.options.mathmlSpacing||e?t&&this.getMathMLSpacing():this.getTeXSpacing(t,e)}getMathMLSpacing(){const t=this.node.coreMO(),e=t.coreParent(),s=e.parent;if(s&&s.isKind("mrow")&&1!==s.childNodes.length){var i=s.childIndex(e);if(null!==i){const a=t.getProperty("noDictDef"),r=t.attributes,n=0<r.get("scriptlevel");this.bbox.L=r.isSet("lspace")?Math.max(0,this.length2em(r.get("lspace"))):Oe(n,a,t.lspace),this.bbox.R=r.isSet("rspace")?Math.max(0,this.length2em(r.get("rspace"))):Oe(n,a,t.rspace),i&&(i=s.childNodes[i-1]).isEmbellished&&(i=this.jax.nodeMap.get(i).getBBox()).R&&(this.bbox.L=Math.max(0,this.bbox.L-i.R))}}}getTeXSpacing(t,e){if(!e){const t=this.node.texSpacing();t&&(this.bbox.L=this.length2em(t))}if(t||e){const t=this.node.coreMO().attributes;t.isSet("lspace")&&(this.bbox.L=Math.max(0,this.length2em(t.get("lspace")))),t.isSet("rspace")&&(this.bbox.R=Math.max(0,this.length2em(t.get("rspace"))))}}isTopEmbellished(){return this.node.isEmbellished&&!(this.node.parent&&this.node.parent.isEmbellished)}core(){return this.jax.nodeMap.get(this.node.core())}coreMO(){return this.jax.nodeMap.get(this.node.coreMO())}coreRScale(){let t=this.bbox.rscale,e=this.coreMO();for(;e!==this&&e;)t*=e.bbox.rscale,e=e.parent;return t}getRScale(){let t=1,e=this;for(;e;)t*=e.bbox.rscale,e=e.parent;return t}getText(){let t="";if(this.node.isToken)for(const e of this.node.childNodes)e instanceof ae&&(t+=e.getText());return t}canStretch(t){if(this.stretch=xe,this.node.isEmbellished){const e=this.core();e&&e.node!==this.node&&e.canStretch(t)&&(this.stretch=e.stretch)}return this.stretch.dir!==u.None}getAlignShift(){let{indentalign:t,indentshift:e,indentalignfirst:s,indentshiftfirst:i}=this.node.attributes.getAllAttributes();return"indentalign"!==s&&(t=s),"indentshift"!==i&&(e=i),this.processIndent(t,e)}processIndent(t,e,s="",i="",a=this.metrics.containerWidth){return this.jax.math.display?(s&&"auto"!==s||(s=this.jax.math.root.getProperty("inlineMarked")?"left":this.jax.options.displayAlign),i&&"auto"!==i||(i=this.jax.math.root.getProperty("inlineMarked")?"0":this.jax.options.displayIndent),"auto"===t&&(t=s),"auto"===e&&(e=i,"right"!==t||e.match(/^\s*0[a-z]*\s*$/)||(e=("-"+e.trim()).replace(/^--/,""))),[t,this.length2em(e,a)]):["left",0]}getAlignX(t,e,s){return"right"===s?t-(e.w+e.R)*e.rscale:"left"===s?e.L*e.rscale:(t-e.w*e.rscale)/2}getAlignY(t,e,s,i,a){return"top"===a?t-s:"bottom"===a?i-e:"center"===a?(t-s-(e-i))/2:0}getWrapWidth(t){return this.childNodes[t].getBBox().w}getChildAlign(t){return"left"}percent(t){return we(t)}em(t){return p(t)}px(t,e=-ke){return ve(t,e,this.metrics.em)}length2em(t,e=1,s=null){null===s&&(s=this.bbox.scale);var i=this.font.params.rule_thickness,a=de(t,{medium:1,thin:2/3,thick:5/3},0);return a?a*i:Ce(t,e,s,this.jax.pxPerEm)}unicodeChars(s,t=this.variant){let e=De(s);t=this.font.getVariant(t);if(t&&t.chars){const s=t.chars;e=e.map(t=>{var e;return(null==(e=null==(e=s[t])?void 0:e[3])?void 0:e.smp)||t})}return e}remapChars(t){return t}mmlText(t){return this.node.factory.create("text").setText(t)}mmlNode(t,e={},s=[]){return this.node.factory.create(t,e,s)}createMo(t){const e=this.node.factory,s=e.create("text").setText(t),i=e.create("mo",{stretchy:!0},[s]),a=(i.inheritAttributesFrom(this.node),i.parent=this.node.parent,this.wrap(i));return a.parent=this,a}getVariantChar(t,e){const s=this.font.getChar(t,e)||[0,0,0,{unknown:!0}];return 3===s.length&&(s[3]={}),s}html(t,e={},s=[]){return this.jax.html(t,e,s)}}y.kind="unknown",y.styles={},y.removeStyles=["fontSize","fontFamily","fontWeight","fontStyle","fontVariant","font"],y.skipAttributes={fontfamily:!0,fontsize:!0,fontweight:!0,fontstyle:!0,color:!0,background:!0,class:!0,href:!0,style:!0,xmlns:!0},y.BOLDVARIANTS={bold:{normal:"bold",italic:"bold-italic",fraktur:"bold-fraktur",script:"bold-script","sans-serif":"bold-sans-serif","sans-serif-italic":"sans-serif-bold-italic"},normal:{bold:"normal","bold-italic":"italic","bold-fraktur":"fraktur","bold-script":"script","bold-sans-serif":"sans-serif","sans-serif-bold-italic":"sans-serif-italic"}},y.ITALICVARIANTS={italic:{normal:"italic",bold:"bold-italic","sans-serif":"sans-serif-italic","bold-sans-serif":"sans-serif-bold-italic"},normal:{italic:"normal","bold-italic":"bold","sans-serif-italic":"sans-serif","sans-serif-bold-italic":"bold-sans-serif"}};const Pe={"70.7%":"s","70%":"s","50%":"ss","60%":"Tn","85%":"sm","120%":"lg","144%":"Lg","173%":"LG","207%":"hg","249%":"HG"};class B extends y{toCHTML(t){this.toEmbellishedCHTML(t)||this.addChildren(this.standardChtmlNodes(t))}toEmbellishedCHTML(t){if(t.length<=1||!this.node.isEmbellished)return!1;const e=this.adaptor,s=(t.forEach(t=>e.append(t,this.html("mjx-linestrut"))),this.coreMO().embellishedBreakStyle),i=[];for(var[a,r]of[[t[0],"before"],[t[1],"after"]])s!==r?(this.toCHTML([a]),i.push(this.dom[0]),"after"===r&&e.removeAttribute(this.dom[0],"space")):i.push(this.createChtmlNodes([a])[0]);return this.dom=i,!0}addChildren(t){for(const e of this.childNodes)e.toCHTML(t)}standardChtmlNodes(t){this.markUsed();t=this.createChtmlNodes(t);return this.handleStyles(),this.handleScale(),this.handleBorders(),this.handleColor(),this.handleSpace(),this.handleAttributes(),this.handlePWidth(),t}markUsed(){this.jax.wrapperUsage.add(this.kind)}createChtmlNodes(t){this.dom=t.map(t=>this.html("mjx-"+this.node.kind));for(const e of(t=this.handleHref(t)).keys())this.adaptor.append(t[e],this.dom[e]);return this.dom}handleHref(t){const e=this.node.attributes.get("href");return e?t.map(t=>this.adaptor.append(t,this.html("a",{href:e}))):t}handleStyles(){if(this.styles){const e=this.styles.cssText;if(e){const s=this.adaptor,i=(this.dom.forEach(t=>s.setAttribute(t,"style",e)),this.styles.get("font-family"));i&&this.dom.forEach(t=>s.setStyle(t,"font-family",this.font.cssFamilyPrefix+", "+i))}}}handleScale(){this.dom.forEach(t=>this.setScale(t,this.bbox.rscale))}setScale(t,e){var s=Math.abs(e-1)<.001?1:e;if(t&&1!==s){const e=this.percent(s);Pe[e]?this.adaptor.setAttribute(t,"size",Pe[e]):this.adaptor.setStyle(t,"fontSize",e)}return t}handleSpace(){const t=this.adaptor,e=!!this.node.getProperty("breakable")&&!this.node.getProperty("newline"),s=this.dom.length-1;for(const i of[[this.getLineBBox(0).L,"space","marginLeft",0],[this.getLineBBox(s).R,"rspace","marginRight",s]]){const[s,a,r,n]=i,o=this.em(s);if(e&&"space"===a){const e=t.node("mjx-break",We[o]?{size:We[o]}:{style:"letter-spacing: "+this.em(s-1)},[t.text(" ")]);t.insert(e,this.dom[n])}else s&&(We[o]?t.setAttribute(this.dom[n],a,We[o]):t.setStyle(this.dom[n],r,o))}}handleBorders(){var t,e,s=null==(t=this.styleData)?void 0:t.border,i=null==(e=this.styleData)?void 0:e.padding,a=this.dom.length-1;if(s&&a){const r=this.adaptor;for(const t of this.dom.keys()){const e=this.dom[t];t&&(s.width[3]&&r.setStyle(e,"border-left"," none"),i[3]&&r.setStyle(e,"padding-left","0")),t!==a&&(s.width[1]&&r.setStyle(e,"border-right","none"),i[1]&&r.setStyle(e,"padding-right","0"))}}}handleColor(){var t;const e=this.adaptor,s=this.node.attributes,i=s.getExplicit("mathcolor")||s.getExplicit("color"),a=s.getExplicit("mathbackground")||s.getExplicit("background")||(null==(t=this.styles)?void 0:t.get("background-color"));i&&this.dom.forEach(t=>e.setStyle(t,"color",i)),a&&this.dom.forEach(t=>e.setStyle(t,"backgroundColor",a))}handleAttributes(){const e=this.adaptor,s=this.node.attributes,i=s.getAllDefaults(),t=B.skipAttributes;for(const a of s.getExplicitNames())if(!1===t[a]||!(a in i)&&!t[a]&&!e.hasAttribute(this.dom[0],a)){const i=s.getExplicit(a);this.dom.forEach(t=>e.setAttribute(t,a,i))}if(s.get("class")){const i=s.get("class").trim().split(/ +/);for(const s of i)this.dom.forEach(t=>e.addClass(t,s))}this.node.getProperty("inline-breaks")&&this.dom.forEach(t=>e.setAttribute(t,"inline-breaks","true"))}handlePWidth(){if(this.bbox.pwidth){const e=this.adaptor;this.bbox.pwidth===c.fullWidth?this.dom.forEach(t=>e.setAttribute(t,"width","full")):this.dom.forEach(t=>e.setStyle(t,"width",this.bbox.pwidth))}}setIndent(t,e,s){const i=this.adaptor;if("center"===e||"left"===e){const e=this.getBBox().L;i.setStyle(t,"margin-left",this.em(s+e))}if("center"===e||"right"===e){const e=this.getBBox().R;i.setStyle(t,"margin-right",this.em(-s+e))}}drawBBox(){var{w:t,h:e,d:s,R:i}=this.getOuterBBox(),i=this.html("mjx-box",{style:{opacity:.25,"margin-left":this.em(-t-i)}},[this.html("mjx-box",{style:{height:this.em(e),width:this.em(t),"background-color":"red"}}),this.html("mjx-box",{style:{height:this.em(s),width:this.em(t),"margin-left":this.em(-t),"vertical-align":this.em(-s),"background-color":"green"}})]),e=this.dom[0]||this.parent.dom[0],t=this.adaptor.getAttribute(e,"size"),s=(t&&this.adaptor.setAttribute(i,"size",t),this.adaptor.getStyle(e,"fontSize"));s&&this.adaptor.setStyle(i,"fontSize",s),this.adaptor.append(this.adaptor.parent(e),i),this.adaptor.setStyle(e,"backgroundColor","#FFEE00")}html(t,e={},s=[]){return this.jax.html(t,e,s)}text(t){return this.jax.text(t)}char(t){return this.font.charSelector(t).substring(1)}}function He(t){return class extends t{getWrapWidth(t){return this.parent?this.getBBox().w:this.metrics.containerWidth/this.jax.pxPerEm}computeBBox(t,e=!1){super.computeBBox(t,e);const s=this.node.attributes;if(!this.parent&&this.jax.math.display&&"linebreak"===s.get("overflow")){const e=this.containerWidth;t.w>e&&this.childNodes[0].breakToWidth(e),t.updateFrom(this.childNodes[0].getBBox())}}}}B.kind="unknown",B.autoStyle=!0;const Re=MathJax._.core.MmlTree.MmlNodes.math.MmlMath,Ee=((W=class extends He(B){handleDisplay(i){const a=this.adaptor,[r,n]=this.getAlignShift();if("center"!==r&&a.setAttribute(i,"justify",r),this.bbox.pwidth===c.fullWidth){if(a.setAttribute(i,"width","full"),this.jax.table){let{L:t,w:e,R:s}=this.jax.table.getOuterBBox();"right"===r?s=Math.max(s||-n,-n):"left"===r?t=Math.max(t||n,n):"center"===r&&(e+=2*Math.abs(n));var o=this.em(Math.max(0,t+e+s));a.setStyle(i,"min-width",o),a.setStyle(this.jax.table.dom[0],"min-width",o)}}else this.setIndent(this.dom[0],r,n)}handleInline(t){const e=this.adaptor,s=e.getStyle(this.dom[0],"margin-right");s&&(e.setStyle(this.dom[0],"margin-right",""),e.setStyle(t,"margin-right",s),e.setStyle(t,"width","0"))}toCHTML(t){super.toCHTML(t);const e=this.adaptor;"block"===this.node.attributes.get("display")?(e.setAttribute(this.dom[0],"display","true"),e.setAttribute(t[0],"display","true"),this.handleDisplay(t[0])):this.handleInline(t[0]),e.addClass(this.dom[0],this.font.cssFontPrefix+"-N")}setChildPWidths(t,e=null,s=!0){return!!this.parent&&super.setChildPWidths(t,e,s)}handleAttributes(){super.handleAttributes();const e=this.adaptor;this.node.getProperty("process-breaks")&&this.dom.forEach(t=>e.setAttribute(t,"breakable","true"))}}).kind=Re.prototype.kind,W.styles={"mjx-math":{"line-height":0,"text-align":"left","text-indent":0,"font-style":"normal","font-weight":"normal","font-size":"100%","font-size-adjust":"none","letter-spacing":"normal","word-wrap":"normal","word-spacing":"normal",direction:"ltr",padding:"1px 0"},'mjx-container[jax="CHTML"][display="true"] mjx-math':{padding:0},"mjx-math[breakable]":{display:"inline"},'mjx-container[jax="CHTML"] mjx-break':{"white-space":"normal","line-height":"0","clip-path":"rect(0 0 0 0)","font-family":"MJX-BRK !important"},'mjx-break[size="0"]':{"letter-spacing":"-0.999em"},'mjx-break[size="1"]':{"letter-spacing":"-0.889em"},'mjx-break[size="2"]':{"letter-spacing":"-0.833em"},'mjx-break[size="3"]':{"letter-spacing":"-0.778em"},'mjx-break[size="4"]':{"letter-spacing":"-0.722em"},'mjx-break[size="5"]':{"letter-spacing":"-0.667em"}},W);function Fe(t){return class extends t{computeBBox(t,e=0){super.computeBBox(t),this.copySkewIC(t)}}}const Ie=MathJax._.core.MmlTree.MmlNodes.mi.MmlMi,_e=((W=class extends Fe(B){}).kind=Ie.prototype.kind,W);function Ve(t){return class extends t{get breakCount(){return this.breakStyle?1:0}get embellishedBreakCount(){return this.embellishedBreakStyle?1:0}get embellishedBreakStyle(){return this.breakStyle||this.getBreakStyle()}protoBBox(t){var e=this.stretch.dir!==u.None;e&&null===this.size&&this.getStretchedVariant([0]),e&&this.size<0||(super.computeBBox(t),0!==t.w||!this.node.attributes.hasExplicit("fence")||""!==this.node.getText()||this.node.texClass!==d.OPEN&&this.node.texClass!==d.CLOSE||this.jax.options.mathmlSpacing||(t.R=this.font.params.nulldelimiterspace),this.copySkewIC(t))}getAccentOffset(){var t=c.empty();return this.protoBBox(t),-t.w/2}getCenterOffset(t=null){return t||(t=c.empty(),super.computeBBox(t)),(t.h+t.d)/2+this.font.params.axis_height-t.h}getStretchedVariant(e,s=!1){if(this.stretch.dir!==u.None){var i=this.getWH(e),a=this.getSize("minsize",0),r=this.getSize("maxsize",1/0),n=this.node.getProperty("mathaccent"),i=Math.max(a,Math.min(r,i)),r=this.font.params.delimiterfactor/1e3,o=this.font.params.delimitershortfall,h=a||s?i:n?Math.min(i/r,i+o):Math.max(i*r,i-o),a=this.stretch,l=a.c||this.getText().codePointAt(0);let t=0;if(a.sizes)for(const e of a.sizes){if(e>=h)return n&&t&&t--,void this.setDelimSize(l,t);t++}a.stretch?(this.size=-1,this.invalidateBBox(),this.getStretchBBox(e,this.checkExtendedHeight(i,a),a)):this.setDelimSize(l,t-1)}}setDelimSize(t,e){var s=this.stretch,e=(this.variant=this.font.getSizeVariant(t,e),this.size=e,s.schar&&s.schar[Math.min(e,s.schar.length-1)]||t);this.stretch=Object.assign(Object.assign({},s),{c:e}),this.childNodes[0].invalidateBBox()}getSize(t,e){const s=this.node.attributes;return e=s.isSet(t)?this.length2em(s.get(t),1,1):e}getWH(t){if(0===t.length)return 0;if(1===t.length)return t[0];var[t,e]=t,s=this.font.params.axis_height;return this.node.attributes.get("symmetric")?2*Math.max(t-s,e+s):t+e}getStretchBBox(t,e,s){Object.hasOwn(s,"min")&&s.min>e&&(e=s.min);let[i,a,r]=s.HDW;if(this.stretch.dir===u.Vertical)[i,a]=this.getBaseline(t,e,s);else if(r=e,this.stretch.hd&&!this.jax.options.mathmlSpacing){const t=this.font.params.extender_factor;i=i*(1-t)+this.stretch.hd[0]*t,a=a*(1-t)+this.stretch.hd[1]*t}this.bbox.h=i,this.bbox.d=a,this.bbox.w=r}getBaseline(t,e,s){var i=2===t.length&&t[0]+t[1]===e,[e,a]=i?t:[e,0];let[r,n]=[e+a,0];if(this.node.attributes.get("symmetric")){const t=this.font.params.axis_height;i&&(r=2*Math.max(e-t,a+t)),n=r/2-t}else if(i)n=a;else{const[t,e]=s.HDW||[.75,.25];n=e*(r/(t+e))}return[r-n,n]}checkExtendedHeight(t,e){var s;return e.fullExt&&([e,s]=e.fullExt,t=s+Math.ceil(Math.max(0,t-s)/e)*e),t}setBreakStyle(t=""){if(this.breakStyle=this.node.parent.isEmbellished&&!t?"":this.getBreakStyle(t),this.breakCount&&this.multChar){const t=this.parent.node.childIndex(this.node),e=this.parent.node.childNodes[t+1];e&&e.setTeXclass(this.multChar.node)}}getBreakStyle(t=""){const e=this.node.attributes;let s=t||("newline"===e.get("linebreak")||this.node.getProperty("forcebreak")?e.get("linebreakstyle"):"");return s="infixlinebreakstyle"===s?e.get(s):s}getMultChar(){var t=this.node.attributes.get("linebreakmultchar");t&&"⁢"===this.getText()&&"⁢"!==t&&(this.multChar=this.createMo(t))}constructor(t,e,s=null){super(t,e,s),this.size=null,this.isAccent=this.node.isAccent,this.getMultChar(),this.setBreakStyle()}computeBBox(t,e=0){if(this.protoBBox(t),this.node.attributes.get("symmetric")&&this.stretch.dir!==u.Horizontal){const e=this.getCenterOffset(t);t.h+=e,t.d-=e}this.node.getProperty("mathaccent")&&(this.stretch.dir===u.None||0<=this.size)&&(t.w=0)}computeLineBBox(t){return this.moLineBBox(t,this.breakStyle)}moLineBBox(t,e,s=null){var i=this.node.attributes.get("lineleading"),i=this.length2em(i,this.linebreakOptions.lineleading);if(0===t&&"before"===e){const t=o.from(c.zero(),i);return t.originalL=this.bbox.L,this.bbox.L=0,t}let a=o.from(s||this.getOuterBBox(),i);return 1===t&&("after"===e?(a.w=a.h=a.d=0,a.isFirst=!0,this.bbox.R=0):"duplicate"===e?a.L=0:this.multChar&&(a=o.from(this.multChar.getOuterBBox(),i)),a.getIndentData(this.node)),a}canStretch(t){if(this.stretch.dir!==u.None)return this.stretch.dir===t;if(!this.node.attributes.get("stretchy"))return!1;const e=this.getText();if(1!==Array.from(e).length)return!1;var s=this.font.getDelimiter(e.codePointAt(0));return this.stretch=s&&s.dir===t?s:xe,this.stretch.dir!==u.None}getVariant(){this.node.attributes.get("largeop")?this.variant=this.node.attributes.get("displaystyle")?"-largeop":"-smallop":this.node.attributes.hasExplicit("mathvariant")||!1!==this.node.getProperty("pseudoscript")?super.getVariant():this.variant="-tex-variant"}remapChars(t){const e=this.node.getProperty("primes");if(e)return De(e);if(1===t.length){const e=this.node.coreParent().parent,s=this.isAccent&&!e.isKind("mrow")?"accent":"mo",i=this.font.getRemappedChar(s,t[0]);i&&(t=this.unicodeChars(i,this.variant))}return t}}}const ze=MathJax._.core.MmlTree.MmlNodes.mo.MmlMo;class Ue{constructor(){this.used=new Set,this.needsUpdate=[]}add(t){var e=JSON.stringify(t);this.used.has(e)||this.needsUpdate.push(t),this.used.add(e)}has(t){return this.used.has(JSON.stringify(t))}clear(){this.used.clear(),this.needsUpdate=[]}update(){var t=this.needsUpdate;return this.needsUpdate=[],t}}class k extends h{constructor(){super(...arguments),this.charUsage=new Ue,this.delimUsage=new Ue,this.fontUsage={},this.newFonts=0}static charOptions(t,e){return super.charOptions(t,e)}static addFontURLs(t,e,s){for(const i of Object.keys(e)){const a=Object.assign({},e[i]);a.src=a.src.replace(/%%URL%%/,s),t[i]=a}}static addDynamicFontCss(t,e,s){const i={};for(const s of e){const e=s.slice(4);i[`@font-face /* ${e} */`]={"font-family":s,src:`url("%%URL%%/${s.toLowerCase()}.woff2") format("woff2")`},t["."+e]={"font-family":this.defaultCssFamilyPrefix+", "+s}}this.addFontURLs(t,i,s)}static addExtension(t,e=""){super.addExtension(t,e),t.fonts&&this.addDynamicFontCss(this.defaultStyles,t.fonts,t.fontURL)}addExtension(t,e=""){if(super.addExtension(t,e),!t.fonts||!this.options.adaptiveCSS)return[];const s={},i=new Le;return this.constructor.addDynamicFontCss(s,t.fonts,t.fontURL),i.addStyles(s),i.getStyleRules()}adaptiveCSS(t){this.options.adaptiveCSS=t}clearCache(){this.options.adaptiveCSS&&(this.charUsage.clear(),this.delimUsage.clear())}createVariant(t,e=null,s=null){super.createVariant(t,e,s),this.variant[t].letter=this.constructor.defaultVariantLetters[t]}defineChars(t,e){super.defineChars(t,e);const s=this.variant[t].letter,i=this.constructor;for(const t of Object.keys(e)){var a=parseInt(t);if(Array.isArray(e[a])){const r=i.charOptions(e,a);void 0===r.f&&(r.f=s);for(const[t,e]of i.combiningChars)if(a>=t&&a<=e){r.cmb=!0;break}}}}addDynamicFontCss(t,e=this.options.fontURL){this.constructor.addDynamicFontCss(this.fontUsage,t,e)}updateDynamicStyles(){var t=this.fontUsage;return this.fontUsage={},this.options.adaptiveCSS||this.updateStyles(t),t}get styles(){const t=this.constructor,e=Object.assign(Object.assign({},t.defaultStyles),this.fontUsage);return this.fontUsage={},t.addFontURLs(e,t.defaultFonts,this.options.fontURL),this.options.adaptiveCSS?this.updateStyles(e):this.allStyles(e),e}updateStyles(t){for(const i of this.delimUsage.update())this.addDelimiterStyles(t,i,this.getDelimiter(i));for(var[e,s]of this.charUsage.update()){e=this.variant[e];this.addCharStyles(t,e.letter,s,e.chars[s])}return t}allStyles(t){var e;for(const e of Object.keys(this.delimiters)){var s=parseInt(e);this.addDelimiterStyles(t,s,this.delimiters[s])}for(const r of Object.keys(this.variant)){var i=this.variant[r],a=i.letter;for(const n of Object.keys(i.chars)){const o=parseInt(n),h=i.chars[o];null!=(e=null==h?void 0:h[3])&&e.smp||!Array.isArray(h)||(h.length<4&&(h[3]={}),this.addCharStyles(t,a,o,h))}}}addDelimiterStyles(t,e,s){var i;s.stretch&&(i=s.c&&s.c!==e?this.charSelector(s.c):this.charSelector(e),s.dir===u.Vertical?this.addDelimiterVStyles(t,e,i,s):this.addDelimiterHStyles(t,e,i,s))}addDelimiterVStyles(t,e,s,i){var a=i.HDW,[i,r,n,o]=i.stretch,[e,h,l,d]=this.getStretchVariants(e),c=this.addDelimiterVPart(t,s,"beg",i,e,a),r=(this.addDelimiterVPart(t,s,"ext",r,h,a),this.addDelimiterVPart(t,s,"end",n,l,a));if(o){const e=this.addDelimiterVPart(t,s,"mid",o,d,a),i=this.em(e/2-.03);t[`mjx-stretchy-v${s} > mjx-ext:first-of-type`]={height:"50%","border-width":this.em1(c-.03)+" 0 "+i},t[`mjx-stretchy-v${s} > mjx-ext:last-of-type`]={height:"50%","border-width":i+" 0 "+this.em1(r-.03)}}else(r||c)&&(t[`mjx-stretchy-v${s} > mjx-ext`]["border-width"]=this.em1(c-.03)+" 0 "+this.em1(r-.03))}addDelimiterVPart(t,e,s,i,a,r){if(!i)return 0;const[n,o,h]=this.getChar(a,i),l={width:this.em0(h)};if("ext"!==s){const t=h>r[2]?this.em((r[2]-h)/2):"auto",e="beg"===s?n:"end"===s?-o:(n-o)/2;l.margin=`${this.em(e)} ${t} `+this.em(-e)}else l["line-height"]=this.em0(n+o+.005),t[`mjx-stretchy-v${e} > mjx-${s} > mjx-spacer`]={"margin-top":this.em(-o)};return t[`mjx-stretchy-v${e} > mjx-`+s]=l,n+o}addDelimiterHStyles(t,e,s,i){const a=[...i.HDW],[r,n,o,h]=i.stretch,[l,d,c,m]=this.getStretchVariants(e);if(i.hd&&!this.options.mathmlSpacing){const t=this.params.extender_factor;a[0]=a[0]*(1-t)+i.hd[0]*t,a[1]=a[1]*(1-t)+i.hd[1]*t}var p=this.addDelimiterHPart(t,s,"beg",r,l,a),u=(this.addDelimiterHPart(t,s,"ext",n,d,a),this.addDelimiterHPart(t,s,"end",o,c,a));if(h){const e=this.addDelimiterHPart(t,s,"mid",h,m,a),i=this.em0(e/2-.03);t[`mjx-stretchy-h${s} > mjx-ext:first-of-type`]={width:"50%","border-width":`0 ${i} 0 `+this.em0(p-.03)},t[`mjx-stretchy-h${s} > mjx-ext:last-of-type`]={width:"50%","border-width":`0 ${this.em0(u-.03)} 0 `+i}}else(p||u)&&(t[`mjx-stretchy-h${s} > mjx-ext`]["border-width"]=`0 ${this.em0(u-.06)} 0 `+this.em0(p-.06));i.ext&&(t[`mjx-stretchy-h${s} > mjx-ext > mjx-spacer`]["letter-spacing"]=this.em(-i.ext))}addDelimiterHPart(t,e,s,i,a,r){if(!i)return 0;let[,,n,o]=this.getChar(a,i);const h={padding:this.padding(r,n-r[2])};return"ext"===s?(!n&&o.dx&&(n=2*o.dx-.06),t[`mjx-stretchy-h${e} > mjx-${s} > mjx-spacer`]={"margin-left":this.em(-n/2)},o.cmb&&(t[`mjx-stretchy-h${e} > mjx-${s} > mjx-c`]={width:this.em(n),"text-align":"right"})):("mid"===s?h.margin="0 "+this.em(-n/2):h["end"==s?"margin-left":"margin-right"]=this.em(-n),this.checkCombiningChar(o,h)),t[`mjx-stretchy-h${e} > mjx-`+s]=h,n}addCharStyles(t,e,s,i){var a=i[3],e=void 0!==a.f?a.f:e,e=a.ff||(e?this.cssFontPrefix+"-"+e:""),s="mjx-c"+this.charSelector(s)+(e?"."+e:""),e=a.oc||a.ic||0;t[s]={padding:this.padding(i,e)},a.oc&&(t[s+"[noic]"]={"padding-right":this.em(i[2])}),this.checkCombiningChar(a,t[s])}checkCombiningChar(t,e){if(t.cmb){const s=e.padding.split(/ /);e.width=s[1],s[1]="0",s[3]||s.pop(),e.padding=s.join(" ")}}em(t){return p(t)}em0(t){return p(Math.max(0,t))}em1(t){t=p(Math.max(0,t));return"0"===t?".1px":t}padding([t,e,s],i=0){return[t,s+i,e,0].map(this.em0).join(" ")}charSelector(t){return".mjx-c"+t.toString(16).toUpperCase()}}k.OPTIONS=Object.assign(Object.assign({},h.OPTIONS),{dynamicPrefix:"./chtml/dynamic",fontURL:"./chtml/woff2"}),k.JAX="CHTML",k.defaultVariantLetters={},k.defaultStyles={},k.defaultFonts={},k.combiningChars=[[768,879],[8400,8447]];(W=class extends Ve(B){toCHTML(e){const s=this.adaptor,t=this.node.attributes,i=t.get("symmetric")&&this.stretch.dir!==u.Horizontal,a=this.stretch.dir!==u.None,r=(a&&null===this.size&&this.getStretchedVariant([]),1<e.length&&e.forEach(t=>s.append(t,this.html("mjx-linestrut"))),this.standardChtmlNodes(e));if(1<r.length&&"duplicate"!==this.breakStyle){const e="after"===this.breakStyle?1:0;s.remove(r[e]),r[e]=null}if(a&&this.size<0)this.stretchHTML(r);else{if(i||t.get("largeop")){const e=this.em(this.getCenterOffset());"0"!==e&&r.forEach(t=>t&&s.setStyle(t,"verticalAlign",e))}this.node.getProperty("mathaccent")&&r.forEach(t=>{s.setStyle(t,"width","0"),s.setStyle(t,"margin-left",this.em(this.getAccentOffset()))}),r[0]&&this.addChildren([r[0]]),r[1]&&(this.multChar||this).addChildren([r[1]])}}stretchHTML(t){var e=this.getText().codePointAt(0);this.font.delimUsage.add(e),this.childNodes[0].markUsed();const s=this.stretch,i=s.stretch,a=this.font.getStretchVariants(e),r=[],n=[];for(let t=0;t<i.length;t++)i[t]&&(n[t]=this.font.getChar(a[t],i[t]));const{h:o,d:h,w:l}=this.bbox,d={},c=(s.dir===u.Vertical?(this.createAssembly(n,i,a,r,o+h,.05,"\n"),r.push(this.html("mjx-mark")),d.height=this.em(o+h),d.verticalAlign=this.em(-h)):(this.createAssembly(n,i,a,r,l,s.ext||0),d.width=this.em(l)),{class:this.char(s.c||e),style:d}),m=this.html("mjx-stretchy-"+s.dir,c,r),p=this.adaptor;t[0]&&p.append(t[0],m),t[1]&&p.append(t[1],t[0]?p.clone(m):m)}createAssembly(t,e,s,i,a,r,n=""){var[o,h,l,d]=(t=[...t,null,null,null].slice(0,4)).map(t=>t?n?t[0]+t[1]:t[2]:0),h=Math.max(0,h-r),[r,d]=t[3]?[(a-d)/2-o,(a-d)/2-l]:[a-o-l,0];this.createPart("mjx-beg",t[0],e[0],s[0],i),this.createPart("mjx-ext",t[1],e[1],s[1],i,r,h,n),t[3]&&(this.createPart("mjx-mid",t[3],e[3],s[3],i),this.createPart("mjx-ext",t[1],e[1],s[1],i,d,h,n)),this.createPart("mjx-end",t[2],e[2],s[2],i)}createPart(s,t,i,a,r,n=0,o=0,h=""){if(i){var t=t[3],a=t.f||("normal"===a?"":this.font.getVariant(a).letter),a=t.ff||(a?this.font.cssFontPrefix+"-"+a:""),l=t.c||String.fromCodePoint(i);let e=[];if("mjx-ext"===s&&(o||t.dx)){o=o||Math.max(.06,2*t.dx-.06);const s=Math.min(Math.ceil(n/o)+1,500);if(t.cmb){e.push(this.html("mjx-spacer"));for(let t=0;t<s;t++)e.push(this.html("mjx-c",{},[this.text(l)]))}else e=[this.html("mjx-spacer",{},[this.text(Array(s).fill(l).join(h))])]}else e=[this.text(l)];r.push(this.html(s,a?{class:a}:{},e))}}}).kind=ze.prototype.kind,W.styles={"mjx-stretchy-h":{display:"inline-block"},"mjx-stretchy-h > *":{display:"inline-block",width:0,"text-align":"right"},"mjx-stretchy-h > mjx-ext":{"clip-path":"padding-box xywh(0 -1em 100% calc(100% + 2em))",width:"100%",border:"0px solid transparent","box-sizing":"border-box","text-align":"left"},"mjx-stretchy-v":{display:"inline-block","text-align":"center"},"mjx-stretchy-v > *":{display:"block",height:0,margin:"0 auto"},"mjx-stretchy-v > mjx-ext > mjx-spacer":{display:"block"},"mjx-stretchy-v > mjx-ext":{"clip-path":"padding-box xywh(-1em 0 calc(100% + 2em) 100%)",height:"100%",border:"0.1px solid transparent","box-sizing":"border-box","white-space":"wrap"},"mjx-mark":{display:"inline-block",height:0}};const Je=W;function Ke(t){return class extends t{remapChars(t){if(t.length){var e=this.font.getRemappedChar("mn",t[0]);if(e){const s=this.unicodeChars(e,this.variant);1===s.length?t[0]=s[0]:t=s.concat(t.slice(1))}}return t}}}const qe=MathJax._.core.MmlTree.MmlNodes.mn.MmlMn,Xe=((W=class extends Ke(B){}).kind=qe.prototype.kind,W);function $e(t){return class extends t{createText(t){const e=this.wrap(this.mmlText(t));return e.parent=this,e}constructor(t,e,s=null){super(t,e,s);const i=this.node.attributes,a=i.getList("lquote","rquote");"monospace"!==this.variant&&(i.isSet("lquote")||'"'!==a.lquote||(a.lquote="“"),i.isSet("rquote")||'"'!==a.rquote||(a.rquote="”")),this.childNodes.unshift(this.createText(a.lquote)),this.childNodes.push(this.createText(a.rquote))}}}const Qe=MathJax._.core.MmlTree.MmlNodes.ms.MmlMs,Ge=((W=class extends $e(B){}).kind=Qe.prototype.kind,W);function Ye(t){t=class extends t{constructor(){super(...arguments),this.breakPoints=[]}textWidth(t){let e=this.textNode;if(!e){const t=this.node.factory.create("text");t.parent=this.node,(e=this.textNode=this.factory.wrap(t)).parent=this}return e.node.setText(t),e.invalidateBBox(!1),e.getBBox().w}get breakCount(){return this.breakPoints.length}getVariant(){var t,e=this.jax.options,s=this.jax.math.outputData,i=(!!s.merrorFamily||!!e.merrorFont)&&this.node.Parent.isKind("merror");s.mtextFamily||e.mtextFont||i?(t=this.node.attributes.get("mathvariant"),i=(t=this.constructor.INHERITFONTS[t]||this.jax.font.getCssFont(t))[0]||(i?s.merrorFamily||e.merrorFont:s.mtextFamily||e.mtextFont),this.variant=this.explicitVariant(i,t[2]?"bold":"",t[1]?"italic":"")):super.getVariant()}setBreakAt(t){this.breakPoints.push(t)}clearBreakPoints(){this.breakPoints=[]}computeLineBBox(t){const e=o.from(this.getOuterBBox(),this.linebreakOptions.lineleading);return this.breakCount&&(e.w=this.getBreakWidth(t),0===t?(e.R=0,this.addLeftBorders(e)):(e.L=0,e.indentData=[["left","0"],["left","0"],["left","0"]],t===this.breakCount&&this.addRightBorders(e))),e}getBreakWidth(t){const e=this.childNodes;let[s,i]=this.breakPoints[t-1]||[0,0];var[a,t]=this.breakPoints[t]||[e.length,0];let r=e[s].node.getText().split(/ /);if(s===a)return this.textWidth(r.slice(i,t).join(" "));let n=this.textWidth(r.slice(i).join(" "));for(;++s<a&&s<e.length;)n+=e[s].getBBox().w;return s<e.length&&(r=e[s].node.getText().split(/ /),n+=this.textWidth(r.slice(0,t).join(" "))),n}};return t.INHERITFONTS={normal:["",!1,!1],bold:["",!1,!0],italic:["",!0,!1],"bold-italic":["",!0,!0]},t}const Ze=MathJax._.core.MmlTree.MmlNodes.mtext.MmlMtext,ts=((W=class extends Ye(B){toCHTML(i){if(this.breakCount){const o=this.standardChtmlNodes(i),h=this.textNode.node,l=this.childNodes;for(const i of o.keys()){var a=[o[i]];this.adaptor.append(o[i],this.html("mjx-linestrut"));let[t,e]=this.breakPoints[i-1]||[0,0];var[r,n]=this.breakPoints[i]||[l.length,0];let s=l[t].node.getText().split(/ /);if(t!==r){for(h.setText(s.slice(e).join(" ")),this.textNode.toCHTML(a);++t<r&&t<l.length;)l[t].toCHTML(a);t<l.length&&(s=l[t].node.getText().split(/ /),h.setText(s.slice(0,n).join(" ")),this.textNode.toCHTML(a))}else h.setText(s.slice(e,n).join(" ")),this.textNode.toCHTML(a)}}else super.toCHTML(i)}}).kind=Ze.prototype.kind,W);function es(t){return class extends t{get canBreak(){return this.node.canBreak}get breakCount(){return this.breakStyle?1:0}setBreakStyle(t=""){this.breakStyle=t||(this.node.hasNewline||this.node.getProperty("forcebreak")?"before":"")}constructor(t,e,s=null){super(t,e,s),this.setBreakStyle()}computeBBox(t,e=0){const s=this.node.attributes;t.w=this.length2em(s.get("width"),0),t.h=this.length2em(s.get("height"),0),t.d=this.length2em(s.get("depth"),0)}computeLineBBox(t){const e=this.node.attributes.get("data-lineleading"),s=this.length2em(e,this.linebreakOptions.lineleading),i=o.from(c.zero(),s);return 1===t&&(i.getIndentData(this.node),i.w=this.getBBox().w,i.isFirst=0===i.w),i}}}const ss=MathJax._.core.MmlTree.MmlNodes.mspace.MmlMspace,is=((W=class extends es(B){toCHTML(t){1<t.length&&t.forEach(t=>this.adaptor.append(t,this.html("mjx-linestrut")));t=this.standardChtmlNodes(t);let{w:e,h:s,d:i}=this.getBBox();e<0&&(this.adaptor.setStyle(t[0],"marginRight",this.em(e)),e=0),e&&!this.breakCount&&this.adaptor.setStyle(t[0],"width",this.em(e)),(s=Math.max(0,s+i))&&this.adaptor.setStyle(t[0],"height",this.em(Math.max(0,s))),i&&this.adaptor.setStyle(t[0],"verticalAlign",this.em(-i))}}).kind=ss.prototype.kind,W);function as(t){return class extends t{getDimens(){var t=this.node.attributes.getList("width","height","depth","lspace","voffset"),e=this.childNodes[0].getOuterBBox();let{w:s,h:i,d:a}=e;var r=s,n=i,o=a;let h=0,l=0,d=0;""!==t.width&&(s=this.dimen(t.width,e,"w",0)),""!==t.height&&(i=this.dimen(t.height,e,"h",0)),""!==t.depth&&(a=this.dimen(t.depth,e,"d",0)),""!==t.voffset&&(l=this.dimen(t.voffset,e)),""!==t.lspace&&(h=this.dimen(t.lspace,e));t=this.node.attributes.get("data-align");return t&&(d=this.getAlignX(s,e,t)),[n,o,r,i-n,a-o,s-r,h,l,d]}dimen(t,e,s="",i=null){const a=(t=String(t)).match(/width|height|depth/),r=a?e[a[0].charAt(0)]:s?e[s]:0;let n=this.length2em(t,r)||0;return t.match(/^[-+]/)&&s&&(n+=r),n=null!=i?Math.max(i,n):n}setBBoxDimens(t){var[e,s,i,a,r,n]=this.getDimens();t.w=i+n,t.h=e+a,t.d=s+r}computeBBox(t,e=!1){if(this.setBBoxDimens(t),this.childNodes[0].getOuterBBox().w>t.w){const e=this.node.attributes.get("data-overflow");("linebreak"===e||"auto"===e&&"linebreak"===this.jax.math.root.attributes.get("overflow"))&&(this.childNodes[0].breakToWidth(t.w),this.setBBoxDimens(t))}this.setChildPWidths(e,t.w)}getWrapWidth(t){return this.getBBox().w}getChildAlign(t){return this.node.attributes.get("data-align")||"left"}}}const rs=MathJax._.core.MmlTree.MmlNodes.mpadded.MmlMpadded,ns=((W=class extends as(B){toCHTML(t){if(!this.toEmbellishedCHTML(t)){t=this.standardChtmlNodes(t);const e=[],s={},[,,i,a,r,n,o,h,l]=this.getDimens();if((n||this.childNodes[0].getBBox().pwidth)&&(s.width=this.em(i+n)),(a||r)&&(s.margin=this.em(a)+" 0 "+this.em(r)),o+l||h){s.position="relative";const t=this.html("mjx-rbox",{style:{left:this.em(o+l),top:this.em(-h),"max-width":s.width}});o+l&&this.childNodes[0].getBBox().pwidth&&(this.adaptor.setAttribute(t,"width","full"),this.adaptor.setStyle(t,"left",this.em(o))),e.push(t)}t=[this.adaptor.append(t[0],this.html("mjx-block",{style:s},e))],this.childNodes[0].childNodes.length?this.childNodes[0].toCHTML([e[0]||t[0]]):(a||r)&&this.adaptor.append(e[0]||t[0],this.html("mjx-box"))}}}).kind=rs.prototype.kind,W.styles={"mjx-mpadded":{display:"inline-block"},"mjx-rbox":{display:"inline-block",position:"relative"}},W),C=4,w=1,v=2,M=.067,S=.2,j=M+"em solid",L={top:0,right:1,bottom:2,left:3},os=Object.keys(L),hs=t=>new Array(4).fill(t.thickness+t.padding),ls=t=>new Array(4).fill(t.padding),ds=t=>new Array(4).fill(t.thickness),N=t=>Math.max(t.padding,t.thickness*(t.arrowhead.x+t.arrowhead.dx+1)),cs=(t,e)=>{var s,i;return t.childNodes[0]&&({h:s,d:i}=t.childNodes[0].getBBox(),e[0]=e[2]=Math.max(0,t.thickness*t.arrowhead.y-(s+i)/2)),e},ms=(t,e)=>{var s;return t.childNodes[0]&&(s=t.childNodes[0].getBBox()["w"],e[1]=e[3]=Math.max(0,t.thickness*t.arrowhead.y-s/2)),e},ps={up:[-Math.PI/2,!1,!0,"verticalstrike"],down:[Math.PI/2,!1,!0,"verticakstrike"],right:[0,!1,!1,"horizontalstrike"],left:[Math.PI,!1,!1,"horizontalstrike"],updown:[Math.PI/2,!0,!0,"verticalstrike uparrow downarrow"],leftright:[0,!0,!1,"horizontalstrike leftarrow rightarrow"]},us={updiagonal:[-1,0,!1,"updiagonalstrike northeastarrow"],northeast:[-1,0,!1,"updiagonalstrike updiagonalarrow"],southeast:[1,0,!1,"downdiagonalstrike"],northwest:[1,Math.PI,!1,"downdiagonalstrike"],southwest:[-1,Math.PI,!1,"updiagonalstrike"],northeastsouthwest:[-1,0,!0,"updiagonalstrike northeastarrow updiagonalarrow southwestarrow"],northwestsoutheast:[1,0,!0,"downdiagonalstrike northwestarrow southeastarrow"]},gs={up:t=>ms(t,[N(t),0,t.padding,0]),down:t=>ms(t,[t.padding,0,N(t),0]),right:t=>cs(t,[0,N(t),0,t.padding]),left:t=>cs(t,[0,t.padding,0,N(t)]),updown:t=>ms(t,[N(t),0,N(t),0]),leftright:t=>cs(t,[0,N(t),0,N(t)])},xs=function(e){return t=>{const s=L[t];return[t,{renderer:e,bbox:t=>{const e=[0,0,0,0];return e[s]=t.thickness+t.padding,e},border:t=>{const e=[0,0,0,0];return e[s]=t.thickness,e}}]}},fs=function(r){return(t,e,s)=>{const i=L[e],a=L[s];return[t,{renderer:r,bbox:t=>{const e=t.thickness+t.padding,s=[0,0,0,0];return s[i]=s[a]=e,s},border:t=>{const e=[0,0,0,0];return e[i]=e[a]=t.thickness,e},remove:e+" "+s}]}},bs=function(s){return t=>{var e="mjx-"+t.charAt(0)+"strike";return[t+"diagonalstrike",{renderer:s(e),bbox:hs}]}},ys=function(o){return t=>{const[a,r,n,e]=us[t];return[t+"arrow",{renderer:(t,e)=>{var[s,i]=t.arrowAW(),i=t.arrow(i,a*(s-r),n);o(t,i)},bbox:t=>{var{a:e,x:s,y:i}=t.arrowData(),[a,r,n]=[t.arrowhead.x,t.arrowhead.y,t.arrowhead.dx],[a,n]=t.getArgMod(a+n,r),r=i+(e<a?t.thickness*n*Math.sin(a-e):0),i=s+(a>Math.PI/2-e?t.thickness*n*Math.sin(a+e-Math.PI/2):0);return[r,i,r,i]},remove:e}]}},Bs=function(h){return t=>{const[r,n,o,e]=ps[t];return[t+"arrow",{renderer:(t,e)=>{var{w:s,h:i,d:a}=t.getBBox(),[i,a]=o?[i+a,"X"]:[s,"Y"],s=t.getOffset(a),i=t.arrow(i,r,n,a,s);h(t,i)},bbox:gs[t],remove:e}]}};function ks(t){return class extends t{getParameters(){const t=this.node.attributes,e=t.get("data-padding"),s=(void 0!==e&&(this.padding=this.length2em(e,S)),t.get("data-thickness"));void 0!==s&&(this.thickness=this.length2em(s,M));var i=t.get("data-arrowhead");if(void 0!==i){const[t,e,s]=b(i);this.arrowhead={x:t?parseFloat(t):C,y:e?parseFloat(e):v,dx:s?parseFloat(s):w}}}getNotations(){const t=this.constructor.notations;for(const s of b(this.node.attributes.get("notation"))){var e=t.get(s);e&&((this.notations[s]=e).renderChild&&(this.renderChild=e.renderer))}}removeRedundantNotations(){for(const t of Object.keys(this.notations))if(this.notations[t]){const e=this.notations[t].remove||"";for(const s of e.split(/ /))delete this.notations[s]}}initializeNotations(){for(const t of Object.keys(this.notations)){const e=this.notations[t].init;e&&e(this)}}getBBoxExtenders(){var t=[0,0,0,0];for(const e of Object.keys(this.notations))this.maximizeEntries(t,this.notations[e].bbox(this));return t}getPadding(){const e=[0,0,0,0];for(const t of Object.keys(this.notations)){const s=this.notations[t].border;s&&this.maximizeEntries(e,s(this))}return[0,1,2,3].map(t=>this.TRBL[t]-e[t])}maximizeEntries(e,s){for(let t=0;t<e.length;t++)e[t]<s[t]&&(e[t]=s[t])}getOffset(t){var[e,s,i,a]=this.TRBL,t=("X"===t?s-a:i-e)/2;return.001<Math.abs(t)?t:0}getArgMod(t,e){return[Math.atan2(e,t),Math.sqrt(t*t+e*e)]}arrow(t,e,s,i=0,a){return null}arrowData(){var[t,e]=[this.padding,this.thickness],e=e*(this.arrowhead.x+Math.max(1,this.arrowhead.dx)),{h:s,d:i,w:a}=this.childNodes[0].getBBox(),s=s+i,i=Math.sqrt(s*s+a*a),r=Math.max(t,e*a/i),t=Math.max(t,e*s/i),[e,i]=this.getArgMod(a+2*r,s+2*t);return{a:e,W:i,x:r,y:t}}arrowAW(){var{h:t,d:e,w:s}=this.childNodes[0].getBBox(),[i,a,r,n]=this.TRBL;return this.getArgMod(n+s+a,i+t+e+r)}createMsqrt(t){const e=this.node.factory.create("msqrt"),s=(e.inheritAttributesFrom(this.node),e.childNodes[0]=t.node,this.wrap(e));return s.parent=this,s}sqrtTRBL(){var t=this.msqrt.getBBox(),e=this.msqrt.childNodes[0].getBBox();return[t.h-e.h,0,t.d-e.d,t.w-e.w]}constructor(t,e,s=null){super(t,e,s),this.notations={},this.renderChild=null,this.msqrt=null,this.padding=S,this.thickness=M,this.arrowhead={x:C,y:v,dx:w},this.TRBL=[0,0,0,0],this.getParameters(),this.getNotations(),this.removeRedundantNotations(),this.initializeNotations(),this.TRBL=this.getBBoxExtenders()}computeBBox(t,e=!1){var[s,i,a,r]=this.TRBL,n=this.childNodes[0].getBBox();t.combine(n,r,0),t.h+=s,t.d+=a,t.w+=i,this.setChildPWidths(e)}}}const Cs=MathJax._.core.MmlTree.MmlNodes.menclose.MmlMenclose,ws=function(i,a=""){return(t,e)=>{var s=t.adjustBorder(t.html("mjx-"+i));if(a){const i=t.getOffset(a);if(t.thickness!==M||i){const e=`translate${a}(${t.Em(t.thickness/2-i)})`;t.adaptor.setStyle(s,"transform",e)}}t.adaptor.append(t.dom[0],s)}},vs=function(s){return xs((t,e)=>{t.adaptor.setStyle(e,"border-"+s,t.Em(t.thickness)+" solid")})(s)},Ms=function(t,i,a){return fs((t,e)=>{var s=t.Em(t.thickness)+" solid";t.adaptor.setStyle(e,"border-"+i,s),t.adaptor.setStyle(e,"border-"+a,s)})(t,i,a)},Ss=function(t,n){return bs(r=>(t,e)=>{var{w:s,h:i,d:a}=t.getBBox(),[s,i]=t.getArgMod(s,i+a),a=n*t.thickness/2,i=t.adjustBorder(t.html(r,{style:{width:t.Em(i),transform:"rotate("+t.fixed(-n*s)+"rad) translateY("+a+"em)"}}));t.adaptor.append(t.dom[0],i)})(t)},T=function(t){return ys((t,e)=>{t.adaptor.append(t.dom[0],e)})(t)},A=function(t){return Bs((t,e)=>{t.adaptor.append(t.dom[0],e)})(t)};function js(t,e){return Math.atan2(t,e).toFixed(3).replace(/\.?0+$/,"")}const Ls=js(w,v),Ns=((W=class extends ks(B){adjustArrow(t,e){var s,i,a,r,n,o,h,l=this.thickness,d=this.arrowhead;d.x===C&&d.y===v&&d.dx===w&&l===M||([s,i]=[l*d.x,l*d.y].map(t=>this.em(t)),a=js(d.dx,d.y),[t,r,n,o,h]=this.adaptor.childNodes(t),this.adjustHead(r,[i,"0","1px",s],a),this.adjustHead(n,["1px","0",i,s],"-"+a),this.adjustHead(o,[i,s,"1px","0"],"-"+a),this.adjustHead(h,["1px",s,i,"0"],a),this.adjustLine(t,l,d.x,e))}adjustHead(t,e,s){t&&(this.adaptor.setStyle(t,"border-width",e.join(" ")),this.adaptor.setStyle(t,"transform","skewX("+s+"rad)"))}adjustLine(t,e,s,i){this.adaptor.setStyle(t,"borderTop",this.em(e)+" solid"),this.adaptor.setStyle(t,"top",this.em(-e/2)),this.adaptor.setStyle(t,"right",this.em(e*(s-1))),i&&this.adaptor.setStyle(t,"left",this.em(e*(s-1)))}moveArrow(t,e,s){var i;s&&(i=this.adaptor.getStyle(t,"transform"),this.adaptor.setStyle(t,"transform",`translate${e}(${this.em(-s)})`+(i?" "+i:"")))}adjustBorder(t){return this.thickness!==M&&this.adaptor.setStyle(t,"borderWidth",this.em(this.thickness)),t}adjustThickness(t){return this.thickness!==M&&this.adaptor.setStyle(t,"strokeWidth",this.fixed(this.thickness)),t}fixed(t,e=3){return Math.abs(t)<6e-4?"0":t.toFixed(e).replace(/\.?0+$/,"")}Em(t){return super.em(t)}toCHTML(t){const e=this.adaptor,s=this.standardChtmlNodes(t),i=e.append(s[0],this.html("mjx-box"));this.renderChild?this.renderChild(this,i):this.childNodes[0].toCHTML([i]);for(const t of Object.keys(this.notations)){const e=this.notations[t];e.renderChild||e.renderer(this,i)}var a=this.getPadding();for(const t of os){const s=L[t];0<a[s]&&e.setStyle(i,"padding-"+t,this.em(a[s]))}}arrow(t,e,s,i="",a=0){const r=this.getBBox().w,n={width:this.em(t)};r!==t&&(n.left=this.em((r-t)/2)),e&&(n.transform="rotate("+this.fixed(e)+"rad)");t=this.html("mjx-arrow",{style:n},[this.html("mjx-aline"),this.html("mjx-rthead"),this.html("mjx-rbhead")]);return s&&(this.adaptor.append(t,this.html("mjx-lthead")),this.adaptor.append(t,this.html("mjx-lbhead")),this.adaptor.setAttribute(t,"double","true")),this.adjustArrow(t,s),this.moveArrow(t,i,a),t}}).kind=Cs.prototype.kind,W.styles={"mjx-menclose":{position:"relative"},"mjx-menclose > mjx-dstrike":{display:"inline-block",left:0,top:0,position:"absolute","border-top":j,"transform-origin":"top left"},"mjx-menclose > mjx-ustrike":{display:"inline-block",left:0,bottom:0,position:"absolute","border-top":j,"transform-origin":"bottom left"},"mjx-menclose > mjx-hstrike":{"border-top":j,position:"absolute",left:0,right:0,bottom:"50%",transform:"translateY("+p(M/2)+")"},"mjx-menclose > mjx-vstrike":{"border-left":j,position:"absolute",top:0,bottom:0,right:"50%",transform:"translateX("+p(M/2)+")"},"mjx-menclose > mjx-rbox":{position:"absolute",top:0,bottom:0,right:0,left:0,border:j,"border-radius":p(M+S)},"mjx-menclose > mjx-cbox":{position:"absolute",top:0,bottom:0,right:0,left:0,border:j,"border-radius":"50%"},"mjx-menclose > mjx-arrow":{position:"absolute",left:0,bottom:"50%",height:0,width:0},"mjx-menclose > mjx-arrow > *":{display:"block",position:"absolute","transform-origin":"bottom","border-left":p(M*C)+" solid","border-right":0,"box-sizing":"border-box"},"mjx-menclose > mjx-arrow > mjx-aline":{left:0,top:p(-M/2),right:p(M*(C-1)),height:0,"border-top":p(M)+" solid","border-left":0},"mjx-menclose > mjx-arrow[double] > mjx-aline":{left:p(M*(C-1)),height:0},"mjx-menclose > mjx-arrow > mjx-rthead":{transform:"skewX("+Ls+"rad)",right:0,bottom:"-1px","border-bottom":"1px solid transparent","border-top":p(M*v)+" solid transparent"},"mjx-menclose > mjx-arrow > mjx-rbhead":{transform:"skewX(-"+Ls+"rad)","transform-origin":"top",right:0,top:"-1px","border-top":"1px solid transparent","border-bottom":p(M*v)+" solid transparent"},"mjx-menclose > mjx-arrow > mjx-lthead":{transform:"skewX(-"+Ls+"rad)",left:0,bottom:"-1px","border-left":0,"border-right":p(M*C)+" solid","border-bottom":"1px solid transparent","border-top":p(M*v)+" solid transparent"},"mjx-menclose > mjx-arrow > mjx-lbhead":{transform:"skewX("+Ls+"rad)","transform-origin":"top",left:0,top:"-1px","border-left":0,"border-right":p(M*C)+" solid","border-top":"1px solid transparent","border-bottom":p(M*v)+" solid transparent"},"mjx-menclose > mjx-dbox-top":{position:"absolute",top:0,bottom:"50%",left:0,width:p(1.5*S),border:p(M)+" solid","border-style":"solid solid none none","border-radius":"0 100% 0 0","box-sizing":"border-box"},"mjx-menclose > mjx-dbox-bot":{position:"absolute",top:"50%",bottom:0,left:0,width:p(1.5*S),"border-width":p(M),"border-style":"none solid solid none","border-radius":"0 0 100% 0","box-sizing":"border-box"}},W.notations=new Map([vs("top"),vs("right"),vs("bottom"),vs("left"),Ms("actuarial","top","right"),Ms("madruwb","bottom","right"),Ss("up",1),Ss("down",-1),["horizontalstrike",{renderer:ws("hstrike","Y"),bbox:t=>[0,t.padding,0,t.padding]}],["verticalstrike",{renderer:ws("vstrike","X"),bbox:t=>[t.padding,0,t.padding,0]}],["box",{renderer:(t,e)=>{t.adaptor.setStyle(e,"border",t.Em(t.thickness)+" solid")},bbox:hs,border:ds,remove:"left right top bottom"}],["roundedbox",{renderer:ws("rbox"),bbox:hs}],["circle",{renderer:ws("cbox"),bbox:hs}],["phasorangle",{renderer:(t,e)=>{var{h:s,d:i}=t.getBBox(),[s,i]=t.getArgMod(1.75*t.padding,s+i),a=t.thickness*Math.sin(s)*.9,e=(t.adaptor.setStyle(e,"border-bottom",t.Em(t.thickness)+" solid"),t.adjustBorder(t.html("mjx-ustrike",{style:{width:t.Em(i),transform:`translateX(${t.Em(a)}) rotate(${t.fixed(-s)}rad)`}})));t.adaptor.append(t.dom[0],e)},bbox:t=>{var e=t.padding/2,t=t.thickness;return[2*e,e,e+t,3*e+t]},border:t=>[0,0,t.thickness,0],remove:"bottom"}],A("up"),A("down"),A("left"),A("right"),A("updown"),A("leftright"),T("updiagonal"),T("northeast"),T("southeast"),T("northwest"),T("southwest"),T("northeastsouthwest"),T("northwestsoutheast"),["longdiv",{renderer:(t,e)=>{const s=t.adaptor;s.setStyle(e,"border-top",t.Em(t.thickness)+" solid");var e=s.append(t.dom[0],t.html("mjx-dbox-top")),i=s.append(t.dom[0],t.html("mjx-dbox-bot")),a=t.thickness,r=t.padding;a!==M&&(s.setStyle(e,"border-width",t.Em(a)),s.setStyle(i,"border-width",t.Em(a))),r!==S&&(s.setStyle(e,"width",t.Em(1.5*r)),s.setStyle(i,"width",t.Em(1.5*r)))},bbox:t=>{var e=t.padding,t=t.thickness;return[e+t,e,e,2*e+t/2]}}],["radical",{renderer:(e,t)=>{e.msqrt.toCHTML([t]);const s=e.sqrtTRBL();e.adaptor.setStyle(e.msqrt.dom[0],"margin",s.map(t=>e.Em(-t)).join(" "))},init:t=>{t.msqrt=t.createMsqrt(t.childNodes[0])},bbox:t=>t.sqrtTRBL(),renderChild:!0}]]),W);function Ts(t){return class extends t{stretchChildren(){const s=[];for(const i of this.childNodes)i.canStretch(u.Vertical)&&s.push(i);const i=s.length,a=this.childNodes.length;if(i&&1<a){let t=0,e=0;var r=1<i&&i===a;for(const s of this.childNodes){const i=s.stretch.dir===u.None;if(r||i){const i=s.getBBox().rscale;var[n,o]=s.getUnbrokenHD();o*=i,(n*=i)>t&&(t=n),o>e&&(e=o)}}for(const i of s){const s=i.coreRScale();i.coreMO().getStretchedVariant([t/s,e/s])}}}get fixesPWidth(){return!1}get breakCount(){return this._breakCount<0&&(this._breakCount=this.childNodes.length?this.childNodes.reduce((t,e)=>t+e.breakCount,0):0),this._breakCount}breakTop(t,e){return this.isStack?this.parent.breakTop(this,this):this}constructor(t,e,s=null){super(t,e,s),this.dh=0;this.isStack=!this.parent||this.parent.node.isInferred||this.parent.breakTop(this,this)!==this,this.stretchChildren();for(const t of this.childNodes)if(t.bbox.pwidth){this.bbox.pwidth=c.fullWidth;break}}computeBBox(t,e=!1){var s=this.breakCount;this.lineBBox=s?[new o({h:.75,d:.25,w:0},[0,0])]:[],t.empty();for(const e of this.childNodes.keys()){const i=this.childNodes[e];t.append(i.getOuterBBox()),s&&this.computeChildLineBBox(i,e)}t.clean(),s&&!this.coreMO().node.isEmbellished&&this.computeLinebreakBBox(t),this.fixesPWidth&&this.setChildPWidths(e)&&this.computeBBox(t,!0),this.vboxAdjust(t)}computeLinebreakBBox(t){var e;t.empty();const s=this.isStack,i=this.lineBBox,a=i.length-1;if(s)for(const t of i.keys()){const e=i[t];this.addMiddleBorders(e),0===t&&this.addLeftBorders(e),t===a&&this.addRightBorders(e)}let r=0;for(const s of i.keys()){const a=i[s];t.combine(a,0,r),r-=Math.max(.25,a.d)+a.lineLeading+Math.max(.75,(null==(e=i[s+1])?void 0:e.h)||0)}s?(i[0].L=this.bbox.L,i[a].R=this.bbox.R):(t.w=Math.max(...this.lineBBox.map(t=>t.w)),this.shiftLines(t.w),this.jax.math.display||this.linebreakOptions.inline||(t.pwidth=c.fullWidth,this.node.isInferred&&(this.parent.bbox.pwidth=c.fullWidth))),t.clean()}vboxAdjust(t){if(this.parent){const e=this.breakCount,s=this.parent.node.attributes.get("data-vertical-align");if(e&&"bottom"===s)this.dh=e?t.d-this.lineBBox[e-1].d:0;else{if(!("center"===s||e&&"middle"===s))return void(this.dh=0);{const{h:e,d:s}=t,i=this.font.params.axis_height;this.dh=(e+s)/2+i-e}}t.h+=this.dh,t.d-=this.dh}}computeChildLineBBox(e,s){const t=this.lineBBox[this.lineBBox.length-1],i=(t.end=[s,0],t.append(e.getLineBBox(0)),e.breakCount+1);if(1!==i)for(let t=1;t<i;t++){const i=new o({h:.75,d:.25,w:0});i.start=i.end=[s,t],i.isFirst=!0,i.append(e.getLineBBox(t)),this.lineBBox.push(i)}}getLineBBox(t){return this.getBBox(),this.isStack?super.getLineBBox(t):o.from(this.getOuterBBox(),this.linebreakOptions.lineleading)}shiftLines(t){var e,s;const i=this.lineBBox,a=i.length-1,[r,n]=(null==(e=i[1].indentData)?void 0:e[0])||["left","0"];for(const e of i.keys()){const o=i[e],[h,l]=0===e?[r,n]:(null==(s=o.indentData)?void 0:s[e===a?2:1])||["left","0"],[d,c]=this.processIndent(h,l,r,n,t);o.L=0,o.L=this.getAlignX(t,o,d)+c}}setChildPWidths(t,e=null,s=!0){return this.breakCount?!t&&(null!==e&&this.bbox.w!==e&&(this.bbox.w=e,this.shiftLines(e)),!0):super.setChildPWidths(t,e,s)}breakToWidth(t){this.linebreaks.breakToWidth(this,t)}}}function As(t){return class extends t{getScale(){this.bbox.scale=this.parent.bbox.scale,this.bbox.rscale=1}}}const Ds=MathJax._.core.MmlTree.MmlNodes.mrow,Os=Ds.MmlMrow,Ws=Ds.MmlInferredMrow,Ps=((W=class extends Ts(B){constructor(){super(...arguments),this.linebreakCount=0}toCHTML(t){var e=this.linebreakCount=this.isStack?0:this.breakCount;e||!this.node.isInferred?t=this.standardChtmlNodes(t):this.dom=t,this.addChildren(t),e?this.placeLines(t,e):(this.handleVerticalAlign(t[0]),this.handleNegativeWidth(t[0]))}placeLines(t,e){var s;this.getBBox();const i=this.lineBBox,a=this.adaptor,[r,n]=(null==(s=i[1].indentData)?void 0:s[0])||["left","0"];for(const s of t.keys()){var o=i[s],[h,l]=0===s?[r,n]:(null==(h=o.indentData)?void 0:h[s===e?2:1])||["left","0"],[l,d]=this.processIndent(h,l,r,n);a.setAttribute(t[s],"align",l),d&&(a.setStyle(t[s],"position","relative"),a.setStyle(t[s],"left",this.em(d))),s<e&&this.jax.math.display&&a.setStyle(t[s],"margin-bottom",this.em(o.lineLeading))}}handleVerticalAlign(t){this.dh&&this.adaptor.setStyle(this.adaptor.parent(t),"vertical-align",this.em(this.dh))}handleNegativeWidth(t){var e=this.getBBox()["w"];e<0&&(this.adaptor.setStyle(t,"width",this.em(Math.max(0,e))),this.adaptor.setStyle(t,"marginRight",this.em(e)))}createChtmlNodes(t){var e=this.linebreakCount;if(!e)return super.createChtmlNodes(t);const s=this.adaptor,i=this.node.isInferred?"mjx-linestack":"mjx-"+this.node.kind;if(this.dom=[s.append(t[0],this.html(i))],"mjx-mrow"!=i||this.isStack||s.setAttribute(this.dom[0],"break-top","true"),this.node.getProperty("process-breaks")&&s.setAttribute(this.dom[0],"breakable","true"),this.node.isInferred||!this.isStack){const t=this.parent.node.attributes.get("data-vertical-align");"middle"!==t&&"center"!==t&&"bottom"!==t||s.setAttribute(this.dom[0],"break-align",t)}this.dom=[s.append(this.handleHref(t)[0],this.dom[0])];const a=Array(e);for(let t=0;t<=e;t++)a[t]=s.append(this.dom[0],this.html("mjx-linebox",{lineno:t}));return a}addChildren(t){let e=0;for(const i of this.childNodes){var s=i.breakCount;i.toCHTML(t.slice(e,e+s+1)),e+=s}}}).kind=Os.prototype.kind,W.styles={"mjx-linestack, mjx-mrow[break-top]":{display:"inline-table",width:"100%"},'mjx-linestack[break-align="bottom"], mjx-mrow[break-top][break-align="bottom"]':{display:"inline-block"},'mjx-linestack[break-align="middle"], mjx-mrow[break-top][break-align="middle"]':{"vertical-align":"middle"},'mjx-linestack[break-align="center"], mjx-mrow[break-top][break-align="center"]':{"vertical-align":"middle"},"mjx-linestack[breakable]":{display:"inline"},"mjx-linestack[breakable] > mjx-linebox":{display:"inline"},"mjx-linestack[breakable] > mjx-linebox::before":{"white-space":"pre",content:'"\\A"'},"mjx-linestack[breakable] > mjx-linebox::after":{"white-space":"normal",content:'" "',"letter-spacing":"-.999em","font-family":"MJX-BRK"},"mjx-linestack[breakable] > mjx-linebox:first-of-type::before":{display:"none"},"mjx-linestack[breakable] > mjx-linebox:last-of-type::after":{display:"none"},"mjx-linebox":{display:"block"},'mjx-linebox[align="left"]':{"text-align":"left"},'mjx-linebox[align="center"]':{"text-align":"center"},'mjx-linebox[align="right"]':{"text-align":"right"},"mjx-linestrut":{display:"inline-block",height:"1em","vertical-align":"-.25em"}},W),Hs=((W=class extends As(Ps){}).kind=Ws.prototype.kind,W);function Rs(t){return class extends t{createMrow(){const t=this.node.factory.create("inferredMrow");t.inheritAttributesFrom(this.node),this.mrow=this.wrap(t),this.mrow.parent=this}addMrowChildren(){const t=this.node,e=this.mrow;this.addMo(t.open),this.childNodes.length&&e.childNodes.push(this.childNodes[0]);let s=0;for(const i of this.childNodes.slice(1))this.addMo(t.separators[s++]),e.childNodes.push(i);this.addMo(t.close),e.stretchChildren()}addMo(t){if(t){const e=this.wrap(t);this.mrow.childNodes.push(e),e.parent=this.mrow}}constructor(t,e,s=null){super(t,e,s),this.mrow=null,this.createMrow(),this.addMrowChildren()}computeBBox(t,e=!1){t.updateFrom(this.mrow.getOuterBBox()),this.setChildPWidths(e)}get breakCount(){return this.mrow.breakCount}computeLineBBox(t){return this.mrow.getLineBBox(t)}}}const Es=MathJax._.core.MmlTree.MmlNodes.mfenced.MmlMfenced,Fs=((W=class extends Rs(B){toCHTML(t){t=this.standardChtmlNodes(t);this.mrow.toCHTML(t)}}).kind=Es.prototype.kind,W);function Is(t){return class extends t{getFractionBBox(t,e,s){var i=this.childNodes[0].getOuterBBox(),a=this.childNodes[1].getOuterBBox(),r=this.font.params.axis_height,{T:e,u:s,v:n}=this.getTUV(e,s);t.combine(i,0,r+e+Math.max(i.d*i.rscale,s)),t.combine(a,0,r-e-Math.max(a.h*a.rscale,n)),t.w+=2*this.pad+.2}getTUV(t,e){var s=this.font.params,i=s.axis_height,a=(t?3.5:1.5)*e;return{T:(t?3.5:1.5)*e,u:(t?s.num1:s.num2)-i-a,v:(t?s.denom1:s.denom2)+i-a}}getAtopBBox(t,e){var{u:e,v:s,nbox:i,dbox:a}=this.getUVQ(e);t.combine(i,0,e),t.combine(a,0,-s),t.w+=2*this.pad}getUVQ(t){var e=this.childNodes[0].getOuterBBox(),s=this.childNodes[1].getOuterBBox(),i=this.font.params;let[a,r]=t?[i.num1,i.denom1]:[i.num3,i.denom2];t=(t?7:3)*i.rule_thickness;let n=a-e.d*e.scale-(s.h*s.scale-r);return n<t&&(a+=(t-n)/2,r+=(t-n)/2,n=t),{u:a,v:r,q:n,nbox:e,dbox:s}}getBevelledBBox(t,e){var{u:e,v:s,delta:i,nbox:a,dbox:r}=this.getBevelData(e),n=this.bevel.getOuterBBox();t.combine(a,0,e),t.combine(n,t.w-i/2,0),t.combine(r,t.w-i/2,s)}getBevelData(t){var e=this.childNodes[0].getOuterBBox(),s=this.childNodes[1].getOuterBBox(),t=t?.4:.15,i=Math.max(e.scale*(e.h+e.d),s.scale*(s.h+s.d))+2*t,a=this.font.params.axis_height;return{H:i,delta:t,u:e.scale*(e.d-e.h)/2+a+t,v:s.scale*(s.d-s.h)/2+a-t,nbox:e,dbox:s}}isDisplay(){var{displaystyle:t,scriptlevel:e}=this.node.attributes.getList("displaystyle","scriptlevel");return t&&0===e}constructor(t,e,s=null){if(super(t,e,s),this.bevel=null,this.pad=this.node.getProperty("withDelims")?0:this.font.params.nulldelimiterspace,this.node.attributes.get("bevelled")){const t=this.getBevelData(this.isDisplay())["H"],e=this.bevel=this.createMo("/");e.node.attributes.set("symmetric",!0),e.canStretch(u.Vertical),e.getStretchedVariant([t],!0)}}computeBBox(t,e=!1){t.empty();var{linethickness:s,bevelled:i}=this.node.attributes.getList("linethickness","bevelled"),a=this.isDisplay();let r=null;if(i)this.getBevelledBBox(t,a);else{const e=this.length2em(String(s),.06);r=-2*this.pad,0===e?this.getAtopBBox(t,a):(this.getFractionBBox(t,a,e),r-=.2),r+=t.w}t.clean(),this.setChildPWidths(e,r)}canStretch(t){return!1}getChildAlign(t){const e=this.node.attributes;return e.get("bevelled")?"left":e.get(["numalign","denomalign"][t])}getWrapWidth(t){const e=this.node.attributes;return e.get("bevelled")?this.childNodes[t].getOuterBBox().w:this.getBBox().w-(this.length2em(e.get("linethickness"))?.2:0)-2*this.pad}}}const _s=MathJax._.core.MmlTree.MmlNodes.mfrac.MmlMfrac,Vs=((W=class extends Is(B){toCHTML(t){if(!this.toEmbellishedCHTML(t)){this.standardChtmlNodes(t);var{linethickness:e,bevelled:t}=this.node.attributes.getList("linethickness","bevelled"),s=this.isDisplay();if(t)this.makeBevelled(s);else{const t=this.length2em(String(e),.06);0===t?this.makeAtop(s):this.makeFraction(s,t)}}}makeFraction(t,e){const{numalign:s,denomalign:i}=this.node.attributes.getList("numalign","denomalign"),a=t?{type:"d"}:{},r=this.node.getProperty("withDelims")?Object.assign(Object.assign({},a),{delims:"true"}):Object.assign({},a),n="center"!==s?{align:s}:{},o="center"!==i?{align:i}:{},h=Object.assign({},a),l=Object.assign({},a),d=this.font.params;if(.06!==e){const s=d.axis_height,i=this.font.params.rule_factor,n=this.em(e),{T:o,u:c,v:m}=this.getTUV(t,e),p=(t?this.em(3*e):n)+" -.1em";a.style={height:n,"border-top":this.em(e*i)+" solid",margin:p};t=this.em(Math.max(0,c));l.style={height:t,"vertical-align":"-"+t},h.style={height:this.em(Math.max(0,m))},r.style={"vertical-align":this.em(s-o)}}let c,m;this.adaptor.append(this.dom[0],this.html("mjx-frac",r,[c=this.html("mjx-num",n,[this.html("mjx-nstrut",l)]),this.html("mjx-dbox",{},[this.html("mjx-dtable",{},[this.html("mjx-line",a),this.html("mjx-row",{},[m=this.html("mjx-den",o,[this.html("mjx-dstrut",h)])])])])])),this.childNodes[0].toCHTML([c]),this.childNodes[1].toCHTML([m])}makeAtop(t){const{numalign:e,denomalign:s}=this.node.attributes.getList("numalign","denomalign"),i=t?{type:"d",atop:!0}:{atop:!0},a=this.node.getProperty("withDelims")?Object.assign(Object.assign({},i),{delims:!0}):Object.assign({},i),r="center"!==e?{align:e}:{},n="center"!==s?{align:s}:{},{v:o,q:h}=this.getUVQ(t);var l;r.style={"padding-bottom":this.em(h)},a.style={"vertical-align":this.em(-o)},this.adaptor.append(this.dom[0],this.html("mjx-frac",a,[t=this.html("mjx-num",r),l=this.html("mjx-den",n)])),this.childNodes[0].toCHTML([t]),this.childNodes[1].toCHTML([l])}makeBevelled(t){const e=this.adaptor;e.setAttribute(this.dom[0],"bevelled","ture");var s=e.append(this.dom[0],this.html("mjx-num")),i=(this.childNodes[0].toCHTML([s]),this.bevel.toCHTML(this.dom),e.append(this.dom[0],this.html("mjx-den"))),{u:t,v:a,delta:r,nbox:n,dbox:o}=(this.childNodes[1].toCHTML([i]),this.getBevelData(t)),s=(t&&e.setStyle(s,"verticalAlign",this.em(t/n.scale)),a&&e.setStyle(i,"verticalAlign",this.em(a/o.scale)),this.em(-r/2));e.setStyle(this.bevel.dom[0],"marginLeft",s),e.setStyle(this.bevel.dom[0],"marginRight",s)}}).kind=_s.prototype.kind,W.styles={"mjx-frac":{display:"inline-block","vertical-align":"0.17em",padding:"0 .22em"},'mjx-frac[type="d"]':{"vertical-align":".04em"},"mjx-frac[delims]":{padding:"0 .1em"},"mjx-frac[atop]":{padding:"0 .12em"},"mjx-frac[atop][delims]":{padding:"0"},"mjx-dtable":{display:"inline-table",width:"100%"},"mjx-dtable > *":{"font-size":"2000%"},"mjx-dbox":{display:"block","font-size":"5%"},"mjx-num":{display:"block","text-align":"center"},"mjx-den":{display:"block","text-align":"center"},"mjx-mfrac[bevelled] > mjx-num":{display:"inline-block"},"mjx-mfrac[bevelled] > mjx-den":{display:"inline-block"},'mjx-den[align="right"], mjx-num[align="right"]':{"text-align":"right"},'mjx-den[align="left"], mjx-num[align="left"]':{"text-align":"left"},"mjx-nstrut":{display:"inline-block",height:".054em",width:0,"vertical-align":"-.054em"},'mjx-nstrut[type="d"]':{height:".217em","vertical-align":"-.217em"},"mjx-dstrut":{display:"inline-block",height:".505em",width:0},'mjx-dstrut[type="d"]':{height:".726em"},"mjx-line":{display:"block","box-sizing":"border-box","min-height":"1px",height:".06em","border-top":".075em solid",margin:".06em -.1em",overflow:"hidden"},'mjx-line[type="d"]':{margin:".18em -.1em"}},W);function zs(t){return class extends t{get base(){return 0}get root(){return null}combineRootBBox(t,e,s){}getPQ(t){var e=this.font.params.rule_thickness,s=this.font.params.surd_height,i=this.node.attributes.get("displaystyle")?this.font.params.x_height:e;return[i,t.h+t.d>this.surdH?(t.h+t.d-(this.surdH-e-s-i/2))/2:s+i/4]}getRootDimens(t,e){return[0,0,0,0]}rootWidth(){return 1.25}getStretchedSurd(){var t=this.font.params.rule_thickness,e=this.font.params.surd_height,s=this.node.attributes.get("displaystyle")?this.font.params.x_height:t,{h:i,d:a}=this.childNodes[this.base].getOuterBBox();this.surdH=i+a+t+e+s/4,this.surd.getStretchedVariant([this.surdH-a,a],!0)}constructor(t,e,s=null){super(t,e,s),this.surd=this.createMo("√"),this.surd.canStretch(u.Vertical),this.getStretchedSurd()}computeBBox(t,e=!1){t.empty();var s=this.surd.getBBox(),i=new c(this.childNodes[this.base].getOuterBBox()),a=this.getPQ(s)[1],r=this.font.params.rule_thickness,n=this.font.params.surd_height,a=i.h+a+r,[r]=this.getRootDimens(s,a);t.h=a+n,this.combineRootBBox(t,s,a),t.combine(s,r,a-s.h),t.combine(i,r+s.w,0),t.clean(),this.setChildPWidths(e)}invalidateBBox(){super.invalidateBBox(),this.surd.childNodes[0].invalidateBBox()}}}const Us=MathJax._.core.MmlTree.MmlNodes.msqrt.MmlMsqrt,Js=((W=class extends zs(B){toCHTML(t){const e=this.surd,s=this.childNodes[this.base],i=e.getBBox(),a=s.getOuterBBox(),[,r]=this.getPQ(i),n=this.font.params.surd_height,o=a.h+r+n,h=this.adaptor,l=this.standardChtmlNodes(t);let d,c,m,p;null!=this.root&&(m=h.append(l[0],this.html("mjx-root")),p=this.childNodes[this.root]);t=h.append(l[0],this.html("mjx-sqrt",{},[d=this.html("mjx-surd"),c=this.html("mjx-box",{style:{paddingTop:this.em(r)}})]));.06!==n&&h.setStyle(c,"border-top-width",this.em(n*this.font.params.rule_factor)),this.addRoot(m,p,i,o),e.toCHTML([d]),s.toCHTML([c]),e.size<0&&h.addClass(t,"mjx-tall")}addRoot(t,e,s,i){}}).kind=Us.prototype.kind,W.styles={"mjx-root":{display:"inline-block","white-space":"nowrap"},"mjx-surd":{display:"inline-block","vertical-align":"top"},"mjx-sqrt":{display:"inline-block","padding-top":".075em"},"mjx-sqrt > mjx-box":{"border-top":".075em solid","padding-left":".03em","margin-left":"-.03em"},"mjx-sqrt.mjx-tall > mjx-box":{"padding-left":".3em","margin-left":"-.3em"}},W);function Ks(t){return class extends t{get root(){return 1}combineRootBBox(t,e,s){var i=this.childNodes[this.root].getOuterBBox(),e=this.getRootDimens(e,s)[1];t.combine(i,0,e)}getRootDimens(t,e){var s=this.surd,i=this.childNodes[this.root].getOuterBBox(),a=(s.size<0?.5:.6)*t.w,{w:r,rscale:n}=i,o=Math.max(r,a/n),r=Math.max(0,o-r);return[o*n-a,this.rootHeight(i,t,s.size,e),r]}rootHeight(t,e,s,i){e=e.h+e.d;return(s<0?1.9:.55*e)-(e-i)+Math.max(0,t.d*t.rscale)}rootWidth(){var t=this.childNodes[this.root].getOuterBBox();return.4+t.w*t.rscale}}}const qs=MathJax._.core.MmlTree.MmlNodes.mroot.MmlMroot,Xs=((W=class extends Ks(Js){addRoot(t,e,s,i){e.toCHTML([t]);const a=this.adaptor,[r,n,o]=this.getRootDimens(s,i);a.setStyle(t,"verticalAlign",this.em(n)),a.setStyle(t,"width",this.em(r)),o&&a.setStyle(a.firstChild(t),"paddingLeft",this.em(o))}}).kind=qs.prototype.kind,W);function $s(t){return(t=class extends t{get scriptChild(){return this.childNodes[this.node.sub]}getOffset(){return[this.baseIsChar?0:this.getAdjustedIc(),-this.getV()]}}).useIC=!1,t}function Qs(t){return class extends t{get scriptChild(){return this.childNodes[this.node.sup]}getOffset(){return[this.getAdjustedIc()-(this.baseRemoveIc?0:this.baseIc),this.getU()]}}}function Gs(t){t=class extends t{constructor(){super(...arguments),this.UVQ=null}get subChild(){return this.childNodes[this.node.sub]}get supChild(){return this.childNodes[this.node.sup]}get scriptChild(){return this.supChild}getUVQ(t=this.subChild.getOuterBBox(),e=this.supChild.getOuterBBox()){const s=this.baseCore,i=s.getLineBBox(s.breakCount);if(this.UVQ)return this.UVQ;var a=this.font.params,r=3*a.rule_thickness,n=this.length2em(this.node.attributes.get("subscriptshift"),a.sub2),o=this.baseCharZero(i.d*this.baseScale+a.sub_drop*t.rscale),e=e.d*e.rscale,t=t.h*t.rscale;let[h,l]=[this.getU(),Math.max(o,n)],d=h-e-(t-l);if(d<r){l+=r-d;const t=.8*a.x_height-(h-e);0<t&&(h+=t,l-=t)}return h=Math.max(this.length2em(this.node.attributes.get("superscriptshift"),h),h),l=Math.max(this.length2em(this.node.attributes.get("subscriptshift"),l),l),d=h-e-(t-l),this.UVQ=[h,-l,d],this.UVQ}appendScripts(t){var[e,s]=[this.subChild.getOuterBBox(),this.supChild.getOuterBBox()],i=this.getBaseWidth(),a=this.getAdjustedIc(),[r,n]=this.getUVQ(),o=t.d-this.baseChild.getLineBBox(this.baseChild.breakCount).d;return t.combine(e,i+(this.baseIsChar?0:a),n-o),t.combine(s,i+a,r-o),t.w+=this.font.params.scriptspace,t}};return t.useIC=!1,t}function Ys(t){return(t=class extends t{get baseChild(){return this.childNodes[this.node.base]}get scriptChild(){return this.childNodes[1]}getBaseCore(){let t=this.getSemanticBase()||this.childNodes[0],e=null==t?void 0:t.node;for(;t&&(1===t.childNodes.length&&(e.isKind("mrow")||e.isKind("TeXAtom")||e.isKind("mstyle")||e.isKind("mpadded")&&!e.getProperty("vbox")||e.isKind("mphantom")||e.isKind("semantics"))||e.isKind("munderover")&&t.isMathAccent);)this.setBaseAccentsFor(t),t=t.childNodes[0],e=null==t?void 0:t.node;return t||(this.baseHasAccentOver=this.baseHasAccentUnder=!1),t||this.childNodes[0]}setBaseAccentsFor(t){t.node.isKind("munderover")&&(null===this.baseHasAccentOver&&(this.baseHasAccentOver=!!t.node.attributes.get("accent")),null===this.baseHasAccentUnder&&(this.baseHasAccentUnder=!!t.node.attributes.get("accentunder")))}getSemanticBase(){var t=this.node.attributes.getExplicit("data-semantic-fencepointer");return this.getBaseFence(this.baseChild,t)}getBaseFence(t,e){if(!t||!t.node.attributes||!e)return null;if(t.node.attributes.getExplicit("data-semantic-id")===e)return t;for(const s of t.childNodes){const t=this.getBaseFence(s,e);if(t)return t}return null}getBaseScale(){let t=this.baseCore,e=1;for(;t&&t!==this;)e*=t.getOuterBBox().rscale,t=t.parent;return e}getBaseIc(){return this.baseCore.getOuterBBox().ic*this.baseScale}getAdjustedIc(){return this.baseIc?1.05*this.baseIc+.05:0}isCharBase(){const t=this.baseCore;return(t.node.isKind("mo")&&null===t.size||t.node.isKind("mi")||t.node.isKind("mn"))&&1===t.bbox.rscale&&1===Array.from(t.getText()).length}checkLineAccents(){this.node.isKind("munderover")&&(this.node.isKind("mover")?this.isLineAbove=this.isLineAccent(this.scriptChild):this.node.isKind("munder")?this.isLineBelow=this.isLineAccent(this.scriptChild):(this.isLineAbove=this.isLineAccent(this.overChild),this.isLineBelow=this.isLineAccent(this.underChild)))}isLineAccent(t){const e=t.coreMO().node;return e.isToken&&"―"===e.getText()}getBaseWidth(){var t=this.baseChild.getLineBBox(this.baseChild.breakCount);return t.w*t.rscale-(this.baseRemoveIc?this.baseIc:0)+this.font.params.extra_ic}getOffset(){return[0,0]}baseCharZero(t){var e=!!this.baseCore.node.attributes.get("largeop"),s=!(!this.baseCore.node.isKind("mo")||!this.baseCore.size),i=this.baseScale;return!this.baseIsChar||e||s||1!==i?t:0}getV(){const t=this.baseCore,e=t.getLineBBox(t.breakCount),s=this.scriptChild.getOuterBBox(),i=this.font.params,a=this.length2em(this.node.attributes.get("subscriptshift"),i.sub1);return Math.max(this.baseCharZero(e.d*this.baseScale+i.sub_drop*s.rscale),a,s.h*s.rscale-.8*i.x_height)}getU(){const t=this.baseCore,e=t.getLineBBox(t.breakCount),s=this.scriptChild.getOuterBBox(),i=this.font.params,a=this.node.attributes.getList("displaystyle","superscriptshift"),r=this.node.getProperty("texprimestyle")?i.sup3:a.displaystyle?i.sup1:i.sup2,n=this.length2em(a.superscriptshift,r);return Math.max(this.baseCharZero(e.h*this.baseScale-i.sup_drop*s.rscale),n,s.d*s.rscale+.25*i.x_height)}hasMovableLimits(){const t=this.node.attributes.get("displaystyle"),e=this.baseChild.coreMO().node;return!t&&!!e.attributes.get("movablelimits")}getOverKU(t,e){var s=this.node.attributes.get("accent"),i=this.font.params,e=e.d*e.rscale,a=i.rule_thickness*i.separation_factor,r=this.baseHasAccentOver?a:0,a=this.isLineAbove?3*i.rule_thickness:a,s=(s?a:Math.max(i.big_op_spacing1,i.big_op_spacing3-Math.max(0,e)))-r;return[s,t.h*t.rscale+s+e]}getUnderKV(t,e){var s=this.node.attributes.get("accentunder"),i=this.font.params,e=e.h*e.rscale,a=i.rule_thickness*i.separation_factor,r=this.baseHasAccentUnder?a:0,a=this.isLineBelow?3*i.rule_thickness:a,s=(s?a:Math.max(i.big_op_spacing2,i.big_op_spacing4-e))-r;return[s,-(t.d*t.rscale+s+e)]}getDeltaW(e,t=[0,0,0]){const s=this.node.attributes.get("align"),i=e.map(t=>t.w*t.rscale),a=(i[0]-=this.baseRemoveIc&&!this.baseCore.node.attributes.get("largeop")?this.baseIc:0,Math.max(...i)),r=[];let n=0;for(const e of i.keys())r[e]=("center"===s?(a-i[e])/2:"right"===s?a-i[e]:0)+t[e],r[e]<n&&(n=-r[e]);if(n)for(const e of r.keys())r[e]+=n;return[1,2].map(t=>r[t]+=e[t]?e[t].dx*e[0].rscale:0),r}getDelta(t,e=!1){var s=this.node.attributes.get("accent");let{sk:i,ic:a}=this.baseCore.getOuterBBox();return s&&(i-=t.getOuterBBox().sk),((s&&!e?i:0)+this.font.skewIcFactor*a)*this.baseScale}stretchChildren(){const e=[];for(const s of this.childNodes)s.canStretch(u.Horizontal)&&e.push(s);const s=e.length,i=this.childNodes.length;if(s&&1<i){let t=0;var a=1<s&&s===i;for(const e of this.childNodes){const s=e.stretch.dir===u.None;if(a||s){const{w:i,rscale:r}=e.getOuterBBox(s);i*r>t&&(t=i*r)}}for(const s of e){const e=s.coreMO();null===e.size&&e.getStretchedVariant([t/s.coreRScale()])}}}constructor(t,e,s=null){super(t,e,s),this.baseScale=1,this.baseIc=0,this.baseRemoveIc=!1,this.baseIsChar=!1,this.baseHasAccentOver=null,this.baseHasAccentUnder=null,this.isLineAbove=!1,this.isLineBelow=!1,this.isMathAccent=!1;t=this.baseCore=this.getBaseCore();t&&(this.setBaseAccentsFor(t),this.baseScale=this.getBaseScale(),this.baseIc=this.getBaseIc(),this.baseIsChar=this.isCharBase(),this.isMathAccent=this.baseIsChar&&this.scriptChild&&void 0!==this.scriptChild.coreMO().node.getProperty("mathaccent"),this.checkLineAccents(),this.baseRemoveIc=!this.isLineAbove&&!this.isLineBelow&&(!this.constructor.useIC||this.isMathAccent))}computeBBox(t,e=!1){t.empty(),t.append(this.baseChild.getOuterBBox()),this.appendScripts(t),t.clean(),this.setChildPWidths(e)}appendScripts(t){var e=this.getBaseWidth(),[s,i]=this.getOffset();return t.combine(this.scriptChild.getOuterBBox(),e+s,i),t.w+=this.font.params.scriptspace,t}get breakCount(){return this._breakCount<0&&(this._breakCount=this.node.isEmbellished?this.coreMO().embellishedBreakCount:this.node.linebreakContainer?0:this.childNodes[0].breakCount),this._breakCount}breakTop(t,e){return this.node.linebreakContainer||!this.parent||this.node.childIndex(e.node)?t:this.parent.breakTop(t,this)}computeLineBBox(t){var e=this.breakCount;if(!e)return o.from(this.getOuterBBox(),this.linebreakOptions.lineleading);var s=this.baseChild.getLineBBox(t).copy();return t<e?(0===t&&this.addLeftBorders(s),this.addMiddleBorders(s)):(this.appendScripts(s),this.addMiddleBorders(s),this.addRightBorders(s)),s}}).useIC=!0,t}(W=class extends Ys(B){toCHTML(t){if(!this.toEmbellishedCHTML(t)){this.dom=this.standardChtmlNodes(t);const[e,s]=this.getOffset(),i=e-(this.baseRemoveIc?this.baseIc:0),a={"vertical-align":this.em(s)};i&&(a["margin-left"]=this.em(i)),this.baseChild.toCHTML(this.dom);t=this.dom[this.dom.length-1];this.scriptChild.toCHTML([this.adaptor.append(t,this.html("mjx-script",{style:a}))])}}markUsed(){super.markUsed(),this.jax.wrapperUsage.add(ni.kind)}setDeltaW(e,s){for(let t=0;t<s.length;t++)s[t]&&this.adaptor.setStyle(e[t],"paddingLeft",this.em(s[t]))}adjustOverDepth(t,e){0<=e.d||this.adaptor.setStyle(t,"marginBottom",this.em(e.d*e.rscale))}adjustUnderDepth(t,e){if(!(0<=e.d)){const s=this.adaptor,i=this.em(e.d),a=this.html("mjx-box",{style:{"margin-bottom":i,"vertical-align":i}});for(const e of s.childNodes(s.firstChild(t)))s.append(a,e);s.append(s.firstChild(t),a)}}adjustBaseHeight(t,e){var s;this.node.attributes.get("accent")&&(s=this.font.params.x_height*this.baseScale,e.h<s&&(this.adaptor.setStyle(t,"paddingTop",this.em(s-e.h)),e.h=s))}}).kind="scriptbase";const Zs=W,ti=MathJax._.core.MmlTree.MmlNodes.msubsup,ei=ti.MmlMsubsup,si=ti.MmlMsub,ii=ti.MmlMsup,ai=((W=class extends $s(Zs){}).kind=si.prototype.kind,W),ri=((W=class extends Qs(Zs){}).kind=ii.prototype.kind,W),ni=((W=class extends Gs(Zs){toCHTML(t){if(!this.toEmbellishedCHTML(t)){const s=this.adaptor,i=this.standardChtmlNodes(t),[a,r,n]=[this.baseChild,this.supChild,this.subChild],[,o,h]=this.getUVQ(),l={"vertical-align":this.em(o)};a.toCHTML(i);var t=s.append(i[i.length-1],this.html("mjx-script",{style:l})),e=(r.toCHTML([t]),s.append(t,this.html("mjx-spacer",{style:{"margin-top":this.em(h)}})),n.toCHTML([t]),this.getAdjustedIc());e&&(s.setStyle(r.dom[0],"marginLeft",this.em(e/r.bbox.rscale)),this.baseIsChar||s.setStyle(n.dom[0],"marginLeft",this.em(e/r.bbox.rscale))),this.baseRemoveIc&&s.setStyle(t,"marginLeft",this.em(-this.baseIc))}}}).kind=ei.prototype.kind,W.styles={"mjx-script":{display:"inline-block","padding-right":".05em","padding-left":".033em"},"mjx-script > mjx-spacer":{display:"block"}},W);function oi(t){return class extends t{get scriptChild(){return this.childNodes[this.node.under]}constructor(...t){super(...t),this.stretchChildren()}computeBBox(t,e=!1){var s,i,a,r,n;this.hasMovableLimits()?super.computeBBox(t,e):(t.empty(),s=this.baseChild.getOuterBBox(),i=this.scriptChild.getOuterBBox(),a=this.getUnderKV(s,i)[1],r=this.isLineBelow?0:this.getDelta(this.scriptChild,!0),[r,n]=this.getDeltaW([s,i],[0,-r]),t.combine(s,r,0),t.combine(i,n,a),t.d+=this.font.params.big_op_spacing5,t.clean(),this.setChildPWidths(e))}}}function hi(t){return class extends t{get scriptChild(){return this.childNodes[this.node.over]}constructor(...t){super(...t),this.stretchChildren()}computeBBox(t){if(this.hasMovableLimits())super.computeBBox(t);else{t.empty();const a=this.baseChild.getOuterBBox(),r=this.scriptChild.getOuterBBox();this.node.attributes.get("accent")&&(a.h=Math.max(a.h,this.font.params.x_height*this.baseScale));var e=this.getOverKU(a,r)[1],s=this.isLineAbove?0:this.getDelta(this.scriptChild),[s,i]=this.getDeltaW([a,r],[0,s]);t.combine(a,s,0),t.combine(r,i,e),t.h+=this.font.params.big_op_spacing5,t.clean()}}}}function li(t){return class extends t{get underChild(){return this.childNodes[this.node.under]}get overChild(){return this.childNodes[this.node.over]}get subChild(){return this.underChild}get supChild(){return this.overChild}constructor(...t){super(...t),this.stretchChildren()}computeBBox(t){if(this.hasMovableLimits())super.computeBBox(t);else{t.empty();const n=this.overChild.getOuterBBox(),o=this.baseChild.getOuterBBox(),h=this.underChild.getOuterBBox();this.node.attributes.get("accent")&&(o.h=Math.max(o.h,this.font.params.x_height*this.baseScale));var e=this.getOverKU(o,n)[1],s=this.getUnderKV(o,h)[1],i=this.getDelta(this.overChild),a=this.getDelta(this.underChild,!0),[a,i,r]=this.getDeltaW([o,h,n],[0,this.isLineBelow?0:-a,this.isLineAbove?0:i]),a=(t.combine(o,a,0),t.combine(n,r,e),t.combine(h,i,s),this.font.params.big_op_spacing5);t.h+=a,t.d+=a,t.clean()}}}}const di=MathJax._.core.MmlTree.MmlNodes.munderover,ci=di.MmlMunderover,mi=di.MmlMunder,pi=di.MmlMover,ui=((W=class extends oi(ai){toCHTML(t){if(!this.toEmbellishedCHTML(t)){if(this.hasMovableLimits())return super.toCHTML(t),void this.adaptor.setAttribute(this.dom[0],"limits","false");this.dom=this.standardChtmlNodes(t);var t=this.adaptor.append(this.adaptor.append(this.dom[0],this.html("mjx-row")),this.html("mjx-base")),e=this.adaptor.append(this.adaptor.append(this.dom[0],this.html("mjx-row")),this.html("mjx-under")),s=(this.baseChild.toCHTML([t]),this.scriptChild.toCHTML([e]),this.baseChild.getOuterBBox()),i=this.scriptChild.getOuterBBox(),a=this.getUnderKV(s,i)[0],r=this.isLineBelow?0:this.getDelta(this.scriptChild,!0);this.adaptor.setStyle(e,"paddingTop",this.em(a)),this.setDeltaW([t,e],this.getDeltaW([s,i],[0,-r])),this.adjustUnderDepth(e,i)}}}).kind=mi.prototype.kind,W.styles={"mjx-over":{"text-align":"left"},'mjx-munder:not([limits="false"])':{display:"inline-table"},"mjx-munder > mjx-row":{"text-align":"left"},"mjx-under":{"padding-bottom":".1em"}},W),gi=((W=class extends hi(ri){toCHTML(t){if(!this.toEmbellishedCHTML(t)){if(this.hasMovableLimits())return super.toCHTML(t),void this.adaptor.setAttribute(this.dom[0],"limits","false");this.dom=this.standardChtmlNodes(t);var t=this.adaptor.append(this.dom[0],this.html("mjx-over")),e=this.adaptor.append(this.dom[0],this.html("mjx-base")),s=(this.scriptChild.toCHTML([t]),this.baseChild.toCHTML([e]),this.scriptChild.getOuterBBox()),i=this.baseChild.getOuterBBox(),a=(this.adjustBaseHeight(e,i),this.getOverKU(i,s)[0]),r=this.isLineAbove?0:this.getDelta(this.scriptChild);this.adaptor.setStyle(t,"paddingBottom",this.em(a)),this.setDeltaW([e,t],this.getDeltaW([i,s],[0,r])),this.adjustOverDepth(t,s)}}}).kind=pi.prototype.kind,W.styles={'mjx-mover:not([limits="false"])':{"padding-top":".1em"},'mjx-mover:not([limits="false"]) > *':{display:"block","text-align":"left"}},W),xi=((W=class extends li(ni){toCHTML(t){if(!this.toEmbellishedCHTML(t)){if(this.hasMovableLimits())return super.toCHTML(t),void this.adaptor.setAttribute(this.dom[0],"limits","false");this.dom=this.standardChtmlNodes(t);var t=this.adaptor.append(this.dom[0],this.html("mjx-over")),e=this.adaptor.append(this.adaptor.append(this.dom[0],this.html("mjx-box")),this.html("mjx-munder")),s=this.adaptor.append(this.adaptor.append(e,this.html("mjx-row")),this.html("mjx-base")),e=this.adaptor.append(this.adaptor.append(e,this.html("mjx-row")),this.html("mjx-under")),i=(this.overChild.toCHTML([t]),this.baseChild.toCHTML([s]),this.underChild.toCHTML([e]),this.overChild.getOuterBBox()),a=this.baseChild.getOuterBBox(),r=this.underChild.getOuterBBox(),n=(this.adjustBaseHeight(s,a),this.getOverKU(a,i)[0]),o=this.getUnderKV(a,r)[0],h=this.getDelta(this.overChild),l=this.getDelta(this.underChild,!0);this.adaptor.setStyle(t,"paddingBottom",this.em(n)),this.adaptor.setStyle(e,"paddingTop",this.em(o)),this.setDeltaW([s,e,t],this.getDeltaW([a,r,i],[0,this.isLineBelow?0:-l,this.isLineAbove?0:h])),this.adjustOverDepth(t,i),this.adjustUnderDepth(e,r)}}}).kind=ci.prototype.kind,W.styles={'mjx-munderover:not([limits="false"])':{"padding-top":".1em"},'mjx-munderover:not([limits="false"]) > *':{display:"block"}},W),fi={base:"subList",subList:"supList",supList:"subList",psubList:"psupList",psupList:"psubList"},bi=["sup","sup","psup","psub"];function yi(t){return class extends t{combinePrePost(t,e){const s=new c(t);return s.combine(e,0,0),s}getScriptData(){const t=this.scriptData={base:null,sub:c.empty(),sup:c.empty(),psub:c.empty(),psup:c.empty(),numPrescripts:0,numScripts:0},e=this.getScriptBBoxLists();this.combineBBoxLists(t.sub,t.sup,e.subList,e.supList),this.combineBBoxLists(t.psub,t.psup,e.psubList,e.psupList),t.base=e.base[0],t.numPrescripts=e.psubList.length,t.numScripts=e.subList.length}getScriptBBoxLists(){const t={base:[],subList:[],supList:[],psubList:[],psupList:[]};let e="base";for(const s of this.childNodes)e=s.node.isKind("mprescripts")?"psubList":(t[e].push(s.getOuterBBox()),fi[e]);return this.firstPrescript=t.subList.length+t.supList.length+2,this.padLists(t.subList,t.supList),this.padLists(t.psubList,t.psupList),t}padLists(t,e){t.length>e.length&&e.push(c.empty())}combineBBoxLists(e,s,i,a){for(let t=0;t<i.length;t++){var[r,n,o]=this.getScaledWHD(i[t]),[h,l,d]=this.getScaledWHD(a[t]),r=Math.max(r,h);e.w+=r,s.w+=r,n>e.h&&(e.h=n),o>e.d&&(e.d=o),l>s.h&&(s.h=l),d>s.d&&(s.d=d)}}getScaledWHD(t){var{w:t,h:e,d:s,rscale:i}=t;return[t*i,e*i,s*i]}getCombinedUV(){var t=this.scriptData,e=this.combinePrePost(t.sub,t.psub),t=this.combinePrePost(t.sup,t.psup);return this.getUVQ(e,t)}addPrescripts(t,e,s){var i,a=this.scriptData;return a.numPrescripts&&(i=this.font.params.scriptspace,t.combine(a.psup,i,e),t.combine(a.psub,i,s)),t}addPostscripts(t,e,s){var i,a=this.scriptData;return a.numScripts&&(i=t.w,t.combine(a.sup,i,e),t.combine(a.sub,i,s),t.w+=this.font.params.scriptspace),t}constructor(...t){super(...t),this.scriptData=null,this.firstPrescript=0,this.getScriptData()}appendScripts(t){t.empty();var[e,s]=this.getCombinedUV();return this.addPrescripts(t,e,s),t.append(this.scriptData.base),this.addPostscripts(t,e,s),t.clean(),t}computeLineBBox(t){var e=this.baseChild.breakCount,s=this.baseChild.getLineBBox(t).copy();let i=s;var[a,r]=this.getCombinedUV();return 0===t?((i=o.from(this.addPrescripts(c.zero(),a,r),this.linebreakOptions.lineleading)).append(s),this.addLeftBorders(i),i.L=this.bbox.L):t===e&&(i=this.addPostscripts(i,a,r),this.addRightBorders(i),i.R=this.bbox.R),this.addMiddleBorders(i),i}getUVQ(i,a){if(!this.UVQ){let[t,e,s]=[0,0,0];0===i.w?t=this.getU():0===a.w?t=-this.getV():[t,e,s]=super.getUVQ(i,a),this.UVQ=[t,e,s]}return this.UVQ}}}const Bi=MathJax._.core.MmlTree.MmlNodes.mmultiscripts,ki=Bi.MmlMmultiscripts,Ci=(Bi.MmlMprescripts,Bi.MmlNone,(W=class extends yi(ni){toCHTML(t){if(!this.toEmbellishedCHTML(t)){var t=this.standardChtmlNodes(t),e=this.scriptData,s=this.node.getProperty("scriptalign")||"right left",[s,i]=b(s+" "+s),[a,r]=this.getCombinedUV();if(e.numPrescripts){const t=this.addScripts(this.dom[0],a,-r,!0,e.psub,e.psup,this.firstPrescript,e.numPrescripts);"right"!==s&&this.adaptor.setAttribute(t,"script-align",s)}if(this.childNodes[0].toCHTML(t),e.numScripts){const t=this.addScripts(this.dom[this.dom.length-1],a,-r,!1,e.sub,e.sup,1,e.numScripts);"left"!==i&&this.adaptor.setAttribute(t,"script-align",i)}}}addScripts(t,e,s,i,a,r,n,o){const h=this.adaptor,l=e-r.d+(s-a.h),d=e<0&&0===s?a.h+e:e,c=0<l?{style:{height:this.em(l)}}:{},m=d?{style:{"vertical-align":this.em(d)}}:{},p=this.html("mjx-row"),u=this.html("mjx-row",c),g=this.html("mjx-row"),x="mjx-"+(i?"pre":"")+"scripts",f=n+2*o;for(;n<f;)this.childNodes[n++].toCHTML([h.append(g,this.html("mjx-cell"))]),this.childNodes[n++].toCHTML([h.append(p,this.html("mjx-cell"))]);return h.append(t,this.html(x,m,[p,u,g]))}}).kind=ki.prototype.kind,W.styles={"mjx-prescripts":{display:"inline-table","padding-left":".05em"},"mjx-scripts":{display:"inline-table","padding-right":".05em"},"mjx-prescripts > mjx-row > mjx-cell":{"text-align":"right"},'[script-align="left"] > mjx-row > mjx-cell':{"text-align":"left"},'[script-align="center"] > mjx-row > mjx-cell':{"text-align":"center"},'[script-align="right"] > mjx-row > mjx-cell':{"text-align":"right"},"mjx-none":{display:"inline-block",height:"1px"}},W),wi=MathJax._.util.numeric,D=wi.sum,vi=wi.max,Mi=.333;function Si(t){return class extends t{get tableRows(){return this.childNodes}findContainer(){let t=this,e=t.parent;for(;e&&(e.node.notParent||e.node.isKind("mrow"));)e=(t=e).parent;this.container=e,this.containerI=t.node.childPosition()}getPercentageWidth(){var t;this.hasLabels?this.bbox.pwidth=c.fullWidth:(t=this.node.attributes.get("width"),f(t)&&(this.bbox.pwidth=t))}stretchRows(){const e=this.node.attributes.get("equalrows"),s=e?this.getEqualRowHeight():0,{H:i,D:a}=e?this.getTableData():{H:[0],D:[0]},r=this.tableRows;for(let t=0;t<this.numRows;t++){var n=e?[(s+i[t]-a[t])/2,(s-i[t]+a[t])/2]:null;r[t].stretchChildren(n)}}stretchColumns(){var e=this.getColumnAttributes("columnwidth",0);for(let t=0;t<this.numCols;t++){var s="number"==typeof this.cWidths[t]?this.cWidths[t]:null;this.stretchColumn(t,s),null!==s&&this.breakColumn(t,s,e[t])}}stretchColumn(t,e){const s=[];for(const e of this.tableRows){const i=e.getChild(t);if(i){const t=i.childNodes[0];t.stretch.dir===u.None&&t.canStretch(u.Horizontal)&&s.push(t)}}const i=s.length,a=this.childNodes.length;if(i&&1<a&&null===e){e=0;const s=1<i&&i===a;for(const i of this.tableRows){const a=i.getChild(t);if(a){const t=a.childNodes[0],i=t.stretch.dir===u.None;if(s||i){const s=t.getBBox(i)["w"];s>e&&(e=s)}}}}if(null!==e)for(const t of s)t.coreMO().getStretchedVariant([Math.max(e,t.getBBox().w)/t.coreRScale()])}breakColumn(s,i,a){if("linebreak"===this.jax.math.root.attributes.get("overflow")&&this.jax.math.display){const r=this.getTableData()["D"];let t=0,e=0;for(const a of this.tableRows){const n=a.getChild(s);if(n&&n.getBBox().w>i){n.childNodes[0].breakToWidth(i);const s=n.getBBox();r[t]=Math.max(r[t],s.d),s.w>e&&(e=s.w)}t++}("fit"===a||"auto"===a||f(a)||e>this.cWidths[s])&&(this.cWidths[s]=e)}}getTableData(){if(this.data)return this.data;const i=new Array(this.numRows).fill(0),a=new Array(this.numRows).fill(0),r=new Array(this.numCols).fill(0),t=new Array(this.numRows),n=new Array(this.numRows),o=[0],h=this.tableRows;for(let s=0;s<h.length;s++){let e=0;const l=h[s],d=l.node.attributes.get("rowalign");for(let t=0;t<l.numCells;t++){const n=l.getChild(t);e=this.updateHDW(n,t,s,d,i,a,r,e),this.recordPWidthCell(n,t)}t[s]=i[s],n[s]=a[s],l.labeled&&(e=this.updateHDW(l.childNodes[0],0,s,d,i,a,o,e)),this.extendHD(s,i,a,e),this.extendHD(s,t,n,e)}return this.data={H:i,D:a,W:r,NH:t,ND:n,L:o[0]},this.data}updateHDW(t,e,s,i,a,r,n,o){let{h,d:l,w:d}=t.getBBox();var c=t.parent.bbox.rscale;1!==t.parent.bbox.rscale&&(h*=c,l*=c,d*=c),this.node.getProperty("useHeight")&&(h<.75&&(h=.75),l<.25&&(l=.25));let m=0;return"baseline"!==(i=t.node.attributes.get("rowalign")||i)&&"axis"!==i&&(m=h+l,h=l=0),h>a[s]&&(a[s]=h),l>r[s]&&(r[s]=l),m>o&&(o=m),n&&d>n[e]&&(n[e]=d),o}extendHD(t,e,s,i){i=(i-(e[t]+s[t]))/2;i<1e-5||(e[t]+=i,s[t]+=i)}recordPWidthCell(t,e){t.childNodes[0]&&t.childNodes[0].getBBox().pwidth&&this.pwidthCells.push([t,e])}setColumnPWidths(){var t,e,s=this.cWidths;for([t,e]of this.pwidthCells)t.setChildPWidths(!1,s[e])&&(t.invalidateBBox(),t.getBBox())}getBBoxHD(t){const[e,s]=this.getAlignmentRow();if(null===s){const s=this.font.params.axis_height,a=t/2;return{top:[0,t],center:[a,a],bottom:[t,0],baseline:[a,a],axis:[a+s,a-s]}[e]||[a,a]}var i=this.getVerticalPosition(s,e);return[i,t-i]}getBBoxLR(){var s;if(this.hasLabels){const s=this.node.attributes,a=s.get("side");let[t,e]=this.getPadAlignShift(a);var i=this.hasLabels&&!!s.get("data-width-includes-label");return i&&this.frame&&this.fSpace[0]&&(t-=this.fSpace[0]),"center"!==e||i?"left"===a?[t,0]:[0,t]:[t,t]}return[(null==(s=this.bbox)?void 0:s.L)||0,0]}getPadAlignShift(t){var e=this.getTableData()["L"];let s=e+this.length2em(this.node.attributes.get("minlabelspacing"));var[e,i]=null==this.styles?["",""]:[this.styles.get("padding-left"),this.styles.get("padding-right")];(e||i)&&(s=Math.max(s,this.length2em(e||"0"),this.length2em(i||"0")));let[a,r]=this.getAlignShift();return a===t&&(r="left"===t?Math.max(s,r)-s:Math.min(-s,r)+s),[s,a,r]}getWidth(){return this.pWidth||this.getBBox().w}adjustWideTable(){const t=this.node.attributes;var e,s;"auto"===t.get("width")&&([e,s]=this.getPadAlignShift(t.get("side")),s=Math.max(this.containerWidth/10,this.containerWidth-e-("center"===s?e:0)),this.naturalWidth()>s&&this.adjustColumnWidths(s))}naturalWidth(){const t=this.getComputedWidths();return D(t.concat(this.cLines,this.cSpace))+2*this.fLine+this.fSpace[0]+this.fSpace[2]}getEqualRowHeight(){const{H:e,D:s}=this.getTableData(),t=Array.from(e.keys()).map(t=>e[t]+s[t]);return Math.max(...t)}getComputedWidths(){const e=this.getTableData().W;let t=Array.from(e.keys()).map(t=>("number"==typeof this.cWidths[t]?this.cWidths:e)[t]);return t=this.node.attributes.get("equalcolumns")?Array(t.length).fill(vi(t)):t}getColumnWidths(){var t=this.node.attributes.get("width");if(this.node.attributes.get("equalcolumns"))return this.getEqualColumns(t);var e=this.getColumnAttributes("columnwidth",0);return"auto"===t?this.getColumnWidthsAuto(e):f(t)?this.getColumnWidthsPercent(e):this.getColumnWidthsFixed(e,this.length2em(t))}getEqualColumns(t){var e,s=Math.max(1,this.numCols);let i;if("auto"===t){const t=this.getTableData()["W"];i=vi(t)}else i=f(t)?this.percent(1/s):(e=D([].concat(this.cLines,this.cSpace))+this.fSpace[0]+this.fSpace[2],Math.max(0,this.length2em(t)-e)/s);return Array(this.numCols).fill(i)}getColumnWidthsAuto(t){return t.map(t=>"auto"===t||"fit"===t?null:f(t)?t:this.length2em(t))}getColumnWidthsPercent(s){const i=s.includes("fit"),a=(i?this.getTableData():{W:null})["W"];return Array.from(s.keys()).map(t=>{var e=s[t];return"fit"===e?null:"auto"===e?i?a[t]:null:f(e)?e:this.length2em(e)})}getColumnWidthsFixed(s,t){const e=Array.from(s.keys()),i=e.filter(t=>"fit"===s[t]),a=e.filter(t=>"auto"===s[t]),r=i.length||a.length,n=(r?this.getTableData():{W:null})["W"],o=t-D([].concat(this.cLines,this.cSpace))-this.fSpace[0]-this.fSpace[2];let h=o;e.forEach(t=>{var e=s[t];h-="fit"===e||"auto"===e?n[t]:this.length2em(e,o)});const l=r&&0<h?h/r:0;return e.map(t=>{var e=s[t];return"fit"===e?n[t]+l:"auto"===e?n[t]+(0===i.length?l:0):this.length2em(e,o)})}adjustColumnWidths(i){const a=this.getTableData()["W"],e=this.getColumnAttributes("columnwidth",0),r=Array.from(e.keys()),n=[...r.filter(t=>"fit"===e[t]).sort((t,e)=>a[e]-a[t]),...r.filter(t=>"auto"===e[t]).sort((t,e)=>a[e]-a[t]),...r.filter(t=>f(e[t])).sort((t,e)=>a[e]-a[t]),...r.filter(t=>"fit"!==e[t]&&"auto"!==e[t]&&!f(e[t])).sort((t,e)=>a[e]-a[t])];if(n.length){this.cWidths=r.map(t=>("number"==typeof this.cWidths[t]?this.cWidths:a)[t]);i=i-D([].concat(this.cLines,this.cSpace))-this.fSpace[0]-this.fSpace[2];let e=D(this.cWidths)-i,t=0,s=0;for(;s<n.length&&!((t+=a[n[s++]])&&e/t<Mi););e=1-e/t,n.slice(0,s).forEach(t=>this.cWidths[t]*=e)}}getVerticalPosition(e,t){var s=this.node.attributes.get("equalrows"),{H:i,D:a}=this.getTableData(),r=s?this.getEqualRowHeight():0,n=this.getRowHalfSpacing();let o=this.fLine;for(let t=0;t<e;t++)o+=n[t]+(s?r:i[t]+a[t])+n[t+1]+this.rLines[t];var[h,l]=s?[(r+i[e]-a[e])/2,(r-i[e]+a[e])/2]:[i[e],a[e]];return o+={top:0,center:n[e]+(h+l)/2,bottom:n[e]+h+l+n[e+1],baseline:n[e]+h,axis:n[e]+h-.25}[t]||0}getFrameSpacing(){const t=this.fframe?this.convertLengths(this.getAttributeArray("framespacing")):[0,0];t[2]=t[0];var e,s=this.node.attributes.get("data-array-padding");return s&&([s,e]=this.convertLengths(b(s)),t[0]=s,t[2]=e),t}getEmHalfSpacing(t,e,s=1){const i=this.addEm(e,2/s);return i.unshift(this.em(t[0]*s)),i.push(this.em(t[1]*s)),i}getRowHalfSpacing(){const t=this.rSpace.map(t=>t/2);return t.unshift(this.fSpace[1]),t.push(this.fSpace[1]),t}getColumnHalfSpacing(){const t=this.cSpace.map(t=>t/2);return t.unshift(this.fSpace[0]),t.push(this.fSpace[2]),t}getAlignmentRow(){var[t,e]=b(this.node.attributes.get("align"));if(null==e)return[t,null];let s=parseInt(e);return s<0&&(s+=this.numRows+1),[t,s<1||s>this.numRows?null:s-1]}getColumnAttributes(t,e=1){const s=this.numCols-e,i=this.getAttributeArray(t);if(0===i.length)return null;for(;i.length<s;)i.push(i[i.length-1]);return i.length>s&&i.splice(s),i}getRowAttributes(t,e=1){const s=this.numRows-e,i=this.getAttributeArray(t);if(0===i.length)return null;for(;i.length<s;)i.push(i[i.length-1]);return i.length>s&&i.splice(s),i}getAttributeArray(t){var e=this.node.attributes.get(t);return e?b(e):[this.node.attributes.getDefault(t)]}addEm(t,e=1){return t?t.map(t=>this.em(t/e)):null}convertLengths(t){return t?t.map(t=>this.length2em(t)):null}constructor(t,e,s=null){super(t,e,s),this.numCols=0,this.numRows=0,this.data=null,this.pwidthCells=[],this.pWidth=0,this.numCols=vi(this.tableRows.map(t=>t.numCells)),this.numRows=this.childNodes.length,this.hasLabels=this.childNodes.reduce((t,e)=>t||e.node.isKind("mlabeledtr"),!1),this.findContainer(),this.isTop=!this.container||this.container.node.isKind("math")&&!this.container.parent,this.isTop&&(this.jax.table=this),this.getPercentageWidth();const i=this.node.attributes,a=i.get("frame");this.frame="none"!==a,this.fframe=this.frame||void 0!==i.get("data-frame-styles"),this.fLine=this.frame?.07:0,this.fSpace=this.getFrameSpacing(),this.cSpace=this.convertLengths(this.getColumnAttributes("columnspacing")),this.rSpace=this.convertLengths(this.getRowAttributes("rowspacing")),this.cLines=this.getColumnAttributes("columnlines").map(t=>"none"===t?0:.07),this.rLines=this.getRowAttributes("rowlines").map(t=>"none"===t?0:.07),this.cWidths=this.getColumnWidths(),this.adjustWideTable(),this.stretchColumns(),this.stretchRows()}getStyles(){super.getStyles();const t=this.node.attributes.get("data-frame-styles");if(t){this.styles||(this.styles=new je(""));var e=t.split(/ /);for(const t of Se.keys()){var s=e[t];"none"!==s&&this.styles.set("border-"+Se[t],".07em "+s)}}}computeBBox(t,e=0){const{H:s,D:i}=this.getTableData();let a,r;if(this.node.attributes.get("equalrows")){const t=this.getEqualRowHeight();a=D([].concat(this.rLines,this.rSpace))+t*this.numRows}else a=D(s.concat(i,this.rLines,this.rSpace));a+=2*(this.fLine+this.fSpace[1]),r=this.naturalWidth();var n=this.node.attributes.get("width"),[o,h]=("auto"!==n&&(r=Math.max(this.length2em(n,0)+2*this.fLine,r)),this.getBBoxHD(a)),[o,h]=(t.h=o,t.d=h,t.w=r,this.getBBoxLR());t.L=o,t.R=h,f(n)||this.setColumnPWidths()}setChildPWidths(t,e,s){var i=this.node.attributes.get("width");if(!f(i))return!1;this.hasLabels||(this.bbox.pwidth="",this.container.bbox.pwidth="");var{w:a,L:r,R:n}=this.bbox,o=this.node.attributes.get("data-width-includes-label"),i=Math.max(a,this.length2em(i,Math.max(e,r+a+n)))-(o?r+n:0),e=this.node.attributes.get("equalcolumns")?Array(this.numCols).fill(this.percent(1/Math.max(1,this.numCols))):this.getColumnAttributes("columnwidth",0);return this.cWidths=this.getColumnWidthsFixed(e,i),this.pWidth=this.naturalWidth(),this.isTop&&(this.bbox.w=this.pWidth),this.setColumnPWidths(),this.pWidth!==a&&this.parent.invalidateBBox(),this.pWidth!==a}getAlignShift(){return this.isTop?super.getAlignShift():[this.container.getChildAlign(this.containerI),0]}}}const ji=MathJax._.core.MmlTree.MmlNodes.mtable.MmlMtable,Li=((W=class extends Si(B){constructor(t,e,s=null){super(t,e,s),this.itable=this.html("mjx-itable"),this.labels=this.html("mjx-itable")}getAlignShift(){const t=super.getAlignShift();return this.isTop||(t[1]=0),t}toCHTML(t){t=this.standardChtmlNodes(t);this.adaptor.append(t[0],this.html("mjx-table",{},[this.itable]));for(const t of this.childNodes)t.toCHTML([this.itable]);this.padRows(),this.handleColumnSpacing(),this.handleColumnLines(),this.handleColumnWidths(),this.handleRowSpacing(),this.handleRowLines(),this.handleRowHeights(),this.handleFrame(),this.handleWidth(),this.handleLabels(),this.handleAlign(),this.handleJustify(),this.shiftColor()}shiftColor(){const t=this.adaptor,e=t.getStyle(this.dom[0],"backgroundColor");e&&(t.setStyle(this.dom[0],"backgroundColor",""),t.setStyle(this.itable,"backgroundColor",e))}padRows(){const t=this.adaptor;for(const e of t.childNodes(this.itable))for(;t.childNodes(e).length<this.numCols;)t.append(e,this.html("mjx-mtd",{extra:!0}))}handleColumnSpacing(){const e=this.childNodes[0]?1/this.childNodes[0].getBBox().rscale:1,s=this.getEmHalfSpacing([this.fSpace[0],this.fSpace[2]],this.cSpace,e);for(const e of this.tableRows){let t=0;for(const n of e.tableCells){var i=s[t++],a=s[t],r=n?n.dom[0]:this.adaptor.childNodes(e.dom[0])[t];(1<t&&"0.4em"!==i||"0"!==i&&1===t)&&this.adaptor.setStyle(r,"paddingLeft",i),(t<this.numCols&&"0.4em"!==a||"0"!==a&&t===this.numCols)&&this.adaptor.setStyle(r,"paddingRight",a)}}}handleColumnLines(){if("none"!==this.node.attributes.get("columnlines")){var e=this.getColumnAttributes("columnlines");for(const i of this.childNodes){let t=0;for(const a of this.adaptor.childNodes(i.dom[0]).slice(1)){var s=e[t++];"none"!==s&&this.adaptor.setStyle(a,"borderLeft",".07em "+s)}}}}handleColumnWidths(){for(const s of this.childNodes){let t=0;for(const i of this.adaptor.childNodes(s.dom[0])){var e=this.cWidths[t++];null!==e&&(e="number"==typeof e?this.em(e):e,this.adaptor.setStyle(i,"width",e),this.adaptor.setStyle(i,"maxWidth",e),this.adaptor.setStyle(i,"minWidth",e))}}}handleRowSpacing(){const t=this.childNodes[0]?1/this.childNodes[0].getBBox().rscale:1,e=this.getEmHalfSpacing([this.fSpace[1],this.fSpace[1]],this.rSpace,t),s=this.fframe;let i=0;for(const t of this.childNodes){var a=e[i++],r=e[i];for(const e of t.childNodes)(1<i&&"0.215em"!==a||s&&1===i)&&this.adaptor.setStyle(e.dom[0],"paddingTop",a),(i<this.numRows&&"0.215em"!==r||s&&i===this.numRows)&&this.adaptor.setStyle(e.dom[0],"paddingBottom",r)}}handleRowLines(){if("none"!==this.node.attributes.get("rowlines")){const s=this.getRowAttributes("rowlines");let t=0;for(const i of this.childNodes.slice(1)){var e=s[t++];if("none"!==e)for(const s of this.adaptor.childNodes(i.dom[0]))this.adaptor.setStyle(s,"borderTop",".07em "+e)}}}handleRowHeights(){this.node.attributes.get("equalrows")&&this.handleEqualRows()}handleEqualRows(){var e=this.getRowHalfSpacing(),{H:s,D:i,NH:a,ND:r}=this.getTableData(),n=this.getEqualRowHeight();for(let t=0;t<this.numRows;t++){var o=this.childNodes[t];this.setRowHeight(o,n+e[t]+e[t+1]+this.rLines[t]),n!==a[t]+r[t]&&this.setRowBaseline(o,n,(n-s[t]+i[t])/2)}}setRowHeight(t,e){this.adaptor.setStyle(t.dom[0],"height",this.em(e))}setRowBaseline(t,e,s){var i=t.node.attributes.get("rowalign");for(const a of t.childNodes)if(this.setCellBaseline(a,i,e,s))break}setCellBaseline(t,e,s,i){const a=t.node.attributes.get("rowalign");if("baseline"===a||"axis"===a){const a=this.adaptor,r=a.lastChild(t.dom[0]),n=(a.setStyle(r,"height",this.em(s)),a.setStyle(r,"verticalAlign",this.em(-i)),t.parent);if(!(n.node.isKind("mlabeledtr")&&t===n.childNodes[0]||"baseline"!==e&&"axis"!==e))return!0}return!1}handleFrame(){var t;this.frame&&this.fLine&&(t=this.node.attributes.get("frame"),this.adaptor.setStyle(this.itable,"border",this.em(this.fLine)+" "+t))}handleWidth(){const t=this.adaptor,e=this.dom[0],{w:s,L:i,R:a}=this.getBBox();t.setStyle(e,"minWidth",this.em(i+s+a));let r=this.node.attributes.get("width");if(f(r))t.setStyle(e,"width",""),t.setAttribute(e,"width","full");else if(!this.hasLabels){if("auto"===r)return;r=this.em(this.length2em(r)+2*this.fLine)}var n=t.firstChild(e);if(t.setStyle(n,"width",r),t.setStyle(n,"minWidth",this.em(s)),i||a){t.setStyle(e,"margin","");const s=this.node.attributes.get("data-width-includes-label")?"padding":"margin";i===a?t.setStyle(n,s,"0 "+this.em(a)):t.setStyle(n,s,"0 "+this.em(a)+" 0 "+this.em(i))}t.setAttribute(this.itable,"width","full")}handleAlign(){var[t,e]=this.getAlignmentRow(),s=this.dom[0];null===e?"axis"!==t&&this.adaptor.setAttribute(s,"align",t):(e=this.getVerticalPosition(e,t),this.adaptor.setAttribute(s,"align","top"),this.adaptor.setStyle(s,"verticalAlign",this.em(e)))}handleJustify(){var t=this.getAlignShift()[0];"center"!==t&&this.adaptor.setAttribute(this.dom[0],"justify",t)}handleLabels(){if(this.hasLabels){const s=this.labels,i=this.node.attributes,a=this.adaptor,r=i.get("side");a.setAttribute(this.dom[0],"side",r),a.setAttribute(s,"align",r),a.setStyle(s,r,"0");var[t,e]=this.addLabelPadding(r);if(e){const s=a.firstChild(this.dom[0]);this.setIndent(s,t,e)}this.updateRowHeights(),this.addLabelSpacing()}}addLabelPadding(t){const[,e,s]=this.getPadAlignShift(t),i={};if("right"===t&&!this.node.attributes.get("data-width-includes-label")){const t=this.node.attributes.get("width"),{w:e,L:s,R:a}=this.getBBox();i.style={width:f(t)?"calc("+t+" + "+this.em(s+a)+")":this.em(s+e+a)}}return this.adaptor.append(this.dom[0],this.html("mjx-labels",i,[this.labels])),[e,s]}updateRowHeights(){var{H:e,D:s,NH:i,ND:a}=this.getTableData(),r=this.getRowHalfSpacing();for(let t=0;t<this.numRows;t++){const n=this.childNodes[t];this.setRowHeight(n,e[t]+s[t]+r[t]+r[t+1]+this.rLines[t]),e[t]!==i[t]||s[t]!==a[t]?this.setRowBaseline(n,e[t]+s[t],s[t]):n.node.isKind("mlabeledtr")&&this.setCellBaseline(n.childNodes[0],"",e[t]+s[t],s[t])}}addLabelSpacing(){const e=this.adaptor,s=this.node.attributes.get("equalrows"),{H:i,D:a}=this.getTableData(),r=s?this.getEqualRowHeight():0,n=this.getRowHalfSpacing();let o=this.fLine,h=e.firstChild(this.labels);for(let t=0;t<this.numRows;t++)this.childNodes[t].node.isKind("mlabeledtr")?(o&&e.insert(this.html("mjx-mtr",{style:{height:this.em(o)}}),h),e.setStyle(h,"height",this.em((s?r:i[t]+a[t])+n[t]+n[t+1])),h=e.next(h),o=this.rLines[t]):o+=n[t]+(s?r:i[t]+a[t])+n[t+1]+this.rLines[t]}}).kind=ji.prototype.kind,W.styles={"mjx-mtable":{"vertical-align":".25em","text-align":"center",position:"relative","box-sizing":"border-box","border-spacing":0,"border-collapse":"collapse"},'mjx-mstyle[size="s"] mjx-mtable':{"vertical-align":".354em"},"mjx-labels":{position:"absolute",left:0,top:0},"mjx-table":{display:"inline-block","vertical-align":"-.5ex","box-sizing":"border-box"},"mjx-table > mjx-itable":{"vertical-align":"middle","text-align":"left","box-sizing":"border-box"},"mjx-labels > mjx-itable":{position:"absolute",top:0},'mjx-mtable[justify="left"]':{"text-align":"left"},'mjx-mtable[justify="right"]':{"text-align":"right"},'mjx-mtable[justify="left"][side="left"]':{"padding-right":"0 ! important"},'mjx-mtable[justify="left"][side="right"]':{"padding-left":"0 ! important"},'mjx-mtable[justify="right"][side="left"]':{"padding-right":"0 ! important"},'mjx-mtable[justify="right"][side="right"]':{"padding-left":"0 ! important"},"mjx-mtable[align]":{"vertical-align":"baseline"},'mjx-mtable[align="top"] > mjx-table':{"vertical-align":"top"},'mjx-mtable[align="bottom"] > mjx-table':{"vertical-align":"bottom"},'mjx-mtable[side="right"] mjx-labels':{"min-width":"100%"}},W);function Ni(t){return class extends t{get numCells(){return this.childNodes.length}get labeled(){return!1}get tableCells(){return this.childNodes}getChild(t){return this.childNodes[t]}getChildBBoxes(){return this.childNodes.map(t=>t.getBBox())}stretchChildren(s=null){const e=[],i=this.labeled?this.childNodes.slice(1):this.childNodes;for(const s of i){const i=s.childNodes[0];i.canStretch(u.Vertical)&&e.push(i)}const a=e.length,r=this.childNodes.length;if(a&&1<r&&!s){let t=0,e=0;var n=1<a&&a===r;for(const s of i){const i=s.childNodes[0],a=i.stretch.dir===u.None;if(n||a){const{h:s,d:r}=i.getBBox(a);s>t&&(t=s),r>e&&(e=r)}}s=[t,e]}if(s)for(const i of e){const e=i.coreRScale();i.coreMO().getStretchedVariant(s.map(t=>t*e))}}get fixesPWidth(){return!1}}}function Ti(t){return class extends t{get numCells(){return Math.max(0,this.childNodes.length-1)}get labeled(){return!0}get tableCells(){return this.childNodes.slice(1)}getChild(t){return this.childNodes[t+1]}getChildBBoxes(){return this.childNodes.slice(1).map(t=>t.getBBox())}}}const Ai=MathJax._.core.MmlTree.MmlNodes.mtr,Di=Ai.MmlMtr,Oi=Ai.MmlMlabeledtr,Wi=((W=class extends Ni(B){toCHTML(t){super.toCHTML(t);t=this.node.attributes.get("rowalign");"baseline"!==t&&this.adaptor.setAttribute(this.dom[0],"rowalign",t)}}).kind=Di.prototype.kind,W.styles={"mjx-mtr":{display:"table-row"},'mjx-mtr[rowalign="top"] > mjx-mtd':{"vertical-align":"top"},'mjx-mtr[rowalign="center"] > mjx-mtd':{"vertical-align":"middle"},'mjx-mtr[rowalign="bottom"] > mjx-mtd':{"vertical-align":"bottom"},'mjx-mtr[rowalign="baseline"] > mjx-mtd':{"vertical-align":"baseline"},'mjx-mtr[rowalign="axis"] > mjx-mtd':{"vertical-align":".25em"}},W),Pi=((W=class extends Ti(Wi){toCHTML(t){super.toCHTML(t);var e=this.adaptor.firstChild(this.dom[0]);if(e){this.adaptor.remove(e);const t=this.node.attributes.get("rowalign"),s="baseline"!==t&&"axis"!==t?{rowalign:t}:{},i=this.html("mjx-mtr",s,[e]);this.adaptor.append(this.parent.labels,i)}}markUsed(){super.markUsed(),this.jax.wrapperUsage.add(Wi.kind)}}).kind=Oi.prototype.kind,W.styles={"mjx-mlabeledtr":{display:"table-row"},'mjx-mlabeledtr[rowalign="top"] > mjx-mtd':{"vertical-align":"top"},'mjx-mlabeledtr[rowalign="center"] > mjx-mtd':{"vertical-align":"middle"},'mjx-mlabeledtr[rowalign="bottom"] > mjx-mtd':{"vertical-align":"bottom"},'mjx-mlabeledtr[rowalign="baseline"] > mjx-mtd':{"vertical-align":"baseline"},'mjx-mlabeledtr[rowalign="axis"] > mjx-mtd':{"vertical-align":".25em"}},W);function Hi(t){return class extends t{get fixesPWidth(){return!1}invalidateBBox(){this.bboxComputed=!1,this.lineBBox=[]}getWrapWidth(t){const e=this.parent.parent,s=this.parent,i=this.node.childPosition()-(s.labeled?1:0);return("number"==typeof e.cWidths[i]?e.cWidths:e.getTableData().W)[i]}getChildAlign(t){return this.node.attributes.get("columnalign")}}}const Ri=MathJax._.core.MmlTree.MmlNodes.mtd.MmlMtd,Ei=((W=class extends Hi(B){toCHTML(t){super.toCHTML(t);var t=this.node.attributes.get("rowalign"),e=this.node.attributes.get("columnalign");t!==this.parent.node.attributes.get("rowalign")&&this.adaptor.setAttribute(this.dom[0],"rowalign",t),"center"===e||"mlabeledtr"===this.parent.kind&&this===this.parent.childNodes[0]&&e===this.parent.parent.node.attributes.get("side")||this.adaptor.setStyle(this.dom[0],"textAlign",e),this.parent.parent.node.getProperty("useHeight")&&this.adaptor.append(this.dom[0],this.html("mjx-tstrut"))}}).kind=Ri.prototype.kind,W.styles={"mjx-mtd":{display:"table-cell","text-align":"center",padding:".215em .4em"},"mjx-mtd:first-child":{"padding-left":0},"mjx-mtd:last-child":{"padding-right":0},"mjx-mtable > * > mjx-itable > *:first-child > mjx-mtd":{"padding-top":0},"mjx-mtable > * > mjx-itable > *:last-child > mjx-mtd":{"padding-bottom":0},"mjx-tstrut":{display:"inline-block",height:"1em","vertical-align":"-.25em"},'mjx-labels[align="left"] > mjx-mtr > mjx-mtd':{"text-align":"left"},'mjx-labels[align="right"] > mjx-mtr > mjx-mtd':{"text-align":"right"},"mjx-mtd[extra]":{padding:0},'mjx-mtd[rowalign="top"]':{"vertical-align":"top"},'mjx-mtd[rowalign="center"]':{"vertical-align":"middle"},'mjx-mtd[rowalign="bottom"]':{"vertical-align":"bottom"},'mjx-mtd[rowalign="baseline"]':{"vertical-align":"baseline"},'mjx-mtd[rowalign="axis"]':{"vertical-align":".25em"}},W),Fi={dx:".2em",dy:".1em",postDelay:600,clearDelay:100,hoverTimer:new Map,clearTimer:new Map,stopTimers:(t,e)=>{e.clearTimer.has(t)&&(clearTimeout(e.clearTimer.get(t)),e.clearTimer.delete(t)),e.hoverTimer.has(t)&&(clearTimeout(e.hoverTimer.get(t)),e.hoverTimer.delete(t))}};function Ii(t){return class extends t{get selected(){var t=this.node.attributes.get("selection"),t=Math.max(1,Math.min(this.childNodes.length,t))-1;return this.childNodes[t]||this.wrap(this.node.selected)}getParameters(){var t=this.node.attributes.get("data-offsets"),[t,e]=b(t||"");this.tipDx=this.length2em(t||Fi.dx),this.tipDy=this.length2em(e||Fi.dy)}constructor(t,e,s=null){super(t,e,s);const i=this.constructor.actions,a=this.node.attributes.get("actiontype"),[r,n]=i.get(a)||[(t,e)=>{},{}];this.action=r,this.data=n,this.getParameters()}computeBBox(t,e=!1){t.updateFrom(this.selected.getOuterBBox()),this.selected.setChildPWidths(e)}get breakCount(){return this.node.isEmbellished?this.selected.coreMO().embellishedBreakCount:this.selected.breakCount}computeLineBBox(t){return this.getChildLineBBox(this.selected,t)}}}const _i=MathJax._.core.MmlTree.MmlNodes.maction.MmlMaction,Vi=((W=class extends Ii(B){setEventHandler(e,s,t=null){(t?[t]:this.dom).forEach(t=>t.addEventListener(e,s))}Em(t){return this.em(t)}toCHTML(t){this.toEmbellishedCHTML(t)||(t=this.standardChtmlNodes(t),this.selected.toCHTML(t),this.action(this,this.data))}}).kind=_i.prototype.kind,W.styles={"mjx-maction":{position:"relative"},"mjx-maction > mjx-tool":{display:"none",position:"absolute",bottom:0,right:0,width:0,height:0,"z-index":500},"mjx-tool > mjx-tip":{display:"inline-block","line-height":0,padding:".2em",border:"1px solid #888","background-color":"#F8F8F8",color:"black","box-shadow":"2px 2px 5px #AAAAAA"},"mjx-maction[toggle]":{cursor:"pointer"},"mjx-status":{display:"block",position:"fixed",left:"1em",bottom:"1em","min-width":"25%",padding:".2em .4em",border:"1px solid #888","font-size":"90%","background-color":"#F8F8F8",color:"black"}},W.actions=new Map([["toggle",[(e,t)=>{e.dom.forEach(t=>{e.adaptor.setAttribute(t,"toggle",e.node.attributes.get("selection"))});const s=e.factory.jax.math,i=e.factory.jax.document,a=e.node;e.setEventHandler("click",t=>{s.end.node||(s.start.node=s.end.node=s.typesetRoot,s.start.n=s.end.n=0),a.nextToggleSelection(),s.rerender(i,a.attributes.get("data-maction-id")?se.ENRICHED:se.RERENDER),t.stopPropagation()})},{}]],["tooltip",[(e,s)=>{const t=e.childNodes[1];if(t)if(t.node.isKind("mtext")){const s=t.node.getText();e.dom.forEach(t=>e.adaptor.setAttribute(t,"title",s))}else{const i=e.adaptor;for(const a of e.dom){const r=i.append(a,e.html("mjx-tool",{style:{bottom:e.Em(-e.tipDy),right:e.Em(-e.tipDx)}},[e.html("mjx-tip")]));t.toCHTML([i.firstChild(r)]),e.setEventHandler("mouseover",t=>{s.stopTimers(a,s);var e=setTimeout(()=>i.setStyle(r,"display","block"),s.postDelay);s.hoverTimer.set(a,e),t.stopPropagation()},a),e.setEventHandler("mouseout",t=>{s.stopTimers(a,s);var e=setTimeout(()=>i.setStyle(r,"display",""),s.clearDelay);s.clearTimer.set(a,e),t.stopPropagation()},a)}}},Fi]],["statusline",[(e,s)=>{const t=e.childNodes[1];if(t&&t.node.isKind("mtext")){const i=e.adaptor,a=t.node.getText();e.dom.forEach(t=>i.setAttribute(t,"statusline",a)),e.setEventHandler("mouseover",t=>{if(null===s.status){const t=i.body(i.document);s.status=i.append(t,e.html("mjx-status",{},[e.text(a)]))}t.stopPropagation()}),e.setEventHandler("mouseout",t=>{s.status&&(i.remove(s.status),s.status=null),t.stopPropagation()})}},{status:null}]]]),W);function zi(t){return class extends t{constructor(t,e,s=null){super(t,e,s),this.getParameters()}getParameters(){const{width:t,height:e,valign:s,src:i,index:a}=this.node.attributes.getList("width","height","valign","src","index");if(i)this.width="auto"===t?1:this.length2em(t),this.height="auto"===e?1:this.length2em(e),this.valign=this.length2em(s||"0");else{const t=String.fromCodePoint(parseInt(a)),e=this.node.factory;this.charWrapper=this.wrap(e.create("text").setText(t)),this.charWrapper.parent=this}}computeBBox(t,e=0){this.charWrapper?t.updateFrom(this.charWrapper.getBBox()):(t.w=this.width,t.h=this.height+this.valign,t.d=-this.valign)}}}const Ui=MathJax._.core.MmlTree.MmlNodes.mglyph.MmlMglyph,Ji=((W=class extends zi(B){toCHTML(t){t=this.standardChtmlNodes(t);if(this.charWrapper)this.charWrapper.toCHTML(t);else{const{src:s,alt:i}=this.node.attributes.getList("src","alt"),a={width:this.em(this.width),height:this.em(this.height)};this.valign&&(a.verticalAlign=this.em(this.valign));var e=this.html("img",{src:s,style:a,alt:i,title:i});this.adaptor.append(t[0],e)}}}).kind=Ui.prototype.kind,W.styles={"mjx-mglyph > img":{display:"inline-block",border:0,padding:0}},W);function Ki(t){return class extends t{computeBBox(t,e=0){if(this.childNodes.length){const{w:e,h:s,d:i}=this.childNodes[0].getBBox();t.w=e,t.h=s,t.d=i}}get breakCount(){return this.node.isEmbellished?this.coreMO().embellishedBreakCount:this.childNodes[0].breakCount}}}function qi(t){class e extends t{constructor(t,e,s=null){super(t,e,s),this.rscale=this.getRScale()}computeBBox(t,e=0){var s=this.node.getXML(),i=this.getHDW(s,"use","force"),{h:i,d:s,w:a}=i?this.splitHDW(i):this.measureXmlNode(s);t.w=a,t.h=i,t.d=s}getHTML(){let t=this.adaptor.clone(this.node.getXML());var e=this.getFontStyles();return!this.getHDW(t,"force")&&1===this.jax.options.scale||(t=this.addHDW(t,e)),this.html("mjx-html",{variant:this.parent.variant,style:e},[t])}getHDW(t,e,s=e){var i=this.jax.options.htmlHDW,t=this.adaptor.getAttribute(t,"data-mjx-hdw");return!t||i!==e&&i!==s?null:t}splitHDW(t){const e=1/this.metrics.scale,[s,i,a]=b(t).map(t=>this.length2em(t||"0")*e);return{h:s,d:i,w:a}}getFontStyles(){var t;const e=this.adaptor,s=this.metrics;return{"font-family":(null==(t=this.parent.styles)?void 0:t.get("font-family"))||s.family||e.fontFamily(e.parent(this.jax.math.start.node))||"initial","font-size":this.jax.fixed(s.em*this.rscale)+"px"}}measureXmlNode(t){const e=this.adaptor,s=this.html("mjx-xml-block",{style:{display:"inline-block"}},[e.clone(t)]),i=this.html("mjx-baseline",{style:{display:"inline-block",width:0,height:0}}),a=this.getFontStyles(),r=this.html("mjx-measure-xml",{style:a},[i,s]),n=this.jax.container;e.append(e.parent(this.jax.math.start.node),n),e.append(n,r);var t=this.metrics,t=t.em*t.scale*this.rscale,{left:o,right:h,bottom:l,top:d}=e.nodeBBox(s),h=(h-o)/t,o=(e.nodeBBox(i).top-d)/t,l=(l-d)/t-o;return e.remove(n),e.remove(r),{w:h,h:o,d:l}}getStyles(){}getScale(){}getVariant(){}}return e.autoStyle=!1,e.styles={"mjx-measure-xml":{position:"absolute",left:0,top:0,display:"inline-block","line-height":"normal","white-space":"normal"},"mjx-html":{display:"inline-block","line-height":"normal","text-align":"initial","white-space":"initial"},"mjx-html-holder":{display:"block",position:"absolute",top:0,left:0,bottom:0,right:0}},e}const Xi=MathJax._.core.MmlTree.MmlNodes.semantics,$i=Xi.MmlSemantics,Qi=Xi.MmlAnnotationXML,Gi=Xi.MmlAnnotation,Yi=((W=class extends Ki(B){toCHTML(t){this.toEmbellishedCHTML(t)||(t=this.standardChtmlNodes(t),this.childNodes.length&&this.childNodes[0].toCHTML(t))}}).kind=$i.prototype.kind,W),Zi=((W=class extends B{toCHTML(t){super.toCHTML(t)}computeBBox(){return this.bbox}}).kind=Gi.prototype.kind,W),ta=((W=class extends B{}).kind=Qi.prototype.kind,W.styles={"mjx-annotation-xml":{"font-family":"initial","line-height":"normal"}},W),ea=((W=class extends qi(B){toCHTML(t){this.markUsed(),this.dom=[this.adaptor.append(t[0],this.getHTML())]}addHDW(t,e){var s=this.jax.options.scale,{h:i,d:a,w:r}=this.bbox,n=s*this.metrics.scale;return e.width=this.em(r*n),e.height=this.em((i+a)*n),e["vertical-align"]=this.em(-a*n),e.position="relative",this.html("mjx-html-holder",{style:{transform:`scale(${this.jax.fixed(s)})`,"transform-origin":"top left"}},[t])}}).kind=re.prototype.kind,W);function sa(t){return class extends t{computeBBox(t,e=!1){super.computeBBox(t,e),this.childNodes[0]&&this.childNodes[0].bbox.ic&&(t.ic=this.childNodes[0].bbox.ic)}}}const ia=MathJax._.core.MmlTree.MmlNodes.TeXAtom.TeXAtom,aa=((W=class extends sa(B){toCHTML(t){super.toCHTML(t),this.dom.forEach(t=>this.adaptor.setAttribute(t,"texclass",ie[this.node.texClass]))}}).kind=ia.prototype.kind,W);function ra(t){return class extends t{remappedText(t,e){var s=this.parent.stretch.c;return s?[s]:this.parent.remapChars(this.unicodeChars(t,e))}computeBBox(s,i=0){var a=this.parent.variant,t=this.node.getText();if("-explicitFont"===a){const i=this.jax.getFontData(this.parent.styles),{w:e,h:l,d}=this.jax.measureText(t,a,i);s.h=l,s.d=d,s.w=e}else{const i=this.remappedText(t,a);let e="";s.empty();for(let t=0;t<i.length;t++){var[r,n,o,h]=this.getVariantChar(a,i[t]);if(h.unknown)e+=String.fromCodePoint(i[t]);else if(e=this.addUtextBBox(s,e,a),this.updateBBox(s,r,n,o),s.ic=h.ic||0,s.sk=h.sk||0,s.dx=h.dx||0,h.oc&&!(t<i.length-1)){r=this.parent.childNodes;if(this.node===r[r.length-1].node){const c=this.parent.parent.node;let t=c.isKind("mrow")||c.isInferred?c.childNodes[c.childIndex(this.parent.node)+1]:null;(t=null!=t&&t.isKind("mo")&&"⁢"===t.getText()?c.childNodes[c.childIndex(t)+1]:t)&&t.attributes.get("mathvariant")===a?s.oc=h.oc:s.ic=h.oc}}}this.addUtextBBox(s,e,a),1<i.length&&(s.sk=0),s.clean()}}addUtextBBox(t,e,s){var i;return e&&({h:e,d:s,w:i}=this.jax.measureText(e,s),this.updateBBox(t,e,s,i)),""}updateBBox(t,e,s,i){t.w+=i,e>t.h&&(t.h=e),s>t.d&&(t.d=s)}getStyles(){}getVariant(){}getScale(){}getSpace(){}}}(W=class extends ra(B){toCHTML(t){this.markUsed();const s=t[0],i=this.adaptor,a=this.parent.variant,r=this.node.getText();if(0!==r.length){var n=this.getBBox();if("-explicitFont"===a)i.append(s,this.jax.unknownText(r,a,n.w));else{let e="";var o=this.remappedText(r,a),h=1<o.length?this.em(this.parent.getBBox().h):"",l=o.length;for(let t=0;t<l;t++){var d,c=o[t],m=this.getVariantChar(a,c)[3];m.unknown?e+=String.fromCodePoint(c):(e=this.addUtext(e,a,s),d=m.ff||(m.f?this.font.cssFontPrefix+"-"+m.f:""),d=i.append(s,this.html("mjx-c",{class:this.char(c)+(d?" "+d:"")},[this.text(m.c||String.fromCodePoint(c))])),(t<l-1||n.oc)&&i.setAttribute(d,"noic","true"),h&&i.setStyle(d,"padding-top",h),this.font.charUsage.add([a,c]))}this.addUtext(e,a,s)}}}addUtext(t,e,s){return t&&this.adaptor.append(s,this.jax.unknownText(t,e)),""}}).kind=ae.prototype.kind,W.autoStyle=!1,W.styles={"mjx-c":{display:"inline-block",width:0,"text-align":"right"},"mjx-utext":{display:"inline-block",padding:".75em 0 .2em 0"}};const na=W,oa=MathJax._.core.MmlTree.MmlNodes.HtmlNode.HtmlNode,ha=((W=class extends ea{}).kind=oa.prototype.kind,W),la={[Ee.kind]:Ee,[Ps.kind]:Ps,[Hs.kind]:Hs,[_e.kind]:_e,[Je.kind]:Je,[Xe.kind]:Xe,[Ge.kind]:Ge,[ts.kind]:ts,[is.kind]:is,[ns.kind]:ns,[Ns.kind]:Ns,[Vs.kind]:Vs,[Js.kind]:Js,[Xs.kind]:Xs,[ai.kind]:ai,[ri.kind]:ri,[ni.kind]:ni,[ui.kind]:ui,[gi.kind]:gi,[xi.kind]:xi,[Ci.kind]:Ci,[Fs.kind]:Fs,[Li.kind]:Li,[Wi.kind]:Wi,[Pi.kind]:Pi,[Ei.kind]:Ei,[Vi.kind]:Vi,[Ji.kind]:Ji,[Yi.kind]:Yi,[Zi.kind]:Zi,[ta.kind]:ta,[ea.kind]:ea,[aa.kind]:aa,[na.kind]:na,[ha.kind]:ha,[B.kind]:B};class da extends Te{}da.defaultNodes=la;const ca="mathjax-newcm",ma=null;class O extends g{constructor(t={}){super(t,da,ma),this.chtmlStyles=null,this.font.adaptiveCSS(this.options.adaptiveCSS),this.wrapperUsage=new Ue}addExtension(t,e=""){t=super.addExtension(t,e);return t.length&&this.options.adaptiveCSS&&this.chtmlStyles&&this.adaptor.insertRules(this.chtmlStyles,t),[]}escaped(t,e){return this.setDocument(e),this.html("span",{},[this.text(t.math)])}styleSheet(t){if(this.chtmlStyles){const t=new Le;return this.options.adaptiveCSS&&(this.addWrapperStyles(t),this.updateFontStyles(t)),t.addStyles(this.font.updateDynamicStyles()),this.adaptor.insertRules(this.chtmlStyles,t.getStyleRules()),this.chtmlStyles}t=this.chtmlStyles=super.styleSheet(t);return this.adaptor.setAttribute(t,"id",O.STYLESHEETID),this.wrapperUsage.update(),t}updateFontStyles(t){t.addStyles(this.font.updateStyles({}))}addWrapperStyles(t){if(this.options.adaptiveCSS)for(const s of this.wrapperUsage.update()){var e=this.factory.getNodeClass(s);e&&this.addClassStyles(e,t)}else super.addWrapperStyles(t)}addClassStyles(t,e){var s=t;s.autoStyle&&"unknown"!==s.kind&&e.addStyles({["mjx-"+s.kind]:{display:"inline-block","text-align":"left"}}),this.wrapperUsage.add(s.kind),super.addClassStyles(t,e)}insertStyles(t){this.chtmlStyles&&this.adaptor.insertRules(this.chtmlStyles,new Le(t).getStyleRules())}processMath(t,e){t.toCHTML([e])}clearCache(){this.styleJson.clear(),this.font.clearCache(),this.wrapperUsage.clear(),this.chtmlStyles=null}reset(){this.clearCache()}unknownText(t,e,s=null){const i={},a=100/this.math.metrics.scale;if(100!=a&&(i["font-size"]=this.fixed(a,1)+"%",i.padding=p(75/a)+" 0 "+p(20/a)+" 0"),"-explicitFont"!==e){const s=De(t);(1!==s.length||s[0]<119808||120831<s[0])&&this.cssFontStyles(this.font.getCssFont(e),i)}return null!==s&&(i.width=this.fixed(s*this.math.metrics.scale)+"em"),this.html("mjx-utext",{variant:e,style:i},[this.text(t)])}measureTextNode(t){const e=this.adaptor,s=e.clone(t);e.setStyle(s,"font-family",e.getStyle(s,"font-family").replace(/MJXZERO, /g,""));var t=this.math.metrics.em,i={position:"absolute",top:0,left:0,"white-space":"nowrap","font-size":this.fixed(t,3)+"px"},i=this.html("mjx-measure-text",{style:i},[s]),t=(e.append(e.parent(this.math.start.node),this.container),e.append(this.container,i),e.nodeSize(s,t)[0]);return e.remove(this.container),e.remove(i),{w:t,h:.75,d:.2}}}O.NAME="CHTML",O.OPTIONS=Object.assign(Object.assign({},g.OPTIONS),{adaptiveCSS:!0,matchFontHeight:!0}),O.commonStyles=Object.assign(Object.assign({},g.commonStyles),{'mjx-container[jax="CHTML"]':{"white-space":"nowrap"},[["mjx-mo > mjx-c","mjx-mi > mjx-c","mjx-mn > mjx-c","mjx-ms > mjx-c","mjx-mtext > mjx-c"].join(", ")]:{"clip-path":"padding-box xywh(-1em -2px calc(100% + 2em) calc(100% + 4px))"},"mjx-stretchy-h":{"clip-path":"padding-box xywh(0 -2px 100% calc(100% + 4px))"},"mjx-stretchy-v":{"clip-path":"padding-box xywh(-2px 0 calc(100% + 4px) 100%)"},'mjx-container [space="1"]':{"margin-left":".111em"},'mjx-container [space="2"]':{"margin-left":".167em"},'mjx-container [space="3"]':{"margin-left":".222em"},'mjx-container [space="4"]':{"margin-left":".278em"},'mjx-container [space="5"]':{"margin-left":".333em"},'mjx-container [rspace="1"]':{"margin-right":".111em"},'mjx-container [rspace="2"]':{"margin-right":".167em"},'mjx-container [rspace="3"]':{"margin-right":".222em"},'mjx-container [rspace="4"]':{"margin-right":".278em"},'mjx-container [rspace="5"]':{"margin-right":".333em"},'mjx-container [size="s"]':{"font-size":"70.7%"},'mjx-container [size="ss"]':{"font-size":"50%"},'mjx-container [size="Tn"]':{"font-size":"60%"},'mjx-container [size="sm"]':{"font-size":"85%"},'mjx-container [size="lg"]':{"font-size":"120%"},'mjx-container [size="Lg"]':{"font-size":"144%"},'mjx-container [size="LG"]':{"font-size":"173%"},'mjx-container [size="hg"]':{"font-size":"207%"},'mjx-container [size="HG"]':{"font-size":"249%"},'mjx-container [width="full"]':{width:"100%"},"mjx-box":{display:"inline-block"},"mjx-block":{display:"block"},"mjx-itable":{display:"inline-table"},"mjx-row":{display:"table-row"},"mjx-row > *":{display:"table-cell"},"mjx-container [inline-breaks]":{display:"inline"},"mjx-mtext":{display:"inline-block"},"mjx-mstyle":{display:"inline-block"},"mjx-merror":{display:"inline-block",color:"red","background-color":"yellow"},"mjx-mphantom":{visibility:"hidden"}}),O.STYLESHEETID="MJX-CHTML-styles",MathJax.loader&&MathJax.loader.checkVersion("output/chtml","4.0.0","output"),Zt({_:{output:{chtml_ts:s,chtml:{DefaultFont:Qt,DynamicFonts:Gt,FontData:Q,Notation:dt,Usage:$,Wrapper:z,WrapperFactory:$t,Wrappers_ts:Xt,Wrappers:{HtmlNode:qt,TeXAtom:Ut,TextNode:Kt,maction:Rt,math:J,menclose:ct,mfenced:gt,mfrac:ft,mglyph:Ft,mi:q,mmultiscripts:Nt,mn:Z,mo:G,mpadded:ot,mroot:kt,mrow:pt,ms:et,mspace:rt,msqrt:yt,msubsup:Mt,mtable:At,mtd:Pt,mtext:it,mtr:Ot,munderover:jt,scriptbase:vt,semantics:Vt}},common_ts:I,common:{Direction:H,FontData:R,LineBBox:E,LinebreakVisitor:F,Notation:ht,Wrapper:V,WrapperFactory:_,Wrappers:{TeXAtom:zt,TextNode:Jt,XmlNode:_t,maction:Ht,math:U,menclose:lt,mfenced:ut,mfrac:xt,mglyph:Et,mi:K,mmultiscripts:Lt,mn:Y,mo:X,mpadded:nt,mroot:Bt,mrow:mt,ms:tt,mspace:at,msqrt:bt,msubsup:Ct,mtable:Tt,mtd:Wt,mtext:st,mtr:Dt,munderover:St,scriptbase:wt,semantics:It}}}}});const pa=MathJax._.components.package,ua=(pa.PackageError,pa.Package),ga=MathJax._.util.context,xa=ga.hasWindow,fa=(ga.context,xa?"https://cdn.jsdelivr.net/npm/@mathjax/%%FONT%%-font":"@mathjax/%%FONT%%-font");var W="chtml",ba=O,ya=ca,P=ma;if(MathJax.loader){Yt(MathJax.config,W,MathJax.config.output||{});let t=MathJax.config[W],e=t.font||t.fontData||ya;if("string"!=typeof e&&(t.fontData=e,t.font=e=e.NAME),"["!==e.charAt(0)){const ya=t.fontPath||fa,P=e.match(/^[a-z]+:/)?(e.match(/[^/:\\]*$/)||[W])[0]:e;Yt(MathJax.config.loader,"paths",{[P]:P===e?ya.replace(/%%FONT%%/g,e):e}),e=`[${P}]`}s=e.substring(1,e.length-1);if(s===ya&&P){const ba=MathJax.config.loader[e+"/"+W]?.extraLoads;ba&&MathJax.loader.addPackageData("output/"+W,{extraLoads:ba}),Zt({_:{output:{fonts:{[s]:{[W+"_ts"]:{[P.NAME+"Font"]:P}}}}}}),Yt(MathJax,"config",{output:{font:e},[W]:{fontData:P,dynamicPrefix:e+`/${W}/dynamic`}}),"chtml"===W&&Yt(MathJax.config,W,{fontURL:ua.resolvePath(e+`/${W}/woff2`,!1)})}else MathJax.loader.addPackageData("output/"+W,{extraLoads:[e+"/"+W]})}MathJax.startup&&(MathJax.startup.registerConstructor(W,ba),MathJax.startup.useOutput(W))})();
(()=>{"use strict";var i={d:(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},t={},e=(i.r(t),i.d(t,{SafeMethods:()=>p}),{}),s=(i.r(e),i.d(e,{Safe:()=>h}),{});i.r(s),i.d(s,{SafeHandler:()=>d,SafeMathDocumentMixin:()=>c});const a=("undefined"!=typeof window?window:global).MathJax._.components.global,r=(a.GLOBAL,a.isObject,a.combineConfig,a.combineDefaults,a.combineWithMathJax),l=(a.MathJax,MathJax._.util.Options),o=(l.isObject,l.APPEND,l.REMOVE,l.OPTIONS,l.Expandable,l.expandable),n=(l.makeArray,l.keys,l.copy,l.insert,l.defaultOptions,l.userOptions,l.selectOptions,l.selectOptionsFromKeys,l.separateOptions,l.lookup,MathJax._.util.lengths),f=(n.BIGDIMEN,n.UNITS,n.RELUNITS,n.MATHSPACE,n.length2em),p=(n.percent,n.em,n.px,{filterURL(t,e){var s=(e.match(/^\s*([a-z\n\r]+):/i)||[null,""])[1].replace(/[\n\r]/g,"").toLowerCase(),i=t.allow.URLs;return"all"===i||"safe"===i&&(t.options.safeProtocols[s]||!s)?e:null},filterClassList(e,t){return t.trim().replace(/\s\s+/g," ").split(/ /).map(t=>this.filterClass(e,t)||"").join(" ").trim().replace(/\s\s+/g,"")},filterClass(t,e){var s=t.allow.classes;return"all"===s||"safe"===s&&e.match(t.options.classPattern)?e:null},filterID(t,e){var s=t.allow.cssIDs;return"all"===s||"safe"===s&&e.match(t.options.idPattern)?e:null},filterStyles(t,e){if("all"===t.allow.styles)return e;if("safe"!==t.allow.styles)return null;const s=t.adaptor,i=t.options;try{var a=s.node("div",{style:e}),r=s.node("div");for(const e of Object.keys(i.safeStyles))if(i.styleParts[e])for(const i of["Top","Right","Bottom","Left"]){var l=e+i,o=this.filterStyle(t,l,a);o&&s.setStyle(r,l,o)}else{const i=this.filterStyle(t,e,a);i&&s.setStyle(r,e,i)}e=s.allStyles(r)}catch(t){e=""}return e},filterStyle(t,e,s){const i=t.adaptor.getStyle(s,e);if("string"!=typeof i||""===i||i.match(/^\s*calc/)||i.match(/javascript:/)&&!t.options.safeProtocols.javascript||i.match(/data:/)&&!t.options.safeProtocols.data)return null;var a=e.replace(/Top|Right|Left|Bottom/,"");return t.options.safeStyles[e]||t.options.safeStyles[a]?this.filterStyleValue(t,e,i,s):null},filterStyleValue(t,e,s,i){var a=t.options.styleLengths[e];if(!a)return s;if("string"!=typeof a)return this.filterStyleLength(t,e,s);s=this.filterStyleLength(t,a,t.adaptor.getStyle(i,a));return s?(t.adaptor.setStyle(i,a,s),t.adaptor.getStyle(i,e)):null},filterStyleLength(t,e,s){if(!s.match(/^(.+)(em|ex|ch|rem|px|mm|cm|in|pt|pc|%)$/))return null;const i=f(s,1),a=t.options.styleLengths[e],[r,l]=Array.isArray(a)?a:[-t.options.lengthMax,t.options.lengthMax];return r<=i&&i<=l?s:(i<r?r:l).toFixed(3).replace(/\.?0+$/,"")+"em"},filterFontSize(t,e){return this.filterStyleLength(t,"fontSize",e)},filterSizeMultiplier(t,e){var[t,s]=t.options.scriptsizemultiplierRange||[-1/0,1/0];return Math.min(s,Math.max(t,parseFloat(e))).toString()},filterScriptLevel(t,e){var[t,s]=t.options.scriptlevelRange||[-1/0,1/0];return Math.min(s,Math.max(t,parseInt(e))).toString()},filterData:(t,e,s)=>s.match(t.options.dataPattern)?e:null});class h{constructor(t,e){this.filterAttributes=new Map([["href","filterURL"],["src","filterURL"],["altimg","filterURL"],["class","filterClassList"],["style","filterStyles"],["id","filterID"],["fontsize","filterFontSize"],["mathsize","filterFontSize"],["scriptminsize","filterFontSize"],["scriptsizemultiplier","filterSizeMultiplier"],["scriptlevel","filterScriptLevel"],["data-","filterData"]]),this.filterMethods=Object.assign({},p),this.adaptor=t.adaptor,this.options=e,this.allow=this.options.allow}sanitize(e,s){try{e.root.walkTree(this.sanitizeNode.bind(this))}catch(t){s.options.compileError(s,e,t)}}sanitizeNode(t){const e=t.attributes.getAllAttributes();for(const t of Object.keys(e)){var s=this.filterAttributes.get(t);s&&((s=this.filterMethods[s](this,e[t]))?s!==("number"==typeof s?parseFloat(e[t]):e[t])&&(e[t]=s):delete e[t])}}mmlAttribute(t,e){if("class"===t)return null;var s=this.filterAttributes.get(t)||("data-"===t.substring(0,5)?this.filterAttributes.get("data-"):null);if(!s)return e;s=this.filterMethods[s](this,e,t);return"number"==typeof s||"boolean"==typeof s?String(s):s}mmlClassList(t){return t.map(t=>this.filterMethods.filterClass(this,t)).filter(t=>null!==t)}}function c(t){var e;return(e=class extends t{constructor(...t){super(...t),this.safe=new this.options.SafeClass(this,this.options.safeOptions);for(const t of this.inputJax)t.name.match(/MathML/)?(t.mathml.filterAttribute=this.safe.mmlAttribute.bind(this.safe),t.mathml.filterClassList=this.safe.mmlClassList.bind(this.safe)):t.name.match(/TeX/)&&t.postFilters.add(this.sanitize.bind(t),-5.5)}sanitize(t){t.math.root=this.parseOptions.root,t.document.safe.sanitize(t.math,t.document)}}).OPTIONS=Object.assign(Object.assign({},t.OPTIONS),{safeOptions:Object.assign({},h.OPTIONS),SafeClass:h}),e}function d(t){return t.documentClass=c(t.documentClass),t}h.OPTIONS={allow:{URLs:"safe",classes:"safe",cssIDs:"safe",styles:"safe"},lengthMax:3,scriptsizemultiplierRange:[.6,1],scriptlevelRange:[-2,2],classPattern:/^mjx-[-a-zA-Z0-9_.]+$/,idPattern:/^mjx-[-a-zA-Z0-9_.]+$/,dataPattern:/^data-mjx-/,safeProtocols:o({http:!0,https:!0,file:!0,javascript:!1,data:!1}),safeStyles:o({color:!0,backgroundColor:!0,border:!0,cursor:!0,margin:!0,padding:!0,textShadow:!0,fontFamily:!0,fontSize:!0,fontStyle:!0,fontWeight:!0,opacity:!0,outline:!0}),styleParts:o({border:!0,padding:!0,margin:!0,outline:!0}),styleLengths:o({borderTop:"borderTopWidth",borderRight:"borderRightWidth",borderBottom:"borderBottomWidth",borderLeft:"borderLeftWidth",paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0,marginTop:!0,marginRight:!0,marginBottom:!0,marginLeft:!0,outlineTop:!0,outlineRight:!0,outlineBottom:!0,outlineLeft:!0,fontSize:[.707,1.44]})},MathJax.loader&&MathJax.loader.checkVersion("ui/safe","4.0.0","ui"),r({_:{ui:{safe:{SafeHandler:s,SafeMethods:t,safe:e}}}}),MathJax.startup&&MathJax.startup.extendHandler(t=>d(t))})();
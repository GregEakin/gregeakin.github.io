(()=>{var __webpack_modules__={74:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{f:()=>SystemExternal});var _variables_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(714),_lib_external_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(268);const windowSupported=!("undefined"==typeof window),documentSupported=windowSupported&&!(void 0===window.document),webworker=!("undefined"==typeof DedicatedWorkerGlobalScope),nodeRequire=()=>{try{return eval("require")}catch(t){return t=>null}},SystemExternal={extRequire:t=>"undefined"!=typeof process&&"undefined"!=typeof require?nodeRequire()(t):null,windowSupported:windowSupported,documentSupported:documentSupported,webworker:webworker,xmldom:_lib_external_js__WEBPACK_IMPORTED_MODULE_1__.Gb,document:_lib_external_js__WEBPACK_IMPORTED_MODULE_1__.Al,fs:documentSupported||webworker?null:nodeRequire()("fs"),url:_variables_js__WEBPACK_IMPORTED_MODULE_0__.u.url,jsonPath:function(){if(documentSupported||webworker)return _variables_js__WEBPACK_IMPORTED_MODULE_0__.u.url;if(process.env.SRE_JSON_PATH||global.SRE_JSON_PATH)return process.env.SRE_JSON_PATH||global.SRE_JSON_PATH;try{return nodeRequire().resolve("speech-rule-engine").replace(/sre\.js$/,"")+"mathmaps"}catch(t){}try{return nodeRequire().resolve(".").replace(/sre\.js$/,"")+"mathmaps"}catch(t){}return"undefined"!=typeof __dirname?__dirname+(__dirname.match(/lib?$/)?"/mathmaps":"/lib/mathmaps"):process.cwd()+"/lib/mathmaps"}(),xpath:_lib_external_js__WEBPACK_IMPORTED_MODULE_1__.Oe}},159:(t,e,i)=>{"use strict";i=i(870).freeze;e.XML_ENTITIES=i({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),e.HTML_ENTITIES=i({Aacute:"Ã",aacute:"Ã¡",Abreve:"Ä‚",abreve:"Äƒ",ac:"âˆ¾",acd:"âˆ¿",acE:"âˆ¾Ì³",Acirc:"Ã‚",acirc:"Ã¢",acute:"Â´",Acy:"Ğ",acy:"Ğ°",AElig:"Ã†",aelig:"Ã¦",af:"â¡",Afr:"ğ”„",afr:"ğ”",Agrave:"Ã€",agrave:"Ã ",alefsym:"â„µ",aleph:"â„µ",Alpha:"Î‘",alpha:"Î±",Amacr:"Ä€",amacr:"Ä",amalg:"â¨¿",AMP:"&",amp:"&",And:"â©“",and:"âˆ§",andand:"â©•",andd:"â©œ",andslope:"â©˜",andv:"â©š",ang:"âˆ ",ange:"â¦¤",angle:"âˆ ",angmsd:"âˆ¡",angmsdaa:"â¦¨",angmsdab:"â¦©",angmsdac:"â¦ª",angmsdad:"â¦«",angmsdae:"â¦¬",angmsdaf:"â¦­",angmsdag:"â¦®",angmsdah:"â¦¯",angrt:"âˆŸ",angrtvb:"âŠ¾",angrtvbd:"â¦",angsph:"âˆ¢",angst:"Ã…",angzarr:"â¼",Aogon:"Ä„",aogon:"Ä…",Aopf:"ğ”¸",aopf:"ğ•’",ap:"â‰ˆ",apacir:"â©¯",apE:"â©°",ape:"â‰Š",apid:"â‰‹",apos:"'",ApplyFunction:"â¡",approx:"â‰ˆ",approxeq:"â‰Š",Aring:"Ã…",aring:"Ã¥",Ascr:"ğ’œ",ascr:"ğ’¶",Assign:"â‰”",ast:"*",asymp:"â‰ˆ",asympeq:"â‰",Atilde:"Ãƒ",atilde:"Ã£",Auml:"Ã„",auml:"Ã¤",awconint:"âˆ³",awint:"â¨‘",backcong:"â‰Œ",backepsilon:"Ï¶",backprime:"â€µ",backsim:"âˆ½",backsimeq:"â‹",Backslash:"âˆ–",Barv:"â«§",barvee:"âŠ½",Barwed:"âŒ†",barwed:"âŒ…",barwedge:"âŒ…",bbrk:"âµ",bbrktbrk:"â¶",bcong:"â‰Œ",Bcy:"Ğ‘",bcy:"Ğ±",bdquo:"â€",becaus:"âˆµ",Because:"âˆµ",because:"âˆµ",bemptyv:"â¦°",bepsi:"Ï¶",bernou:"â„¬",Bernoullis:"â„¬",Beta:"Î’",beta:"Î²",beth:"â„¶",between:"â‰¬",Bfr:"ğ”…",bfr:"ğ”Ÿ",bigcap:"â‹‚",bigcirc:"â—¯",bigcup:"â‹ƒ",bigodot:"â¨€",bigoplus:"â¨",bigotimes:"â¨‚",bigsqcup:"â¨†",bigstar:"â˜…",bigtriangledown:"â–½",bigtriangleup:"â–³",biguplus:"â¨„",bigvee:"â‹",bigwedge:"â‹€",bkarow:"â¤",blacklozenge:"â§«",blacksquare:"â–ª",blacktriangle:"â–´",blacktriangledown:"â–¾",blacktriangleleft:"â—‚",blacktriangleright:"â–¸",blank:"â£",blk12:"â–’",blk14:"â–‘",blk34:"â–“",block:"â–ˆ",bne:"=âƒ¥",bnequiv:"â‰¡âƒ¥",bNot:"â«­",bnot:"âŒ",Bopf:"ğ”¹",bopf:"ğ•“",bot:"âŠ¥",bottom:"âŠ¥",bowtie:"â‹ˆ",boxbox:"â§‰",boxDL:"â•—",boxDl:"â•–",boxdL:"â••",boxdl:"â”",boxDR:"â•”",boxDr:"â•“",boxdR:"â•’",boxdr:"â”Œ",boxH:"â•",boxh:"â”€",boxHD:"â•¦",boxHd:"â•¤",boxhD:"â•¥",boxhd:"â”¬",boxHU:"â•©",boxHu:"â•§",boxhU:"â•¨",boxhu:"â”´",boxminus:"âŠŸ",boxplus:"âŠ",boxtimes:"âŠ ",boxUL:"â•",boxUl:"â•œ",boxuL:"â•›",boxul:"â”˜",boxUR:"â•š",boxUr:"â•™",boxuR:"â•˜",boxur:"â””",boxV:"â•‘",boxv:"â”‚",boxVH:"â•¬",boxVh:"â•«",boxvH:"â•ª",boxvh:"â”¼",boxVL:"â•£",boxVl:"â•¢",boxvL:"â•¡",boxvl:"â”¤",boxVR:"â• ",boxVr:"â•Ÿ",boxvR:"â•",boxvr:"â”œ",bprime:"â€µ",Breve:"Ë˜",breve:"Ë˜",brvbar:"Â¦",Bscr:"â„¬",bscr:"ğ’·",bsemi:"â",bsim:"âˆ½",bsime:"â‹",bsol:"\\",bsolb:"â§…",bsolhsub:"âŸˆ",bull:"â€¢",bullet:"â€¢",bump:"â‰",bumpE:"âª®",bumpe:"â‰",Bumpeq:"â‰",bumpeq:"â‰",Cacute:"Ä†",cacute:"Ä‡",Cap:"â‹’",cap:"âˆ©",capand:"â©„",capbrcup:"â©‰",capcap:"â©‹",capcup:"â©‡",capdot:"â©€",CapitalDifferentialD:"â……",caps:"âˆ©ï¸€",caret:"â",caron:"Ë‡",Cayleys:"â„­",ccaps:"â©",Ccaron:"ÄŒ",ccaron:"Ä",Ccedil:"Ã‡",ccedil:"Ã§",Ccirc:"Äˆ",ccirc:"Ä‰",Cconint:"âˆ°",ccups:"â©Œ",ccupssm:"â©",Cdot:"ÄŠ",cdot:"Ä‹",cedil:"Â¸",Cedilla:"Â¸",cemptyv:"â¦²",cent:"Â¢",CenterDot:"Â·",centerdot:"Â·",Cfr:"â„­",cfr:"ğ” ",CHcy:"Ğ§",chcy:"Ñ‡",check:"âœ“",checkmark:"âœ“",Chi:"Î§",chi:"Ï‡",cir:"â—‹",circ:"Ë†",circeq:"â‰—",circlearrowleft:"â†º",circlearrowright:"â†»",circledast:"âŠ›",circledcirc:"âŠš",circleddash:"âŠ",CircleDot:"âŠ™",circledR:"Â®",circledS:"â“ˆ",CircleMinus:"âŠ–",CirclePlus:"âŠ•",CircleTimes:"âŠ—",cirE:"â§ƒ",cire:"â‰—",cirfnint:"â¨",cirmid:"â«¯",cirscir:"â§‚",ClockwiseContourIntegral:"âˆ²",CloseCurlyDoubleQuote:"â€",CloseCurlyQuote:"â€™",clubs:"â™£",clubsuit:"â™£",Colon:"âˆ·",colon:":",Colone:"â©´",colone:"â‰”",coloneq:"â‰”",comma:",",commat:"@",comp:"âˆ",compfn:"âˆ˜",complement:"âˆ",complexes:"â„‚",cong:"â‰…",congdot:"â©­",Congruent:"â‰¡",Conint:"âˆ¯",conint:"âˆ®",ContourIntegral:"âˆ®",Copf:"â„‚",copf:"ğ•”",coprod:"âˆ",Coproduct:"âˆ",COPY:"Â©",copy:"Â©",copysr:"â„—",CounterClockwiseContourIntegral:"âˆ³",crarr:"â†µ",Cross:"â¨¯",cross:"âœ—",Cscr:"ğ’",cscr:"ğ’¸",csub:"â«",csube:"â«‘",csup:"â«",csupe:"â«’",ctdot:"â‹¯",cudarrl:"â¤¸",cudarrr:"â¤µ",cuepr:"â‹",cuesc:"â‹Ÿ",cularr:"â†¶",cularrp:"â¤½",Cup:"â‹“",cup:"âˆª",cupbrcap:"â©ˆ",CupCap:"â‰",cupcap:"â©†",cupcup:"â©Š",cupdot:"âŠ",cupor:"â©…",cups:"âˆªï¸€",curarr:"â†·",curarrm:"â¤¼",curlyeqprec:"â‹",curlyeqsucc:"â‹Ÿ",curlyvee:"â‹",curlywedge:"â‹",curren:"Â¤",curvearrowleft:"â†¶",curvearrowright:"â†·",cuvee:"â‹",cuwed:"â‹",cwconint:"âˆ²",cwint:"âˆ±",cylcty:"âŒ­",Dagger:"â€¡",dagger:"â€ ",daleth:"â„¸",Darr:"â†¡",dArr:"â‡“",darr:"â†“",dash:"â€",Dashv:"â«¤",dashv:"âŠ£",dbkarow:"â¤",dblac:"Ë",Dcaron:"Ä",dcaron:"Ä",Dcy:"Ğ”",dcy:"Ğ´",DD:"â……",dd:"â…†",ddagger:"â€¡",ddarr:"â‡Š",DDotrahd:"â¤‘",ddotseq:"â©·",deg:"Â°",Del:"âˆ‡",Delta:"Î”",delta:"Î´",demptyv:"â¦±",dfisht:"â¥¿",Dfr:"ğ”‡",dfr:"ğ”¡",dHar:"â¥¥",dharl:"â‡ƒ",dharr:"â‡‚",DiacriticalAcute:"Â´",DiacriticalDot:"Ë™",DiacriticalDoubleAcute:"Ë",DiacriticalGrave:"`",DiacriticalTilde:"Ëœ",diam:"â‹„",Diamond:"â‹„",diamond:"â‹„",diamondsuit:"â™¦",diams:"â™¦",die:"Â¨",DifferentialD:"â…†",digamma:"Ï",disin:"â‹²",div:"Ã·",divide:"Ã·",divideontimes:"â‹‡",divonx:"â‹‡",DJcy:"Ğ‚",djcy:"Ñ’",dlcorn:"âŒ",dlcrop:"âŒ",dollar:"$",Dopf:"ğ”»",dopf:"ğ••",Dot:"Â¨",dot:"Ë™",DotDot:"âƒœ",doteq:"â‰",doteqdot:"â‰‘",DotEqual:"â‰",dotminus:"âˆ¸",dotplus:"âˆ”",dotsquare:"âŠ¡",doublebarwedge:"âŒ†",DoubleContourIntegral:"âˆ¯",DoubleDot:"Â¨",DoubleDownArrow:"â‡“",DoubleLeftArrow:"â‡",DoubleLeftRightArrow:"â‡”",DoubleLeftTee:"â«¤",DoubleLongLeftArrow:"âŸ¸",DoubleLongLeftRightArrow:"âŸº",DoubleLongRightArrow:"âŸ¹",DoubleRightArrow:"â‡’",DoubleRightTee:"âŠ¨",DoubleUpArrow:"â‡‘",DoubleUpDownArrow:"â‡•",DoubleVerticalBar:"âˆ¥",DownArrow:"â†“",Downarrow:"â‡“",downarrow:"â†“",DownArrowBar:"â¤“",DownArrowUpArrow:"â‡µ",DownBreve:"Ì‘",downdownarrows:"â‡Š",downharpoonleft:"â‡ƒ",downharpoonright:"â‡‚",DownLeftRightVector:"â¥",DownLeftTeeVector:"â¥",DownLeftVector:"â†½",DownLeftVectorBar:"â¥–",DownRightTeeVector:"â¥Ÿ",DownRightVector:"â‡",DownRightVectorBar:"â¥—",DownTee:"âŠ¤",DownTeeArrow:"â†§",drbkarow:"â¤",drcorn:"âŒŸ",drcrop:"âŒŒ",Dscr:"ğ’Ÿ",dscr:"ğ’¹",DScy:"Ğ…",dscy:"Ñ•",dsol:"â§¶",Dstrok:"Ä",dstrok:"Ä‘",dtdot:"â‹±",dtri:"â–¿",dtrif:"â–¾",duarr:"â‡µ",duhar:"â¥¯",dwangle:"â¦¦",DZcy:"Ğ",dzcy:"ÑŸ",dzigrarr:"âŸ¿",Eacute:"Ã‰",eacute:"Ã©",easter:"â©®",Ecaron:"Äš",ecaron:"Ä›",ecir:"â‰–",Ecirc:"ÃŠ",ecirc:"Ãª",ecolon:"â‰•",Ecy:"Ğ­",ecy:"Ñ",eDDot:"â©·",Edot:"Ä–",eDot:"â‰‘",edot:"Ä—",ee:"â…‡",efDot:"â‰’",Efr:"ğ”ˆ",efr:"ğ”¢",eg:"âªš",Egrave:"Ãˆ",egrave:"Ã¨",egs:"âª–",egsdot:"âª˜",el:"âª™",Element:"âˆˆ",elinters:"â§",ell:"â„“",els:"âª•",elsdot:"âª—",Emacr:"Ä’",emacr:"Ä“",empty:"âˆ…",emptyset:"âˆ…",EmptySmallSquare:"â—»",emptyv:"âˆ…",EmptyVerySmallSquare:"â–«",emsp:"â€ƒ",emsp13:"â€„",emsp14:"â€…",ENG:"ÅŠ",eng:"Å‹",ensp:"â€‚",Eogon:"Ä˜",eogon:"Ä™",Eopf:"ğ”¼",eopf:"ğ•–",epar:"â‹•",eparsl:"â§£",eplus:"â©±",epsi:"Îµ",Epsilon:"Î•",epsilon:"Îµ",epsiv:"Ïµ",eqcirc:"â‰–",eqcolon:"â‰•",eqsim:"â‰‚",eqslantgtr:"âª–",eqslantless:"âª•",Equal:"â©µ",equals:"=",EqualTilde:"â‰‚",equest:"â‰Ÿ",Equilibrium:"â‡Œ",equiv:"â‰¡",equivDD:"â©¸",eqvparsl:"â§¥",erarr:"â¥±",erDot:"â‰“",Escr:"â„°",escr:"â„¯",esdot:"â‰",Esim:"â©³",esim:"â‰‚",Eta:"Î—",eta:"Î·",ETH:"Ã",eth:"Ã°",Euml:"Ã‹",euml:"Ã«",euro:"â‚¬",excl:"!",exist:"âˆƒ",Exists:"âˆƒ",expectation:"â„°",ExponentialE:"â…‡",exponentiale:"â…‡",fallingdotseq:"â‰’",Fcy:"Ğ¤",fcy:"Ñ„",female:"â™€",ffilig:"ï¬ƒ",fflig:"ï¬€",ffllig:"ï¬„",Ffr:"ğ”‰",ffr:"ğ”£",filig:"ï¬",FilledSmallSquare:"â—¼",FilledVerySmallSquare:"â–ª",fjlig:"fj",flat:"â™­",fllig:"ï¬‚",fltns:"â–±",fnof:"Æ’",Fopf:"ğ”½",fopf:"ğ•—",ForAll:"âˆ€",forall:"âˆ€",fork:"â‹”",forkv:"â«™",Fouriertrf:"â„±",fpartint:"â¨",frac12:"Â½",frac13:"â…“",frac14:"Â¼",frac15:"â…•",frac16:"â…™",frac18:"â…›",frac23:"â…”",frac25:"â…–",frac34:"Â¾",frac35:"â…—",frac38:"â…œ",frac45:"â…˜",frac56:"â…š",frac58:"â…",frac78:"â…",frasl:"â„",frown:"âŒ¢",Fscr:"â„±",fscr:"ğ’»",gacute:"Çµ",Gamma:"Î“",gamma:"Î³",Gammad:"Ïœ",gammad:"Ï",gap:"âª†",Gbreve:"Ä",gbreve:"ÄŸ",Gcedil:"Ä¢",Gcirc:"Äœ",gcirc:"Ä",Gcy:"Ğ“",gcy:"Ğ³",Gdot:"Ä ",gdot:"Ä¡",gE:"â‰§",ge:"â‰¥",gEl:"âªŒ",gel:"â‹›",geq:"â‰¥",geqq:"â‰§",geqslant:"â©¾",ges:"â©¾",gescc:"âª©",gesdot:"âª€",gesdoto:"âª‚",gesdotol:"âª„",gesl:"â‹›ï¸€",gesles:"âª”",Gfr:"ğ”Š",gfr:"ğ”¤",Gg:"â‹™",gg:"â‰«",ggg:"â‹™",gimel:"â„·",GJcy:"Ğƒ",gjcy:"Ñ“",gl:"â‰·",gla:"âª¥",glE:"âª’",glj:"âª¤",gnap:"âªŠ",gnapprox:"âªŠ",gnE:"â‰©",gne:"âªˆ",gneq:"âªˆ",gneqq:"â‰©",gnsim:"â‹§",Gopf:"ğ”¾",gopf:"ğ•˜",grave:"`",GreaterEqual:"â‰¥",GreaterEqualLess:"â‹›",GreaterFullEqual:"â‰§",GreaterGreater:"âª¢",GreaterLess:"â‰·",GreaterSlantEqual:"â©¾",GreaterTilde:"â‰³",Gscr:"ğ’¢",gscr:"â„Š",gsim:"â‰³",gsime:"âª",gsiml:"âª",Gt:"â‰«",GT:">",gt:">",gtcc:"âª§",gtcir:"â©º",gtdot:"â‹—",gtlPar:"â¦•",gtquest:"â©¼",gtrapprox:"âª†",gtrarr:"â¥¸",gtrdot:"â‹—",gtreqless:"â‹›",gtreqqless:"âªŒ",gtrless:"â‰·",gtrsim:"â‰³",gvertneqq:"â‰©ï¸€",gvnE:"â‰©ï¸€",Hacek:"Ë‡",hairsp:"â€Š",half:"Â½",hamilt:"â„‹",HARDcy:"Ğª",hardcy:"ÑŠ",hArr:"â‡”",harr:"â†”",harrcir:"â¥ˆ",harrw:"â†­",Hat:"^",hbar:"â„",Hcirc:"Ä¤",hcirc:"Ä¥",hearts:"â™¥",heartsuit:"â™¥",hellip:"â€¦",hercon:"âŠ¹",Hfr:"â„Œ",hfr:"ğ”¥",HilbertSpace:"â„‹",hksearow:"â¤¥",hkswarow:"â¤¦",hoarr:"â‡¿",homtht:"âˆ»",hookleftarrow:"â†©",hookrightarrow:"â†ª",Hopf:"â„",hopf:"ğ•™",horbar:"â€•",HorizontalLine:"â”€",Hscr:"â„‹",hscr:"ğ’½",hslash:"â„",Hstrok:"Ä¦",hstrok:"Ä§",HumpDownHump:"â‰",HumpEqual:"â‰",hybull:"âƒ",hyphen:"â€",Iacute:"Ã",iacute:"Ã­",ic:"â£",Icirc:"Ã",icirc:"Ã®",Icy:"Ğ˜",icy:"Ğ¸",Idot:"Ä°",IEcy:"Ğ•",iecy:"Ğµ",iexcl:"Â¡",iff:"â‡”",Ifr:"â„‘",ifr:"ğ”¦",Igrave:"ÃŒ",igrave:"Ã¬",ii:"â…ˆ",iiiint:"â¨Œ",iiint:"âˆ­",iinfin:"â§œ",iiota:"â„©",IJlig:"Ä²",ijlig:"Ä³",Im:"â„‘",Imacr:"Äª",imacr:"Ä«",image:"â„‘",ImaginaryI:"â…ˆ",imagline:"â„",imagpart:"â„‘",imath:"Ä±",imof:"âŠ·",imped:"Æµ",Implies:"â‡’",in:"âˆˆ",incare:"â„…",infin:"âˆ",infintie:"â§",inodot:"Ä±",Int:"âˆ¬",int:"âˆ«",intcal:"âŠº",integers:"â„¤",Integral:"âˆ«",intercal:"âŠº",Intersection:"â‹‚",intlarhk:"â¨—",intprod:"â¨¼",InvisibleComma:"â£",InvisibleTimes:"â¢",IOcy:"Ğ",iocy:"Ñ‘",Iogon:"Ä®",iogon:"Ä¯",Iopf:"ğ•€",iopf:"ğ•š",Iota:"Î™",iota:"Î¹",iprod:"â¨¼",iquest:"Â¿",Iscr:"â„",iscr:"ğ’¾",isin:"âˆˆ",isindot:"â‹µ",isinE:"â‹¹",isins:"â‹´",isinsv:"â‹³",isinv:"âˆˆ",it:"â¢",Itilde:"Ä¨",itilde:"Ä©",Iukcy:"Ğ†",iukcy:"Ñ–",Iuml:"Ã",iuml:"Ã¯",Jcirc:"Ä´",jcirc:"Äµ",Jcy:"Ğ™",jcy:"Ğ¹",Jfr:"ğ”",jfr:"ğ”§",jmath:"È·",Jopf:"ğ•",jopf:"ğ•›",Jscr:"ğ’¥",jscr:"ğ’¿",Jsercy:"Ğˆ",jsercy:"Ñ˜",Jukcy:"Ğ„",jukcy:"Ñ”",Kappa:"Îš",kappa:"Îº",kappav:"Ï°",Kcedil:"Ä¶",kcedil:"Ä·",Kcy:"Ğš",kcy:"Ğº",Kfr:"ğ”",kfr:"ğ”¨",kgreen:"Ä¸",KHcy:"Ğ¥",khcy:"Ñ…",KJcy:"ĞŒ",kjcy:"Ñœ",Kopf:"ğ•‚",kopf:"ğ•œ",Kscr:"ğ’¦",kscr:"ğ“€",lAarr:"â‡š",Lacute:"Ä¹",lacute:"Äº",laemptyv:"â¦´",lagran:"â„’",Lambda:"Î›",lambda:"Î»",Lang:"âŸª",lang:"âŸ¨",langd:"â¦‘",langle:"âŸ¨",lap:"âª…",Laplacetrf:"â„’",laquo:"Â«",Larr:"â†",lArr:"â‡",larr:"â†",larrb:"â‡¤",larrbfs:"â¤Ÿ",larrfs:"â¤",larrhk:"â†©",larrlp:"â†«",larrpl:"â¤¹",larrsim:"â¥³",larrtl:"â†¢",lat:"âª«",lAtail:"â¤›",latail:"â¤™",late:"âª­",lates:"âª­ï¸€",lBarr:"â¤",lbarr:"â¤Œ",lbbrk:"â²",lbrace:"{",lbrack:"[",lbrke:"â¦‹",lbrksld:"â¦",lbrkslu:"â¦",Lcaron:"Ä½",lcaron:"Ä¾",Lcedil:"Ä»",lcedil:"Ä¼",lceil:"âŒˆ",lcub:"{",Lcy:"Ğ›",lcy:"Ğ»",ldca:"â¤¶",ldquo:"â€œ",ldquor:"â€",ldrdhar:"â¥§",ldrushar:"â¥‹",ldsh:"â†²",lE:"â‰¦",le:"â‰¤",LeftAngleBracket:"âŸ¨",LeftArrow:"â†",Leftarrow:"â‡",leftarrow:"â†",LeftArrowBar:"â‡¤",LeftArrowRightArrow:"â‡†",leftarrowtail:"â†¢",LeftCeiling:"âŒˆ",LeftDoubleBracket:"âŸ¦",LeftDownTeeVector:"â¥¡",LeftDownVector:"â‡ƒ",LeftDownVectorBar:"â¥™",LeftFloor:"âŒŠ",leftharpoondown:"â†½",leftharpoonup:"â†¼",leftleftarrows:"â‡‡",LeftRightArrow:"â†”",Leftrightarrow:"â‡”",leftrightarrow:"â†”",leftrightarrows:"â‡†",leftrightharpoons:"â‡‹",leftrightsquigarrow:"â†­",LeftRightVector:"â¥",LeftTee:"âŠ£",LeftTeeArrow:"â†¤",LeftTeeVector:"â¥š",leftthreetimes:"â‹‹",LeftTriangle:"âŠ²",LeftTriangleBar:"â§",LeftTriangleEqual:"âŠ´",LeftUpDownVector:"â¥‘",LeftUpTeeVector:"â¥ ",LeftUpVector:"â†¿",LeftUpVectorBar:"â¥˜",LeftVector:"â†¼",LeftVectorBar:"â¥’",lEg:"âª‹",leg:"â‹š",leq:"â‰¤",leqq:"â‰¦",leqslant:"â©½",les:"â©½",lescc:"âª¨",lesdot:"â©¿",lesdoto:"âª",lesdotor:"âªƒ",lesg:"â‹šï¸€",lesges:"âª“",lessapprox:"âª…",lessdot:"â‹–",lesseqgtr:"â‹š",lesseqqgtr:"âª‹",LessEqualGreater:"â‹š",LessFullEqual:"â‰¦",LessGreater:"â‰¶",lessgtr:"â‰¶",LessLess:"âª¡",lesssim:"â‰²",LessSlantEqual:"â©½",LessTilde:"â‰²",lfisht:"â¥¼",lfloor:"âŒŠ",Lfr:"ğ”",lfr:"ğ”©",lg:"â‰¶",lgE:"âª‘",lHar:"â¥¢",lhard:"â†½",lharu:"â†¼",lharul:"â¥ª",lhblk:"â–„",LJcy:"Ğ‰",ljcy:"Ñ™",Ll:"â‹˜",ll:"â‰ª",llarr:"â‡‡",llcorner:"âŒ",Lleftarrow:"â‡š",llhard:"â¥«",lltri:"â—º",Lmidot:"Ä¿",lmidot:"Å€",lmoust:"â°",lmoustache:"â°",lnap:"âª‰",lnapprox:"âª‰",lnE:"â‰¨",lne:"âª‡",lneq:"âª‡",lneqq:"â‰¨",lnsim:"â‹¦",loang:"âŸ¬",loarr:"â‡½",lobrk:"âŸ¦",LongLeftArrow:"âŸµ",Longleftarrow:"âŸ¸",longleftarrow:"âŸµ",LongLeftRightArrow:"âŸ·",Longleftrightarrow:"âŸº",longleftrightarrow:"âŸ·",longmapsto:"âŸ¼",LongRightArrow:"âŸ¶",Longrightarrow:"âŸ¹",longrightarrow:"âŸ¶",looparrowleft:"â†«",looparrowright:"â†¬",lopar:"â¦…",Lopf:"ğ•ƒ",lopf:"ğ•",loplus:"â¨­",lotimes:"â¨´",lowast:"âˆ—",lowbar:"_",LowerLeftArrow:"â†™",LowerRightArrow:"â†˜",loz:"â—Š",lozenge:"â—Š",lozf:"â§«",lpar:"(",lparlt:"â¦“",lrarr:"â‡†",lrcorner:"âŒŸ",lrhar:"â‡‹",lrhard:"â¥­",lrm:"â€",lrtri:"âŠ¿",lsaquo:"â€¹",Lscr:"â„’",lscr:"ğ“",Lsh:"â†°",lsh:"â†°",lsim:"â‰²",lsime:"âª",lsimg:"âª",lsqb:"[",lsquo:"â€˜",lsquor:"â€š",Lstrok:"Å",lstrok:"Å‚",Lt:"â‰ª",LT:"<",lt:"<",ltcc:"âª¦",ltcir:"â©¹",ltdot:"â‹–",lthree:"â‹‹",ltimes:"â‹‰",ltlarr:"â¥¶",ltquest:"â©»",ltri:"â—ƒ",ltrie:"âŠ´",ltrif:"â—‚",ltrPar:"â¦–",lurdshar:"â¥Š",luruhar:"â¥¦",lvertneqq:"â‰¨ï¸€",lvnE:"â‰¨ï¸€",macr:"Â¯",male:"â™‚",malt:"âœ ",maltese:"âœ ",Map:"â¤…",map:"â†¦",mapsto:"â†¦",mapstodown:"â†§",mapstoleft:"â†¤",mapstoup:"â†¥",marker:"â–®",mcomma:"â¨©",Mcy:"Ğœ",mcy:"Ğ¼",mdash:"â€”",mDDot:"âˆº",measuredangle:"âˆ¡",MediumSpace:"âŸ",Mellintrf:"â„³",Mfr:"ğ”",mfr:"ğ”ª",mho:"â„§",micro:"Âµ",mid:"âˆ£",midast:"*",midcir:"â«°",middot:"Â·",minus:"âˆ’",minusb:"âŠŸ",minusd:"âˆ¸",minusdu:"â¨ª",MinusPlus:"âˆ“",mlcp:"â«›",mldr:"â€¦",mnplus:"âˆ“",models:"âŠ§",Mopf:"ğ•„",mopf:"ğ•",mp:"âˆ“",Mscr:"â„³",mscr:"ğ“‚",mstpos:"âˆ¾",Mu:"Îœ",mu:"Î¼",multimap:"âŠ¸",mumap:"âŠ¸",nabla:"âˆ‡",Nacute:"Åƒ",nacute:"Å„",nang:"âˆ âƒ’",nap:"â‰‰",napE:"â©°Ì¸",napid:"â‰‹Ì¸",napos:"Å‰",napprox:"â‰‰",natur:"â™®",natural:"â™®",naturals:"â„•",nbsp:"Â ",nbump:"â‰Ì¸",nbumpe:"â‰Ì¸",ncap:"â©ƒ",Ncaron:"Å‡",ncaron:"Åˆ",Ncedil:"Å…",ncedil:"Å†",ncong:"â‰‡",ncongdot:"â©­Ì¸",ncup:"â©‚",Ncy:"Ğ",ncy:"Ğ½",ndash:"â€“",ne:"â‰ ",nearhk:"â¤¤",neArr:"â‡—",nearr:"â†—",nearrow:"â†—",nedot:"â‰Ì¸",NegativeMediumSpace:"â€‹",NegativeThickSpace:"â€‹",NegativeThinSpace:"â€‹",NegativeVeryThinSpace:"â€‹",nequiv:"â‰¢",nesear:"â¤¨",nesim:"â‰‚Ì¸",NestedGreaterGreater:"â‰«",NestedLessLess:"â‰ª",NewLine:"\n",nexist:"âˆ„",nexists:"âˆ„",Nfr:"ğ”‘",nfr:"ğ”«",ngE:"â‰§Ì¸",nge:"â‰±",ngeq:"â‰±",ngeqq:"â‰§Ì¸",ngeqslant:"â©¾Ì¸",nges:"â©¾Ì¸",nGg:"â‹™Ì¸",ngsim:"â‰µ",nGt:"â‰«âƒ’",ngt:"â‰¯",ngtr:"â‰¯",nGtv:"â‰«Ì¸",nhArr:"â‡",nharr:"â†®",nhpar:"â«²",ni:"âˆ‹",nis:"â‹¼",nisd:"â‹º",niv:"âˆ‹",NJcy:"ĞŠ",njcy:"Ñš",nlArr:"â‡",nlarr:"â†š",nldr:"â€¥",nlE:"â‰¦Ì¸",nle:"â‰°",nLeftarrow:"â‡",nleftarrow:"â†š",nLeftrightarrow:"â‡",nleftrightarrow:"â†®",nleq:"â‰°",nleqq:"â‰¦Ì¸",nleqslant:"â©½Ì¸",nles:"â©½Ì¸",nless:"â‰®",nLl:"â‹˜Ì¸",nlsim:"â‰´",nLt:"â‰ªâƒ’",nlt:"â‰®",nltri:"â‹ª",nltrie:"â‹¬",nLtv:"â‰ªÌ¸",nmid:"âˆ¤",NoBreak:"â ",NonBreakingSpace:"Â ",Nopf:"â„•",nopf:"ğ•Ÿ",Not:"â«¬",not:"Â¬",NotCongruent:"â‰¢",NotCupCap:"â‰­",NotDoubleVerticalBar:"âˆ¦",NotElement:"âˆ‰",NotEqual:"â‰ ",NotEqualTilde:"â‰‚Ì¸",NotExists:"âˆ„",NotGreater:"â‰¯",NotGreaterEqual:"â‰±",NotGreaterFullEqual:"â‰§Ì¸",NotGreaterGreater:"â‰«Ì¸",NotGreaterLess:"â‰¹",NotGreaterSlantEqual:"â©¾Ì¸",NotGreaterTilde:"â‰µ",NotHumpDownHump:"â‰Ì¸",NotHumpEqual:"â‰Ì¸",notin:"âˆ‰",notindot:"â‹µÌ¸",notinE:"â‹¹Ì¸",notinva:"âˆ‰",notinvb:"â‹·",notinvc:"â‹¶",NotLeftTriangle:"â‹ª",NotLeftTriangleBar:"â§Ì¸",NotLeftTriangleEqual:"â‹¬",NotLess:"â‰®",NotLessEqual:"â‰°",NotLessGreater:"â‰¸",NotLessLess:"â‰ªÌ¸",NotLessSlantEqual:"â©½Ì¸",NotLessTilde:"â‰´",NotNestedGreaterGreater:"âª¢Ì¸",NotNestedLessLess:"âª¡Ì¸",notni:"âˆŒ",notniva:"âˆŒ",notnivb:"â‹¾",notnivc:"â‹½",NotPrecedes:"âŠ€",NotPrecedesEqual:"âª¯Ì¸",NotPrecedesSlantEqual:"â‹ ",NotReverseElement:"âˆŒ",NotRightTriangle:"â‹«",NotRightTriangleBar:"â§Ì¸",NotRightTriangleEqual:"â‹­",NotSquareSubset:"âŠÌ¸",NotSquareSubsetEqual:"â‹¢",NotSquareSuperset:"âŠÌ¸",NotSquareSupersetEqual:"â‹£",NotSubset:"âŠ‚âƒ’",NotSubsetEqual:"âŠˆ",NotSucceeds:"âŠ",NotSucceedsEqual:"âª°Ì¸",NotSucceedsSlantEqual:"â‹¡",NotSucceedsTilde:"â‰¿Ì¸",NotSuperset:"âŠƒâƒ’",NotSupersetEqual:"âŠ‰",NotTilde:"â‰",NotTildeEqual:"â‰„",NotTildeFullEqual:"â‰‡",NotTildeTilde:"â‰‰",NotVerticalBar:"âˆ¤",npar:"âˆ¦",nparallel:"âˆ¦",nparsl:"â«½âƒ¥",npart:"âˆ‚Ì¸",npolint:"â¨”",npr:"âŠ€",nprcue:"â‹ ",npre:"âª¯Ì¸",nprec:"âŠ€",npreceq:"âª¯Ì¸",nrArr:"â‡",nrarr:"â†›",nrarrc:"â¤³Ì¸",nrarrw:"â†Ì¸",nRightarrow:"â‡",nrightarrow:"â†›",nrtri:"â‹«",nrtrie:"â‹­",nsc:"âŠ",nsccue:"â‹¡",nsce:"âª°Ì¸",Nscr:"ğ’©",nscr:"ğ“ƒ",nshortmid:"âˆ¤",nshortparallel:"âˆ¦",nsim:"â‰",nsime:"â‰„",nsimeq:"â‰„",nsmid:"âˆ¤",nspar:"âˆ¦",nsqsube:"â‹¢",nsqsupe:"â‹£",nsub:"âŠ„",nsubE:"â«…Ì¸",nsube:"âŠˆ",nsubset:"âŠ‚âƒ’",nsubseteq:"âŠˆ",nsubseteqq:"â«…Ì¸",nsucc:"âŠ",nsucceq:"âª°Ì¸",nsup:"âŠ…",nsupE:"â«†Ì¸",nsupe:"âŠ‰",nsupset:"âŠƒâƒ’",nsupseteq:"âŠ‰",nsupseteqq:"â«†Ì¸",ntgl:"â‰¹",Ntilde:"Ã‘",ntilde:"Ã±",ntlg:"â‰¸",ntriangleleft:"â‹ª",ntrianglelefteq:"â‹¬",ntriangleright:"â‹«",ntrianglerighteq:"â‹­",Nu:"Î",nu:"Î½",num:"#",numero:"â„–",numsp:"â€‡",nvap:"â‰âƒ’",nVDash:"âŠ¯",nVdash:"âŠ®",nvDash:"âŠ­",nvdash:"âŠ¬",nvge:"â‰¥âƒ’",nvgt:">âƒ’",nvHarr:"â¤„",nvinfin:"â§",nvlArr:"â¤‚",nvle:"â‰¤âƒ’",nvlt:"<âƒ’",nvltrie:"âŠ´âƒ’",nvrArr:"â¤ƒ",nvrtrie:"âŠµâƒ’",nvsim:"âˆ¼âƒ’",nwarhk:"â¤£",nwArr:"â‡–",nwarr:"â†–",nwarrow:"â†–",nwnear:"â¤§",Oacute:"Ã“",oacute:"Ã³",oast:"âŠ›",ocir:"âŠš",Ocirc:"Ã”",ocirc:"Ã´",Ocy:"Ğ",ocy:"Ğ¾",odash:"âŠ",Odblac:"Å",odblac:"Å‘",odiv:"â¨¸",odot:"âŠ™",odsold:"â¦¼",OElig:"Å’",oelig:"Å“",ofcir:"â¦¿",Ofr:"ğ”’",ofr:"ğ”¬",ogon:"Ë›",Ograve:"Ã’",ograve:"Ã²",ogt:"â§",ohbar:"â¦µ",ohm:"Î©",oint:"âˆ®",olarr:"â†º",olcir:"â¦¾",olcross:"â¦»",oline:"â€¾",olt:"â§€",Omacr:"ÅŒ",omacr:"Å",Omega:"Î©",omega:"Ï‰",Omicron:"ÎŸ",omicron:"Î¿",omid:"â¦¶",ominus:"âŠ–",Oopf:"ğ•†",oopf:"ğ• ",opar:"â¦·",OpenCurlyDoubleQuote:"â€œ",OpenCurlyQuote:"â€˜",operp:"â¦¹",oplus:"âŠ•",Or:"â©”",or:"âˆ¨",orarr:"â†»",ord:"â©",order:"â„´",orderof:"â„´",ordf:"Âª",ordm:"Âº",origof:"âŠ¶",oror:"â©–",orslope:"â©—",orv:"â©›",oS:"â“ˆ",Oscr:"ğ’ª",oscr:"â„´",Oslash:"Ã˜",oslash:"Ã¸",osol:"âŠ˜",Otilde:"Ã•",otilde:"Ãµ",Otimes:"â¨·",otimes:"âŠ—",otimesas:"â¨¶",Ouml:"Ã–",ouml:"Ã¶",ovbar:"âŒ½",OverBar:"â€¾",OverBrace:"â",OverBracket:"â´",OverParenthesis:"âœ",par:"âˆ¥",para:"Â¶",parallel:"âˆ¥",parsim:"â«³",parsl:"â«½",part:"âˆ‚",PartialD:"âˆ‚",Pcy:"ĞŸ",pcy:"Ğ¿",percnt:"%",period:".",permil:"â€°",perp:"âŠ¥",pertenk:"â€±",Pfr:"ğ”“",pfr:"ğ”­",Phi:"Î¦",phi:"Ï†",phiv:"Ï•",phmmat:"â„³",phone:"â˜",Pi:"Î ",pi:"Ï€",pitchfork:"â‹”",piv:"Ï–",planck:"â„",planckh:"â„",plankv:"â„",plus:"+",plusacir:"â¨£",plusb:"âŠ",pluscir:"â¨¢",plusdo:"âˆ”",plusdu:"â¨¥",pluse:"â©²",PlusMinus:"Â±",plusmn:"Â±",plussim:"â¨¦",plustwo:"â¨§",pm:"Â±",Poincareplane:"â„Œ",pointint:"â¨•",Popf:"â„™",popf:"ğ•¡",pound:"Â£",Pr:"âª»",pr:"â‰º",prap:"âª·",prcue:"â‰¼",prE:"âª³",pre:"âª¯",prec:"â‰º",precapprox:"âª·",preccurlyeq:"â‰¼",Precedes:"â‰º",PrecedesEqual:"âª¯",PrecedesSlantEqual:"â‰¼",PrecedesTilde:"â‰¾",preceq:"âª¯",precnapprox:"âª¹",precneqq:"âªµ",precnsim:"â‹¨",precsim:"â‰¾",Prime:"â€³",prime:"â€²",primes:"â„™",prnap:"âª¹",prnE:"âªµ",prnsim:"â‹¨",prod:"âˆ",Product:"âˆ",profalar:"âŒ®",profline:"âŒ’",profsurf:"âŒ“",prop:"âˆ",Proportion:"âˆ·",Proportional:"âˆ",propto:"âˆ",prsim:"â‰¾",prurel:"âŠ°",Pscr:"ğ’«",pscr:"ğ“…",Psi:"Î¨",psi:"Ïˆ",puncsp:"â€ˆ",Qfr:"ğ””",qfr:"ğ”®",qint:"â¨Œ",Qopf:"â„š",qopf:"ğ•¢",qprime:"â—",Qscr:"ğ’¬",qscr:"ğ“†",quaternions:"â„",quatint:"â¨–",quest:"?",questeq:"â‰Ÿ",QUOT:'"',quot:'"',rAarr:"â‡›",race:"âˆ½Ì±",Racute:"Å”",racute:"Å•",radic:"âˆš",raemptyv:"â¦³",Rang:"âŸ«",rang:"âŸ©",rangd:"â¦’",range:"â¦¥",rangle:"âŸ©",raquo:"Â»",Rarr:"â† ",rArr:"â‡’",rarr:"â†’",rarrap:"â¥µ",rarrb:"â‡¥",rarrbfs:"â¤ ",rarrc:"â¤³",rarrfs:"â¤",rarrhk:"â†ª",rarrlp:"â†¬",rarrpl:"â¥…",rarrsim:"â¥´",Rarrtl:"â¤–",rarrtl:"â†£",rarrw:"â†",rAtail:"â¤œ",ratail:"â¤š",ratio:"âˆ¶",rationals:"â„š",RBarr:"â¤",rBarr:"â¤",rbarr:"â¤",rbbrk:"â³",rbrace:"}",rbrack:"]",rbrke:"â¦Œ",rbrksld:"â¦",rbrkslu:"â¦",Rcaron:"Å˜",rcaron:"Å™",Rcedil:"Å–",rcedil:"Å—",rceil:"âŒ‰",rcub:"}",Rcy:"Ğ ",rcy:"Ñ€",rdca:"â¤·",rdldhar:"â¥©",rdquo:"â€",rdquor:"â€",rdsh:"â†³",Re:"â„œ",real:"â„œ",realine:"â„›",realpart:"â„œ",reals:"â„",rect:"â–­",REG:"Â®",reg:"Â®",ReverseElement:"âˆ‹",ReverseEquilibrium:"â‡‹",ReverseUpEquilibrium:"â¥¯",rfisht:"â¥½",rfloor:"âŒ‹",Rfr:"â„œ",rfr:"ğ”¯",rHar:"â¥¤",rhard:"â‡",rharu:"â‡€",rharul:"â¥¬",Rho:"Î¡",rho:"Ï",rhov:"Ï±",RightAngleBracket:"âŸ©",RightArrow:"â†’",Rightarrow:"â‡’",rightarrow:"â†’",RightArrowBar:"â‡¥",RightArrowLeftArrow:"â‡„",rightarrowtail:"â†£",RightCeiling:"âŒ‰",RightDoubleBracket:"âŸ§",RightDownTeeVector:"â¥",RightDownVector:"â‡‚",RightDownVectorBar:"â¥•",RightFloor:"âŒ‹",rightharpoondown:"â‡",rightharpoonup:"â‡€",rightleftarrows:"â‡„",rightleftharpoons:"â‡Œ",rightrightarrows:"â‡‰",rightsquigarrow:"â†",RightTee:"âŠ¢",RightTeeArrow:"â†¦",RightTeeVector:"â¥›",rightthreetimes:"â‹Œ",RightTriangle:"âŠ³",RightTriangleBar:"â§",RightTriangleEqual:"âŠµ",RightUpDownVector:"â¥",RightUpTeeVector:"â¥œ",RightUpVector:"â†¾",RightUpVectorBar:"â¥”",RightVector:"â‡€",RightVectorBar:"â¥“",ring:"Ëš",risingdotseq:"â‰“",rlarr:"â‡„",rlhar:"â‡Œ",rlm:"â€",rmoust:"â±",rmoustache:"â±",rnmid:"â«®",roang:"âŸ­",roarr:"â‡¾",robrk:"âŸ§",ropar:"â¦†",Ropf:"â„",ropf:"ğ•£",roplus:"â¨®",rotimes:"â¨µ",RoundImplies:"â¥°",rpar:")",rpargt:"â¦”",rppolint:"â¨’",rrarr:"â‡‰",Rrightarrow:"â‡›",rsaquo:"â€º",Rscr:"â„›",rscr:"ğ“‡",Rsh:"â†±",rsh:"â†±",rsqb:"]",rsquo:"â€™",rsquor:"â€™",rthree:"â‹Œ",rtimes:"â‹Š",rtri:"â–¹",rtrie:"âŠµ",rtrif:"â–¸",rtriltri:"â§",RuleDelayed:"â§´",ruluhar:"â¥¨",rx:"â„",Sacute:"Åš",sacute:"Å›",sbquo:"â€š",Sc:"âª¼",sc:"â‰»",scap:"âª¸",Scaron:"Å ",scaron:"Å¡",sccue:"â‰½",scE:"âª´",sce:"âª°",Scedil:"Å",scedil:"ÅŸ",Scirc:"Åœ",scirc:"Å",scnap:"âªº",scnE:"âª¶",scnsim:"â‹©",scpolint:"â¨“",scsim:"â‰¿",Scy:"Ğ¡",scy:"Ñ",sdot:"â‹…",sdotb:"âŠ¡",sdote:"â©¦",searhk:"â¤¥",seArr:"â‡˜",searr:"â†˜",searrow:"â†˜",sect:"Â§",semi:";",seswar:"â¤©",setminus:"âˆ–",setmn:"âˆ–",sext:"âœ¶",Sfr:"ğ”–",sfr:"ğ”°",sfrown:"âŒ¢",sharp:"â™¯",SHCHcy:"Ğ©",shchcy:"Ñ‰",SHcy:"Ğ¨",shcy:"Ñˆ",ShortDownArrow:"â†“",ShortLeftArrow:"â†",shortmid:"âˆ£",shortparallel:"âˆ¥",ShortRightArrow:"â†’",ShortUpArrow:"â†‘",shy:"Â­",Sigma:"Î£",sigma:"Ïƒ",sigmaf:"Ï‚",sigmav:"Ï‚",sim:"âˆ¼",simdot:"â©ª",sime:"â‰ƒ",simeq:"â‰ƒ",simg:"âª",simgE:"âª ",siml:"âª",simlE:"âªŸ",simne:"â‰†",simplus:"â¨¤",simrarr:"â¥²",slarr:"â†",SmallCircle:"âˆ˜",smallsetminus:"âˆ–",smashp:"â¨³",smeparsl:"â§¤",smid:"âˆ£",smile:"âŒ£",smt:"âªª",smte:"âª¬",smtes:"âª¬ï¸€",SOFTcy:"Ğ¬",softcy:"ÑŒ",sol:"/",solb:"â§„",solbar:"âŒ¿",Sopf:"ğ•Š",sopf:"ğ•¤",spades:"â™ ",spadesuit:"â™ ",spar:"âˆ¥",sqcap:"âŠ“",sqcaps:"âŠ“ï¸€",sqcup:"âŠ”",sqcups:"âŠ”ï¸€",Sqrt:"âˆš",sqsub:"âŠ",sqsube:"âŠ‘",sqsubset:"âŠ",sqsubseteq:"âŠ‘",sqsup:"âŠ",sqsupe:"âŠ’",sqsupset:"âŠ",sqsupseteq:"âŠ’",squ:"â–¡",Square:"â–¡",square:"â–¡",SquareIntersection:"âŠ“",SquareSubset:"âŠ",SquareSubsetEqual:"âŠ‘",SquareSuperset:"âŠ",SquareSupersetEqual:"âŠ’",SquareUnion:"âŠ”",squarf:"â–ª",squf:"â–ª",srarr:"â†’",Sscr:"ğ’®",sscr:"ğ“ˆ",ssetmn:"âˆ–",ssmile:"âŒ£",sstarf:"â‹†",Star:"â‹†",star:"â˜†",starf:"â˜…",straightepsilon:"Ïµ",straightphi:"Ï•",strns:"Â¯",Sub:"â‹",sub:"âŠ‚",subdot:"âª½",subE:"â«…",sube:"âŠ†",subedot:"â«ƒ",submult:"â«",subnE:"â«‹",subne:"âŠŠ",subplus:"âª¿",subrarr:"â¥¹",Subset:"â‹",subset:"âŠ‚",subseteq:"âŠ†",subseteqq:"â«…",SubsetEqual:"âŠ†",subsetneq:"âŠŠ",subsetneqq:"â«‹",subsim:"â«‡",subsub:"â«•",subsup:"â«“",succ:"â‰»",succapprox:"âª¸",succcurlyeq:"â‰½",Succeeds:"â‰»",SucceedsEqual:"âª°",SucceedsSlantEqual:"â‰½",SucceedsTilde:"â‰¿",succeq:"âª°",succnapprox:"âªº",succneqq:"âª¶",succnsim:"â‹©",succsim:"â‰¿",SuchThat:"âˆ‹",Sum:"âˆ‘",sum:"âˆ‘",sung:"â™ª",Sup:"â‹‘",sup:"âŠƒ",sup1:"Â¹",sup2:"Â²",sup3:"Â³",supdot:"âª¾",supdsub:"â«˜",supE:"â«†",supe:"âŠ‡",supedot:"â«„",Superset:"âŠƒ",SupersetEqual:"âŠ‡",suphsol:"âŸ‰",suphsub:"â«—",suplarr:"â¥»",supmult:"â«‚",supnE:"â«Œ",supne:"âŠ‹",supplus:"â«€",Supset:"â‹‘",supset:"âŠƒ",supseteq:"âŠ‡",supseteqq:"â«†",supsetneq:"âŠ‹",supsetneqq:"â«Œ",supsim:"â«ˆ",supsub:"â«”",supsup:"â«–",swarhk:"â¤¦",swArr:"â‡™",swarr:"â†™",swarrow:"â†™",swnwar:"â¤ª",szlig:"ÃŸ",Tab:"\t",target:"âŒ–",Tau:"Î¤",tau:"Ï„",tbrk:"â´",Tcaron:"Å¤",tcaron:"Å¥",Tcedil:"Å¢",tcedil:"Å£",Tcy:"Ğ¢",tcy:"Ñ‚",tdot:"âƒ›",telrec:"âŒ•",Tfr:"ğ”—",tfr:"ğ”±",there4:"âˆ´",Therefore:"âˆ´",therefore:"âˆ´",Theta:"Î˜",theta:"Î¸",thetasym:"Ï‘",thetav:"Ï‘",thickapprox:"â‰ˆ",thicksim:"âˆ¼",ThickSpace:"âŸâ€Š",thinsp:"â€‰",ThinSpace:"â€‰",thkap:"â‰ˆ",thksim:"âˆ¼",THORN:"Ã",thorn:"Ã¾",Tilde:"âˆ¼",tilde:"Ëœ",TildeEqual:"â‰ƒ",TildeFullEqual:"â‰…",TildeTilde:"â‰ˆ",times:"Ã—",timesb:"âŠ ",timesbar:"â¨±",timesd:"â¨°",tint:"âˆ­",toea:"â¤¨",top:"âŠ¤",topbot:"âŒ¶",topcir:"â«±",Topf:"ğ•‹",topf:"ğ•¥",topfork:"â«š",tosa:"â¤©",tprime:"â€´",TRADE:"â„¢",trade:"â„¢",triangle:"â–µ",triangledown:"â–¿",triangleleft:"â—ƒ",trianglelefteq:"âŠ´",triangleq:"â‰œ",triangleright:"â–¹",trianglerighteq:"âŠµ",tridot:"â—¬",trie:"â‰œ",triminus:"â¨º",TripleDot:"âƒ›",triplus:"â¨¹",trisb:"â§",tritime:"â¨»",trpezium:"â¢",Tscr:"ğ’¯",tscr:"ğ“‰",TScy:"Ğ¦",tscy:"Ñ†",TSHcy:"Ğ‹",tshcy:"Ñ›",Tstrok:"Å¦",tstrok:"Å§",twixt:"â‰¬",twoheadleftarrow:"â†",twoheadrightarrow:"â† ",Uacute:"Ãš",uacute:"Ãº",Uarr:"â†Ÿ",uArr:"â‡‘",uarr:"â†‘",Uarrocir:"â¥‰",Ubrcy:"Ğ",ubrcy:"Ñ",Ubreve:"Å¬",ubreve:"Å­",Ucirc:"Ã›",ucirc:"Ã»",Ucy:"Ğ£",ucy:"Ñƒ",udarr:"â‡…",Udblac:"Å°",udblac:"Å±",udhar:"â¥®",ufisht:"â¥¾",Ufr:"ğ”˜",ufr:"ğ”²",Ugrave:"Ã™",ugrave:"Ã¹",uHar:"â¥£",uharl:"â†¿",uharr:"â†¾",uhblk:"â–€",ulcorn:"âŒœ",ulcorner:"âŒœ",ulcrop:"âŒ",ultri:"â—¸",Umacr:"Åª",umacr:"Å«",uml:"Â¨",UnderBar:"_",UnderBrace:"âŸ",UnderBracket:"âµ",UnderParenthesis:"â",Union:"â‹ƒ",UnionPlus:"âŠ",Uogon:"Å²",uogon:"Å³",Uopf:"ğ•Œ",uopf:"ğ•¦",UpArrow:"â†‘",Uparrow:"â‡‘",uparrow:"â†‘",UpArrowBar:"â¤’",UpArrowDownArrow:"â‡…",UpDownArrow:"â†•",Updownarrow:"â‡•",updownarrow:"â†•",UpEquilibrium:"â¥®",upharpoonleft:"â†¿",upharpoonright:"â†¾",uplus:"âŠ",UpperLeftArrow:"â†–",UpperRightArrow:"â†—",Upsi:"Ï’",upsi:"Ï…",upsih:"Ï’",Upsilon:"Î¥",upsilon:"Ï…",UpTee:"âŠ¥",UpTeeArrow:"â†¥",upuparrows:"â‡ˆ",urcorn:"âŒ",urcorner:"âŒ",urcrop:"âŒ",Uring:"Å®",uring:"Å¯",urtri:"â—¹",Uscr:"ğ’°",uscr:"ğ“Š",utdot:"â‹°",Utilde:"Å¨",utilde:"Å©",utri:"â–µ",utrif:"â–´",uuarr:"â‡ˆ",Uuml:"Ãœ",uuml:"Ã¼",uwangle:"â¦§",vangrt:"â¦œ",varepsilon:"Ïµ",varkappa:"Ï°",varnothing:"âˆ…",varphi:"Ï•",varpi:"Ï–",varpropto:"âˆ",vArr:"â‡•",varr:"â†•",varrho:"Ï±",varsigma:"Ï‚",varsubsetneq:"âŠŠï¸€",varsubsetneqq:"â«‹ï¸€",varsupsetneq:"âŠ‹ï¸€",varsupsetneqq:"â«Œï¸€",vartheta:"Ï‘",vartriangleleft:"âŠ²",vartriangleright:"âŠ³",Vbar:"â««",vBar:"â«¨",vBarv:"â«©",Vcy:"Ğ’",vcy:"Ğ²",VDash:"âŠ«",Vdash:"âŠ©",vDash:"âŠ¨",vdash:"âŠ¢",Vdashl:"â«¦",Vee:"â‹",vee:"âˆ¨",veebar:"âŠ»",veeeq:"â‰š",vellip:"â‹®",Verbar:"â€–",verbar:"|",Vert:"â€–",vert:"|",VerticalBar:"âˆ£",VerticalLine:"|",VerticalSeparator:"â˜",VerticalTilde:"â‰€",VeryThinSpace:"â€Š",Vfr:"ğ”™",vfr:"ğ”³",vltri:"âŠ²",vnsub:"âŠ‚âƒ’",vnsup:"âŠƒâƒ’",Vopf:"ğ•",vopf:"ğ•§",vprop:"âˆ",vrtri:"âŠ³",Vscr:"ğ’±",vscr:"ğ“‹",vsubnE:"â«‹ï¸€",vsubne:"âŠŠï¸€",vsupnE:"â«Œï¸€",vsupne:"âŠ‹ï¸€",Vvdash:"âŠª",vzigzag:"â¦š",Wcirc:"Å´",wcirc:"Åµ",wedbar:"â©Ÿ",Wedge:"â‹€",wedge:"âˆ§",wedgeq:"â‰™",weierp:"â„˜",Wfr:"ğ”š",wfr:"ğ”´",Wopf:"ğ•",wopf:"ğ•¨",wp:"â„˜",wr:"â‰€",wreath:"â‰€",Wscr:"ğ’²",wscr:"ğ“Œ",xcap:"â‹‚",xcirc:"â—¯",xcup:"â‹ƒ",xdtri:"â–½",Xfr:"ğ”›",xfr:"ğ”µ",xhArr:"âŸº",xharr:"âŸ·",Xi:"Î",xi:"Î¾",xlArr:"âŸ¸",xlarr:"âŸµ",xmap:"âŸ¼",xnis:"â‹»",xodot:"â¨€",Xopf:"ğ•",xopf:"ğ•©",xoplus:"â¨",xotime:"â¨‚",xrArr:"âŸ¹",xrarr:"âŸ¶",Xscr:"ğ’³",xscr:"ğ“",xsqcup:"â¨†",xuplus:"â¨„",xutri:"â–³",xvee:"â‹",xwedge:"â‹€",Yacute:"Ã",yacute:"Ã½",YAcy:"Ğ¯",yacy:"Ñ",Ycirc:"Å¶",ycirc:"Å·",Ycy:"Ğ«",ycy:"Ñ‹",yen:"Â¥",Yfr:"ğ”œ",yfr:"ğ”¶",YIcy:"Ğ‡",yicy:"Ñ—",Yopf:"ğ•",yopf:"ğ•ª",Yscr:"ğ’´",yscr:"ğ“",YUcy:"Ğ®",yucy:"Ñ",Yuml:"Å¸",yuml:"Ã¿",Zacute:"Å¹",zacute:"Åº",Zcaron:"Å½",zcaron:"Å¾",Zcy:"Ğ—",zcy:"Ğ·",Zdot:"Å»",zdot:"Å¼",zeetrf:"â„¨",ZeroWidthSpace:"â€‹",Zeta:"Î–",zeta:"Î¶",Zfr:"â„¨",zfr:"ğ”·",ZHcy:"Ğ–",zhcy:"Ğ¶",zigrarr:"â‡",Zopf:"â„¤",zopf:"ğ•«",Zscr:"ğ’µ",zscr:"ğ“",zwj:"â€",zwnj:"â€Œ"}),e.entityMap=e.HTML_ENTITIES},268:(t,e,i)=>{"use strict";i.d(e,{Al:()=>a,Gb:()=>n,Oe:()=>c});var s,e=i(546),r=i(999);const n=i.t(e,2),a=(new n.DOMImplementation).createDocument("",""),o=(null===(s=s||i.t(r,2))||void 0===(s=s||i.t(r,2))?void 0:r.install)||window.wgxpath.install,l=function(){const t={document:{},XPathResult:{}};return o(t),t.document.XPathResult=t.XPathResult,t.document}(),c={currentDocument:a,evaluate:l.evaluate,result:l.XPathResult,createNSResolver:l.createNSResolver}},546:(t,e,i)=>{"use strict";var s=i(870),s=(e.assign=s.assign,e.hasDefaultHTMLNamespace=s.hasDefaultHTMLNamespace,e.isHTMLMimeType=s.isHTMLMimeType,e.isValidMimeType=s.isValidMimeType,e.MIME_TYPE=s.MIME_TYPE,e.NAMESPACE=s.NAMESPACE,i(767)),s=(e.DOMException=s.DOMException,e.DOMExceptionName=s.DOMExceptionName,e.ExceptionCode=s.ExceptionCode,e.ParseError=s.ParseError,i(786)),s=(e.Attr=s.Attr,e.CDATASection=s.CDATASection,e.CharacterData=s.CharacterData,e.Comment=s.Comment,e.Document=s.Document,e.DocumentFragment=s.DocumentFragment,e.DocumentType=s.DocumentType,e.DOMImplementation=s.DOMImplementation,e.Element=s.Element,e.Entity=s.Entity,e.EntityReference=s.EntityReference,e.LiveNodeList=s.LiveNodeList,e.NamedNodeMap=s.NamedNodeMap,e.Node=s.Node,e.NodeList=s.NodeList,e.Notation=s.Notation,e.ProcessingInstruction=s.ProcessingInstruction,e.Text=s.Text,e.XMLSerializer=s.XMLSerializer,i(576));e.DOMParser=s.DOMParser,e.normalizeLineEndings=s.normalizeLineEndings,e.onErrorStopParsing=s.onErrorStopParsing,e.onWarningStopParsing=s.onWarningStopParsing},576:(t,e,i)=>{"use strict";var a=i(870),s=i(786),r=i(767),o=i(159),i=i(802),n=s.DOMImplementation,l=a.hasDefaultHTMLNamespace,c=a.isHTMLMimeType,h=a.isValidMimeType,d=a.MIME_TYPE,u=a.NAMESPACE,p=r.ParseError,m=i.XMLReader;function g(t){return t.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028\u2029]/g,"\n")}function f(t){if(void 0===(t=t||{}).locator&&(t.locator=!0),this.assign=t.assign||a.assign,this.domHandler=t.domHandler||b,this.onError=t.onError||t.errorHandler,t.errorHandler&&"function"!=typeof t.errorHandler)throw new TypeError("errorHandler object is no longer supported, switch to onError!");t.errorHandler&&t.errorHandler("warning","The `errorHandler` option has been deprecated, use `onError` instead!",this),this.normalizeLineEndings=t.normalizeLineEndings||g,this.locator=!!t.locator,this.xmlns=this.assign(Object.create(null),t.xmlns)}function b(t){t=t||{};this.mimeType=t.mimeType||d.XML_APPLICATION,this.defaultNamespace=t.defaultNamespace||null,this.cdata=!1,this.currentElement=void 0,this.doc=void 0,this.locator=void 0,this.onError=t.onError}function E(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function N(t,e,i){return"string"==typeof t?t.substr(e,i):t.length>=e+i||e?new java.lang.String(t,e,i)+"":t}function y(t,e){(t.currentElement||t.doc).appendChild(e)}f.prototype.parseFromString=function(t,e){if(!h(e))throw new TypeError('DOMParser.parseFromString: the provided mimeType "'+e+'" is not valid.');var i=this.assign(Object.create(null),this.xmlns),s=o.XML_ENTITIES,r=i[""]||null,r=(l(e)?(s=o.HTML_ENTITIES,r=u.HTML):e===d.XML_SVG_IMAGE&&(r=u.SVG),i[""]=r,i.xml=i.xml||u.XML,new this.domHandler({mimeType:e,defaultNamespace:r,onError:this.onError})),n=this.locator?{}:void 0,n=(this.locator&&r.setDocumentLocator(n),new m);return n.errorHandler=r,n.domBuilder=r,a.isHTMLMimeType(e)||"string"==typeof t||n.errorHandler.fatalError("source is not a string"),n.parse(this.normalizeLineEndings(String(t)),i,s),r.doc.documentElement||n.errorHandler.fatalError("missing root element"),r.doc},b.prototype={startDocument:function(){var t=new n;this.doc=c(this.mimeType)?t.createHTMLDocument(!1):t.createDocument(this.defaultNamespace,"")},startElement:function(t,e,i,s){var r=this.doc,n=r.createElementNS(t,i||e),a=s.length;y(this,n),this.currentElement=n,this.locator&&E(this.locator,n);for(var o=0;o<a;o++){t=s.getURI(o);var l=s.getValue(o),c=(i=s.getQName(o),r.createAttributeNS(t,i));this.locator&&E(s.getLocator(o),c),c.value=c.nodeValue=l,n.setAttributeNode(c)}},endElement:function(t,e,i){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){t=this.doc.createProcessingInstruction(t,e);this.locator&&E(this.locator,t),y(this,t)},ignorableWhitespace:function(t,e,i){},characters:function(t,e,i){var s;(t=N.apply(this,arguments))&&(s=this.cdata?this.doc.createCDATASection(t):this.doc.createTextNode(t),this.currentElement?this.currentElement.appendChild(s):/^\s*$/.test(t)&&this.doc.appendChild(s),this.locator&&E(this.locator,s))},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){t&&(t.lineNumber=0),this.locator=t},comment:function(t,e,i){t=N.apply(this,arguments);t=this.doc.createComment(t);this.locator&&E(this.locator,t),y(this,t)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,i,s){var r=this.doc.implementation;r&&r.createDocumentType&&(r=r.createDocumentType(t,e,i,s),this.locator&&E(this.locator,r),y(this,r),this.doc.doctype=r)},reportError:function(e,i){if("function"==typeof this.onError)try{this.onError(e,i,this)}catch(t){throw new p("Reporting "+e+' "'+i+'" caused '+t,this.locator)}else console.error("[xmldom "+e+"]\t"+i,function(t){if(t)return"\n@#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}(this.locator))},warning:function(t){this.reportError("warning",t)},error:function(t){this.reportError("error",t)},fatalError:function(t){throw this.reportError("fatalError",t),new p(t,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){b.prototype[t]=function(){return null}}),e.__DOMHandler=b,e.DOMParser=f,e.normalizeLineEndings=g,e.onErrorStopParsing=function(t){if("error"===t)throw"onErrorStopParsing"},e.onWarningStopParsing=function(){throw"onWarningStopParsing"}},714:(t,e,i)=>{"use strict";i.d(e,{u:()=>s});class s{static ensureLocale(t,e){return s.LOCALES.get(t)?t:(console.error(`Locale ${t} does not exist! Using ${s.LOCALES.get(e)} instead.`),e)}}s.VERSION="5.0.0-beta.1",s.LOCALES=new Map([["af","Africaans"],["ca","Catalan"],["da","Danish"],["de","German"],["en","English"],["es","Spanish"],["euro","Euro"],["fr","French"],["hi","Hindi"],["it","Italian"],["ko","Korean"],["nb","BokmÃ¥l"],["nn","Nynorsk"],["sv","Swedish"],["nemeth","Nemeth"]]),s.mathjaxVersion="4.0.0",s.url="https://cdn.jsdelivr.net/npm/speech-rule-engine@"+s.VERSION+"/lib/mathmaps"},731:(t,e)=>{"use strict";function i(t){try{var e=new(t="function"!=typeof t?RegExp:t)("ğŒ†","u").exec("ğŒ†");return!!e&&2===e[0].length}catch(t){}return!1}var s=i();function r(t){if("["!==t.source[0])throw new Error(t+" can not be used with chars");return t.source.slice(1,t.source.lastIndexOf("]"))}function n(t,e){if("["!==t.source[0])throw new Error("/"+t.source+"/ can not be used with chars_without");if(!e||"string"!=typeof e)throw new Error(JSON.stringify(e)+" is not a valid search");if(-1===t.source.indexOf(e))throw new Error('"'+e+'" is not is /'+t.source+"/");if("-"===e&&1!==t.source.indexOf(e))throw new Error('"'+e+'" is not at the first postion of /'+t.source+"/");return new RegExp(t.source.replace(e,""),s?"u":"")}function a(t){var i=this;return new RegExp(Array.prototype.slice.call(arguments).map(function(t){var e="string"==typeof t;if(e&&void 0===i&&"|"===t)throw new Error("use regg instead of reg to wrap expressions with `|`!");return e?t:t.source}).join(""),s?"mu":"m")}function o(t){if(0===arguments.length)throw new Error("no parameters provided");return a.apply(o,["(?:"].concat(Array.prototype.slice.call(arguments),[")"]))}var l=/[-\x09\x0A\x0D\x20-\x2C\x2E-\uD7FF\uE000-\uFFFD]/,c=(s&&(l=a("[",r(l),"\\u{10000}-\\u{10FFFF}","]")),/[\x20\x09\x0D\x0A]/),h=r(c),d=a(c,"+"),c=a(c,"*"),u=/[:_a-zA-Z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=(s&&(u=a("[",r(u),"\\u{10000}-\\u{10FFFF}","]")),a("[",r(u),r(/[-.0-9\xB7]/),r(/[\u0300-\u036F\u203F-\u2040]/),"]")),m=a(u,p,"*"),g=a(p,"+"),f=a("&",m,";"),b=o(/&#[0-9]+;|&#x[0-9a-fA-F]+;/),f=o(f,"|",b),b=a("%",m,";"),E=o(a('"',o(/[^%&"]/,"|",b,"|",f),"*",'"'),"|",a("'",o(/[^%&']/,"|",b,"|",f),"*","'")),N=o('"',o(/[^<&"]/,"|",f),"*",'"',"|","'",o(/[^<&']/,"|",f),"*","'"),u=a(n(u,":"),n(p,":"),"*"),p=a(u,o(":",u),"?"),u=a("^",p,"$"),y=a("(",p,")"),x=o(/"[^"]*"|'[^']*'/),A=a(/^<\?/,"(",m,")",o(d,"(",l,"*?)"),"?",/\?>/),v=/[\x20\x0D\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/,v=o('"',v,'*"',"|","'",n(v,"'"),"*'"),_=a("\x3c!--",o(n(l,"-"),"|",a("-",n(l,"-"))),"*","--\x3e"),T="#PCDATA",T=o(a(/\(/,c,T,o(c,/\|/,c,p),"*",c,/\)\*/),"|",a(/\(/,c,T,c,/\)/)),T=o("EMPTY","|","ANY","|",T,"|",a(/\([^>]+\)/,/[?*+]?/)),T=a("<!ELEMENT",d,o(p,"|",b),d,o(T,"|",b),c,">"),w=a("NOTATION",d,/\(/,c,m,o(c,/\|/,c,m),"*",c,/\)/),g=a(/\(/,c,g,o(c,/\|/,c,g),"*",c,/\)/),w=o(w,"|",g),g=o(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/,"|",w),w=o(/#REQUIRED|#IMPLIED/,"|",o(o("#FIXED",d),"?",N)),N=a("<!ATTLIST",d,m,o(d,m,d,g,d,w),"*",c,">"),g="about:legacy-compat",w=o('"'+g+'"',"|","'"+g+"'"),C="SYSTEM",I="PUBLIC",L=o(o(C,d,x),"|",o(I,d,v,d,x)),S=a("^",o(o(C,d,"(?<SystemLiteralOnly>",x,")"),"|",o(I,d,"(?<PubidLiteral>",v,")",d,"(?<SystemLiteral>",x,")"))),k=o(d,"NDATA",d,m),R="<!ENTITY",k=a(R,d,m,d,o(E,"|",o(L,k,"?")),c,">"),O=o(E,"|",L),k=o(k,"|",a(R,d,"%",d,m,d,O,c,">")),R=a(I,d,v),O=a("<!NOTATION",d,m,d,o(L,"|",R),c,">"),R=a(c,"=",c),M=/1[.]\d+/,M=a(d,"version",R,o("'",M,"'","|",'"',M,'"')),D=/[A-Za-z][-A-Za-z0-9._]*/,M=a(/^<\?xml/,M,o(d,"encoding",R,o('"',D,'"',"|","'",D,"'")),"?",o(d,"standalone",R,o("'",o("yes","|","no"),"'","|",'"',o("yes","|","no"),'"')),"?",c,/\?>/),D=a(l,"*?",/\]\]>/),R=a(/<!\[CDATA\[/,D);e.chars=r,e.chars_without=n,e.detectUnicodeSupport=i,e.reg=a,e.regg=o,e.ABOUT_LEGACY_COMPAT=g,e.ABOUT_LEGACY_COMPAT_SystemLiteral=w,e.AttlistDecl=N,e.CDATA_START="<![CDATA[",e.CDATA_END="]]>",e.CDSect=R,e.Char=l,e.Comment=_,e.COMMENT_START="\x3c!--",e.COMMENT_END="--\x3e",e.DOCTYPE_DECL_START="<!DOCTYPE",e.elementdecl=T,e.EntityDecl=k,e.EntityValue=E,e.ExternalID=L,e.ExternalID_match=S,e.Name=m,e.NotationDecl=O,e.Reference=f,e.PEReference=b,e.PI=A,e.PUBLIC=I,e.PubidLiteral=v,e.QName=p,e.QName_exact=u,e.QName_group=y,e.S=d,e.SChar_s=h,e.S_OPT=c,e.SYSTEM=C,e.SystemLiteral=x,e.UNICODE_REPLACEMENT_CHARACTER="ï¿½",e.UNICODE_SUPPORT=s,e.XMLDecl=M},767:(t,e,i)=>{"use strict";function s(t,e){t.prototype=Object.create(Error.prototype,{constructor:{value:t},name:{value:t.name,enumerable:!0,writable:e}})}var r=i(870).freeze({Error:"Error",IndexSizeError:"IndexSizeError",DomstringSizeError:"DomstringSizeError",HierarchyRequestError:"HierarchyRequestError",WrongDocumentError:"WrongDocumentError",InvalidCharacterError:"InvalidCharacterError",NoDataAllowedError:"NoDataAllowedError",NoModificationAllowedError:"NoModificationAllowedError",NotFoundError:"NotFoundError",NotSupportedError:"NotSupportedError",InUseAttributeError:"InUseAttributeError",InvalidStateError:"InvalidStateError",SyntaxError:"SyntaxError",InvalidModificationError:"InvalidModificationError",NamespaceError:"NamespaceError",InvalidAccessError:"InvalidAccessError",ValidationError:"ValidationError",TypeMismatchError:"TypeMismatchError",SecurityError:"SecurityError",NetworkError:"NetworkError",AbortError:"AbortError",URLMismatchError:"URLMismatchError",QuotaExceededError:"QuotaExceededError",TimeoutError:"TimeoutError",InvalidNodeTypeError:"InvalidNodeTypeError",DataCloneError:"DataCloneError",EncodingError:"EncodingError",NotReadableError:"NotReadableError",UnknownError:"UnknownError",ConstraintError:"ConstraintError",DataError:"DataError",TransactionInactiveError:"TransactionInactiveError",ReadOnlyError:"ReadOnlyError",VersionError:"VersionError",OperationError:"OperationError",NotAllowedError:"NotAllowedError",OptOutError:"OptOutError"}),n=Object.keys(r);function a(t){return"number"==typeof t&&1<=t&&t<=25}function o(t,e){a(t)?(this.name=n[t],this.message=e||""):(this.message=t,this.name="string"==typeof e&&e.substring(e.length-r.Error.length)===r.Error?e:r.Error),Error.captureStackTrace&&Error.captureStackTrace(this,o)}s(o,!0),Object.defineProperties(o.prototype,{code:{enumerable:!0,get:function(){var t=n.indexOf(this.name);return a(t)?t:0}}});for(var i={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25},l=Object.entries(i),c=0;c<l.length;c++)o[l[c][0]]=l[c][1];function h(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,h)}s(h),e.DOMException=o,e.DOMExceptionName=r,e.ExceptionCode=i,e.ParseError=h},786:(P,t,e)=>{"use strict";var n=e(870),a=n.find,B=n.hasDefaultHTMLNamespace,u=n.hasOwn,F=n.isHTMLMimeType,U=n.isHTMLRawTextElement,q=n.isHTMLVoidElement,o=n.MIME_TYPE,y=n.NAMESPACE,p=Symbol(),i=e(767),c=i.DOMException,j=i.DOMExceptionName,x=e(731);function s(t){if(t!==p)throw new TypeError("Illegal constructor")}function H(t){return""!==t}function G(t,e){return u(t,e)||(t[e]=!0),t}function V(t){if(!t)return[];t=t?t.split(/[\t\n\f\r ]+/).filter(H):[];return Object.keys(t.reduce(G,{}))}function W(t){if(!x.QName_exact.test(t))throw new c(c.INVALID_CHARACTER_ERR,'invalid character in qualified name "'+t+'"')}function X(t,e){W(e),t=t||null;var i,s=null,r=e;if(0<=e.indexOf(":")&&(s=(i=e.split(":"))[0],r=i[1]),null!==s&&null===t)throw new c(c.NAMESPACE_ERR,"prefix is non-null and namespace is null");if("xml"===s&&t!==n.NAMESPACE.XML)throw new c(c.NAMESPACE_ERR,'prefix is "xml" and namespace is not the XML namespace');if(("xmlns"===s||"xmlns"===e)&&t!==n.NAMESPACE.XMLNS)throw new c(c.NAMESPACE_ERR,'either qualifiedName or prefix is "xmlns" and namespace is not the XMLNS namespace');if(t===n.NAMESPACE.XMLNS&&"xmlns"!==s&&"xmlns"!==e)throw new c(c.NAMESPACE_ERR,'namespace is the XMLNS namespace and neither qualifiedName nor prefix is "xmlns"');return[t,s,r]}function r(t,e){for(var i in t)u(t,i)&&(e[i]=t[i])}function l(t,e){var i=t.prototype;function s(){}i instanceof e||(s.prototype=e.prototype,r(i,s=new s),t.prototype=i=s),i.constructor!=t&&("function"!=typeof t&&console.error("unknown Class:"+t),i.constructor=t)}var i={},m=(i.ELEMENT_NODE=1,i.ATTRIBUTE_NODE=2,i.TEXT_NODE=3,i.CDATA_SECTION_NODE=4,i.ENTITY_REFERENCE_NODE=5,i.ENTITY_NODE=6,i.PROCESSING_INSTRUCTION_NODE=7,i.COMMENT_NODE=8,i.DOCUMENT_NODE=9,i.DOCUMENT_TYPE_NODE=10,i.DOCUMENT_FRAGMENT_NODE=11,i.NOTATION_NODE=12,n.freeze({DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32}));function z(t){return t.guid||(t.guid=Math.random()),t.guid}function g(){}function h(t,e){this._node=t,this._refresh=e,d(this)}function d(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!==e){var i=t._refresh(t._node);if(ut(t,"length",i.length),!t.$$length||i.length<t.$$length)for(var s=i.length;s in t;s++)u(t,s)&&delete t[s];r(i,t),t._inc=e}}function f(){}function K(t,e){for(var i=0;i<t.length;){if(t[i]===e)return i;i++}}function J(t,e,i){var s=K(e,i);if(0<=s){for(var r,n=e.length-1;s<=n;)e[s]=e[++s];e.length=n,t&&((r=t.ownerDocument)&&Q(r,t,i),i.ownerElement=null)}}function Y(){}function b(t){s(t)}function $(t){return("<"==t?"&lt;":">"==t&&"&gt;")||"&"==t&&"&amp;"||'"'==t&&"&quot;"||"&#"+t.charCodeAt()+";"}function E(t,e){if(e(t))return 1;if(t=t.firstChild)do{if(E(t,e))return 1}while(t=t.nextSibling)}function N(t,e){s(t);t=e||{};(this.ownerDocument=this).contentType=t.contentType||o.XML_APPLICATION,this.type=F(this.contentType)?"html":"xml"}function Q(t,e,i){t&&t._inc++,i.namespaceURI===y.XMLNS&&delete e._nsMap[i.prefix?i.localName:""]}function Z(t,e,i){if(t&&t._inc){t._inc++;var s=e.childNodes;if(i&&!i.nextSibling)s[s.length++]=i;else{for(var r=e.firstChild,n=0;r;)r=(s[n++]=r).nextSibling;s.length=n,delete s[s.length]}}}function tt(t,e){if(t!==e.parentNode)throw new c(c.NOT_FOUND_ERR,"child's parent is not parent");var i=e.previousSibling,s=e.nextSibling;return i?i.nextSibling=s:t.firstChild=s,s?s.previousSibling=i:t.lastChild=i,Z(t.ownerDocument,t),e.parentNode=null,e.previousSibling=null,e.nextSibling=null,e}function A(t){return t&&t.nodeType===b.DOCUMENT_TYPE_NODE}function v(t){return t&&t.nodeType===b.ELEMENT_NODE}function et(t){return t&&t.nodeType===b.TEXT_NODE}function it(t,e){var i,t=t.childNodes||[];if(!a(t,v)&&!A(e))return i=a(t,A),!(e&&i&&t.indexOf(i)>t.indexOf(e))}function st(t,e){var i,t=t.childNodes||[];if(!a(t,function(t){return v(t)&&t!==e}))return i=a(t,A),!(e&&i&&t.indexOf(i)>t.indexOf(e))}function rt(t,e,i){var s=t.childNodes||[],r=e.childNodes||[];if(e.nodeType===b.DOCUMENT_FRAGMENT_NODE){var n=r.filter(v);if(1<n.length||a(r,et))throw new c(c.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(1===n.length&&!it(t,i))throw new c(c.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(v(e)&&!it(t,i))throw new c(c.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(A(e)){if(a(s,A))throw new c(c.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");r=a(s,v);if(i&&s.indexOf(r)<s.indexOf(i))throw new c(c.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!i&&r)throw new c(c.HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function nt(t,e,i){var s=t.childNodes||[],r=e.childNodes||[];if(e.nodeType===b.DOCUMENT_FRAGMENT_NODE){var n=r.filter(v);if(1<n.length||a(r,et))throw new c(c.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(1===n.length&&!st(t,i))throw new c(c.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(v(e)&&!st(t,i))throw new c(c.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(A(e)){if(a(s,function(t){return A(t)&&t!==i}))throw new c(c.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");r=a(s,v);if(i&&s.indexOf(r)<s.indexOf(i))throw new c(c.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function _(t,e,i,s){var r=t,n=e,a=i;if(!r||r.nodeType!==b.DOCUMENT_NODE&&r.nodeType!==b.DOCUMENT_FRAGMENT_NODE&&r.nodeType!==b.ELEMENT_NODE)throw new c(c.HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+r.nodeType);if(a&&a.parentNode!==r)throw new c(c.NOT_FOUND_ERR,"child not in parent");if(!n||n.nodeType!==b.CDATA_SECTION_NODE&&n.nodeType!==b.COMMENT_NODE&&n.nodeType!==b.DOCUMENT_FRAGMENT_NODE&&n.nodeType!==b.DOCUMENT_TYPE_NODE&&n.nodeType!==b.ELEMENT_NODE&&n.nodeType!==b.PROCESSING_INSTRUCTION_NODE&&n.nodeType!==b.TEXT_NODE||A(n)&&r.nodeType!==b.DOCUMENT_NODE)throw new c(c.HIERARCHY_REQUEST_ERR,"Unexpected node type "+n.nodeType+" for parent node type "+r.nodeType);t.nodeType===b.DOCUMENT_NODE&&(s||rt)(t,e,i);a=e.parentNode;if(a&&a.removeChild(e),11===e.nodeType){var o=e.firstChild;if(null==o)return e;var l=e.lastChild}else o=l=e;n=i?i.previousSibling:t.lastChild;for(o.previousSibling=n,l.nextSibling=i,n?n.nextSibling=o:t.firstChild=o,null==i?t.lastChild=l:i.previousSibling=l;o.parentNode=t,o!==l&&(o=o.nextSibling););return Z(t.ownerDocument||t,t,e),11==e.nodeType&&(e.firstChild=e.lastChild=null),e}function T(t){s(t),this._nsMap=Object.create(null)}function w(t){s(t),this.namespaceURI=null,this.prefix=null,this.ownerElement=null}function C(t){s(t)}function I(t){s(t)}function L(t){s(t)}function S(t){s(t)}function k(t){s(t)}function at(t){s(t)}function ot(t){s(t)}function R(t){s(t)}function O(t){s(t)}function M(t){s(t)}function lt(){}function ct(t){var e,i=[],s=9===this.nodeType&&this.documentElement||this,r=s.prefix,n=s.namespaceURI;return D(this,i,t,e=n&&null==r&&null==(r=s.lookupPrefix(n))?[{namespace:n,prefix:null}]:e),i.join("")}function ht(t,e,i){var s=t.prefix||"",r=t.namespaceURI;if(r&&("xml"!==s||r!==y.XML)&&r!==y.XMLNS){for(var n=i.length;n--;){var a=i[n];if(a.prefix===s)return a.namespace!==r}return 1}}function dt(t,e,i){t.push(" ",e,'="',i.replace(/[<>&"\t\n\r]/g,$),'"')}function D(t,e,i,s){s=s||[];var r="html"===(9===t.nodeType?t:t.ownerDocument).type;if(i){if(!(t=i(t)))return;if("string"==typeof t)return e.push(t)}switch(t.nodeType){case 1:var n=t.attributes,a=n.length,o=t.firstChild,l=t.tagName,c=l;if(!r&&!t.prefix&&t.namespaceURI){for(var h,d,u=0;u<n.length;u++)if("xmlns"===n.item(u).name){h=n.item(u).value;break}if(!h)for(var p=s.length-1;0<=p;p--)if(""===(d=s[p]).prefix&&d.namespace===t.namespaceURI){h=d.namespace;break}if(h!==t.namespaceURI)for(p=s.length-1;0<=p;p--)if((d=s[p]).namespace===t.namespaceURI){d.prefix&&(c=d.prefix+":"+l);break}}e.push("<",c);for(var m,g,f,b=0;b<a;b++)"xmlns"==(m=n.item(b)).prefix?s.push({prefix:m.localName,namespace:m.value}):"xmlns"==m.nodeName&&s.push({prefix:"",namespace:m.value});for(b=0;b<a;b++)ht(m=n.item(b),0,s)&&(dt(e,(g=m.prefix||"")?"xmlns:"+g:"xmlns",f=m.namespaceURI),s.push({prefix:g,namespace:f})),D(m,e,i,s);l===c&&ht(t,0,s)&&(dt(e,(g=t.prefix||"")?"xmlns:"+g:"xmlns",f=t.namespaceURI),s.push({prefix:g,namespace:f}));var E=!o;if(E=E&&(r||t.namespaceURI===y.HTML)?q(l):E)e.push("/>");else{if(e.push(">"),r&&U(l))for(;o;)o.data?e.push(o.data):D(o,e,i,s.slice()),o=o.nextSibling;else for(;o;)D(o,e,i,s.slice()),o=o.nextSibling;e.push("</",c,">")}return;case 9:case 11:for(o=t.firstChild;o;)D(o,e,i,s.slice()),o=o.nextSibling;return;case 2:return dt(e,t.name,t.value);case 3:return e.push(t.data.replace(/[<&>]/g,$));case 4:return e.push(x.CDATA_START,t.data,x.CDATA_END);case 8:return e.push(x.COMMENT_START,t.data,x.COMMENT_END);case 10:var E=t.publicId,N=t.systemId;return e.push(x.DOCTYPE_DECL_START," ",t.name),E?(e.push(" ",x.PUBLIC," ",E),N&&"."!==N&&e.push(" ",N)):N&&"."!==N&&e.push(" ",x.SYSTEM," ",N),t.internalSubset&&e.push(" [",t.internalSubset,"]"),e.push(">");case 7:return e.push("<?",t.target," ",t.data,"?>");case 5:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function ut(t,e,i){t[e]=i}(g.prototype={length:0,item:function(t){return 0<=t&&t<this.length?this[t]:null},toString:function(t){for(var e=[],i=0;i<this.length;i++)D(this[i],e,t);return e.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}})[Symbol.iterator]=function(){var t=this,e=0;return{next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0}},return:function(){return{done:!0}}}},h.prototype.item=function(t){return d(this),this[t]||null},l(h,g),(f.prototype={length:0,item:g.prototype.item,getNamedItem:function(t){this._ownerElement&&this._ownerElement._isInHTMLDocumentAndNamespace()&&(t=t.toLowerCase());for(var e=0;e<this.length;){var i=this[e];if(i.nodeName===t)return i;e++}return null},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!==this._ownerElement)throw new c(c.INUSE_ATTRIBUTE_ERR);var i,s,r,e=this.getNamedItemNS(t.namespaceURI,t.localName);return e===t?t:(i=this._ownerElement,s=this,t=t,(r=e)?s[K(s,r)]=t:(s[s.length]=t,s.length++),i&&(s=(t.ownerElement=i).ownerDocument)&&(r&&Q(s,i,r),r=i,i=t,s&&s._inc++,i.namespaceURI===y.XMLNS&&(r._nsMap[i.prefix?i.localName:""]=i.value)),e)},setNamedItemNS:function(t){return this.setNamedItem(t)},removeNamedItem:function(t){var e=this.getNamedItem(t);if(e)return J(this._ownerElement,this,e),e;throw new c(c.NOT_FOUND_ERR,t)},removeNamedItemNS:function(t,e){var i=this.getNamedItemNS(t,e);if(i)return J(this._ownerElement,this,i),i;throw new c(c.NOT_FOUND_ERR,t?t+" : "+e:e)},getNamedItemNS:function(t,e){t=t||null;for(var i=0;i<this.length;){var s=this[i];if(s.localName===e&&s.namespaceURI===t)return s;i++}return null}})[Symbol.iterator]=function(){var t=this,e=0;return{next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0}},return:function(){return{done:!0}}}},Y.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,i){var s=o.XML_APPLICATION,s=(t===y.HTML?s=o.XML_XHTML_APPLICATION:t===y.SVG&&(s=o.XML_SVG_IMAGE),new N(p,{contentType:s}));return s.implementation=this,s.childNodes=new g,s.doctype=i||null,i&&s.appendChild(i),e&&(i=s.createElementNS(t,e),s.appendChild(i)),s},createDocumentType:function(t,e,i,s){W(t);var r=new k(p);return r.name=t,r.nodeName=t,r.publicId=e||"",r.systemId=i||"",r.internalSubset=s||"",r.childNodes=new g,r},createHTMLDocument:function(t){var e,i,s,r=new N(p,{contentType:o.HTML});return r.implementation=this,r.childNodes=new g,!1!==t&&(r.doctype=this.createDocumentType("html"),(r.doctype.ownerDocument=r).appendChild(r.doctype),e=r.createElement("html"),r.appendChild(e),i=r.createElement("head"),e.appendChild(i),"string"==typeof t&&((s=r.createElement("title")).appendChild(r.createTextNode(t)),i.appendChild(s)),e.appendChild(r.createElement("body"))),r}},b.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,parentNode:null,get parentElement(){return this.parentNode&&this.parentNode.nodeType===this.ELEMENT_NODE?this.parentNode:null},childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,baseURI:"about:blank",get isConnected(){var t=this.getRootNode();return t&&t.nodeType===t.DOCUMENT_NODE},contains:function(t){if(!t)return!1;var e=t;do{if(this===e)return!0}while(e=t.parentNode);return!1},getRootNode:function(t){var e=this;do{if(!e.parentNode)return e}while(e=e.parentNode)},isEqualNode:function(t){if(!t)return!1;if(this.nodeType!==t.nodeType)return!1;switch(this.nodeType){case this.DOCUMENT_TYPE_NODE:if(this.name!==t.name)return!1;if(this.publicId!==t.publicId)return!1;if(this.systemId!==t.systemId)return!1;break;case this.ELEMENT_NODE:if(this.namespaceURI!==t.namespaceURI)return!1;if(this.prefix!==t.prefix)return!1;if(this.localName!==t.localName)return!1;if(this.attributes.length!==t.attributes.length)return!1;for(var e=0;e<this.attributes.length;e++){var i=this.attributes.item(e);if(!i.isEqualNode(t.getAttributeNodeNS(i.namespaceURI,i.localName)))return!1}break;case this.ATTRIBUTE_NODE:if(this.namespaceURI!==t.namespaceURI)return!1;if(this.localName!==t.localName)return!1;if(this.value!==t.value)return!1;break;case this.PROCESSING_INSTRUCTION_NODE:if(this.target!==t.target||this.data!==t.data)return!1;break;case this.TEXT_NODE:case this.COMMENT_NODE:if(this.data!==t.data)return!1}if(this.childNodes.length!==t.childNodes.length)return!1;for(e=0;e<this.childNodes.length;e++)if(!this.childNodes[e].isEqualNode(t.childNodes[e]))return!1;return!0},isSameNode:function(t){return this===t},insertBefore:function(t,e){return _(this,t,e)},replaceChild:function(t,e){_(this,t,e,nt),e&&this.removeChild(e)},removeChild:function(t){return tt(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(t){return function t(e,i,s){var r,n,a=new i.constructor(p);for(r in i)u(i,r)&&"object"!=typeof(n=i[r])&&n!=a[r]&&(a[r]=n);switch(i.childNodes&&(a.childNodes=new g),a.ownerDocument=e,a.nodeType){case 1:var o=i.attributes,l=a.attributes=new f,c=o.length;l._ownerElement=a;for(var h=0;h<c;h++)a.setAttributeNode(t(e,o.item(h),!0));break;case 2:s=!0}if(s)for(var d=i.firstChild;d;)a.appendChild(t(e,d,s)),d=d.nextSibling;return a}(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&3==e.nodeType&&3==t.nodeType?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},lookupPrefix:function(t){for(var e=this;e;){var i=e._nsMap;if(i)for(var s in i)if(u(i,s)&&i[s]===t)return s;e=2==e.nodeType?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var i=e._nsMap;if(i&&u(i,t))return i[t];e=2==e.nodeType?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){return null==this.lookupPrefix(t)},compareDocumentPosition:function(t){if(this===t)return 0;var e=t,i=this,s=null,r=null;if(e instanceof w&&(e=(s=e).ownerElement),i instanceof w&&(i=(r=i).ownerElement,s&&e&&i===e))for(var n,a=0;n=i.attributes[a];a++){if(n===s)return m.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+m.DOCUMENT_POSITION_PRECEDING;if(n===r)return m.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+m.DOCUMENT_POSITION_FOLLOWING}if(!e||!i||i.ownerDocument!==e.ownerDocument)return m.DOCUMENT_POSITION_DISCONNECTED+m.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+(z(i.ownerDocument)>z(e.ownerDocument)?m.DOCUMENT_POSITION_FOLLOWING:m.DOCUMENT_POSITION_PRECEDING);if(r&&e===i)return m.DOCUMENT_POSITION_CONTAINS+m.DOCUMENT_POSITION_PRECEDING;if(s&&e===i)return m.DOCUMENT_POSITION_CONTAINED_BY+m.DOCUMENT_POSITION_FOLLOWING;for(var o=[],l=e.parentNode;l;){if(!r&&l===i)return m.DOCUMENT_POSITION_CONTAINED_BY+m.DOCUMENT_POSITION_FOLLOWING;o.push(l),l=l.parentNode}o.reverse();for(var c=[],h=i.parentNode;h;){if(!s&&h===e)return m.DOCUMENT_POSITION_CONTAINS+m.DOCUMENT_POSITION_PRECEDING;c.push(h),h=h.parentNode}c.reverse();var d,u=function t(e,i){if(i.length<e.length)return t(i,e);var s,r=null;for(s in e){if(e[s]!==i[s])return r;r=e[s]}return r}(o,c);for(d in u.childNodes){var p=u.childNodes[d];if(p===i)return m.DOCUMENT_POSITION_FOLLOWING;if(p===e)return m.DOCUMENT_POSITION_PRECEDING;if(0<=c.indexOf(p))return m.DOCUMENT_POSITION_FOLLOWING;if(0<=o.indexOf(p))return m.DOCUMENT_POSITION_PRECEDING}return 0}},r(i,b),r(i,b.prototype),r(m,b),r(m,b.prototype),N.prototype={implementation:null,nodeName:"#document",nodeType:9,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(11!==t.nodeType)return _(this,t,e),null===(t.ownerDocument=this).documentElement&&1===t.nodeType&&(this.documentElement=t),t;for(var i=t.firstChild;i;){var s=i.nextSibling;this.insertBefore(i,e),i=s}return t},removeChild:function(t){t=tt(this,t);return t===this.documentElement&&(this.documentElement=null),t},replaceChild:function(t,e){_(this,t,e,nt),t.ownerDocument=this,e&&this.removeChild(e),v(t)&&(this.documentElement=t)},importNode:function(t,e){return function t(e,i,s){var r;switch(i.nodeType){case 1:(r=i.cloneNode(!1)).ownerDocument=e;case 11:break;case 2:s=!0}if((r=r||i.cloneNode(!1)).ownerDocument=e,r.parentNode=null,s)for(var n=i.firstChild;n;)r.appendChild(t(e,n,s)),n=n.nextSibling;return r}(this,t,e)},getElementById:function(e){var i=null;return E(this.documentElement,function(t){if(1==t.nodeType&&t.getAttribute("id")==e)return i=t,!0}),i},createElement:function(t){var e=new T(p);return"html"===(e.ownerDocument=this).type&&(t=t.toLowerCase()),B(this.contentType)&&(e.namespaceURI=y.HTML),e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new g,(e.attributes=new f)._ownerElement=e},createDocumentFragment:function(){var t=new O(p);return t.ownerDocument=this,t.childNodes=new g,t},createTextNode:function(t){var e=new I(p);return e.ownerDocument=this,e.childNodes=new g,e.appendData(t),e},createComment:function(t){var e=new L(p);return e.ownerDocument=this,e.childNodes=new g,e.appendData(t),e},createCDATASection:function(t){var e=new S(p);return e.ownerDocument=this,e.childNodes=new g,e.appendData(t),e},createProcessingInstruction:function(t,e){var i=new M(p);return i.ownerDocument=this,i.childNodes=new g,i.nodeName=i.target=t,i.nodeValue=i.data=e,i},createAttribute:function(t){if(x.QName_exact.test(t))return"html"===this.type&&(t=t.toLowerCase()),this._createAttribute(t);throw new c(c.INVALID_CHARACTER_ERR,'invalid character in name "'+t+'"')},_createAttribute:function(t){var e=new w(p);return e.ownerDocument=this,e.childNodes=new g,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){if(!x.Name.test(t))throw new c(c.INVALID_CHARACTER_ERR,'not a valid xml name "'+t+'"');if("html"===this.type)throw new c("document is an html document",j.NotSupportedError);var e=new R(p);return e.ownerDocument=this,e.childNodes=new g,e.nodeName=t,e},createElementNS:function(t,e){var t=X(t,e),i=new T(p),s=i.attributes=new f;return i.childNodes=new g,i.ownerDocument=this,i.nodeName=e,i.tagName=e,i.namespaceURI=t[0],i.prefix=t[1],i.localName=t[2],s._ownerElement=i},createAttributeNS:function(t,e){var t=X(t,e),i=new w(p);return i.ownerDocument=this,i.childNodes=new g,i.nodeName=e,i.name=e,i.specified=!0,i.namespaceURI=t[0],i.prefix=t[1],i.localName=t[2],i}},l(N,b),N.prototype.getElementsByClassName=(T.prototype={nodeType:1,attributes:null,getQualifiedName:function(){return this.prefix?this.prefix+":"+this.localName:this.localName},_isInHTMLDocumentAndNamespace:function(){return"html"===this.ownerDocument.type&&this.namespaceURI===y.HTML},hasAttributes:function(){return!(!this.attributes||!this.attributes.length)},hasAttribute:function(t){return!!this.getAttributeNode(t)},getAttribute:function(t){t=this.getAttributeNode(t);return t?t.value:null},getAttributeNode:function(t){return this._isInHTMLDocumentAndNamespace()&&(t=t.toLowerCase()),this.attributes.getNamedItem(t)},setAttribute:function(t,e){this._isInHTMLDocumentAndNamespace()&&(t=t.toLowerCase());var i=this.getAttributeNode(t);i?i.value=i.nodeValue=""+e:((i=this.ownerDocument._createAttribute(t)).value=i.nodeValue=""+e,this.setAttributeNode(i))},removeAttribute:function(t){t=this.getAttributeNode(t);t&&this.removeAttributeNode(t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){t=this.getAttributeNodeNS(t,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(t,e){return null!=this.getAttributeNodeNS(t,e)},getAttributeNS:function(t,e){t=this.getAttributeNodeNS(t,e);return t?t.value:null},setAttributeNS:function(t,e,i){var s=X(t,e)[2],s=this.getAttributeNodeNS(t,s);s?s.value=s.nodeValue=""+i:((s=this.ownerDocument.createAttributeNS(t,e)).value=s.nodeValue=""+i,this.setAttributeNode(s))},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByClassName:function(a){var o=V(a);return new h(this,function(r){var n=[];return 0<o.length&&E(r,function(t){var e,i,s;t!==r&&1===t.nodeType&&(e=t.getAttribute("class"))&&((i=a===e)||(e=V(e),i=o.every((s=e,function(t){return s&&-1!==s.indexOf(t)}))),i&&n.push(t))}),n})},getElementsByTagName:function(s){var r="html"===(9===this.nodeType?this:this.ownerDocument).type,n=s.toLowerCase();return new h(this,function(e){var i=[];return E(e,function(t){t===e||1!==t.nodeType||"*"!==s&&t.getQualifiedName()!==(r&&t.namespaceURI===y.HTML?n:s)||i.push(t)}),i})},getElementsByTagNameNS:function(s,r){return new h(this,function(e){var i=[];return E(e,function(t){t===e||1!==t.nodeType||"*"!==s&&t.namespaceURI!==s||"*"!==r&&t.localName!=r||i.push(t)}),i})}}).getElementsByClassName,N.prototype.getElementsByTagName=T.prototype.getElementsByTagName,N.prototype.getElementsByTagNameNS=T.prototype.getElementsByTagNameNS,l(T,b),w.prototype.nodeType=2,l(w,b),C.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,i){i=this.data.substring(0,t)+i+this.data.substring(t+e),this.nodeValue=this.data=i,this.length=i.length}},l(C,b),I.prototype={nodeName:"#text",nodeType:3,splitText:function(t){var e=(i=this.data).substring(t),i=i.substring(0,t),t=(this.data=this.nodeValue=i,this.length=i.length,this.ownerDocument.createTextNode(e));return this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling),t}},l(I,C),L.prototype={nodeName:"#comment",nodeType:8},l(L,C),S.prototype={nodeName:"#cdata-section",nodeType:4},l(S,I),k.prototype.nodeType=10,l(k,b),at.prototype.nodeType=12,l(at,b),ot.prototype.nodeType=6,l(ot,b),R.prototype.nodeType=5,l(R,b),O.prototype.nodeName="#document-fragment",O.prototype.nodeType=11,l(O,b),M.prototype.nodeType=7,l(M,C),lt.prototype.serializeToString=function(t,e){return ct.call(t,e)},b.prototype.toString=ct;try{Object.defineProperty&&(Object.defineProperty(h.prototype,"length",{get:function(){return d(this),this.$$length}}),Object.defineProperty(b.prototype,"textContent",{get:function(){return function t(e){switch(e.nodeType){case 1:case 11:var i=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&i.push(t(e)),e=e.nextSibling;return i.join("");default:return e.nodeValue}}(this)},set:function(t){switch(this.nodeType){case 1:case 11:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),ut=function(t,e,i){t["$$"+e]=i})}catch(t){}t._updateLiveList=d,t.Attr=w,t.CDATASection=S,t.CharacterData=C,t.Comment=L,t.Document=N,t.DocumentFragment=O,t.DocumentType=k,t.DOMImplementation=Y,t.Element=T,t.Entity=ot,t.EntityReference=R,t.LiveNodeList=h,t.NamedNodeMap=f,t.Node=b,t.NodeList=g,t.Notation=at,t.Text=I,t.ProcessingInstruction=M,t.XMLSerializer=lt},802:(t,e,i)=>{"use strict";var M=i(870),D=i(731),i=i(767),P=M.isHTMLEscapableRawTextElement,B=M.isHTMLMimeType,F=M.isHTMLRawTextElement,U=M.hasOwn,p=M.NAMESPACE,q=i.ParseError,j=i.DOMException;function s(){}s.prototype={parse:function(t,e,i){var s=this.domBuilder;s.startDocument(),m(e,e=Object.create(null)),function(i,t,s,r,n){var a=B(r.mimeType);function o(t){var e=";"===t[t.length-1]?t:t+";";if(!a&&e!==t)return n.error("EntityRef: expecting ;"),t;var i=D.Reference.exec(e);if(!i||i[0].length!==e.length)return n.error("entity not matching Reference production: "+t),t;var i=e.slice(1,-1);return U(s,i)?s[i]:"#"===i.charAt(0)?65535<(e=parseInt(i.substring(1).replace("x","0x")))?(i=55296+((e-=65536)>>10),String.fromCharCode(i,56320+(1023&e))):String.fromCharCode(e):(n.error("entity not found:"+t),t)}function e(t){var e;g<t&&(e=i.substring(g,t).replace(H,o),d&&u(g),r.characters(e,0,t-g),g=t)}0<=i.indexOf(D.UNICODE_REPLACEMENT_CHARACTER)&&n.warning("Unicode replacement character detected, source encoding issues?");var l=0,c=0,h=/\r\n?|\n|$/g,d=r.locator;function u(t,e){for(;c<=t&&(e=h.exec(i));)l=c,c=e.index+e[0].length,d.lineNumber++;d.columnNumber=t-l+1}for(var p=[{currentNSMap:t}],m=[],g=0;;){try{var f,b=i.indexOf("<",g);if(b<0){if(!a&&0<m.length)return n.fatalError("unclosed xml tag(s): "+m.join(", "));if(!i.substring(g).match(/^\s*$/)){var E=r.doc,N=E.createTextNode(i.substring(g));if(E.documentElement)return n.error("Extra content at the end of the document");E.appendChild(N),r.currentElement=N}return}switch(g<b&&(f=i.substring(g,b),a||0!==m.length||(f=f.replace(new RegExp(D.S_OPT.source,"g"),""))&&n.error("Unexpected content outside root element: '"+f+"'"),e(b)),i.charAt(b+1)){case"/":var y=i.indexOf(">",b+2),x=i.substring(b+2,0<y?y:void 0);if(!x)return n.fatalError("end tag name missing");var A=0<y&&D.reg("^",D.QName_group,D.S_OPT,"$").exec(x);if(!A)return n.fatalError('end tag name contains invalid characters: "'+x+'"');if(!r.currentElement&&!r.doc.documentElement)return;var v=m[m.length-1]||r.currentElement.tagName||r.doc.documentElement.tagName||"";if(v!==A[1]){var _=A[1].toLowerCase();if(!a||v.toLowerCase()!==_)return n.fatalError('Opening and ending tag mismatch: "'+v+'" != "'+x+'"')}var T=p.pop(),w=(m.pop(),T.localNSMap);if(r.endElement(T.uri,T.localName,v),w)for(var C in w)U(w,C)&&r.endPrefixMapping(C);y++;break;case"?":d&&u(b),y=function(t,e,i,s){var r=t.substring(e).match(D.PI);if(!r)return s.fatalError("Invalid processing instruction starting at position "+e);if("xml"===r[1].toLowerCase()){if(0<e)return s.fatalError("processing instruction at position "+e+" is an xml declaration which is only at the start of the document");if(!D.XMLDecl.test(t.substring(e)))return s.fatalError("xml declaration is not well-formed")}return i.processingInstruction(r[1],r[2]),e+r[0].length}(i,b,r,n);break;case"!":d&&u(b),y=W(i,b,r,n,a);break;default:d&&u(b);var I=new X,L=p[p.length-1].currentNSMap,S=(y=function(t,e,s,r,n,a){function i(t,e,i){U(s.attributeNames,t)?n.fatalError("Attribute "+t+" redefined"):!a&&0<=e.indexOf("<")?n.fatalError("Unescaped '<' not allowed in attributes values"):s.addValue(t,e.replace(/[\t\n\r]/g," ").replace(H,r),i)}for(var o,l=++e,c=0;;){var h=t.charAt(l);switch(h){case"=":if(1===c)o=t.slice(e,l),c=3;else{if(2!==c)throw new Error("attribute equal must after attrName");c=3}break;case"'":case'"':if(3===c||1===c){if(1===c&&(n.warning('attribute value must after "="'),o=t.slice(e,l)),e=l+1,!(0<(l=t.indexOf(h,e))))throw new Error("attribute value no end '"+h+"' match");i(o,d=t.slice(e,l),e-1),c=5}else{if(4!=c)throw new Error('attribute value must after "="');i(o,d=t.slice(e,l),e),n.warning('attribute "'+o+'" missed start quot('+h+")!!"),e=l+1,c=5}break;case"/":switch(c){case 0:s.setTagName(t.slice(e,l));case 5:case 6:case 7:c=7,s.closed=!0;case 4:case 1:break;case 2:s.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return n.error("unexpected end of input"),0==c&&s.setTagName(t.slice(e,l)),l;case">":switch(c){case 0:s.setTagName(t.slice(e,l));case 5:case 6:case 7:break;case 4:case 1:"/"===(d=t.slice(e,l)).slice(-1)&&(s.closed=!0,d=d.slice(0,-1));case 2:2===c&&(d=o),4==c?(n.warning('attribute "'+d+'" missed quot(")!'),i(o,d,e)):(a||n.warning('attribute "'+d+'" missed value!! "'+d+'" instead!!'),i(d,d,e));break;case 3:if(!a)return n.fatalError("AttValue: ' or \" expected")}return l;case"Â€":h=" ";default:if(h<=" ")switch(c){case 0:s.setTagName(t.slice(e,l)),c=6;break;case 1:o=t.slice(e,l),c=2;break;case 4:var d=t.slice(e,l);n.warning('attribute "'+d+'" missed quot(")!!'),i(o,d,e);case 5:c=6}else switch(c){case 2:a||n.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),i(o,o,e),e=l,c=1;break;case 5:n.warning('attribute space is required"'+o+'"!!');case 6:c=1,e=l;break;case 3:c=4,e=l;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}(i,b,I,o,n,a),I.length);if(I.closed||(a&&M.isHTMLVoidElement(I.tagName)?I.closed=!0:m.push(I.tagName)),d&&S){for(var k=G(d,{}),R=0;R<S;R++){var O=I[R];u(O.offset),O.locator=G(d,{})}r.locator=k,V(I,r,L)&&p.push(I),r.locator=d}else V(I,r,L)&&p.push(I);a&&!I.closed?y=function(t,e,i,s,r){var n=P(i);if(n||F(i))return i=t.indexOf("</"+i+">",e),t=t.substring(e+1,i),n&&(t=t.replace(H,s)),r.characters(t,0,t.length),i;return e+1}(i,y,I.tagName,o,r):y++}}catch(i){if(i instanceof q)throw i;if(i instanceof j)throw new q(i.name+": "+i.message,r.locator,i);n.error("element parse error: "+i),y=-1}g<y?g=y:e(Math.max(b,g)+1)}}(t,e,i,s,this.errorHandler),s.endDocument()}};var H=/&#?\w+;?/g;function G(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function V(t,e,i){for(var s,r=t.tagName,n=null,a=t.length;a--;){var o,l=t[a],c=l.qName,h=l.value,c=0<(s=c.indexOf(":"))?(o=l.prefix=c.slice(0,s),d=c.slice(s+1),"xmlns"===o&&d):(o=null,"xmlns"===(d=c)&&"");l.localName=d,!1!==c&&(null==n&&(n=Object.create(null),m(i,i=Object.create(null))),i[c]=n[c]=h,l.uri=p.XMLNS,e.startPrefixMapping(c,h))}for(a=t.length;a--;)(l=t[a]).prefix&&("xml"===l.prefix&&(l.uri=p.XML),"xmlns"!==l.prefix&&(l.uri=i[l.prefix]));var d=0<(s=r.indexOf(":"))?(o=t.prefix=r.slice(0,s),t.localName=r.slice(s+1)):(o=null,t.localName=r),u=t.uri=i[o||""];if(e.startElement(u,d,r,t),!t.closed)return t.currentNSMap=i,t.localNSMap=n,1;if(e.endElement(u,d,r),n)for(o in n)U(n,o)&&e.endPrefixMapping(o)}function m(t,e){for(var i in t)U(t,i)&&(e[i]=t[i])}function l(i,t){var s=t;function r(t){return i.charAt(s+(t=t||0))}function n(t){s+=t||1}function e(){return i.substring(s)}return{char:r,getIndex:function(){return s},getMatch:function(t){t=D.reg("^",t).exec(e());return t?(n(t[0].length),t[0]):null},getSource:function(){return i},skip:n,skipBlanks:function(){for(var t=0;s<i.length;){var e=r();if(" "!==e&&"\n"!==e&&"\t"!==e&&"\r"!==e)return t;t++,n()}return-1},substringFromIndex:e,substringStartsWith:function(t){return i.substring(s,s+t.length)===t},substringStartsWithCaseInsensitive:function(t){return i.substring(s,s+t.length).toUpperCase()===t.toUpperCase()}}}function W(t,e,i,s,r){var n=l(t,e);switch(r?n.char(2).toUpperCase():n.char(2)){case"-":var a=n.getMatch(D.Comment);return a?(i.comment(a,D.COMMENT_START.length,a.length-D.COMMENT_START.length-D.COMMENT_END.length),n.getIndex()):s.fatalError("comment is not well-formed at position "+n.getIndex());case"[":a=n.getMatch(D.CDSect);return a?r||i.currentElement?(i.startCDATA(),i.characters(a,D.CDATA_START.length,a.length-D.CDATA_START.length-D.CDATA_END.length),i.endCDATA(),n.getIndex()):s.fatalError("CDATA outside of element"):s.fatalError("Invalid CDATA starting at position "+e);case"D":if(i.doc&&i.doc.documentElement)return s.fatalError("Doctype not allowed inside or after documentElement at position "+n.getIndex());if(r?!n.substringStartsWithCaseInsensitive(D.DOCTYPE_DECL_START):!n.substringStartsWith(D.DOCTYPE_DECL_START))return s.fatalError("Expected "+D.DOCTYPE_DECL_START+" at position "+n.getIndex());if(n.skip(D.DOCTYPE_DECL_START.length),n.skipBlanks()<1)return s.fatalError("Expected whitespace after "+D.DOCTYPE_DECL_START+" at position "+n.getIndex());a={name:void 0,publicId:void 0,systemId:void 0,internalSubset:void 0};if(a.name=n.getMatch(D.Name),!a.name)return s.fatalError("doctype name missing or contains unexpected characters at position "+n.getIndex());if(r&&"html"!==a.name.toLowerCase()&&s.warning("Unexpected DOCTYPE in HTML document at position "+n.getIndex()),n.skipBlanks(),n.substringStartsWith(D.PUBLIC)||n.substringStartsWith(D.SYSTEM)){var o=D.ExternalID_match.exec(n.substringFromIndex());if(!o)return s.fatalError("doctype external id is not well-formed at position "+n.getIndex());void 0!==o.groups.SystemLiteralOnly?a.systemId=o.groups.SystemLiteralOnly:(a.systemId=o.groups.SystemLiteral,a.publicId=o.groups.PubidLiteral),n.skip(o[0].length)}else if(r&&n.substringStartsWithCaseInsensitive(D.SYSTEM)){if(n.skip(D.SYSTEM.length),n.skipBlanks()<1)return s.fatalError("Expected whitespace after "+D.SYSTEM+" at position "+n.getIndex());if(a.systemId=n.getMatch(D.ABOUT_LEGACY_COMPAT_SystemLiteral),!a.systemId)return s.fatalError("Expected "+D.ABOUT_LEGACY_COMPAT+" in single or double quotes after "+D.SYSTEM+" at position "+n.getIndex())}return r&&a.systemId&&!D.ABOUT_LEGACY_COMPAT_SystemLiteral.test(a.systemId)&&s.warning("Unexpected doctype.systemId in HTML document at position "+n.getIndex()),r||(n.skipBlanks(),a.internalSubset=function(t,e){var i,s,r=t.getSource();if("["===t.char()){t.skip(1);for(var n,a=t.getIndex();t.getIndex()<r.length;){if(t.skipBlanks(),"]"===t.char())return n=r.substring(a,t.getIndex()),t.skip(1),n;var o=null;if("<"===t.char()&&"!"===t.char(1))switch(t.char(2)){case"E":"L"===t.char(3)?o=t.getMatch(D.elementdecl):"N"===t.char(3)&&(o=t.getMatch(D.EntityDecl));break;case"A":o=t.getMatch(D.AttlistDecl);break;case"N":o=t.getMatch(D.NotationDecl);break;case"-":o=t.getMatch(D.Comment)}else if("<"===t.char()&&"?"===t.char(1))n=t,i=e,s=void 0,o=(s=D.PI.exec(n.substringFromIndex()))?"xml"===s[1].toLowerCase()?i.fatalError("xml declaration is only allowed at the start of the document, but found at position "+n.getIndex()):(n.skip(s[0].length),s[0]):i.fatalError("processing instruction is not well-formed at position "+n.getIndex());else{if("%"!==t.char())return e.fatalError("Error detected in Markup declaration");o=t.getMatch(D.PEReference)}if(!o)return e.fatalError("Error in internal subset at position "+t.getIndex())}return e.fatalError("doctype internal subset is not well-formed, missing ]")}}(n,s)),n.skipBlanks(),">"!==n.char()?s.fatalError("doctype not terminated with > at position "+n.getIndex()):(n.skip(1),i.startDTD(a.name,a.publicId,a.systemId,a.internalSubset),i.endDTD(),n.getIndex());default:return s.fatalError('Not well-formed XML starting with "<!" at position '+e)}}function X(){this.attributeNames=Object.create(null)}X.prototype={setTagName:function(t){if(!D.QName_exact.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,i){if(!D.QName_exact.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:i}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}},e.XMLReader=s,e.parseUtils=l,e.parseDoctypeCommentOrCData=W},870:(t,e)=>{"use strict";function i(t,e){return(e=void 0===e?Object:e)&&"function"==typeof e.getOwnPropertyDescriptors&&(t=e.create(null,e.getOwnPropertyDescriptors(t))),e&&"function"==typeof e.freeze?e.freeze(t):t}function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var s=i({allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,formnovalidate:!0,hidden:!0,ismap:!0,itemscope:!0,loop:!0,multiple:!0,muted:!0,nomodule:!0,novalidate:!0,open:!0,playsinline:!0,readonly:!0,required:!0,reversed:!0,selected:!0}),r=i({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),a=i({script:!1,style:!1,textarea:!0,title:!0});function o(t){return t===l.HTML}var l=i({HTML:"text/html",XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),c=Object.keys(l).map(function(t){return l[t]}),h=i({HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});e.assign=function(t,e){if(null===t||"object"!=typeof t)throw new TypeError("target is not an object");for(var i in e)n(e,i)&&(t[i]=e[i]);return t},e.find=function(t,e,i){if(void 0===i&&(i=Array.prototype),t&&"function"==typeof i.find)return i.find.call(t,e);for(var s=0;s<t.length;s++)if(n(t,s)){var r=t[s];if(e.call(void 0,r,s,t))return r}},e.freeze=i,e.HTML_BOOLEAN_ATTRIBUTES=s,e.HTML_RAW_TEXT_ELEMENTS=a,e.HTML_VOID_ELEMENTS=r,e.hasDefaultHTMLNamespace=function(t){return o(t)||t===l.XML_XHTML_APPLICATION},e.hasOwn=n,e.isHTMLBooleanAttribute=function(t){return n(s,t.toLowerCase())},e.isHTMLRawTextElement=function(t){t=t.toLowerCase();return n(a,t)&&!a[t]},e.isHTMLEscapableRawTextElement=function(t){t=t.toLowerCase();return n(a,t)&&a[t]},e.isHTMLMimeType=o,e.isHTMLVoidElement=function(t){return n(r,t.toLowerCase())},e.isValidMimeType=function(t){return-1<c.indexOf(t)},e.MIME_TYPE=l,e.NAMESPACE=h},999:(ue,t,e)=>{!function(){"use strict";var a=this;function c(t){return"string"==typeof t}function P(t,e,i){return t.call.apply(t.bind,arguments)}function B(e,i,t){if(e)return 2<arguments.length?(s=Array.prototype.slice.call(arguments,2),function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,s),e.apply(i,t)}):function(){return e.apply(i,arguments)};var s;throw Error()}function F(t,e,i){return(F=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?P:B).apply(null,arguments)}function t(t){var n=E;function e(){}e.prototype=n.prototype,t.G=n.prototype,t.prototype=new e,(t.prototype.constructor=t).F=function(t,e,i){for(var s=Array(arguments.length-2),r=2;r<arguments.length;r++)s[r-2]=arguments[r];return n.prototype[e].apply(t,s)}}var U=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function s(t,e){return-1!=t.indexOf(e)}function q(t,e){return t<e?-1:e<t?1:0}var e,j=Array.prototype.indexOf?function(t,e,i){return Array.prototype.indexOf.call(t,e,i)}:function(t,e,i){if(i=null==i?0:i<0?Math.max(0,t.length+i):i,c(t))return c(e)&&1==e.length?t.indexOf(e,i):-1;for(;i<t.length;i++)if(i in t&&t[i]===e)return i;return-1},l=Array.prototype.forEach?function(t,e,i){Array.prototype.forEach.call(t,e,i)}:function(t,e,i){for(var s=t.length,r=c(t)?t.split(""):t,n=0;n<s;n++)n in r&&e.call(i,r[n],n,t)},H=Array.prototype.filter?function(t,e,i){return Array.prototype.filter.call(t,e,i)}:function(t,e,i){for(var s,r=t.length,n=[],a=0,o=c(t)?t.split(""):t,l=0;l<r;l++)l in o&&(s=o[l],e.call(i,s,l,t)&&(n[a++]=s));return n},r=Array.prototype.reduce?function(t,e,i,s){return s&&(e=F(e,s)),Array.prototype.reduce.call(t,e,i)}:function(i,s,t,r){var n=t;return l(i,function(t,e){n=s.call(r,n,t,e,i)}),n},G=Array.prototype.some?function(t,e,i){return Array.prototype.some.call(t,e,i)}:function(t,e,i){for(var s=t.length,r=c(t)?t.split(""):t,n=0;n<s;n++)if(n in r&&e.call(i,r[n],n,t))return!0;return!1};t:{var i=a.navigator;if(i){i=i.userAgent;if(i){e=i;break t}}e=""}var V,W=s(e,"Opera")||s(e,"OPR"),o=s(e,"Trident")||s(e,"MSIE"),X=s(e,"Edge"),z=s(e,"Gecko")&&!(s(e.toLowerCase(),"webkit")&&!s(e,"Edge"))&&!(s(e,"Trident")||s(e,"MSIE"))&&!s(e,"Edge"),K=s(e.toLowerCase(),"webkit")&&!s(e,"Edge");function J(){var t=a.document;return t?t.documentMode:void 0}t:{var Y="",n=(n=e,z?/rv\:([^\);]+)(\)|;)/.exec(n):X?/Edge\/([\d\.]+)/.exec(n):o?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):K?/WebKit\/(\S+)/.exec(n):W?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(n&&(Y=n?n[1]:""),o){n=J();if(null!=n&&n>parseFloat(Y)){V=String(n);break t}}V=Y}var $={};function Q(t){if(!$[t]){for(var e=0,i=U(String(V)).split("."),s=U(String(t)).split("."),r=Math.max(i.length,s.length),n=0;0==e&&n<r;n++){var a=i[n]||"",o=s[n]||"",l=/(\d*)(\D*)/g,c=/(\d*)(\D*)/g;do{var h=l.exec(a)||["","",""],d=c.exec(o)||["","",""]}while((0!=h[0].length||0!=d[0].length)&&0==(e=q(0==h[1].length?0:parseInt(h[1],10),0==d[1].length?0:parseInt(d[1],10))||q(0==h[2].length,0==d[2].length)||q(h[2],d[2])))}$[t]=0<=e}}var Z=a.document,tt=Z&&o?J()||("CSS1Compat"==Z.compatMode?parseInt(V,10):5):void 0,h=o&&!(9<=Number(tt)),et=o&&!(8<=Number(tt));function d(t,e,i,s){this.a=t,this.nodeName=i,this.nodeValue=s,this.nodeType=2,this.parentNode=this.ownerElement=e}function it(t,e){var i=et&&"href"==e.nodeName?t.getAttribute(e.nodeName,2):e.nodeValue;return new d(e,t,e.nodeName,i)}function u(t){var e=null;if("string"!=typeof(e=1==(i=t.nodeType)?null==(e=null==(e=t.textContent)||null==e?t.innerText:e)||null==e?"":e:e))if(h&&"title"==t.nodeName.toLowerCase()&&1==i)e=t.text;else if(9==i||1==i){t=9==i?t.documentElement:t.firstChild;for(var i=0,s=[],e="";t;){for(;1!=t.nodeType&&(e+=t.nodeValue),h&&"title"==t.nodeName.toLowerCase()&&(e+=t.text),t=(s[i++]=t).firstChild;);for(;i&&!(t=s[--i].nextSibling););}}else e=t.nodeValue;return""+e}function p(t,e,i){if(null===e)return!0;try{if(!t.getAttribute)return!1}catch(t){return!1}return et&&"class"==e&&(e="className"),null==i?!!t.getAttribute(e):t.getAttribute(e,2)==i}function st(t,e,i,s,r){return(h?function(t,e,i,s,r){if(t instanceof S||8==t.b||i&&null===t.b){var n=e.all;if(!n)return r;if("*"!=(t=at(t))&&!(n=e.getElementsByTagName(t)))return r;if(i){for(var a=[],o=0;e=n[o++];)p(e,i,s)&&a.push(e);n=a}for(o=0;e=n[o++];)"*"==t&&"!"==e.tagName||g(r,e);return r}return nt(t,e,i,s,r),r}:function(e,t,i,s,r){return t.getElementsByName&&s&&"name"==i&&!o?(t=t.getElementsByName(s),l(t,function(t){e.a(t)&&g(r,t)})):t.getElementsByClassName&&s&&"class"==i?(t=t.getElementsByClassName(s),l(t,function(t){t.className==s&&e.a(t)&&g(r,t)})):e instanceof C?nt(e,t,i,s,r):t.getElementsByTagName&&(t=t.getElementsByTagName(e.f()),l(t,function(t){p(t,i,s)&&g(r,t)})),r}).call(null,t,e,c(i)?i:null,c(s)?s:null,r||new m)}function rt(t,e,i,s,r){for(e=e.firstChild;e;e=e.nextSibling)p(e,i,s)&&t.a(e)&&g(r,e);return r}function nt(t,e,i,s,r){for(e=e.firstChild;e;e=e.nextSibling)p(e,i,s)&&t.a(e)&&g(r,e),nt(t,e,i,s,r)}function at(t){if(t instanceof C){if(8==t.b)return"!";if(null===t.b)return"*"}return t.f()}function ot(t,e){if(t&&e){if(t.contains&&1==e.nodeType)return t==e||t.contains(e);if(void 0!==t.compareDocumentPosition)return t==e||16&t.compareDocumentPosition(e);for(;e&&t!=e;)e=e.parentNode;return e==t}}function lt(t,e){if(t==e)return 0;if(t.compareDocumentPosition)return 2&t.compareDocumentPosition(e)?1:-1;if(o&&!(9<=Number(tt))){if(9==t.nodeType)return-1;if(9==e.nodeType)return 1}if("sourceIndex"in t||t.parentNode&&"sourceIndex"in t.parentNode){var i=1==t.nodeType,s=1==e.nodeType;if(i&&s)return t.sourceIndex-e.sourceIndex;var r=t.parentNode,n=e.parentNode;return r==n?ht(t,e):!i&&ot(r,e)?-1*ct(t,e):!s&&ot(n,t)?ct(e,t):(i?t:r).sourceIndex-(s?e:n).sourceIndex}return(i=(s=9==t.nodeType?t:t.ownerDocument||t.document).createRange()).selectNode(t),i.collapse(!0),(s=s.createRange()).selectNode(e),s.collapse(!0),i.compareBoundaryPoints(a.Range.START_TO_END,s)}function ct(t,e){var i=t.parentNode;if(i==e)return-1;for(var s=e;s.parentNode!=i;)s=s.parentNode;return ht(s,t)}function ht(t,e){for(var i=e;i=i.previousSibling;)if(i==t)return-1;return 1}function m(){this.b=this.a=null,this.l=0}function dt(t){this.node=t,this.a=this.b=null}function ut(t,e){if(!t.a)return e;if(!e.a)return t;for(var i=t.a,s=e.a,r=null,n=null,a=0;i&&s;){var n=i.node,o=s.node;n==o||n instanceof d&&o instanceof d&&n.a==o.a?(i=(n=i).a,s=s.a):0<lt(i.node,s.node)?s=(n=s).a:i=(n=i).a,(n.b=r)?r.a=n:t.a=n,r=n,a++}for(n=i||s;n;)n.b=r,a++,n=(r=r.a=n).a;return t.b=r,t.l=a,t}function pt(t,e){e=new dt(e);e.a=t.a,t.b?t.a.b=e:t.a=t.b=e,t.a=e,t.l++}function g(t,e){e=new dt(e);e.b=t.b,t.a?t.b.a=e:t.a=t.b=e,t.b=e,t.l++}function mt(t){return(t=t.a)?t.node:null}function gt(t){return(t=mt(t))?u(t):""}function f(t,e){return new ft(t,!!e)}function ft(t,e){this.f=t,this.b=(this.c=e)?t.b:t.a,this.a=null}function b(t){var e=t.b;if(null==e)return null;var i=t.a=e;return t.b=t.c?e.b:e.a,i.node}function E(t){this.i=t,this.b=this.g=!1,this.f=null}function N(t){return"\n  "+t.toString().split("\n").join("\n  ")}function bt(t,e){t.g=e}function Et(t,e){t.b=e}function y(t,e){t=t.a(e);return t instanceof m?+gt(t):+t}function x(t,e){t=t.a(e);return t instanceof m?gt(t):""+t}function A(t,e){t=t.a(e);return t instanceof m?!!t.l:!!t}function Nt(t,e,i){E.call(this,t.i),this.c=t,this.h=e,this.o=i,this.g=e.g||i.g,this.b=e.b||i.b,this.c==At&&(i.b||i.g||4==i.i||0==i.i||!e.f?e.b||e.g||4==e.i||0==e.i||!i.f||(this.f={name:i.f.name,s:e}):this.f={name:e.f.name,s:i})}function v(t,e,i,s,r){var n;if(e=e.a(s),i=i.a(s),e instanceof m&&i instanceof m){for(s=b(e=f(e));s;s=b(e))for(n=b(r=f(i));n;n=b(r))if(t(u(s),u(n)))return!0;return!1}if(e instanceof m||i instanceof m){for(var a=typeof(s=e instanceof m?(r=e,i):(r=i,e)),o=b(n=f(r));o;o=b(n)){switch(a){case"number":o=+u(o);break;case"boolean":o=!!u(o);break;case"string":o=u(o);break;default:throw Error("Illegal primitive type for comparison.")}if(r==e&&t(o,s)||r==i&&t(s,o))return!0}return!1}return r?"boolean"==typeof e||"boolean"==typeof i?t(!!e,!!i):"number"==typeof e||"number"==typeof i?t(+e,+i):t(e,i):t(+e,+i)}function yt(t,e,i,s){this.a=t,this.w=e,this.i=i,this.m=s}!z&&!o||o&&9<=Number(tt)||z&&Q("1.9.1"),o&&Q("9"),t(Nt),Nt.prototype.a=function(t){return this.c.m(this.h,this.o,t)},Nt.prototype.toString=function(){return"Binary Expression: "+this.c+N(this.h)+N(this.o)},yt.prototype.toString=function(){return this.a};var xt={};function _(t,e,i,s){if(xt.hasOwnProperty(t))throw Error("Binary operator already created: "+t);return t=new yt(t,e,i,s),xt[t.toString()]=t}_("div",6,1,function(t,e,i){return y(t,i)/y(e,i)}),_("mod",6,1,function(t,e,i){return y(t,i)%y(e,i)}),_("*",6,1,function(t,e,i){return y(t,i)*y(e,i)}),_("+",5,1,function(t,e,i){return y(t,i)+y(e,i)}),_("-",5,1,function(t,e,i){return y(t,i)-y(e,i)}),_("<",4,2,function(t,e,i){return v(function(t,e){return t<e},t,e,i)}),_(">",4,2,function(t,e,i){return v(function(t,e){return e<t},t,e,i)}),_("<=",4,2,function(t,e,i){return v(function(t,e){return t<=e},t,e,i)}),_(">=",4,2,function(t,e,i){return v(function(t,e){return e<=t},t,e,i)});var At=_("=",3,2,function(t,e,i){return v(function(t,e){return t==e},t,e,i,!0)});function T(t,e,i){this.a=t,this.b=e||1,this.f=i||1}function vt(t,e){if(e.a.length&&4!=t.i)throw Error("Primary expression must evaluate to nodeset if filter has predicate(s).");E.call(this,t.i),this.c=t,this.h=e,this.g=t.g,this.b=t.b}function _t(i,t){if(t.length<i.A)throw Error("Function "+i.j+" expects at least"+i.A+" arguments, "+t.length+" given");if(null!==i.v&&t.length>i.v)throw Error("Function "+i.j+" expects at most "+i.v+" arguments, "+t.length+" given");i.B&&l(t,function(t,e){if(4!=t.i)throw Error("Argument "+e+" to function "+i.j+" is not of type Nodeset: "+t)}),E.call(this,i.i),this.h=i,this.c=t,bt(this,i.g||G(t,function(t){return t.g})),Et(this,i.D&&!t.length||i.C&&!!t.length||G(t,function(t){return t.b}))}function Tt(t,e,i,s,r,n,a,o,l){this.j=t,this.i=e,this.g=i,this.D=s,this.C=r,this.m=n,this.A=a,this.v=void 0!==o?o:a,this.B=!!l}_("!=",3,2,function(t,e,i){return v(function(t,e){return t!=e},t,e,i,!0)}),_("and",2,2,function(t,e,i){return A(t,i)&&A(e,i)}),_("or",1,2,function(t,e,i){return A(t,i)||A(e,i)}),t(vt),vt.prototype.a=function(t){return t=this.c.a(t),Ut(this.h,t)},vt.prototype.toString=function(){return"Filter:"+N(this.c)+N(this.h)},t(_t),_t.prototype.a=function(t){return this.h.m.apply(null,function(){return Array.prototype.concat.apply(Array.prototype,arguments)}(t,this.c))},_t.prototype.toString=function(){var t,e="Function: "+this.h;return this.c.length&&(t=r(this.c,function(t,e){return t+N(e)},"Arguments:"),e+=N(t)),e};var wt={};function w(t,e,i,s,r,n,a,o){if(wt.hasOwnProperty(t))throw Error("Function already created: "+t+".");wt[t]=new Tt(t,e,i,s,!1,r,n,a,o)}function C(t,e){switch(this.h=t,this.c=void 0!==e?e:null,this.b=null,t){case"comment":this.b=8;break;case"text":this.b=3;break;case"processing-instruction":this.b=7;break;case"node":break;default:throw Error("Unexpected argument")}}function Ct(t){return"comment"==t||"text"==t||"processing-instruction"==t||"node"==t}function It(t){this.b=t,this.a=0}w("boolean",2,!(Tt.prototype.toString=function(){return this.j}),!1,function(t,e){return A(e,t)},1),w("ceiling",1,!1,!1,function(t,e){return Math.ceil(y(e,t))},1),w("concat",3,!1,!1,function(i,t){return r(function(t){return arguments.length<=2?Array.prototype.slice.call(t,1):Array.prototype.slice.call(t,1,void 0)}(arguments,1),function(t,e){return t+x(e,i)},"")},2,null),w("contains",2,!1,!1,function(t,e,i){return s(x(e,t),x(i,t))},2),w("count",1,!1,!1,function(t,e){return e.a(t).l},1,1,!0),w("false",2,!1,!1,function(){return!1},0),w("floor",1,!1,!1,function(t,e){return Math.floor(y(e,t))},1),w("id",4,!1,!1,function(t,e){var o=9==(i=t.a).nodeType?i:i.ownerDocument,i=x(e,t).split(/\s+/),s=[],r=(l(i,function(t){!(t=function(e){if(h){var t=o.all[e];if(t){if(t.nodeType&&e==t.id)return t;if(t.length){var i=t;var s=function(t){return e==t.id};t:{for(var r=i.length,n=c(i)?i.split(""):i,a=0;a<r;a++)if(a in n&&s.call(void 0,n[a],a,i)){r=a;break t}r=-1}return r<0?null:c(i)?i.charAt(r):i[r];return}}return null}return o.getElementById(e)}(t))||0<=j(s,t)||s.push(t)}),s.sort(lt),new m);return l(s,function(t){g(r,t)}),r},1),w("lang",2,!1,!1,function(){return!1},1),w("last",1,!0,!1,function(t){if(1!=arguments.length)throw Error("Function last expects ()");return t.f},0),w("local-name",3,!1,!0,function(t,e){e=e?mt(e.a(t)):t.a;return e?e.localName||e.nodeName.toLowerCase():""},0,1,!0),w("name",3,!1,!0,function(t,e){e=e?mt(e.a(t)):t.a;return e?e.nodeName.toLowerCase():""},0,1,!0),w("namespace-uri",3,!0,!1,function(){return""},0,1,!0),w("normalize-space",3,!1,!0,function(t,e){return(e?x(e,t):u(t.a)).replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},0,1),w("not",2,!1,!1,function(t,e){return!A(e,t)},1),w("number",1,!1,!0,function(t,e){return e?y(e,t):+u(t.a)},0,1),w("position",1,!0,!1,function(t){return t.b},0),w("round",1,!1,!1,function(t,e){return Math.round(y(e,t))},1),w("starts-with",2,!1,!1,function(t,e,i){return e=x(e,t),t=x(i,t),0==e.lastIndexOf(t,0)},2),w("string",3,!1,!0,function(t,e){return e?x(e,t):u(t.a)},0,1),w("string-length",1,!1,!0,function(t,e){return(e?x(e,t):u(t.a)).length},0,1),w("substring",3,!1,!1,function(t,e,i,s){if(i=y(i,t),isNaN(i)||1/0==i||-1/0==i)return"";if(s=s?y(s,t):1/0,isNaN(s)||-1/0===s)return"";i=Math.round(i)-1;var r=Math.max(i,0);return t=x(e,t),1/0==s?t.substring(r):t.substring(r,i+Math.round(s))},2,3),w("substring-after",3,!1,!1,function(t,e,i){return e=x(e,t),t=x(i,t),-1==(i=e.indexOf(t))?"":e.substring(i+t.length)},2),w("substring-before",3,!1,!1,function(t,e,i){return e=x(e,t),t=x(i,t),-1==(t=e.indexOf(t))?"":e.substring(0,t)},2),w("sum",1,!1,!1,function(t,e){for(var i=f(e.a(t)),s=0,r=b(i);r;r=b(i))s+=+u(r);return s},1,1,!0),w("translate",3,!1,!1,function(t,e,i,s){e=x(e,t),i=x(i,t);var r=x(s,t);for(t={},s=0;s<i.length;s++){var n=i.charAt(s);n in t||(t[n]=r.charAt(s))}for(i="",s=0;s<e.length;s++)i+=(n=e.charAt(s))in t?t[n]:n;return i},3),w("true",2,!1,!1,function(){return!0},0),C.prototype.a=function(t){return null===this.b||this.b==t.nodeType},C.prototype.f=function(){return this.h},C.prototype.toString=function(){var t="Kind Test: "+this.h;return null!==this.c&&(t+=N(this.c)),t};var Lt=/\$?(?:(?![0-9-\.])(?:\*|[\w-\.]+):)?(?![0-9-\.])(?:\*|[\w-\.]+)|\/\/|\.\.|::|\d+(?:\.\d*)?|\.\d+|"[^"]*"|'[^']*'|[!<>]=|\s+|./g,St=/^\s/;function I(t,e){return t.b[t.a+(e||0)]}function L(t){return t.b[t.a++]}function kt(t){return t.b.length<=t.a}function Rt(t){E.call(this,3),this.c=t.substring(1,t.length-1)}function S(t,e){this.j=t.toLowerCase(),t="*"==this.j?"*":"http://www.w3.org/1999/xhtml",this.c=e?e.toLowerCase():t}function Ot(t,e){E.call(this,t.i),this.h=t,this.c=e,this.g=t.g,this.b=t.b,1!=this.c.length||(e=this.c[0]).u||e.c!=Ht||"*"!=(e=e.o).f()&&(this.f={name:e.f(),s:null})}function Mt(){E.call(this,4)}function Dt(){E.call(this,4)}function Pt(t){return"/"==t||"//"==t}function Bt(t){E.call(this,4),this.c=t,bt(this,G(this.c,function(t){return t.g})),Et(this,G(this.c,function(t){return t.b}))}function Ft(t,e){this.a=t,this.b=!!e}function Ut(t,e,i){for(i=i||0;i<t.a.length;i++)for(var s,r=t.a[i],n=f(e),a=e.l,o=0;s=b(n);o++){var l=t.b?a-o:o+1;if("number"==typeof(s=r.a(new T(s,l,a))))l=l==s;else if("string"==typeof s||"boolean"==typeof s)l=!!s;else{if(!(s instanceof m))throw Error("Predicate.evaluate returned an unexpected type.");l=0<s.l}if(!l){if(s=(l=n).f,!(h=l.a))throw Error("Next must be called at least once before remove.");var c=h.b,h=h.a;c?c.a=h:s.a=h,h?h.b=c:s.b=c,s.l--,l.a=null}}return e}function k(t,e,i,s){E.call(this,4),this.c=t,this.o=e,this.h=i||new Ft([]),this.u=!!s,e=0<(e=this.h).a.length?e.a[0].f:null,t.b&&e&&(t=e.name,t=h?t.toLowerCase():t,this.f={name:t,s:e.s});t:{for(t=this.h,e=0;e<t.a.length;e++)if((i=t.a[e]).g||1==i.i||0==i.i){t=!0;break t}t=!1}this.g=t}function qt(t,e,i,s){this.j=t,this.f=e,this.a=i,this.b=s}t(Rt),Rt.prototype.a=function(){return this.c},Rt.prototype.toString=function(){return"Literal: "+this.c},S.prototype.a=function(t){var e=t.nodeType;return!(1!=e&&2!=e||(e=void 0!==t.localName?t.localName:t.nodeName,"*"!=this.j&&this.j!=e.toLowerCase()||"*"!=this.c&&this.c!=(t.namespaceURI?t.namespaceURI.toLowerCase():"http://www.w3.org/1999/xhtml")))},S.prototype.f=function(){return this.j},S.prototype.toString=function(){return"Name Test: "+("http://www.w3.org/1999/xhtml"==this.c?"":this.c+":")+this.j},t(Ot),t(Mt),Mt.prototype.a=function(t){var e=new m;return 9==(t=t.a).nodeType?g(e,t):g(e,t.ownerDocument),e},Mt.prototype.toString=function(){return"Root Helper Expression"},t(Dt),Dt.prototype.a=function(t){var e=new m;return g(e,t.a),e},Dt.prototype.toString=function(){return"Context Helper Expression"},Ot.prototype.a=function(t){var e=this.h.a(t);if(!(e instanceof m))throw Error("Filter expression must evaluate to nodeset.");for(var i=0,s=(t=this.c).length;i<s&&e.l;i++){var r,n=t[i],a=f(e,n.c.a);if(n.g||n.c!=Wt)if(n.g||n.c!=zt)for(r=b(a),e=n.a(new T(r));null!=(r=b(a));)e=ut(e,r=n.a(new T(r)));else r=b(a),e=n.a(new T(r));else{for(r=b(a);(e=b(a))&&(!r.contains||r.contains(e))&&8&e.compareDocumentPosition(r);r=e);e=n.a(new T(r))}}return e},Ot.prototype.toString=function(){var t,e="Path Expression:"+N(this.h);return this.c.length&&(t=r(this.c,function(t,e){return t+N(e)},"Steps:"),e+=N(t)),e},t(Bt),Bt.prototype.a=function(e){var i=new m;return l(this.c,function(t){if(!((t=t.a(e))instanceof m))throw Error("Path expression must evaluate to NodeSet.");i=ut(i,t)}),i},Bt.prototype.toString=function(){return r(this.c,function(t,e){return t+N(e)},"Union Expression:")},Ft.prototype.toString=function(){return r(this.a,function(t,e){return t+N(e)},"Predicates:")},t(k),k.prototype.a=function(t){var e=t.a,i=null,s=null,r=null,n=0;if((i=this.f)&&(s=i.name,r=i.s?x(i.s,t):null,n=1),this.u)if(this.g||this.c!=Gt)if(e=b(t=f(new k(Vt,new C("node")).a(t))))for(i=this.m(e,s,r,n);null!=(e=b(t));)i=ut(i,this.m(e,s,r,n));else i=new m;else i=st(this.o,e,s,r),i=Ut(this.h,i,n);else i=this.m(t.a,s,r,n);return i},k.prototype.m=function(t,e,i,s){return t=this.c.f(this.o,t,e,i),Ut(this.h,t,s)},k.prototype.toString=function(){var t,e="Step:"+N("Operator: "+(this.u?"//":"/"));return this.c.j&&(e+=N("Axis: "+this.c)),e+=N(this.o),this.h.a.length&&(t=r(this.h.a,function(t,e){return t+N(e)},"Predicates:"),e+=N(t)),e},qt.prototype.toString=function(){return this.j};var jt={};function R(t,e,i,s){if(jt.hasOwnProperty(t))throw Error("Axis already created: "+t);return e=new qt(t,e,i,!!s),jt[t]=e}R("ancestor",function(t,e){for(var i=new m,s=e;s=s.parentNode;)t.a(s)&&pt(i,s);return i},!0),R("ancestor-or-self",function(t,e){for(var i=new m,s=e;t.a(s)&&pt(i,s),s=s.parentNode;);return i},!0);var Ht=R("attribute",function(t,e){var i=new m;if("style"==(n=t.f())&&h&&e.style)return g(i,new d(e.style,e,"style",e.style.cssText)),i;var s=e.attributes;if(s)if(t instanceof C&&null===t.b||"*"==n)for(var r,n=0;r=s[n];n++)h?r.nodeValue&&g(i,it(e,r)):g(i,r);else(r=s.getNamedItem(n))&&(h?r.nodeValue&&g(i,it(e,r)):g(i,r));return i},!1),Gt=R("child",function(t,e,i,s,r){return(h?function(t,e,i,s,r){var n,a;return(t instanceof S||8==t.b||i&&null===t.b)&&(n=e.childNodes)?("*"!=(a=at(t))&&!(n=H(n,function(t){return t.tagName&&t.tagName.toLowerCase()==a}))||(i&&(n=H(n,function(t){return p(t,i,s)})),l(n,function(t){"*"==a&&("!"==t.tagName||"*"==a&&1!=t.nodeType)||g(r,t)})),r):rt(t,e,i,s,r)}:rt).call(null,t,e,c(i)?i:null,c(s)?s:null,r||new m)},!1,!0),Vt=(R("descendant",st,!1,!0),R("descendant-or-self",function(t,e,i,s){var r=new m;return p(e,i,s)&&t.a(e)&&g(r,e),st(t,e,i,s,r)},!1,!0)),Wt=R("following",function(t,e,i,s){var r=new m;do{for(var n=e;n=n.nextSibling;)p(n,i,s)&&t.a(n)&&g(r,n),r=st(t,n,i,s,r)}while(e=e.parentNode);return r},!1,!0),Xt=(R("following-sibling",function(t,e){for(var i=new m,s=e;s=s.nextSibling;)t.a(s)&&g(i,s);return i},!1),R("namespace",function(){return new m},!1),R("parent",function(t,e){var i=new m;if(9==e.nodeType)return i;if(2==e.nodeType)return g(i,e.ownerElement),i;e=e.parentNode;return t.a(e)&&g(i,e),i},!1)),zt=R("preceding",function(t,e,i,s){for(var r=new m,n=[];n.unshift(e),e=e.parentNode;);for(var a=1,o=n.length;a<o;a++){var l=[];for(e=n[a];e=e.previousSibling;)l.unshift(e);for(var c=0,h=l.length;c<h;c++)p(e=l[c],i,s)&&t.a(e)&&g(r,e),r=st(t,e,i,s,r)}return r},!0,!0),Kt=(R("preceding-sibling",function(t,e){for(var i=new m,s=e;s=s.previousSibling;)t.a(s)&&pt(i,s);return i},!0),R("self",function(t,e){var i=new m;return t.a(e)&&g(i,e),i},!1));function Jt(t){E.call(this,1),this.c=t,this.g=t.g,this.b=t.b}function Yt(t){E.call(this,1),this.c=t}function $t(t,e){this.a=t,this.b=e}function Qt(t){for(var e=[];;){O(t,"Missing right hand side of binary expression.");var i=function t(e){if("-"==I(e.a))return L(e.a),new Jt(t(e));var i=ie(e);if("|"!=I(e.a))e=i;else{for(i=[i];"|"==L(e.a);)O(e,"Missing next union location path."),i.push(ie(e));e.a.a--,e=new Bt(i)}return e}(t),s=L(t.a);if(!s)break;var r=(s=xt[s]||null)&&s.w;if(!r){t.a.a--;break}for(;e.length&&r<=e[e.length-1].w;)i=new Nt(e.pop(),e.pop(),i);e.push(i,s)}for(;e.length;)i=new Nt(e.pop(),e.pop(),i);return i}function O(t,e){if(kt(t.a))throw Error(e)}function Zt(t,e){t=L(t.a);if(t!=e)throw Error("Bad token, expected: "+e+" got: "+t)}function te(t){if(")"!=(t=L(t.a)))throw Error("Bad token: "+t)}function ee(t){if((t=L(t.a)).length<2)throw Error("Unclosed literal string");return new Rt(t)}function ie(t){var e,i,s=[];if(Pt(I(t.a))){if(e=L(t.a),i=I(t.a),"/"==e&&(kt(t.a)||"."!=i&&".."!=i&&"@"!=i&&"*"!=i&&!/(?![0-9])[\w]/.test(i)))return new Mt;i=new Mt,O(t,"Missing next location step."),e=se(t,e),s.push(e)}else{t:{switch(i=(e=I(t.a)).charAt(0)){case"$":throw Error("Variable reference not allowed in HTML XPath");case"(":L(t.a),e=Qt(t),O(t,'unclosed "("'),Zt(t,")");break;case'"':case"'":e=ee(t);break;default:if(isNaN(+e)){if(Ct(e)||!/(?![0-9])[\w]/.test(i)||"("!=I(t.a,1)){e=null;break t}for(e=L(t.a),e=wt[e]||null,L(t.a),i=[];")"!=I(t.a)&&(O(t,"Missing function argument list."),i.push(Qt(t)),","==I(t.a));)L(t.a);O(t,"Unclosed function argument list."),te(t),e=new _t(e,i)}else e=new Yt(+L(t.a))}"["==I(t.a)&&(e=new vt(e,i=new Ft(re(t))))}if(e){if(!Pt(I(t.a)))return e;i=e}else e=se(t,"/"),i=new Dt,s.push(e)}for(;Pt(I(t.a));)e=L(t.a),O(t,"Missing next location step."),e=se(t,e),s.push(e);return new Ot(i,s)}function se(t,e){var i,s,r,n,a;if("/"!=e&&"//"!=e)throw Error('Step op should be "/" or "//"');if("."==I(t.a))return s=new k(Kt,new C("node")),L(t.a),s;if(".."==I(t.a))return s=new k(Xt,new C("node")),L(t.a),s;if("@"==I(t.a))n=Ht,L(t.a),O(t,"Missing attribute name");else if("::"==I(t.a,1)){if(!/(?![0-9])[\w]/.test(I(t.a).charAt(0)))throw Error("Bad token: "+L(t.a));if(i=L(t.a),!(n=jt[i]||null))throw Error("No axis with name: "+i);L(t.a),O(t,"Missing node name")}else n=Gt;if(i=I(t.a),!/(?![0-9])[\w\*]/.test(i.charAt(0)))throw Error("Bad token: "+L(t.a));if("("==I(t.a,1)){if(!Ct(i))throw Error("Invalid node type: "+i);if(!Ct(i=L(t.a)))throw Error("Invalid type name: "+i);Zt(t,"("),O(t,"Bad nodetype");var o=null;'"'!=(r=I(t.a).charAt(0))&&"'"!=r||(o=ee(t)),O(t,"Bad nodetype"),te(t),i=new C(i,o)}else if(-1==(r=(i=L(t.a)).indexOf(":")))i=new S(i);else{if("*"==(o=i.substring(0,r)))a="*";else if(!(a=t.b(o)))throw Error("Namespace prefix not declared: "+o);i=new S(i=i.substr(r+1),a)}return r=new Ft(re(t),n.a),s||new k(n,i,r,"//"==e)}function re(t){for(var e=[];"["==I(t.a);){L(t.a),O(t,"Missing predicate expression.");var i=Qt(t);e.push(i),O(t,"Unclosed predicate expression."),Zt(t,"]")}return e}function ne(){return null}function ae(t,e){if(t.prefix==e)return t.namespaceURI||"http://www.w3.org/1999/xhtml";var i=t.getAttributeNode("xmlns:"+e);return i&&i.specified?i.value||null:t.parentNode&&9!=t.parentNode.nodeType?ae(t.parentNode,e):null}function oe(t,e){if(!t.length)throw Error("Empty XPath expression.");t=function(t){t=t.match(Lt);for(var e=0;e<t.length;e++)St.test(t[e])&&t.splice(e,1);return new It(t)}(t);if(kt(t))throw Error("Invalid XPath expression.");e?"function"!=function(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var i=Object.prototype.toString.call(t);if("[object Window]"==i)return"object";if("[object Array]"==i||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==i||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}(e)&&(e=F(e.lookupNamespaceURI,e)):e=function(){return null};var i=Qt(new $t(t,e));if(!kt(t))throw Error("Bad token: "+L(t));this.evaluate=function(t,e){return new M(i.a(new T(t)),e)}}function M(t,e){if(0==e)if(t instanceof m)e=4;else if("string"==typeof t)e=2;else if("number"==typeof t)e=1;else{if("boolean"!=typeof t)throw Error("Unexpected evaluation result.");e=3}if(2!=e&&1!=e&&3!=e&&!(t instanceof m))throw Error("value could not be converted to the specified type");switch(this.resultType=e){case 2:this.stringValue=t instanceof m?gt(t):""+t;break;case 1:this.numberValue=t instanceof m?+gt(t):+t;break;case 3:this.booleanValue=t instanceof m?0<t.l:!!t;break;case 4:case 5:case 6:case 7:for(var i=f(t),s=[],r=b(i);r;r=b(i))s.push(r instanceof d?r.a:r);this.snapshotLength=t.l,this.invalidIteratorState=!1;break;case 8:case 9:i=mt(t),this.singleNodeValue=i instanceof d?i.a:i;break;default:throw Error("Unknown XPathResult type.")}var n=0;this.iterateNext=function(){if(4!=e&&5!=e)throw Error("iterateNext called with wrong result type");return n>=s.length?null:s[n++]},this.snapshotItem=function(t){if(6!=e&&7!=e)throw Error("snapshotItem called with wrong result type");return t>=s.length||t<0?null:s[t]}}function le(t){this.lookupNamespaceURI=function t(e){switch(e.nodeType){case 1:return function(e){var i=Array.prototype.slice.call(arguments,1);return function(){var t=i.slice();return t.push.apply(t,arguments),e.apply(this,t)}}(ae,e);case 9:return t(e.documentElement);case 11:case 10:case 6:case 12:return ne;default:return e.parentNode?t(e.parentNode):ne}}(t)}function ce(t,e){var t=t||a,i=t.Document&&t.Document.prototype||t.document;i.evaluate&&!e||(t.XPathResult=M,i.evaluate=function(t,e,i,s){return new oe(t,i).evaluate(e,s)},i.createExpression=function(t,e){return new oe(t,e)},i.createNSResolver=function(t){return new le(t)})}t(Jt),Jt.prototype.a=function(t){return-y(this.c,t)},Jt.prototype.toString=function(){return"Unary Expression: -"+N(this.c)},t(Yt),Yt.prototype.a=function(){return this.c},Yt.prototype.toString=function(){return"Number: "+this.c},M.ANY_TYPE=0,M.NUMBER_TYPE=1,M.STRING_TYPE=2,M.BOOLEAN_TYPE=3,M.UNORDERED_NODE_ITERATOR_TYPE=4,M.ORDERED_NODE_ITERATOR_TYPE=5,M.UNORDERED_NODE_SNAPSHOT_TYPE=6,M.ORDERED_NODE_SNAPSHOT_TYPE=7,M.ANY_UNORDERED_NODE_TYPE=8,M.FIRST_ORDERED_NODE_TYPE=9;var he,de=["wgxpath","install"],D=a;de[0]in D||!D.execScript||D.execScript("var "+de[0]);for(;de.length&&(he=de.shift());)de.length?D=D[he]||(D[he]={}):D[he]=ce;ue.exports.install=ce,ue.exports.XPathResultType={ANY_TYPE:0,NUMBER_TYPE:1,STRING_TYPE:2,BOOLEAN_TYPE:3,UNORDERED_NODE_ITERATOR_TYPE:4,ORDERED_NODE_ITERATOR_TYPE:5,UNORDERED_NODE_SNAPSHOT_TYPE:6,ORDERED_NODE_SNAPSHOT_TYPE:7,ANY_UNORDERED_NODE_TYPE:8,FIRST_ORDERED_NODE_TYPE:9}}.call(e.g)}},__webpack_module_cache__={},leafPrototypes,getProto;function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;e=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](e,e.exports,__webpack_require__),e.exports}getProto=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var i=Object.create(null),s=(__webpack_require__.r(i),{});leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var r=2&t&&e;"object"==typeof r&&!~leafPrototypes.indexOf(r);r=getProto(r))Object.getOwnPropertyNames(r).forEach(t=>s[t]=()=>e[t]);return s.default=()=>e,__webpack_require__.d(i,s),i},__webpack_require__.d=(t,e)=>{for(var i in e)__webpack_require__.o(e,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";var P={},B=(__webpack_require__.r(P),__webpack_require__.d(P,{GLOBAL:()=>Fs,MathJax:()=>Gs,combineConfig:()=>qs,combineDefaults:()=>js,combineWithMathJax:()=>Hs,isObject:()=>Us}),{}),F=(__webpack_require__.r(B),__webpack_require__.d(B,{context:()=>Ws,hasWindow:()=>Vs}),{}),U=(__webpack_require__.r(F),__webpack_require__.d(F,{Package:()=>zs,PackageError:()=>Xs}),{}),q=(__webpack_require__.r(U),__webpack_require__.d(U,{PrioritizedList:()=>Ks}),{}),j=(__webpack_require__.r(q),__webpack_require__.d(q,{FunctionList:()=>Js}),{}),H=(__webpack_require__.r(j),__webpack_require__.d(j,{CONFIG:()=>er,Loader:()=>Zs,MathJax:()=>tr,PathFilters:()=>$s}),{}),G=(__webpack_require__.r(H),__webpack_require__.d(H,{APPEND:()=>rr,Expandable:()=>or,OPTIONS:()=>ar,REMOVE:()=>nr,copy:()=>dr,defaultOptions:()=>pr,expandable:()=>lr,insert:()=>ur,isObject:()=>sr,keys:()=>hr,lookup:()=>br,makeArray:()=>cr,selectOptions:()=>gr,selectOptionsFromKeys:()=>function(t,e){return gr(t,...Object.keys(e))},separateOptions:()=>fr,userOptions:()=>mr}),{}),V=(__webpack_require__.r(G),__webpack_require__.d(G,{CONFIG:()=>yr,MathJax:()=>Nr,Startup:()=>r}),{}),W=(__webpack_require__.r(V),__webpack_require__.d(V,{AbstractDOMAdaptor:()=>Ar}),{}),X=(__webpack_require__.r(W),__webpack_require__.d(W,{HTMLAdaptor:()=>vr}),{}),z=(__webpack_require__.r(X),__webpack_require__.d(X,{browserAdaptor:()=>Tr}),{}),K=(__webpack_require__.r(z),__webpack_require__.d(z,{AbstractFindMath:()=>wr}),{}),t=(__webpack_require__.r(K),__webpack_require__.d(K,{AbstractInputJax:()=>Cr}),{}),J=(__webpack_require__.r(t),__webpack_require__.d(t,{AbstractOutputJax:()=>Ir}),{}),Y=(__webpack_require__.r(J),__webpack_require__.d(J,{END:()=>Lr,LinkedList:()=>kr,ListItem:()=>Sr}),{}),$=(__webpack_require__.r(Y),__webpack_require__.d(Y,{AbstractMathList:()=>Rr}),{}),Q=(__webpack_require__.r($),__webpack_require__.d($,{AbstractMathItem:()=>Mr,STATE:()=>u,newState:()=>Dr,protoItem:()=>Or}),{}),Z=(__webpack_require__.r(Q),__webpack_require__.d(Q,{AbstractFactory:()=>Pr}),{}),tt=(__webpack_require__.r(Z),__webpack_require__.d(Z,{AbstractNodeFactory:()=>Br}),{}),et=(__webpack_require__.r(tt),__webpack_require__.d(tt,{Attributes:()=>Ur,INHERIT:()=>Fr}),{}),it=(__webpack_require__.r(et),__webpack_require__.d(et,{AbstractEmptyNode:()=>jr,AbstractNode:()=>qr}),{}),st=(__webpack_require__.r(it),__webpack_require__.d(it,{AbstractMmlBaseNode:()=>Jr,AbstractMmlEmptyNode:()=>Yr,AbstractMmlLayoutNode:()=>Kr,AbstractMmlNode:()=>o,AbstractMmlTokenNode:()=>zr,MATHVARIANTS:()=>Wr,TEXCLASS:()=>h,TEXCLASSNAMES:()=>Hr,TextNode:()=>$r,XMLNode:()=>Qr,indentAttributes:()=>Xr}),{}),rt=(__webpack_require__.r(st),__webpack_require__.d(st,{MmlMath:()=>Zr}),{}),nt=(__webpack_require__.r(rt),__webpack_require__.d(rt,{MmlMi:()=>tn}),{}),at=(__webpack_require__.r(nt),__webpack_require__.d(nt,{MmlMn:()=>en}),{}),ot=(__webpack_require__.r(at),__webpack_require__.d(at,{MMLSPACING:()=>nn,MO:()=>s,OPDEF:()=>a,OPTABLE:()=>an,RANGES:()=>sn,getRange:()=>rn}),{}),lt=(__webpack_require__.r(ot),__webpack_require__.d(ot,{isPercent:()=>dn,quotePattern:()=>ln,replaceUnicode:()=>pn,sortLength:()=>on,split:()=>un,toEntity:()=>mn,unicodeChars:()=>cn,unicodeString:()=>hn}),{}),ct=(__webpack_require__.r(lt),__webpack_require__.d(lt,{MmlMo:()=>gn}),{}),ht=(__webpack_require__.r(ct),__webpack_require__.d(ct,{MmlMtext:()=>fn}),{}),dt=(__webpack_require__.r(ht),__webpack_require__.d(ht,{MmlMspace:()=>bn}),{}),ut=(__webpack_require__.r(dt),__webpack_require__.d(dt,{MmlMs:()=>En}),{}),pt=(__webpack_require__.r(ut),__webpack_require__.d(ut,{MmlInferredMrow:()=>yn,MmlMrow:()=>Nn}),{}),mt=(__webpack_require__.r(pt),__webpack_require__.d(pt,{MmlMfrac:()=>xn}),{}),gt=(__webpack_require__.r(mt),__webpack_require__.d(mt,{MmlMsqrt:()=>An}),{}),ft=(__webpack_require__.r(gt),__webpack_require__.d(gt,{MmlMroot:()=>vn}),{}),bt=(__webpack_require__.r(ft),__webpack_require__.d(ft,{MmlMstyle:()=>_n}),{}),Et=(__webpack_require__.r(bt),__webpack_require__.d(bt,{MmlMerror:()=>Tn}),{}),Nt=(__webpack_require__.r(Et),__webpack_require__.d(Et,{MmlMpadded:()=>wn}),{}),yt=(__webpack_require__.r(Nt),__webpack_require__.d(Nt,{MmlMphantom:()=>Cn}),{}),xt=(__webpack_require__.r(yt),__webpack_require__.d(yt,{MmlMfenced:()=>In}),{}),At=(__webpack_require__.r(xt),__webpack_require__.d(xt,{MmlMenclose:()=>Ln}),{}),vt=(__webpack_require__.r(At),__webpack_require__.d(At,{MmlMaction:()=>Sn}),{}),_t=(__webpack_require__.r(vt),__webpack_require__.d(vt,{MmlMsub:()=>Rn,MmlMsubsup:()=>kn,MmlMsup:()=>On}),{}),Tt=(__webpack_require__.r(_t),__webpack_require__.d(_t,{MmlMover:()=>Pn,MmlMunder:()=>Dn,MmlMunderover:()=>Mn}),{}),wt=(__webpack_require__.r(Tt),__webpack_require__.d(Tt,{MmlMmultiscripts:()=>Bn,MmlMprescripts:()=>Fn,MmlNone:()=>Un}),{}),Ct=(__webpack_require__.r(wt),__webpack_require__.d(wt,{MmlMtable:()=>qn}),{}),It=(__webpack_require__.r(Ct),__webpack_require__.d(Ct,{MmlMlabeledtr:()=>Hn,MmlMtr:()=>jn}),{}),Lt=(__webpack_require__.r(It),__webpack_require__.d(It,{MmlMtd:()=>Gn}),{}),St=(__webpack_require__.r(Lt),__webpack_require__.d(Lt,{MmlMaligngroup:()=>Vn}),{}),kt=(__webpack_require__.r(St),__webpack_require__.d(St,{MmlMalignmark:()=>Wn}),{}),Rt=(__webpack_require__.r(kt),__webpack_require__.d(kt,{MmlMglyph:()=>Xn}),{}),Ot=(__webpack_require__.r(Rt),__webpack_require__.d(Rt,{MmlAnnotation:()=>Jn,MmlAnnotationXML:()=>Kn,MmlSemantics:()=>zn}),{}),Mt=(__webpack_require__.r(Ot),__webpack_require__.d(Ot,{TeXAtom:()=>Yn}),{}),Dt=(__webpack_require__.r(Mt),__webpack_require__.d(Mt,{MathChoice:()=>$n}),{}),Pt=(__webpack_require__.r(Dt),__webpack_require__.d(Dt,{HtmlNode:()=>Qn}),{}),Bt=(__webpack_require__.r(Pt),__webpack_require__.d(Pt,{MML:()=>Zn}),{}),Ft=(__webpack_require__.r(Bt),__webpack_require__.d(Bt,{MmlFactory:()=>ta}),{}),Ut=(__webpack_require__.r(Ft),__webpack_require__.d(Ft,{BitField:()=>ea,BitFieldClass:()=>ia}),{}),qt=(__webpack_require__.r(Ut),__webpack_require__.d(Ut,{handleRetriesFor:()=>sa,retryAfter:()=>ra}),{}),jt=(__webpack_require__.r(qt),__webpack_require__.d(qt,{AbstractMathDocument:()=>ua,RenderList:()=>aa,resetAllOptions:()=>la,resetOptions:()=>oa}),{}),Ht=(__webpack_require__.r(jt),__webpack_require__.d(jt,{AbstractHandler:()=>ma}),{}),e=(__webpack_require__.r(Ht),__webpack_require__.d(Ht,{HandlerList:()=>ga}),{}),Gt=(__webpack_require__.r(e),__webpack_require__.d(e,{AbstractVisitor:()=>fa}),{}),Vt=(__webpack_require__.r(Gt),__webpack_require__.d(Gt,{DATAMJX:()=>ba,MmlVisitor:()=>Ea}),{}),i=(__webpack_require__.r(Vt),__webpack_require__.d(Vt,{MathMLVisitor:()=>Na}),{}),Wt=(__webpack_require__.r(i),__webpack_require__.d(i,{SerializedMmlVisitor:()=>ya}),{}),Xt=(__webpack_require__.r(Wt),__webpack_require__.d(Wt,{AbstractWrapper:()=>xa}),{}),zt=(__webpack_require__.r(Xt),__webpack_require__.d(Xt,{AbstractWrapperFactory:()=>Aa}),{}),Kt=(__webpack_require__.r(zt),__webpack_require__.d(zt,{mathjax:()=>va}),{}),Jt=(__webpack_require__.r(Kt),__webpack_require__.d(Kt,{HTMLMathItem:()=>_a}),{}),Yt=(__webpack_require__.r(Jt),__webpack_require__.d(Jt,{HTMLMathList:()=>Ta}),{}),$t=(__webpack_require__.r(Yt),__webpack_require__.d(Yt,{HTMLDomStrings:()=>wa}),{}),Qt=(__webpack_require__.r($t),__webpack_require__.d($t,{HTMLDocument:()=>Ca}),{}),Zt=(__webpack_require__.r(Qt),__webpack_require__.d(Qt,{HTMLHandler:()=>Ia}),{}),te=(__webpack_require__.r(Zt),__webpack_require__.d(Zt,{RegisterHTMLHandler:()=>function(t){t=new Ia(t);return va.handlers.register(t),t}}),{}),ee=(__webpack_require__.r(te),__webpack_require__.d(te,{asyncLoad:()=>La}),{}),ie=(__webpack_require__.r(ee),__webpack_require__.d(ee,{BIGDIMEN:()=>Sa,MATHSPACE:()=>Oa,RELUNITS:()=>Ra,UNITS:()=>ka,em:()=>Pa,length2em:()=>Ma,percent:()=>Da,px:()=>Ba}),{}),se=(__webpack_require__.r(ie),__webpack_require__.d(ie,{BBox:()=>Fa}),{}),re=(__webpack_require__.r(se),__webpack_require__.d(se,{add:()=>function(t,e){Object.assign(qa,t),ja[e]=!0},entities:()=>qa,numeric:()=>Va,options:()=>Ua,remove:()=>function(t){delete qa[t]},translate:()=>Ha}),{}),ne=(__webpack_require__.r(re),__webpack_require__.d(re,{StyleJsonSheet:()=>Wa}),{}),ae=(__webpack_require__.r(ne),__webpack_require__.d(ne,{Styles:()=>eo,TRBL:()=>Xa,WSC:()=>za}),{}),oe=(__webpack_require__.r(ae),__webpack_require__.d(ae,{max:()=>so,sum:()=>io}),{}),le=(__webpack_require__.r(oe),__webpack_require__.d(oe,{FindTeX:()=>ro}),{}),ce=(__webpack_require__.r(le),__webpack_require__.d(le,{default:()=>d}),{}),he=(__webpack_require__.r(ce),__webpack_require__.d(ce,{default:()=>co}),{}),de=(__webpack_require__.r(he),__webpack_require__.d(he,{ConfigurationType:()=>c,HandlerType:()=>p}),{}),ue=(__webpack_require__.r(de),__webpack_require__.d(de,{UnitUtil:()=>m}),{}),pe=(__webpack_require__.r(ue),__webpack_require__.d(ue,{default:()=>uo}),{}),me=(__webpack_require__.r(pe),__webpack_require__.d(pe,{default:()=>g}),{}),ge=(__webpack_require__.r(me),__webpack_require__.d(me,{BaseItem:()=>n,MmlStack:()=>mo}),{}),fe=(__webpack_require__.r(ge),__webpack_require__.d(ge,{TexConstant:()=>l}),{}),be=(__webpack_require__.r(fe),__webpack_require__.d(fe,{default:()=>go}),{}),Ee=(__webpack_require__.r(be),__webpack_require__.d(be,{default:()=>Eo}),{}),Ne=(__webpack_require__.r(Ee),__webpack_require__.d(Ee,{NodeFactory:()=>No}),{}),ye=(__webpack_require__.r(Ne),__webpack_require__.d(Ne,{KeyValueDef:()=>yo,KeyValueTypes:()=>xo,ParseUtil:()=>f}),{}),xe=(__webpack_require__.r(ye),__webpack_require__.d(ye,{ColumnParser:()=>_o}),{}),Ae=(__webpack_require__.r(xe),__webpack_require__.d(xe,{default:()=>Co}),{}),ve=(__webpack_require__.r(Ae),__webpack_require__.d(Ae,{AbstractTags:()=>So,AllTags:()=>Ro,Label:()=>Io,NoTags:()=>ko,TagInfo:()=>Lo,TagsFactory:()=>Do}),{}),_e=(__webpack_require__.r(ve),__webpack_require__.d(ve,{Macro:()=>Bo,Token:()=>Po}),{}),Te=(__webpack_require__.r(_e),__webpack_require__.d(_e,{AbstractParseMap:()=>jo,AbstractTokenMap:()=>Uo,CharacterMap:()=>Ho,CommandMap:()=>Wo,DelimiterMap:()=>Go,EnvironmentMap:()=>Xo,MacroMap:()=>Vo,RegExpMap:()=>qo,parseResult:()=>Fo}),{}),we=(__webpack_require__.r(Te),__webpack_require__.d(Te,{MapHandler:()=>Ko,SubHandler:()=>Jo,SubHandlers:()=>Yo}),{}),Ce=(__webpack_require__.r(we),__webpack_require__.d(we,{Configuration:()=>$o,ConfigurationHandler:()=>Zo,ParserConfiguration:()=>tl}),{}),Ie=(__webpack_require__.r(Ce),__webpack_require__.d(Ce,{ArrayItem:()=>vl,BeginItem:()=>pl,BreakItem:()=>ul,CellItem:()=>bl,CloseItem:()=>rl,DotsItem:()=>Al,EndItem:()=>ml,EqnArrayItem:()=>_l,EquationItem:()=>wl,FnItem:()=>Nl,LeftItem:()=>cl,Middle:()=>hl,MmlItem:()=>El,MstyleItem:()=>Tl,NonscriptItem:()=>xl,NotItem:()=>yl,NullItem:()=>nl,OpenItem:()=>sl,OverItem:()=>ll,PositionItem:()=>fl,PrimeItem:()=>al,RightItem:()=>dl,StartItem:()=>el,StopItem:()=>il,StyleItem:()=>gl,SubsupItem:()=>ol}),{}),Le=(__webpack_require__.r(Ie),__webpack_require__.d(Ie,{default:()=>b,splitAlignArray:()=>Ll}),{}),Se=(__webpack_require__.r(Le),__webpack_require__.d(Le,{default:()=>Ml}),{}),ke=(__webpack_require__.r(Se),__webpack_require__.d(Se,{BaseConfiguration:()=>Ul,BaseTags:()=>Fl,Other:()=>Bl}),{}),Re=(__webpack_require__.r(ke),__webpack_require__.d(ke,{TeX:()=>ql}),{}),Oe=(__webpack_require__.r(Re),__webpack_require__.d(Re,{FlalignItem:()=>Hl,MultlineItem:()=>jl}),{}),Me=(__webpack_require__.r(Oe),__webpack_require__.d(Oe,{NewcommandPriority:()=>Gl,NewcommandTables:()=>ho,NewcommandUtil:()=>Vl}),{}),De=(__webpack_require__.r(Me),__webpack_require__.d(Me,{AmsMethods:()=>N}),{}),Pe=(__webpack_require__.r(De),__webpack_require__.d(De,{BeginEnvItem:()=>zl}),{}),Be=(__webpack_require__.r(Pe),__webpack_require__.d(Pe,{default:()=>Jl}),{}),Fe=(__webpack_require__.r(Be),__webpack_require__.d(Be,{NewcommandConfig:()=>Yl,NewcommandConfiguration:()=>$l}),{}),Ue=(__webpack_require__.r(Fe),__webpack_require__.d(Fe,{AmsConfiguration:()=>Zl,AmsTags:()=>Ql}),{}),qe=(__webpack_require__.r(Ue),__webpack_require__.d(Ue,{RequireConfiguration:()=>nc,RequireLoad:()=>ic,RequireMethods:()=>sc,options:()=>rc}),{}),je=(__webpack_require__.r(qe),__webpack_require__.d(qe,{AutoloadConfiguration:()=>cc}),{}),He=(__webpack_require__.r(je),__webpack_require__.d(je,{ConfigMacrosConfiguration:()=>mc}),{}),Ge=(__webpack_require__.r(He),__webpack_require__.d(He,{NoUndefinedConfiguration:()=>gc}),{}),Ve=(__webpack_require__.r(Ge),__webpack_require__.d(Ge,{TextParser:()=>fc}),{}),We=(__webpack_require__.r(Ve),__webpack_require__.d(Ve,{TextMacrosMethods:()=>y}),{}),Xe=(__webpack_require__.r(We),__webpack_require__.d(We,{TextBaseConfiguration:()=>Ec,TextMacrosConfiguration:()=>yc}),{}),ze=(__webpack_require__.r(Xe),__webpack_require__.d(Xe,{DIRECTION:()=>Ac,H:()=>_c,V:()=>vc}),{}),Ke=(__webpack_require__.r(ze),__webpack_require__.d(ze,{DIRECTION:()=>Ac,FontData:()=>Ic,NOSTRETCH:()=>wc,mergeOptions:()=>Cc}),{}),Je=(__webpack_require__.r(Ke),__webpack_require__.d(Ke,{LineBBox:()=>Lc}),{}),Ye=(__webpack_require__.r(Je),__webpack_require__.d(Je,{LinebreakVisitor:()=>Rc,Linebreaks:()=>kc,NOBREAK:()=>Sc}),{}),$e=(__webpack_require__.r(Ye),__webpack_require__.d(Ye,{CommonOutputJax:()=>Mc,FONTPATH:()=>Oc}),{}),Qe=(__webpack_require__.r($e),__webpack_require__.d($e,{ARROWDX:()=>Pc,ARROWX:()=>Dc,ARROWY:()=>Bc,CommonArrow:()=>ih,CommonBorder:()=>Qc,CommonBorder2:()=>Zc,CommonDiagonalArrow:()=>eh,CommonDiagonalStrike:()=>th,PADDING:()=>Uc,SOLID:()=>qc,THICKNESS:()=>Fc,arrowBBox:()=>$c,arrowBBoxHD:()=>zc,arrowBBoxW:()=>Kc,arrowDef:()=>Jc,arrowHead:()=>Xc,diagonalArrowDef:()=>Yc,fullBBox:()=>Gc,fullBorder:()=>Wc,fullPadding:()=>Vc,sideIndex:()=>jc,sideNames:()=>Hc}),{}),Ze=(__webpack_require__.r(Qe),__webpack_require__.d(Qe,{CommonWrapper:()=>nh,SPACE:()=>rh}),{}),ti=(__webpack_require__.r(Ze),__webpack_require__.d(Ze,{CommonWrapperFactory:()=>ah}),{}),ei=(__webpack_require__.r(ti),__webpack_require__.d(ti,{CommonTeXAtomMixin:()=>oh}),{}),ii=(__webpack_require__.r(ei),__webpack_require__.d(ei,{CommonTextNodeMixin:()=>lh}),{}),si=(__webpack_require__.r(ii),__webpack_require__.d(ii,{CommonXmlNodeMixin:()=>ch}),{}),ri=(__webpack_require__.r(si),__webpack_require__.d(si,{CommonMactionMixin:()=>dh,TooltipData:()=>hh}),{}),ni=(__webpack_require__.r(ri),__webpack_require__.d(ri,{CommonMathMixin:()=>uh}),{}),ai=(__webpack_require__.r(ni),__webpack_require__.d(ni,{CommonMencloseMixin:()=>ph}),{}),oi=(__webpack_require__.r(ai),__webpack_require__.d(ai,{CommonMfencedMixin:()=>mh}),{}),li=(__webpack_require__.r(oi),__webpack_require__.d(oi,{CommonMfracMixin:()=>gh}),{}),ci=(__webpack_require__.r(li),__webpack_require__.d(li,{CommonMglyphMixin:()=>fh}),{}),hi=(__webpack_require__.r(ci),__webpack_require__.d(ci,{CommonMiMixin:()=>bh}),{}),di=(__webpack_require__.r(hi),__webpack_require__.d(hi,{CommonMmultiscriptsMixin:()=>yh,NextScript:()=>Eh,ScriptNames:()=>Nh}),{}),ui=(__webpack_require__.r(di),__webpack_require__.d(di,{CommonMnMixin:()=>xh}),{}),pi=(__webpack_require__.r(ui),__webpack_require__.d(ui,{CommonMoMixin:()=>Ah}),{}),mi=(__webpack_require__.r(pi),__webpack_require__.d(pi,{CommonMpaddedMixin:()=>vh}),{}),gi=(__webpack_require__.r(mi),__webpack_require__.d(mi,{CommonMrootMixin:()=>_h}),{}),fi=(__webpack_require__.r(gi),__webpack_require__.d(gi,{CommonInferredMrowMixin:()=>wh,CommonMrowMixin:()=>Th}),{}),bi=(__webpack_require__.r(fi),__webpack_require__.d(fi,{CommonMsMixin:()=>Ch}),{}),Ei=(__webpack_require__.r(bi),__webpack_require__.d(bi,{CommonMspaceMixin:()=>Ih}),{}),Ni=(__webpack_require__.r(Ei),__webpack_require__.d(Ei,{CommonMsqrtMixin:()=>Lh}),{}),yi=(__webpack_require__.r(Ni),__webpack_require__.d(Ni,{CommonMsubMixin:()=>Sh,CommonMsubsupMixin:()=>Rh,CommonMsupMixin:()=>kh}),{}),xi=(__webpack_require__.r(yi),__webpack_require__.d(yi,{BREAK_BELOW:()=>Oh,CommonMtableMixin:()=>Mh}),{}),Ai=(__webpack_require__.r(xi),__webpack_require__.d(xi,{CommonMtdMixin:()=>Dh}),{}),vi=(__webpack_require__.r(Ai),__webpack_require__.d(Ai,{CommonMtextMixin:()=>Ph}),{}),_i=(__webpack_require__.r(vi),__webpack_require__.d(vi,{CommonMlabeledtrMixin:()=>Fh,CommonMtrMixin:()=>Bh}),{}),Ti=(__webpack_require__.r(_i),__webpack_require__.d(_i,{CommonMoverMixin:()=>qh,CommonMunderMixin:()=>Uh,CommonMunderoverMixin:()=>jh}),{}),wi=(__webpack_require__.r(Ti),__webpack_require__.d(Ti,{CommonScriptbaseMixin:()=>Hh}),{}),Ci=(__webpack_require__.r(wi),__webpack_require__.d(wi,{CommonSemanticsMixin:()=>Gh}),{}),Ii=(__webpack_require__.r(Ci),__webpack_require__.d(Ci,{SvgWrapper:()=>x}),{}),Li=(__webpack_require__.r(Ii),__webpack_require__.d(Ii,{ZeroFontDataUrl:()=>Vh}),{}),Si=(__webpack_require__.r(Li),__webpack_require__.d(Li,{SvgMath:()=>Wh}),{}),ki=(__webpack_require__.r(Si),__webpack_require__.d(Si,{SvgInferredMrow:()=>zh,SvgMrow:()=>Xh}),{}),Ri=(__webpack_require__.r(ki),__webpack_require__.d(ki,{SvgMi:()=>Kh}),{}),Oi=(__webpack_require__.r(Ri),__webpack_require__.d(Ri,{AddPaths:()=>function(t,e,i){for(const i of Object.keys(e)){var s=parseInt(i);Jh.charOptions(t,s).p=e[s]}for(const e of Object.keys(i)){var r=parseInt(e);Jh.charOptions(t,r).c=i[r]}return t},DIRECTION:()=>Ac,FontData:()=>Ic,NOSTRETCH:()=>wc,SvgFontData:()=>Jh,mergeOptions:()=>Cc}),{}),Mi=(__webpack_require__.r(Oi),__webpack_require__.d(Oi,{SvgMo:()=>Yh}),{}),Di=(__webpack_require__.r(Mi),__webpack_require__.d(Mi,{SvgMn:()=>$h}),{}),Pi=(__webpack_require__.r(Di),__webpack_require__.d(Di,{SvgMs:()=>Qh}),{}),Bi=(__webpack_require__.r(Pi),__webpack_require__.d(Pi,{SvgMtext:()=>Zh}),{}),Fi=(__webpack_require__.r(Bi),__webpack_require__.d(Bi,{SvgMerror:()=>td}),{}),Ui=(__webpack_require__.r(Fi),__webpack_require__.d(Fi,{SvgMspace:()=>ed}),{}),qi=(__webpack_require__.r(Ui),__webpack_require__.d(Ui,{SvgMpadded:()=>id}),{}),ji=(__webpack_require__.r(qi),__webpack_require__.d(qi,{SvgMphantom:()=>sd}),{}),Hi=(__webpack_require__.r(ji),__webpack_require__.d(ji,{SvgMfrac:()=>rd}),{}),Gi=(__webpack_require__.r(Hi),__webpack_require__.d(Hi,{SvgMsqrt:()=>nd}),{}),Vi=(__webpack_require__.r(Gi),__webpack_require__.d(Gi,{SvgMroot:()=>ad}),{}),Wi=(__webpack_require__.r(Vi),__webpack_require__.d(Vi,{SvgMfenced:()=>od}),{}),Xi=(__webpack_require__.r(Wi),__webpack_require__.d(Wi,{SvgScriptbase:()=>ld}),{}),zi=(__webpack_require__.r(Xi),__webpack_require__.d(Xi,{SvgMsub:()=>cd,SvgMsubsup:()=>dd,SvgMsup:()=>hd}),{}),Ki=(__webpack_require__.r(zi),__webpack_require__.d(zi,{SvgMover:()=>pd,SvgMunder:()=>ud,SvgMunderover:()=>md}),{}),Ji=(__webpack_require__.r(Ki),__webpack_require__.d(Ki,{AlignX:()=>gd,SvgMmultiscripts:()=>fd}),{}),Yi=(__webpack_require__.r(Ji),__webpack_require__.d(Ji,{SvgMtable:()=>bd}),{}),$i=(__webpack_require__.r(Yi),__webpack_require__.d(Yi,{SvgMlabeledtr:()=>Nd,SvgMtr:()=>Ed}),{}),Qi=(__webpack_require__.r($i),__webpack_require__.d($i,{SvgMtd:()=>yd}),{}),Zi=(__webpack_require__.r(Qi),__webpack_require__.d(Qi,{SvgMaction:()=>xd}),{}),ts=(__webpack_require__.r(Zi),__webpack_require__.d(Zi,{ARROWDX:()=>Pc,ARROWX:()=>Dc,ARROWY:()=>Bc,Arrow:()=>Sd,Border:()=>wd,Border2:()=>Cd,CommonArrow:()=>ih,CommonBorder:()=>Qc,CommonBorder2:()=>Zc,CommonDiagonalArrow:()=>eh,CommonDiagonalStrike:()=>th,DiagonalArrow:()=>Ld,DiagonalStrike:()=>Id,PADDING:()=>Uc,RenderLine:()=>Td,SOLID:()=>qc,THICKNESS:()=>Fc,arrowBBox:()=>$c,arrowBBoxHD:()=>zc,arrowBBoxW:()=>Kc,arrowDef:()=>Jc,arrowHead:()=>Xc,computeLineData:()=>Ad,diagonalArrowDef:()=>Yc,fullBBox:()=>Gc,fullBorder:()=>Wc,fullPadding:()=>Vc,lineData:()=>vd,lineOffset:()=>_d,sideIndex:()=>jc,sideNames:()=>Hc}),{}),es=(__webpack_require__.r(ts),__webpack_require__.d(ts,{SvgMenclose:()=>kd}),{}),is=(__webpack_require__.r(es),__webpack_require__.d(es,{SvgAnnotation:()=>Od,SvgAnnotationXML:()=>Md,SvgSemantics:()=>Rd,SvgXmlNode:()=>Dd}),{}),ss=(__webpack_require__.r(is),__webpack_require__.d(is,{SvgMglyph:()=>Pd}),{}),rs=(__webpack_require__.r(ss),__webpack_require__.d(ss,{SvgTeXAtom:()=>Bd}),{}),ns=(__webpack_require__.r(rs),__webpack_require__.d(rs,{SvgTextNode:()=>Fd}),{}),as=(__webpack_require__.r(ns),__webpack_require__.d(ns,{SvgHtmlNode:()=>Ud}),{}),os=(__webpack_require__.r(as),__webpack_require__.d(as,{SvgWrappers:()=>qd}),{}),ls=(__webpack_require__.r(os),__webpack_require__.d(os,{SvgWrapperFactory:()=>jd}),{}),cs=(__webpack_require__.r(ls),__webpack_require__.d(ls,{FontCache:()=>Hd}),{}),hs=(__webpack_require__.r(cs),__webpack_require__.d(cs,{DefaultFont:()=>Vd,fontName:()=>Gd}),{}),ds=(__webpack_require__.r(hs),__webpack_require__.d(hs,{SVG:()=>zd,SVGNS:()=>Wd,XLINKNS:()=>Xd}),{}),us=(__webpack_require__.r(ds),__webpack_require__.d(ds,{MJContextMenu:()=>Uu}),{}),ps=(__webpack_require__.r(us),__webpack_require__.d(us,{addPreference:()=>cf,engineSetup:()=>af,fromPreference:()=>hf,locales:()=>rf,parseDOM:()=>lf,setupEngine:()=>nf,toEnriched:()=>of,toPreference:()=>df}),{}),ms=(__webpack_require__.r(ps),__webpack_require__.d(ps,{clearspeakMenu:()=>Nf,localeMenu:()=>xf}),{}),gs=(__webpack_require__.r(ms),__webpack_require__.d(ms,{copyToClipboard:()=>vf,isMac:()=>Af}),{}),fs=(__webpack_require__.r(gs),__webpack_require__.d(gs,{annotation:()=>wf,copyAnnotations:()=>Tf,showAnnotations:()=>_f}),{}),bs=(__webpack_require__.r(fs),__webpack_require__.d(fs,{RadioCompare:()=>If}),{}),Es=(__webpack_require__.r(bs),__webpack_require__.d(bs,{MmlVisitor:()=>Lf}),{}),Ns=(__webpack_require__.r(Es),__webpack_require__.d(Es,{SelectableInfo:()=>Sf}),{}),ys=(__webpack_require__.r(Ns),__webpack_require__.d(Ns,{Menu:()=>D}),{}),xs=(__webpack_require__.r(ys),__webpack_require__.d(ys,{MenuHandler:()=>Bf,MenuMathDocumentMixin:()=>Pf,MenuMathItemMixin:()=>Df}),{}),As=(__webpack_require__.r(xs),__webpack_require__.d(xs,{FindMathML:()=>Uf}),{}),vs=(__webpack_require__.r(As),__webpack_require__.d(As,{MathMLCompile:()=>qf}),{}),_s=(__webpack_require__.r(vs),__webpack_require__.d(vs,{MathML:()=>jf}),{}),Ts=(__webpack_require__.r(_s),__webpack_require__.d(_s,{EnrichHandler:()=>Wf,EnrichedMathDocumentMixin:()=>Vf,EnrichedMathItemMixin:()=>Gf,enrichVisitor:()=>Hf}),{}),ws=(__webpack_require__.r(Ts),__webpack_require__.d(Ts,{InPlace:()=>Rf,SemAttr:()=>Of,buildLabel:()=>$f,buildSpeech:()=>Qf,honk:()=>Zf,ssmlParsing:()=>zf}),{}),Cs=(__webpack_require__.r(ws),__webpack_require__.d(ws,{GeneratorPool:()=>tb}),{}),Is=(__webpack_require__.r(Cs),__webpack_require__.d(Cs,{WorkerHandler:()=>sb}),{}),Ls=(__webpack_require__.r(Is),__webpack_require__.d(Is,{SpeechHandler:()=>cb,SpeechMathDocumentMixin:()=>lb,SpeechMathItemMixin:()=>ob}),{}),Ss=(__webpack_require__.r(Ls),__webpack_require__.d(Ls,{getHighlighter:()=>bb}),{}),ks=(__webpack_require__.r(Ss),__webpack_require__.d(Ss,{AbstractRegion:()=>Nb,DummyRegion:()=>yb,HoverRegion:()=>Tb,LiveRegion:()=>vb,SpeechRegion:()=>_b,StringRegion:()=>xb,ToolTip:()=>Ab}),{}),Rs=(__webpack_require__.r(ks),__webpack_require__.d(ks,{AbstractExplorer:()=>wb}),{}),Os=(__webpack_require__.r(Rs),__webpack_require__.d(Rs,{SpeechExplorer:()=>kb,hasModifiers:()=>Lb,isContainer:()=>function(t){return t.matches("mjx-container")}}),{}),Ms=(__webpack_require__.r(Os),__webpack_require__.d(Os,{AbstractMouseExplorer:()=>Rb,ContentHoverer:()=>Db,FlameHoverer:()=>Pb,Hoverer:()=>Ob,ValueHoverer:()=>Mb}),{}),Ds=(__webpack_require__.r(Ms),__webpack_require__.d(Ms,{AbstractTreeExplorer:()=>Bb,ContrastPicker:()=>qb,FlameColorer:()=>Fb,TreeColorer:()=>Ub}),{}),Ps=(__webpack_require__.r(Ds),__webpack_require__.d(Ds,{ExplorerPool:()=>Gb,RegionPool:()=>jb}),{});__webpack_require__.r(Ps),__webpack_require__.d(Ps,{ExplorerHandler:()=>zb,ExplorerMathDocumentMixin:()=>Xb,ExplorerMathItemMixin:()=>Wb,setA11yOption:()=>Kb,setA11yOptions:()=>function(t,e){var i;var s=af();for(const i in e)void 0!==t.options.a11y[i]?Kb(t,i,e[i]):void 0!==s[i]&&(t.options.sre[i]=e[i]);e.roleDescription&&(t.options.MathItem.roleDescription=e.roleDescription);for(const e of t.math)null!=(i=null==e?void 0:e.explorers)&&i.attach()}});const Bs="4.0.0",Fs="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:{};function Us(t){return"object"==typeof t&&null!==t}function qs(t,e,i=!1){var s;for(const r of Object.keys(e))"__esModule"!==r&&t[r]!==e[r]&&null!==e[r]&&void 0!==e[r]&&(Us(t[r])&&Us(e[r])?qs(t[r],e[r],i||"_"===r):i&&null!=(s=Object.getOwnPropertyDescriptor(t,r))&&s.get||(t[r]=e[r]));return t}function js(t,e,i){t[e]||(t[e]={}),t=t[e];for(const e of Object.keys(i))Us(t[e])&&Us(i[e])?js(t,e,i[e]):null==t[e]&&null!=i[e]&&(t[e]=i[e]);return t}function Hs(t){return qs(Gs,t)}void 0!==Fs.MathJax&&Fs.MathJax.constructor==={}.constructor||(Fs.MathJax={}),Fs.MathJax.version||(Fs.MathJax={version:Bs,_:{},config:Fs.MathJax});const Gs=Fs.MathJax,Vs="undefined"!=typeof window,Ws={window:Vs?window:null,document:Vs?window.document:null,os:(()=>{if(Vs&&window.navigator){const i=window.navigator.appVersion,s=[["Win","Windows"],["Mac","MacOS"],["X11","Unix"],["Linux","Unix"]];for(var[t,e]of s)if(i.includes(t))return e;if(window.navigator.userAgent.includes("Android"))return"Unix"}return"unknown"})()};class Xs extends Error{constructor(t,e){super(t),this.package=e}}class zs{get canLoad(){return 0===this.dependencyCount&&!this.noLoad&&!this.isLoading&&!this.hasFailed}static loadPromise(t){const e=er[t]||{},i=e.extraLoads?Zs.load(...e.extraLoads):Promise.resolve(),s=e.checkReady||(()=>Promise.resolve());return i.then(()=>s())}static resolvePath(t,e=!0){t={name:t,original:t,addExtension:e};return Zs.pathFilters.execute(t),t.name}static loadAll(){for(const t of this.packages.values())t.canLoad&&t.load()}constructor(t,e=!1){this.isLoaded=!1,this.result={},this.isLoading=!1,this.hasFailed=!1,this.dependents=[],this.dependencies=[],this.dependencyCount=0,this.provided=[],this.name=t,this.noLoad=e,zs.packages.set(t,this),this.promise=this.makePromise(this.makeDependencies())}makeDependencies(){const t=[],e=zs.packages,i=this.noLoad,s=this.name,r=[];Object.hasOwn(er.dependencies,s)?r.push(...er.dependencies[s]):"core"!==s&&r.push("core");for(const s of r){const r=e.get(s)||new zs(s,i);this.dependencies.includes(r)||(r.addDependent(this,i),this.dependencies.push(r),r.isLoaded||(this.dependencyCount++,t.push(r.promise)))}return t}makePromise(t){let e=new Promise((t,e)=>{this.resolve=t,this.reject=e});const i=er[this.name]||{};return i.ready&&(e=e.then(t=>i.ready(this.name))),t.length&&(t.push(e),e=Promise.all(t).then(t=>t.join(", "))),i.failed&&e.catch(t=>i.failed(new Xs(t,this.name))),e}load(){var t;this.isLoaded||this.isLoading||this.noLoad||(this.isLoading=!0,t=zs.resolvePath(this.name),er.require?this.loadCustom(t):this.loadScript(t))}loadCustom(e){try{const t=er.require(e);t instanceof Promise?t.then(t=>this.result=t).then(()=>this.checkLoad()).catch(t=>this.failed("Can't load \""+e+'"\n'+t.message.trim())):(this.result=t,this.checkLoad())}catch(e){this.failed(e.message)}}loadScript(e){const t=Ws.document.createElement("script");t.src=e,t.charset="UTF-8",t.onload=t=>this.checkLoad(),t.onerror=t=>this.failed("Can't load \""+e+'"'),Ws.document.head.appendChild(t)}loaded(){this.isLoaded=!0,this.isLoading=!1;for(const t of this.dependents)t.requirementSatisfied();for(const e of this.provided)e.loaded();this.resolve(this.name)}failed(t){this.hasFailed=!0,this.isLoading=!1,this.reject(new Xs(t,this.name))}checkLoad(){zs.loadPromise(this.name).then(()=>this.loaded()).catch(t=>this.failed(t))}requirementSatisfied(){this.dependencyCount&&(this.dependencyCount--,this.canLoad&&this.load())}provides(t=[]){for(const e of t){let t=zs.packages.get(e);t||(er.dependencies[e]||(er.dependencies[e]=[]),er.dependencies[e].push(e),(t=new zs(e,!0)).isLoading=!0),this.provided.push(t)}}addDependent(t,e){this.dependents.push(t),e||this.checkNoLoad()}checkNoLoad(){if(this.noLoad){this.noLoad=!1;for(const t of this.dependencies)t.checkNoLoad()}}}zs.packages=new Map;class Ks{constructor(){this.items=[],this.items=[]}[Symbol.iterator](){let t=0;const e=this.items;return{next:()=>({value:e[t++],done:t>e.length})}}add(t,e=Ks.DEFAULTPRIORITY){let i=this.items.length;for(;0<=--i&&e<this.items[i].priority;);return this.items.splice(i+1,0,{item:t,priority:e}),t}remove(t){let e=this.items.length;for(;0<=--e&&this.items[e].item!==t;);return 0<=e&&this.items.splice(e,1),this}}Ks.DEFAULTPRIORITY=5;class Js extends Ks{constructor(t=null){super(),t&&this.addList(t)}addList(t){for(const e of t)Array.isArray(e)?this.add(e[0],e[1]):this.add(e)}execute(...t){for(const e of this)if(!1===e.item(...t))return!1;return!0}asyncExecute(...r){let n=-1;const a=this.items;return new Promise((i,s)=>{!function t(){for(;++n<a.length;){const e=a[n].item(...r);if(e instanceof Promise)return void e.then(t).catch(t=>s(t));if(!1===e)return void i(!1)}i(!0)}()})}}const Ys=Gs.config||{};const $s={source:t=>(Object.hasOwn(er.source,t.name)&&(t.name=er.source[t.name]),!0),normalize:t=>{const e=t.name;return e.match(/^(?:[a-z]+:\/)?\/|[a-z]:\\|\[/i)||(t.name="[mathjax]/"+e.replace(/^\.\//,"")),!0},prefix:t=>{for(var e;(e=t.name.match(/^\[([^\]]*)\]/))&&Object.hasOwn(er.paths,e[1]);)t.name=er.paths[e[1]]+t.name.substring(e[0].length);return!0},addExtension:t=>(t.addExtension&&!t.name.match(/\.[^/]+$/)&&(t.name+=".js"),!0)},Qs=Gs.version,Zs={versions:new Map,nestedLoads:[],ready(...t){const e=[];for(const i of t=0===t.length?Array.from(zs.packages.keys()):t){const t=zs.packages.get(i)||new zs(i,!0);e.push(t.promise)}return Promise.all(e)},load(...i){if(0===i.length)return Promise.resolve([]);let s=[];this.nestedLoads.unshift(s);const e=Promise.resolve().then(()=>{var t=this,a=void 0,o=void 0,l=function*(){const e=[];for(const s of i){let t=zs.packages.get(s);t||(t=new zs(s)).provides(er.provides[s]),t.checkNoLoad(),e.push(t.promise.then(()=>(er.versionWarnings&&t.isLoaded&&!Zs.versions.has(zs.resolvePath(s))&&console.warn("No version information available for component "+s),t.result)))}zs.loadAll();for(var t=yield Promise.all(e);s.length;){const i=Promise.all(s);s=this.nestedLoads[this.nestedLoads.indexOf(s)]=[],yield i}return this.nestedLoads.splice(this.nestedLoads.indexOf(s),1),t};return new(o=o||Promise)(function(i,e){function s(t){try{n(l.next(t))}catch(t){e(t)}}function r(t){try{n(l.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(s,r)}n((l=l.apply(t,a||[])).next())})});return this.nestedLoads.slice(1).forEach(t=>t.push(e)),e},preLoaded(...t){for(const e of t){let t=zs.packages.get(e);t||(t=new zs(e,!0)).provides(er.provides[e]),t.loaded()}},addPackageData(t,e){let i=er[t];i=i||(er[t]={});for(const[t,s]of Object.entries(e))if(Array.isArray(s)){i[t]||(i[t]=[]);const e=new Set([...i[t],...s]);i[t]=[...e]}else i[t]=s},defaultReady(){void 0!==tr.startup&&tr.config.startup.ready()},getRoot(){if(Ws.document){const t=Ws.document.currentScript||Ws.document.getElementById("MathJax-script");if(t&&t instanceof HTMLScriptElement)return t.src.replace(/\/[^/]*$/,"")}return Ys?.loader?.paths?.mathjax||Ys?.__dirname||"/"},checkVersion(t,e,i){return this.saveVersion(t),!(!er.versionWarnings||e===Qs||(console.warn(`Component ${t} uses ${e} of MathJax; version in use is `+Qs),0))},saveVersion(t){Zs.versions.set(zs.resolvePath(t),Qs)},pathFilters:new Js},tr=(Zs.pathFilters.add($s.source,0),Zs.pathFilters.add($s.normalize,10),Zs.pathFilters.add($s.prefix,20),Zs.pathFilters.add($s.addExtension,30),Gs);if(void 0===tr.loader){js(tr.config,"loader",{paths:{mathjax:Zs.getRoot()},source:{},dependencies:{},provides:{},load:[],ready:Zs.defaultReady.bind(Zs),failed:t=>console.log(`MathJax(${t.package||"?"}): `+t.message),require:null,pathFilters:[],versionWarnings:!0}),Hs({loader:Zs});for(const P of tr.config.loader.pathFilters)Array.isArray(P)?Zs.pathFilters.add(P[0],P[1]):Zs.pathFilters.add(P)}const er=tr.config.loader,ir={}.constructor;function sr(t){return"object"==typeof t&&null!==t&&(t.constructor===ir||t.constructor===or)}const rr="[+]",nr="[-]",ar={invalidOption:"warn",optionError:(t,e)=>{if("fatal"===ar.invalidOption)throw new Error(t);console.warn("MathJax: "+t)}};class or{}function lr(t){return Object.assign(Object.create(or.prototype),t)}function cr(t){return Array.isArray(t)?t:[t]}function hr(t){return t?Object.keys(t).concat(Object.getOwnPropertySymbols(t)):[]}function dr(t){const e={};for(const i of hr(t)){const s=Object.getOwnPropertyDescriptor(t,i),r=s.value;Array.isArray(r)?s.value=ur([],r,!1):sr(r)&&(s.value=dr(r)),s.enumerable&&(e[i]=s)}return Object.defineProperties(t.constructor===or?lr({}):{},e)}function ur(e,i,s=!0){for(var r of hr(i))if(s&&void 0===e[r]&&e.constructor!==or)"symbol"==typeof r&&(r=r.toString()),ar.optionError(`Invalid option "${r}" (no default value).`,r);else{const n=i[r];let t=e[r];if(!sr(n)||null===t||"object"!=typeof t&&"function"!=typeof t)Array.isArray(n)?(e[r]=[],ur(e[r],n,!1)):sr(n)?e[r]=dr(n):e[r]=n;else{const i=hr(n);Array.isArray(t)&&(1===i.length&&(i[0]===rr||i[0]===nr)&&Array.isArray(n[i[0]])||2===i.length&&i.sort().join(",")===rr+","+nr&&Array.isArray(n[rr])&&Array.isArray(n[nr]))?(n[nr]&&(t=e[r]=t.filter(t=>n[nr].indexOf(t)<0)),n[rr]&&(e[r]=[...t,...n[rr]])):ur(t,n,s)}}return e}function pr(e,...t){return t.forEach(t=>ur(e,t,!1)),e}function mr(e,...t){return t.forEach(t=>ur(e,t,!0)),e}function gr(t,...e){const i={};for(const s of e)Object.hasOwn(t,s)&&(i[s]=t[s]);return i}function fr(t,...e){const i=[];for(const s of e){const e={},r={};for(const i of Object.keys(t||{}))(void 0===s[i]?r:e)[i]=t[i];i.push(e),t=r}return i.unshift(t),i}function br(t,e,i=null){return Object.hasOwn(e,t)?e[t]:i}function Er(t,a,o,l){return new(o=o||Promise)(function(i,e){function s(t){try{n(l.next(t))}catch(t){e(t)}}function r(t){try{n(l.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(s,r)}n((l=l.apply(t,a||[])).next())})}class r{static toMML(t){return r.visitor.visitTree(t,this.document)}static registerConstructor(t,e){r.constructors[t]=e}static useHandler(t,e=!1){yr.handler&&!e||(yr.handler=t)}static useAdaptor(t,e=!1){yr.adaptor&&!e||(yr.adaptor=t)}static useInput(t,e=!1){xr&&!e||yr.input.push(t)}static useOutput(t,e=!1){yr.output&&!e||(yr.output=t)}static extendHandler(t,e=10){r.extensions.add(t,e)}static defaultReady(){r.getComponents(),r.makeMethods(),r.pagePromise.then(()=>yr.pageReady()).then(()=>r.promiseResolve()).catch(t=>r.promiseReject(t))}static defaultPageReady(){return(yr.loadAllFontFiles&&r.output.font?r.output.font.loadDynamicFiles():Promise.resolve()).then(()=>{var t;return null==(t=r.document.menu)?void 0:t.loadingPromise}).then(yr.typeset&&Nr.typesetPromise?()=>r.typesetPromise(yr.elements):Promise.resolve()).then(()=>r.promiseResolve())}static typesetPromise(t){return this.hasTypeset=!0,r.document.whenReady(()=>Er(this,void 0,void 0,function*(){r.document.options.elements=t,r.document.reset(),yield r.document.renderPromise()}))}static getComponents(){r.visitor=new Nr._.core.MmlTree.SerializedMmlVisitor.SerializedMmlVisitor,r.mathjax=Nr._.mathjax.mathjax,r.input=r.getInputJax(),r.output=r.getOutputJax(),r.adaptor=r.getAdaptor(),r.handler&&r.mathjax.handlers.unregister(r.handler),r.handler=r.getHandler(),r.handler&&(r.mathjax.handlers.register(r.handler),r.document=r.getDocument())}static makeMethods(){r.input&&r.output&&r.makeTypesetMethods();var t=r.output?r.output.name.toLowerCase():"";for(const i of r.input){var e=i.name.toLowerCase();r.makeMmlMethods(e,i),r.makeResetMethod(e,i),r.output&&r.makeOutputMethods(e,t,i)}Nr.done=()=>r.document.done(),Nr.whenReady=t=>r.document.whenReady(t)}static makeTypesetMethods(){Nr.typeset=(t=null)=>{this.hasTypeset=!0,r.document.options.elements=t,r.document.reset(),r.document.render()},Nr.typesetPromise=(t=null)=>r.typesetPromise(t),Nr.typesetClear=(t=null)=>{t?r.document.clearMathItemsWithin(t):r.document.clear()}}static makeOutputMethods(t,e,i){t=t+"2"+e;Nr[t]=(t,e={})=>(e=Object.assign(Object.assign({},e),{format:i.name}),r.document.convert(t,e)),Nr[t+"Promise"]=(t,e={})=>(e=Object.assign(Object.assign({},e),{format:i.name}),r.document.convertPromise(t,e)),Nr[e+"Stylesheet"]=()=>r.output.styleSheet(r.document),"getMetricsFor"in r.output&&(Nr.getMetricsFor=(t,e)=>r.output.getMetricsFor(t,e))}static makeMmlMethods(t,i){const s=Nr._.core.MathItem.STATE;Nr[t+"2mml"]=(t,e={})=>(e=Object.assign(Object.assign({},e),{end:s.CONVERT,format:i.name}),r.toMML(r.document.convert(t,e))),Nr[t+"2mmlPromise"]=(t,...e)=>Er(this,[t,...e],void 0,function*(t,e={}){e=Object.assign(Object.assign({},e),{end:s.CONVERT,format:i.name});t=yield r.document.convertPromise(t,e);return r.toMML(t)})}static makeResetMethod(t,e){Nr[t+"Reset"]=(...t)=>e.reset(...t)}static getInputJax(){const t=[];for(const e of yr.input){const i=r.constructors[e];if(!i)throw Error('Input Jax "'+e+'" is not defined (has it been loaded?)');t[e]=new i(Nr.config[e]),t.push(t[e])}return t}static getOutputJax(){var t=yr.output;if(!t)return null;const e=r.constructors[t];if(e)return new e(Nr.config[t]);throw Error('Output Jax "'+t+'" is not defined (has it been loaded?)')}static getAdaptor(){var t=yr.adaptor;if(!t||"none"===t)return null;const e=r.constructors[t];if(e)return e(Nr.config[t]);throw Error('DOMAdaptor "'+t+'" is not defined (has it been loaded?)')}static getHandler(){const t=yr.handler;if(!t||"none"===t||!r.adaptor)return null;const e=r.constructors[t];if(!e)throw Error('Handler "'+t+'" is not defined (has it been loaded?)');let i=new e(r.adaptor,5);for(const t of r.extensions)i=t.item(i);return i}static getDocument(t=null){return r.mathjax.document(t||yr.document,Object.assign(Object.assign({},Nr.config.options),{InputJax:r.input,OutputJax:r.output}))}}r.extensions=new Ks,r.constructors={},r.input=[],r.output=null,r.handler=null,r.adaptor=null,r.elements=null,r.document=null,r.promise=new Promise((t,e)=>{r.promiseResolve=t,r.promiseReject=e}),r.pagePromise=new Promise((t,e)=>{const i=Fs.document;if(i&&i.readyState&&"complete"!==i.readyState&&"interactive"!==i.readyState){const e=()=>t();i.defaultView.addEventListener("load",e,!0),i.defaultView.addEventListener("DOMContentLoaded",e,!0)}else t()}),r.hasTypeset=!1,r.defaultOptionError=ar.optionError;const Nr=Gs,yr=(void 0===Nr._.startup&&(js(Nr.config,"startup",{input:[],output:"",handler:null,adaptor:null,document:Ws.document||"",elements:null,typeset:!0,ready:r.defaultReady.bind(r),pageReady:r.defaultPageReady.bind(r)}),Hs({startup:r,options:{}}),Nr.config.startup.invalidOption&&(ar.invalidOption=Nr.config.startup.invalidOption),Nr.config.startup.optionError&&(ar.optionError=Nr.config.startup.optionError)),Nr.config.startup),xr=0!==yr.input.length;MathJax.loader&&MathJax.loader.checkVersion("startup",Bs,"startup"),Hs({_:{components:{loader:j,package:F,startup:G}}}),Zs.preLoaded("loader","startup"),js(MathJax.config.loader,"dependencies",{"a11y/semantic-enrich":["input/mml","a11y/sre"],"a11y/speech":["a11y/semantic-enrich"],"a11y/complexity":["a11y/semantic-enrich"],"a11y/explorer":["a11y/speech"],"[mml]/mml3":["input/mml"],"[tex]/action":["input/tex-base"],"[tex]/ams":["input/tex-base","[tex]/newcommand"],"[tex]/amscd":["input/tex-base"],"[tex]/autoload":["input/tex-base","[tex]/require"],"[tex]/bbm":["input/tex-base"],"[tex]/bboldx":["input/tex-base","[tex]/textmacros"],"[tex]/bbox":["input/tex-base"],"[tex]/begingroup":["input/tex-base","[tex]/newcommand"],"[tex]/boldsymbol":["input/tex-base"],"[tex]/braket":["input/tex-base"],"[tex]/bussproofs":["input/tex-base"],"[tex]/cancel":["input/tex-base","[tex]/enclose"],"[tex]/cases":["[tex]/empheq"],"[tex]/centernot":["input/tex-base"],"[tex]/color":["input/tex-base"],"[tex]/colortbl":["input/tex-base","[tex]/color"],"[tex]/colorv2":["input/tex-base"],"[tex]/configmacros":["input/tex-base","[tex]/newcommand"],"[tex]/dsfont":["input/tex-base"],"[tex]/empheq":["input/tex-base","[tex]/ams"],"[tex]/enclose":["input/tex-base"],"[tex]/extpfeil":["input/tex-base","[tex]/newcommand","[tex]/ams"],"[tex]/gensymb":["input/tex-base"],"[tex]/html":["input/tex-base"],"[tex]/mathtools":["input/tex-base","[tex]/newcommand","[tex]/ams","[tex]/boldsymbol"],"[tex]/mhchem":["input/tex-base","[tex]/ams"],"[tex]/newcommand":["input/tex-base"],"[tex]/noerrors":["input/tex-base"],"[tex]/noundefined":["input/tex-base"],"[tex]/physics":["input/tex-base"],"[tex]/require":["input/tex-base"],"[tex]/setoptions":["input/tex-base"],"[tex]/tagformat":["input/tex-base"],"[tex]/texhtml":["input/tex-base"],"[tex]/textcomp":["input/tex-base","[tex]/textmacros"],"[tex]/textmacros":["input/tex-base"],"[tex]/unicode":["input/tex-base"],"[tex]/units":["input/tex-base"],"[tex]/upgreek":["input/tex-base"],"[tex]/verb":["input/tex-base"],"ui/menu":["a11y/sre"]}),js(MathJax.config.loader,"paths",{tex:"[mathjax]/input/tex/extensions",mml:"[mathjax]/input/mml/extensions",sre:"[mathjax]/sre",mathmaps:"[sre]/mathmaps"}),js(MathJax.config.loader,"provides",{startup:["loader"],"input/tex":["input/tex-base","[tex]/ams","[tex]/newcommand","[tex]/textmacros","[tex]/noundefined","[tex]/require","[tex]/autoload","[tex]/configmacros"]}),js(MathJax.config.loader,"source",{"[tex]/amsCd":"[tex]/amscd","[tex]/colorV2":"[tex]/colorv2","[tex]/configMacros":"[tex]/configmacros","[tex]/tagFormat":"[tex]/tagformat"});class Ar{constructor(t=null){this.canMeasureNodes=!0,this.document=t}node(t,e={},i=[],s){var r=this.create(t,s);this.setAttributes(r,e);for(const t of i)this.append(r,t);return r}setProperty(t,e,i){t[e]=i}getProperty(t,e){return t[e]}setAttributes(t,e){if(e.style&&"string"!=typeof e.style)for(const i of Object.keys(e.style))this.setStyle(t,i.replace(/-([a-z])/g,(t,e)=>e.toUpperCase()),e.style[i]);if(e.properties)for(const s of Object.keys(e.properties))t[s]=e.properties[s];for(const r of Object.keys(e))"style"===r&&"string"!=typeof e.style||"properties"===r||this.setAttribute(t,r,e[r])}replace(t,e){return this.insert(t,e),this.remove(e),e}childNode(t,e){return this.childNodes(t)[e]}allClasses(t){const e=this.getAttribute(t,"class");return e?e.replace(/  +/g," ").replace(/^ /,"").replace(/ $/,"").split(/ /):[]}cssText(t){return"style"===this.kind(t)?this.textContent(t):""}}class vr extends Ar{constructor(t){super(t.document),this.canMeasureNodes=!0,this.window=t,this.parser=new t.DOMParser}parse(t,e="text/html"){return this.parser.parseFromString(t,e)}create(t,e){return e?this.document.createElementNS(e,t):this.document.createElement(t)}text(t){return this.document.createTextNode(t)}head(t=this.document){return t.head||t}body(t=this.document){return t.body||t}root(t=this.document){return t.documentElement||t}doctype(t=this.document){return t.doctype?`<!DOCTYPE ${t.doctype.name}>`:""}tags(t,e,i=null){i=i?t.getElementsByTagNameNS(i,e):t.getElementsByTagName(e);return Array.from(i)}getElements(t,e){let i=[];for(const e of t)"string"==typeof e?i=i.concat(Array.from(this.document.querySelectorAll(e))):Array.isArray(e)||e instanceof this.window.NodeList||e instanceof this.window.HTMLCollection?i=i.concat(Array.from(e)):i.push(e);return i}getElement(t,e=this.document){return e.querySelector(t)}contains(t,e){return t.contains(e)}parent(t){return t.parentNode}append(t,e){return t.appendChild(e)}insert(t,e){return this.parent(e).insertBefore(t,e)}remove(t){return this.parent(t).removeChild(t)}replace(t,e){return this.parent(e).replaceChild(t,e)}clone(t,e=!0){return t.cloneNode(e)}split(t,e){return t.splitText(e)}next(t){return t.nextSibling}previous(t){return t.previousSibling}firstChild(t){return t.firstChild}lastChild(t){return t.lastChild}childNodes(t){return Array.from(t.childNodes)}childNode(t,e){return t.childNodes[e]}kind(t){var e=t.nodeType;return 1===e||3===e||8===e?t.nodeName.toLowerCase():""}value(t){return t.nodeValue||""}textContent(t){return t.textContent}innerHTML(t){return t.innerHTML}outerHTML(t){return t.outerHTML}serializeXML(t){return(new this.window.XMLSerializer).serializeToString(t)}setAttribute(t,e,i,s=null){return s?(e=s.replace(/.*\//,"")+":"+e.replace(/^.*:/,""),t.setAttributeNS(s,e,i)):t.setAttribute(e,i)}getAttribute(t,e){return t.getAttribute(e)}removeAttribute(t,e){return t.removeAttribute(e)}hasAttribute(t,e){return t.hasAttribute(e)}allAttributes(t){return Array.from(t.attributes).map(t=>({name:t.name,value:t.value}))}addClass(t,e){t.classList?t.classList.add(e):t.className=(t.className+" "+e).trim()}removeClass(t,e){t.classList?t.classList.remove(e):t.className=t.className.split(/ /).filter(t=>t!==e).join(" ")}hasClass(t,e){return t.classList?t.classList.contains(e):t.className.split(/ /).includes(e)}setStyle(t,e,i){t.style[e]=i}getStyle(t,e){return t.style[e]}allStyles(t){return t.style.cssText}insertRules(t,e){for(const i of e)try{t.sheet.insertRule(i,t.sheet.cssRules.length)}catch(t){console.warn(`MathJax: can't insert css rule '${i}': `+t.message)}}cssText(t){return"style"!==this.kind(t)?"":Array.from(t.sheet.cssRules).map(t=>t.cssText).join("\n")}fontSize(t){t=this.window.getComputedStyle(t);return parseFloat(t.fontSize)}fontFamily(t){return this.window.getComputedStyle(t).fontFamily||""}nodeSize(t,e=1,i=!1){if(i&&t.getBBox){const{width:i,height:s}=t.getBBox();return[i/e,s/e]}return[t.offsetWidth/e,t.offsetHeight/e]}nodeBBox(t){var{left:t,right:e,top:i,bottom:s}=t.getBoundingClientRect();return{left:t,right:e,top:i,bottom:s}}createWorker(o,l){return t=this,h=function*(){const{path:t,maps:e,worker:i}=l,s=t+"/"+i,r=`
      self.maps = '${_r(e)}';
      importScripts('${_r(s)}');
    `,n=URL.createObjectURL(new Blob([r],{type:"text/javascript"})),a=new Worker(n);return a.onmessage=o,URL.revokeObjectURL(n),a},new(c=(c=a=void 0)||Promise)(function(i,e){function s(t){try{n(h.next(t))}catch(t){e(t)}}function r(t){try{n(h.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof c?e:new c(function(t){t(e)})).then(s,r)}n((h=h.apply(t,a||[])).next())});var t,a,c,h}}function _r(t){return[...t].map(t=>("\\"===t||"'"===t?t="\\"+t:(t<" "||"~"<t)&&(t=`\\u{${t.codePointAt(0).toString(16)}}`),t)).join("")}function Tr(){return new vr(window)}class wr{constructor(t){var e=this.constructor;this.options=mr(pr({},e.OPTIONS),t)}}wr.OPTIONS={};class Cr{constructor(t={}){this.adaptor=null,this.mmlFactory=null;var e=this.constructor;this.options=mr(pr({},e.OPTIONS),t),this.preFilters=new Js(this.options.preFilters),this.postFilters=new Js(this.options.postFilters)}get name(){return this.constructor.NAME}setAdaptor(t){this.adaptor=t}setMmlFactory(t){this.mmlFactory=t}initialize(){}reset(){}get processStrings(){return!0}findMath(t,e){return[]}executeFilters(t,e,i,s){e={math:e,document:i,data:s};return t.execute(e),e.data}}Cr.NAME="generic",Cr.OPTIONS={preFilters:[],postFilters:[]};class Ir{constructor(t={}){this.adaptor=null;var e=this.constructor;this.options=mr(pr({},e.OPTIONS),t),this.preFilters=new Js(this.options.preFilters),this.postFilters=new Js(this.options.postFilters)}get name(){return this.constructor.NAME}setAdaptor(t){this.adaptor=t}initialize(){}reset(){}getMetrics(t){}styleSheet(t){return null}pageElements(t){return null}executeFilters(t,e,i,s){e={math:e,document:i,data:s};return t.execute(e),e.data}}Ir.NAME="generic",Ir.OPTIONS={preFilters:[],postFilters:[]};const Lr=Symbol();class Sr{constructor(t=null){this.next=null,this.prev=null,this.data=t}}class kr{constructor(...t){this.list=new Sr(Lr),this.list.next=this.list.prev=this.list,this.push(...t)}isBefore(t,e){return t<e}push(...t){for(const e of t){const t=new Sr(e);t.next=this.list,t.prev=this.list.prev,(this.list.prev=t).prev.next=t}return this}pop(){const t=this.list.prev;return t.data===Lr?null:(this.list.prev=t.prev,t.prev.next=this.list,t.next=t.prev=null,t.data)}unshift(...t){for(const e of t.slice(0).reverse()){const t=new Sr(e);t.next=this.list.next,t.prev=this.list,(this.list.next=t).next.prev=t}return this}shift(){const t=this.list.next;return t.data===Lr?null:(this.list.next=t.next,t.next.prev=this.list,t.next=t.prev=null,t.data)}remove(...t){const e=new Map;for(const i of t)e.set(i,!0);let i=this.list.next;for(;i.data!==Lr;){const t=i.next;e.has(i.data)&&(i.prev.next=i.next,i.next.prev=i.prev,i.next=i.prev=null),i=t}return this}clear(){return this.list.next.prev=this.list.prev.next=null,this.list.next=this.list.prev=this.list,this}*[Symbol.iterator](){let t=this.list.next;for(;t.data!==Lr;)yield t.data,t=t.next}*reversed(){let t=this.list.prev;for(;t.data!==Lr;)yield t.data,t=t.prev}insert(t,e=null){null===e&&(e=this.isBefore.bind(this));const i=new Sr(t);let s=this.list.next;for(;s.data!==Lr&&e(s.data,i.data);)s=s.next;return i.prev=s.prev,(i.next=s).prev.next=s.prev=i,this}sort(t=null){null===t&&(t=this.isBefore.bind(this));const e=[];for(const t of this)e.push(new kr(t));for(this.list.next=this.list.prev=this.list;1<e.length;){const i=e.shift(),s=e.shift();i.merge(s,t),e.push(i)}return e.length&&(this.list=e[0].list),this}merge(t,e=null){null===e&&(e=this.isBefore.bind(this));let i=this.list.next,s=t.list.next;for(;i.data!==Lr&&s.data!==Lr;)e(s.data,i.data)?([s.prev.next,i.prev.next]=[i,s],[s.prev,i.prev]=[i.prev,s.prev],[this.list.prev.next,t.list.prev.next]=[t.list,this.list],[this.list.prev,t.list.prev]=[t.list.prev,this.list.prev],[i,s]=[s.next,i]):i=i.next;return s.data!==Lr&&(this.list.prev.next=t.list.next,t.list.next.prev=this.list.prev,t.list.prev.next=this.list,this.list.prev=t.list.prev,t.list.next=t.list.prev=t.list),this}}class Rr extends kr{isBefore(t,e){return t.start.i<e.start.i||t.start.i===e.start.i&&t.start.n<e.start.n}}function Or(t,e,i,s,r,n,a=null){return{open:t,math:e,close:i,n:s,start:{n:r},end:{n:n},display:a}}class Mr{get isEscaped(){return null===this.display}constructor(t,e,i=!0,s={i:0,n:0,delim:""},r={i:0,n:0,delim:""}){this.root=null,this.typesetRoot=null,this.metrics={},this.inputData={},this.outputData={},this._state=u.UNPROCESSED,this.math=t,this.inputJax=e,this.display=i,this.start=s,this.end=r,this.root=null,this.typesetRoot=null,this.metrics={},this.inputData={},this.outputData={}}render(t){t.renderActions.renderMath(this,t)}rerender(t,e=u.RERENDER){this.state()>=e&&this.state(e-1),t.renderActions.renderMath(this,t,e)}convert(t,e=u.LAST){t.renderActions.renderConvert(this,t,e)}compile(t){this.state()<u.COMPILED&&(this.root=this.inputJax.compile(this,t),this.state(u.COMPILED))}typeset(t){this.state()<u.TYPESET&&(this.typesetRoot=t.outputJax[this.isEscaped?"escaped":"typeset"](this,t),this.state(u.TYPESET))}updateDocument(t){}removeFromDocument(t=0){this.clear()}setMetrics(t,e,i,s){this.metrics={em:t,ex:e,containerWidth:i,scale:s}}state(t=null,e=!1){return null!=t&&(t<u.INSERTED&&this._state>=u.INSERTED&&this.removeFromDocument(e),t<u.TYPESET&&this._state>=u.TYPESET&&(this.outputData={}),t<u.COMPILED&&this._state>=u.COMPILED&&(this.inputData={}),this._state=t),this._state}reset(t=!1){this.state(u.UNPROCESSED,t)}clear(){}}const u={UNPROCESSED:0,FINDMATH:10,COMPILED:20,CONVERT:100,METRICS:110,RERENDER:125,TYPESET:150,INSERTED:200,LAST:1e4};function Dr(t,e){if(t in u)throw Error("State "+t+" already exists");u[t]=e}class Pr{constructor(t=null){this.defaultKind="unknown",this.nodeMap=new Map,this.node={},null===t&&(t=this.constructor.defaultNodes);for(const e of Object.keys(t))this.setNodeClass(e,t[e])}create(t,...e){return(this.node[t]||this.node[this.defaultKind])(...e)}setNodeClass(t,e){this.nodeMap.set(t,e);const i=this.nodeMap.get(t);this.node[t]=(...t)=>new i(this,...t)}getNodeClass(t){return this.nodeMap.get(t)}deleteNodeClass(t){this.nodeMap.delete(t),delete this.node[t]}nodeIsKind(t,e){return t instanceof this.getNodeClass(e)}getKinds(){return Array.from(this.nodeMap.keys())}}Pr.defaultNodes={};class Br extends Pr{create(t,e={},i=[]){return this.node[t](e,i)}}const Fr="_inherit_";class Ur{constructor(t,e){this.global=e,this.defaults=Object.create(e),this.inherited=Object.create(this.defaults),this.attributes=Object.create(this.inherited),Object.assign(this.defaults,t)}set(t,e){this.attributes[t]=e}setList(t){Object.assign(this.attributes,t)}unset(t){delete this.attributes[t]}get(t){let e=this.attributes[t];return e=e===Fr?this.global[t]:e}getExplicit(t){return this.hasExplicit(t)?this.attributes[t]:void 0}hasExplicit(t){return Object.hasOwn(this.attributes,t)}hasOneOf(t){for(const e of t)if(this.hasExplicit(e))return!0;return!1}getList(...t){const e={};for(const i of t)e[i]=this.get(i);return e}setInherited(t,e){this.inherited[t]=e}getInherited(t){return this.inherited[t]}getDefault(t){return this.defaults[t]}isSet(t){return Object.hasOwn(this.attributes,t)||Object.hasOwn(this.inherited,t)}hasDefault(t){return t in this.defaults}getExplicitNames(){return Object.keys(this.attributes)}getInheritedNames(){return Object.keys(this.inherited)}getDefaultNames(){return Object.keys(this.defaults)}getGlobalNames(){return Object.keys(this.global)}getAllAttributes(){return this.attributes}getAllInherited(){return this.inherited}getAllDefaults(){return this.defaults}getAllGlobals(){return this.global}}class qr{constructor(t,e={},i=[]){this.factory=t,this.parent=null,this.properties={},this.childNodes=[];for(const t of Object.keys(e))this.setProperty(t,e[t]);i.length&&this.setChildren(i)}get kind(){return"unknown"}setProperty(t,e){this.properties[t]=e}getProperty(t){return this.properties[t]}getPropertyNames(){return Object.keys(this.properties)}getAllProperties(){return this.properties}removeProperty(...t){for(const e of t)delete this.properties[e]}isKind(t){return this.factory.nodeIsKind(this,t)}setChildren(t){this.childNodes=[];for(const e of t)this.appendChild(e)}appendChild(t){return this.childNodes.push(t),t.parent=this,t}replaceChild(t,e){var i=this.childIndex(e);return null!==i&&((this.childNodes[i]=t).parent=this,e.parent===this&&(e.parent=null)),t}removeChild(t){var e=this.childIndex(t);return null!==e&&(this.childNodes.splice(e,1),t.parent=null),t}childIndex(t){t=this.childNodes.indexOf(t);return-1===t?null:t}copy(){const t=this.factory.create(this.kind);t.properties=Object.assign({},this.properties);for(const e of this.childNodes||[])e&&t.appendChild(e.copy());return t}findNodes(e){const i=[];return this.walkTree(t=>{t.isKind(e)&&i.push(t)}),i}walkTree(t,e){t(this,e);for(const i of this.childNodes)i&&i.walkTree(t,e);return e}toString(){return this.kind+"("+this.childNodes.join(",")+")"}}class jr extends qr{setChildren(t){}appendChild(t){return t}replaceChild(t,e){return e}childIndex(t){return null}walkTree(t,e){return t(this,e),e}toString(){return this.kind}}const h={ORD:0,OP:1,BIN:2,REL:3,OPEN:4,CLOSE:5,PUNCT:6,INNER:7,NONE:-1},Hr=["ORD","OP","BIN","REL","OPEN","CLOSE","PUNCT","INNER"],Gr=["","thinmathspace","mediummathspace","thickmathspace"],Vr=[[0,-1,2,3,0,0,0,1],[-1,-1,0,3,0,0,0,1],[2,2,0,0,2,0,0,2],[3,3,0,0,3,0,0,3],[0,0,0,0,0,0,0,0],[0,-1,2,3,0,0,0,1],[1,1,0,1,1,1,1,1],[1,-1,2,3,1,0,1,1]],Wr=new Set(["normal","bold","italic","bold-italic","double-struck","fraktur","bold-fraktur","script","bold-script","sans-serif","bold-sans-serif","sans-serif-italic","sans-serif-bold-italic","monospace","inital","tailed","looped","stretched"]),Xr=["indentalign","indentalignfirst","indentshift","indentshiftfirst"];class o extends qr{constructor(t,e={},i=[]){super(t),this.prevClass=null,this.prevLevel=null,this.texclass=null,this.arity<0&&(this.childNodes=[t.create("inferredMrow")],this.childNodes[0].parent=this),this.setChildren(i),this.attributes=new Ur(t.getNodeClass(this.kind).defaults,t.getNodeClass("math").defaults),this.attributes.setList(e)}copy(t=!1){const e=this.factory.create(this.kind);if(e.properties=Object.assign({},this.properties),this.attributes){var i=this.attributes.getAllAttributes();for(const s of Object.keys(i))"id"===s&&!t||e.attributes.set(s,i[s])}if(this.childNodes&&this.childNodes.length){let t=this.childNodes;for(const r of t=1===t.length&&t[0].isInferred?t[0].childNodes:t)r?e.appendChild(r.copy()):e.childNodes.push(null)}return e}get texClass(){return this.texclass}set texClass(t){this.texclass=t}get isToken(){return!1}get isEmbellished(){return!1}get isSpacelike(){return!1}get linebreakContainer(){return!1}get linebreakAlign(){return"data-align"}get arity(){return 1/0}get isInferred(){return!1}get Parent(){let t=this.parent;for(;t&&t.notParent;)t=t.Parent;return t}get notParent(){return!1}setChildren(t){return this.arity<0?this.childNodes[0].setChildren(t):super.setChildren(t)}appendChild(t){if(this.arity<0)return this.childNodes[0].appendChild(t),t;if(t.isInferred){if(this.arity===1/0)return t.childNodes.forEach(t=>super.appendChild(t)),t;const e=t;(t=this.factory.create("mrow")).setChildren(e.childNodes),t.attributes=e.attributes;for(const i of e.getPropertyNames())t.setProperty(i,e.getProperty(i))}return super.appendChild(t)}replaceChild(t,e){return this.arity<0?(this.childNodes[0].replaceChild(t,e),t):super.replaceChild(t,e)}core(){return this}coreMO(){return this}coreIndex(){return 0}childPosition(){let e=null,i=this.parent;for(;i&&i.notParent;)i=(e=i).parent;if(e=e||this,i){let t=0;for(const s of i.childNodes){if(s===e)return t;t++}}return null}setTeXclass(t){return this.getPrevClass(t),null!=this.texClass?this:t}updateTeXclass(t){t&&(this.prevClass=t.prevClass,this.prevLevel=t.prevLevel,t.prevClass=t.prevLevel=null,this.texClass=t.texClass)}getPrevClass(t){t&&(this.prevClass=t.texClass,this.prevLevel=t.attributes.get("scriptlevel"))}texSpacing(){var t=null!=this.prevClass?this.prevClass:h.NONE,e=this.texClass||h.ORD;if(t===h.NONE||e===h.NONE)return"";t=Vr[t][e];return(0<this.prevLevel||0<this.attributes.get("scriptlevel"))&&0<=t?"":Gr[Math.abs(t)]}hasSpacingAttributes(){return this.isEmbellished&&this.coreMO().hasSpacingAttributes()}setInheritedAttributes(t={},e=!1,i=0,s=!1){var r,n=this.attributes.getAllDefaults();for(const e of Object.keys(t)){if(Object.hasOwn(n,e)||Object.hasOwn(o.alwaysInherit,e)){const[i,s]=t[e];null!=(r=null==(r=o.noInherit[i])?void 0:r[this.kind])&&r[e]||this.attributes.setInherited(e,s)}null!=(r=o.stopInherit[this.kind])&&r[e]&&delete(t=Object.assign({},t))[e]}void 0===this.attributes.getExplicit("displaystyle")&&this.attributes.setInherited("displaystyle",e),void 0===this.attributes.getExplicit("scriptlevel")&&this.attributes.setInherited("scriptlevel",i),s&&this.setProperty("texprimestyle",s);var a=this.arity;if(0<=a&&a!==1/0&&(1===a&&0===this.childNodes.length||1!==a&&this.childNodes.length!==a))if(a<this.childNodes.length)this.childNodes=this.childNodes.slice(0,a);else for(;this.childNodes.length<a;)this.appendChild(this.factory.create("mrow"));if(this.linebreakContainer&&!this.isEmbellished){const e=this.linebreakAlign;if(e){const i=this.attributes.get(e)||"left";t=this.addInheritedAttributes(t,{indentalign:i,indentshift:"0",indentalignfirst:i,indentshiftfirst:"0",indentalignlast:"indentalign",indentshiftlast:"indentshift"})}}this.setChildInheritedAttributes(t,e,i,s)}setChildInheritedAttributes(t,e,i,s){for(const r of this.childNodes)r.setInheritedAttributes(t,e,i,s)}addInheritedAttributes(t,e){const i=Object.assign({},t);for(const t of Object.keys(e))"displaystyle"!==t&&"scriptlevel"!==t&&"style"!==t&&(i[t]=[this.kind,e[t]]);return i}inheritAttributesFrom(t){const e=t.attributes,i=e.get("displaystyle"),s=e.get("scriptlevel"),r=e.isSet("mathsize")?{mathsize:["math",e.get("mathsize")]}:{},n=t.getProperty("texprimestyle")||!1;this.setInheritedAttributes(r,i,s,n)}verifyTree(t=null){var e;null!==t&&(this.verifyAttributes(t),e=this.arity,t.checkArity&&0<=e&&e!==1/0&&(1===e&&0===this.childNodes.length||1!==e&&this.childNodes.length!==e)&&this.mError('Wrong number of children for "'+this.kind+'" node',t,!0),this.verifyChildren(t))}verifyAttributes(t){if(t.checkAttributes){const i=this.attributes,s=[];for(const t of i.getExplicitNames())"data-"===t.substring(0,5)||void 0!==i.getDefault(t)||t.match(/^(?:class|style|id|(?:xlink:)?href)$/)||s.push(t);s.length&&this.mError("Unknown attributes for "+this.kind+" node: "+s.join(", "),t)}var e;t.checkMathvariants&&(e=this.attributes.getExplicit("mathvariant"))&&!Wr.has(e)&&!this.getProperty("ignore-variant")&&this.mError("Invalid mathvariant: "+e,t,!0)}verifyChildren(t){for(const e of this.childNodes)e.verifyTree(t)}mError(t,e,i=!1){if(this.parent&&this.parent.isKind("merror"))return null;const s=this.factory.create("merror");if(s.attributes.set("data-mjx-message",t),e.fullErrors||i){const i=this.factory.create("mtext"),r=this.factory.create("text");r.setText(e.fullErrors?t:this.kind),i.appendChild(r),s.appendChild(i),this.parent.replaceChild(s,this),e.fullErrors||s.attributes.set("title",t)}else this.parent.replaceChild(s,this),s.appendChild(this);return s}}o.defaults={mathbackground:Fr,mathcolor:Fr,mathsize:Fr,dir:Fr},o.noInherit={mstyle:{mpadded:{width:!0,height:!0,depth:!0,lspace:!0,voffset:!0},mtable:{width:!0,height:!0,depth:!0,align:!0}},maligngroup:{mrow:{groupalign:!0},mtable:{groupalign:!0}},mtr:{msqrt:{"data-vertical-align":!0},mroot:{"data-vertical-align":!0}},mlabeledtr:{msqrt:{"data-vertical-align":!0},mroot:{"data-vertical-align":!0}}},o.stopInherit={mtd:{columnalign:!0,rowalign:!0,groupalign:!0}},o.alwaysInherit={scriptminsize:!0,scriptsizemultiplier:!0,infixlinebreakstyle:!0},o.verifyDefaults={checkArity:!0,checkAttributes:!1,checkMathvariants:!0,fullErrors:!1,fixMmultiscripts:!0,fixMtables:!0};class zr extends o{get isToken(){return!0}getText(){let t="";for(const e of this.childNodes)e instanceof $r?t+=e.getText():"textContent"in e&&(t+=e.textContent());return t}setChildInheritedAttributes(t,e,i,s){for(const r of this.childNodes)r instanceof o&&r.setInheritedAttributes(t,e,i,s)}walkTree(t,e){t(this,e);for(const i of this.childNodes)i instanceof o&&i.walkTree(t,e);return e}}zr.defaults=Object.assign(Object.assign({},o.defaults),{mathvariant:"normal",mathsize:Fr});class Kr extends o{get isSpacelike(){return this.childNodes[0].isSpacelike}get isEmbellished(){return this.childNodes[0].isEmbellished}get arity(){return-1}core(){return this.childNodes[0]}coreMO(){return this.childNodes[0].coreMO()}setTeXclass(t){return t=this.childNodes[0].setTeXclass(t),this.updateTeXclass(this.childNodes[0]),t}}Kr.defaults=o.defaults;class Jr extends o{get isEmbellished(){return this.childNodes[0].isEmbellished}core(){return this.childNodes[0]}coreMO(){return this.childNodes[0].coreMO()}setTeXclass(t){this.getPrevClass(t),this.texClass=h.ORD;const e=this.childNodes[0];let i=null;e&&(this.isEmbellished||e.isKind("mi")?(i=e.setTeXclass(t),this.updateTeXclass(this.core())):e.setTeXclass(null));for(const t of this.childNodes.slice(1))t&&t.setTeXclass(null);return i||this}}Jr.defaults=o.defaults;class Yr extends jr{get isToken(){return!1}get isEmbellished(){return!1}get isSpacelike(){return!1}get linebreakContainer(){return!1}get linebreakAlign(){return""}get arity(){return 0}get isInferred(){return!1}get notParent(){return!1}get Parent(){return this.parent}get texClass(){return h.NONE}get prevClass(){return h.NONE}get prevLevel(){return 0}hasSpacingAttributes(){return!1}get attributes(){return null}core(){return this}coreMO(){return this}coreIndex(){return 0}childPosition(){return 0}setTeXclass(t){return t}texSpacing(){return""}setInheritedAttributes(t,e,i,s){}inheritAttributesFrom(t){}verifyTree(t){}mError(t,e,i=0){return null}}class $r extends Yr{constructor(){super(...arguments),this.text=""}get kind(){return"text"}getText(){return this.text}setText(t){return this.text=t,this}copy(){return this.factory.create(this.kind).setText(this.getText())}toString(){return this.text}}class Qr extends Yr{constructor(){super(...arguments),this.xml=null,this.adaptor=null}get kind(){return"XML"}getXML(){return this.xml}setXML(t,e=null){return this.xml=t,this.adaptor=e,this}getSerializedXML(){return this.adaptor.serializeXML(this.xml)}copy(){return this.factory.create(this.kind).setXML(this.adaptor.clone(this.xml))}toString(){return"XML data"}}class Zr extends Kr{get kind(){return"math"}get linebreakContainer(){return!0}get linebreakAlign(){return""}setChildInheritedAttributes(t,e,i,s){"display"===this.attributes.get("mode")&&this.attributes.setInherited("display","block"),t=this.addInheritedAttributes(t,this.attributes.getAllAttributes()),e=!!this.attributes.get("displaystyle")||!this.attributes.get("displaystyle")&&"block"===this.attributes.get("display"),this.attributes.setInherited("displaystyle",e),i=this.attributes.get("scriptlevel")||this.constructor.defaults.scriptlevel,super.setChildInheritedAttributes(t,e,i,s)}verifyTree(t=null){super.verifyTree(t),this.parent&&this.mError("Improper nesting of math tags",t,!0)}}Zr.defaults=Object.assign(Object.assign({},Kr.defaults),{mathvariant:"normal",mathsize:"normal",mathcolor:"",mathbackground:"transparent",dir:"ltr",scriptlevel:0,displaystyle:!1,display:"inline",maxwidth:"",overflow:"linebreak",altimg:"","altimg-width":"","altimg-height":"","altimg-valign":"",alttext:"",cdgroup:"",scriptsizemultiplier:1/Math.sqrt(2),scriptminsize:".4em",infixlinebreakstyle:"before",lineleading:"100%",linebreakmultchar:"â¢",indentshift:"auto",indentalign:"auto",indenttarget:"",indentalignfirst:"indentalign",indentshiftfirst:"indentshift",indentalignlast:"indentalign",indentshiftlast:"indentshift"});class tn extends zr{constructor(){super(...arguments),this.texclass=h.ORD}get kind(){return"mi"}setInheritedAttributes(t={},e=!1,i=0,s=!1){super.setInheritedAttributes(t,e,i,s),this.getText().match(tn.singleCharacter)&&!t.mathvariant&&this.attributes.setInherited("mathvariant","italic")}setTeXclass(t){this.getPrevClass(t);const e=this.getText();return 1<e.length&&e.match(tn.operatorName)&&"normal"===this.attributes.get("mathvariant")&&void 0===this.getProperty("autoOP")&&void 0===this.getProperty("texClass")&&(this.texClass=h.OP,this.setProperty("autoOP",!0)),this}}tn.defaults=Object.assign({},zr.defaults),tn.operatorName=/^[a-z][a-z0-9]*$/i,tn.singleCharacter=/^[\uD800-\uDBFF]?.[\u0300-\u036F\u1AB0-\u1ABE\u1DC0-\u1DFF\u20D0-\u20EF]*$/;class en extends zr{constructor(){super(...arguments),this.texclass=h.ORD}get kind(){return"mn"}}function a(t,e,i=h.BIN,s=null){return[t,e,i,s]}en.defaults=Object.assign({},zr.defaults);const s={ORD:a(0,0,h.ORD),ORD11:a(1,1,h.ORD),ORD21:a(2,1,h.ORD),ORD02:a(0,2,h.ORD),ORD55:a(5,5,h.ORD),NONE:a(0,0,h.NONE),OP:a(1,2,h.OP,{largeop:!0,movablelimits:!0,symmetric:!0}),OPFIXED:a(1,2,h.OP,{largeop:!0,movablelimits:!0}),INTEGRAL:a(0,1,h.OP,{largeop:!0,symmetric:!0}),INTEGRAL2:a(1,2,h.OP,{largeop:!0,symmetric:!0}),BIN3:a(3,3,h.BIN),BIN4:a(4,4,h.BIN),BIN01:a(0,1,h.BIN),BIN5:a(5,5,h.BIN),TALLBIN:a(4,4,h.BIN,{stretchy:!0}),BINOP:a(4,4,h.BIN,{largeop:!0,movablelimits:!0}),REL:a(5,5,h.REL),REL1:a(1,1,h.REL,{stretchy:!0}),REL4:a(4,4,h.REL),RELSTRETCH:a(5,5,h.REL,{stretchy:!0}),RELACCENT:a(5,5,h.REL,{accent:!0}),WIDEREL:a(5,5,h.REL,{accent:!0,stretchy:!0}),OPEN:a(0,0,h.OPEN,{fence:!0,stretchy:!0,symmetric:!0}),CLOSE:a(0,0,h.CLOSE,{fence:!0,stretchy:!0,symmetric:!0}),INNER:a(0,0,h.INNER),PUNCT:a(0,3,h.PUNCT),ACCENT:a(0,0,h.ORD,{accent:!0}),WIDEACCENT:a(0,0,h.ORD,{accent:!0,stretchy:!0})},sn=[[32,127,h.REL,"mo"],[160,191,h.ORD,"mo"],[192,591,h.ORD,"mi"],[688,879,h.ORD,"mo"],[880,6688,h.ORD,"mi"],[6832,6911,h.ORD,"mo"],[6912,7615,h.ORD,"mi"],[7616,7679,h.ORD,"mo"],[7680,8191,h.ORD,"mi"],[8192,8303,h.ORD,"mo"],[8304,8351,h.ORD,"mo"],[8448,8527,h.ORD,"mi"],[8528,8591,h.ORD,"mn"],[8592,8703,h.REL,"mo"],[8704,8959,h.BIN,"mo"],[8960,9215,h.ORD,"mo"],[9312,9471,h.ORD,"mn"],[9472,10223,h.ORD,"mo"],[10224,10239,h.REL,"mo"],[10240,10495,h.ORD,"mtext"],[10496,10623,h.REL,"mo"],[10624,10751,h.ORD,"mo"],[10752,11007,h.BIN,"mo"],[11008,11055,h.ORD,"mo"],[11056,11087,h.REL,"mo"],[11088,11263,h.ORD,"mo"],[11264,11744,h.ORD,"mi"],[11776,11903,h.ORD,"mo"],[11904,12255,h.ORD,"mi","normal"],[12272,12351,h.ORD,"mo"],[12352,42143,h.ORD,"mi","normal"],[42192,43055,h.ORD,"mi"],[43056,43071,h.ORD,"mn"],[43072,55295,h.ORD,"mi"],[63744,64255,h.ORD,"mi","normal"],[64256,65023,h.ORD,"mi"],[65024,65135,h.ORD,"mo"],[65136,65791,h.ORD,"mi"],[65792,65935,h.ORD,"mn"],[65936,74751,h.ORD,"mi","normal"],[74752,74879,h.ORD,"mn"],[74880,113823,h.ORD,"mi","normal"],[113824,119391,h.ORD,"mo"],[119648,119679,h.ORD,"mn"],[119808,120781,h.ORD,"mi"],[120782,120831,h.ORD,"mn"],[122624,129023,h.ORD,"mo"],[129024,129279,h.REL,"mo"],[129280,129535,h.ORD,"mo"],[131072,195103,h.ORD,"mi","normal"]];function rn(t){var e=an.infix[t]||an.prefix[t]||an.postfix[t];if(e)return[0,0,e[2],"mo"];var i=t.codePointAt(0);for(const t of sn)if(i<=t[1]){if(i>=t[0])return t;break}return[0,0,h.REL,"mo"]}const nn=[[0,0],[1,2],[3,3],[4,4],[0,0],[0,0],[0,3]],an={prefix:{"(":s.OPEN,"+":s.BIN01,"-":s.BIN01,"[":s.OPEN,"{":s.OPEN,"|":s.OPEN,"||":[0,0,h.BIN,{fence:!0,stretchy:!0,symmetric:!0}],"|||":[0,0,h.ORD,{fence:!0,stretchy:!0,symmetric:!0}],"Â¬":s.ORD21,"Â±":s.BIN01,"â€–":[0,0,h.ORD,{fence:!0,stretchy:!0}],"â€˜":[0,0,h.OPEN,{fence:!0}],"â€œ":[0,0,h.OPEN,{fence:!0}],"â……":s.ORD21,"â…†":a(2,0,h.ORD),"âˆ€":s.ORD21,"âˆ‚":s.ORD21,"âˆƒ":s.ORD21,"âˆ„":s.ORD21,"âˆ‡":s.ORD21,"âˆ":s.OP,"âˆ":s.OP,"âˆ‘":s.OP,"âˆ’":s.BIN01,"âˆ“":s.BIN01,"âˆš":[1,1,h.ORD,{stretchy:!0}],"âˆ›":s.ORD11,"âˆœ":s.ORD11,"âˆ ":s.ORD,"âˆ¡":s.ORD,"âˆ¢":s.ORD,"âˆ«":s.INTEGRAL,"âˆ¬":s.INTEGRAL,"âˆ­":s.INTEGRAL,"âˆ®":s.INTEGRAL,"âˆ¯":s.INTEGRAL,"âˆ°":s.INTEGRAL,"âˆ±":s.INTEGRAL,"âˆ²":s.INTEGRAL,"âˆ³":s.INTEGRAL,"â‹€":s.OP,"â‹":s.OP,"â‹‚":s.OP,"â‹ƒ":s.OP,"âŒˆ":s.OPEN,"âŒŠ":s.OPEN,"âŒ©":s.OPEN,"â²":s.OPEN,"âŸ¦":s.OPEN,"âŸ¨":s.OPEN,"âŸª":s.OPEN,"âŸ¬":s.OPEN,"âŸ®":s.OPEN,"â¦€":[0,0,h.ORD,{fence:!0,stretchy:!0}],"â¦ƒ":s.OPEN,"â¦…":s.OPEN,"â¦‡":s.OPEN,"â¦‰":s.OPEN,"â¦‹":s.OPEN,"â¦":s.OPEN,"â¦":s.OPEN,"â¦‘":s.OPEN,"â¦“":s.OPEN,"â¦•":s.OPEN,"â¦—":s.OPEN,"â§¼":s.OPEN,"â¨€":s.OP,"â¨":s.OP,"â¨‚":s.OP,"â¨ƒ":s.OP,"â¨„":s.OP,"â¨…":s.OP,"â¨†":s.OP,"â¨‡":s.OP,"â¨ˆ":s.OP,"â¨‰":s.OP,"â¨Š":s.OP,"â¨‹":s.INTEGRAL2,"â¨Œ":s.INTEGRAL,"â¨":s.INTEGRAL2,"â¨":s.INTEGRAL2,"â¨":s.INTEGRAL2,"â¨":s.OP,"â¨‘":s.OP,"â¨’":s.OP,"â¨“":s.OP,"â¨”":s.OP,"â¨•":s.INTEGRAL2,"â¨–":s.INTEGRAL2,"â¨—":s.INTEGRAL2,"â¨˜":s.INTEGRAL2,"â¨™":s.INTEGRAL2,"â¨š":s.INTEGRAL2,"â¨›":s.INTEGRAL2,"â¨œ":s.INTEGRAL2,"â«¼":s.OP,"â«¿":s.OP},postfix:{"!!":a(1,0),"!":[1,0,h.CLOSE,null],'"':s.ACCENT,"&":s.ORD,")":s.CLOSE,"++":a(0,0),"--":a(0,0),"..":a(0,0),"...":s.ORD,"'":s.ACCENT,"]":s.CLOSE,"^":s.WIDEACCENT,_:s.WIDEACCENT,"`":s.ACCENT,"|":s.CLOSE,"}":s.CLOSE,"~":s.WIDEACCENT,"||":[0,0,h.BIN,{fence:!0,stretchy:!0,symmetric:!0}],"|||":[0,0,h.ORD,{fence:!0,stretchy:!0,symmetric:!0}],"Â¨":s.ACCENT,"Âª":s.ACCENT,"Â¯":s.WIDEACCENT,"Â°":s.ORD,"Â²":s.ACCENT,"Â³":s.ACCENT,"Â´":s.ACCENT,"Â¸":s.ACCENT,"Â¹":s.ACCENT,"Âº":s.ACCENT,"Ë†":s.WIDEACCENT,"Ë‡":s.WIDEACCENT,"Ë‰":s.WIDEACCENT,"ËŠ":s.ACCENT,"Ë‹":s.ACCENT,"Ë":s.WIDEACCENT,"Ë˜":s.ACCENT,"Ë™":s.ACCENT,"Ëš":s.ACCENT,"Ëœ":s.WIDEACCENT,"Ë":s.ACCENT,"Ë·":s.WIDEACCENT,"Ì‚":s.WIDEACCENT,"Ì‘":s.ACCENT,"Ï¶":s.REL,"â€–":[0,0,h.ORD,{fence:!0,stretchy:!0}],"â€™":[0,0,h.CLOSE,{fence:!0}],"â€š":s.ACCENT,"â€›":s.ACCENT,"â€":[0,0,h.CLOSE,{fence:!0}],"â€":s.ACCENT,"â€Ÿ":s.ACCENT,"â€²":s.ORD,"â€³":s.ORD,"â€´":s.ORD,"â€µ":s.ORD,"â€¶":s.ORD,"â€·":s.ORD,"â€¾":s.WIDEACCENT,"â—":s.ORD,"âƒ›":s.ACCENT,"âƒœ":s.ACCENT,"âŒ‰":s.CLOSE,"âŒ‹":s.CLOSE,"âŒª":s.CLOSE,"â´":s.WIDEACCENT,"âµ":s.WIDEACCENT,"âœ":s.WIDEACCENT,"â":s.WIDEACCENT,"â":s.WIDEACCENT,"âŸ":s.WIDEACCENT,"â ":s.WIDEACCENT,"â¡":s.WIDEACCENT,"â– ":s.BIN3,"â–¡":s.BIN3,"â–ª":s.BIN3,"â–«":s.BIN3,"â–­":s.BIN3,"â–®":s.BIN3,"â–¯":s.BIN3,"â–°":s.BIN3,"â–±":s.BIN3,"â–²":s.BIN4,"â–´":s.BIN4,"â–¶":s.BIN4,"â–·":s.BIN4,"â–¸":s.BIN4,"â–¼":s.BIN4,"â–¾":s.BIN4,"â—€":s.BIN4,"â—":s.BIN4,"â—‚":s.BIN4,"â—„":s.BIN4,"â—…":s.BIN4,"â—†":s.BIN4,"â—‡":s.BIN4,"â—ˆ":s.BIN4,"â—‰":s.BIN4,"â—Œ":s.BIN4,"â—":s.BIN4,"â—":s.BIN4,"â—":s.BIN4,"â—–":s.BIN4,"â——":s.BIN4,"â—¦":s.BIN4,"â™­":s.ORD02,"â™®":s.ORD02,"â™¯":s.ORD02,"â³":s.CLOSE,"âŸ§":s.CLOSE,"âŸ©":s.CLOSE,"âŸ«":s.CLOSE,"âŸ­":s.CLOSE,"âŸ¯":s.CLOSE,"â¦€":[0,0,h.ORD,{fence:!0,stretchy:!0}],"â¦„":s.CLOSE,"â¦†":s.CLOSE,"â¦ˆ":s.CLOSE,"â¦Š":s.CLOSE,"â¦Œ":s.CLOSE,"â¦":s.CLOSE,"â¦":s.CLOSE,"â¦’":s.CLOSE,"â¦”":s.CLOSE,"â¦–":s.CLOSE,"â¦˜":s.CLOSE,"â§½":s.CLOSE},infix:{"!=":s.BIN4,"#":s.ORD,$:s.ORD,"%":[3,3,h.ORD,null],"&&":s.BIN4,"":s.ORD,"*":s.BIN3,"**":a(1,1),"*=":s.BIN4,"+":s.BIN4,"+=":s.BIN4,",":[0,3,h.PUNCT,{linebreakstyle:"after",separator:!0}],"-":s.BIN4,"-=":s.BIN4,"->":s.BIN5,".":[0,3,h.PUNCT,{linebreakstyle:"after",separator:!0}],"/":s.ORD11,"//":a(1,1),"/=":s.BIN4,":":[1,2,h.REL,null],":=":s.BIN4,";":[0,3,h.PUNCT,{linebreakstyle:"after",separator:!0}],"<":s.REL,"<=":s.BIN5,"<>":a(1,1),"=":s.REL,"==":s.BIN4,">":s.REL,">=":s.BIN5,"?":[1,1,h.CLOSE,null],"@":s.ORD11,"\\":s.ORD,"^":s.ORD11,_:s.ORD11,"|":[2,2,h.ORD,{fence:!0,stretchy:!0,symmetric:!0}],"||":[2,2,h.BIN,{fence:!0,stretchy:!0,symmetric:!0}],"|||":[2,2,h.ORD,{fence:!0,stretchy:!0,symmetric:!0}],"Â±":s.BIN4,"Â·":s.BIN4,"Ã—":s.BIN4,"Ã·":s.BIN4,"Ê¹":s.ORD,"Ì€":s.ACCENT,"Ì":s.ACCENT,"Ìƒ":s.WIDEACCENT,"Ì„":s.ACCENT,"Ì†":s.ACCENT,"Ì‡":s.ACCENT,"Ìˆ":s.ACCENT,"ÌŒ":s.ACCENT,"Ì²":s.WIDEACCENT,"Ì¸":s.REL4,"â€•":[0,0,h.ORD,{stretchy:!0}],"â€—":[0,0,h.ORD,{stretchy:!0}],"â€ ":s.BIN3,"â€¡":s.BIN3,"â€¢":s.BIN4,"â€¦":s.INNER,"âƒ":s.BIN4,"â„":s.TALLBIN,"â¡":s.NONE,"â¢":s.NONE,"â£":[0,0,h.NONE,{linebreakstyle:"after",separator:!0}],"â¤":s.NONE,"âƒ—":s.ACCENT,"â„‘":s.ORD,"â„“":s.ORD,"â„˜":s.ORD,"â„œ":s.ORD,"â†":s.WIDEREL,"â†‘":s.RELSTRETCH,"â†’":s.WIDEREL,"â†“":s.RELSTRETCH,"â†”":s.WIDEREL,"â†•":s.RELSTRETCH,"â†–":s.RELSTRETCH,"â†—":s.RELSTRETCH,"â†˜":s.RELSTRETCH,"â†™":s.RELSTRETCH,"â†š":s.RELACCENT,"â†›":s.RELACCENT,"â†œ":s.WIDEREL,"â†":s.WIDEREL,"â†":s.WIDEREL,"â†Ÿ":s.WIDEREL,"â† ":s.WIDEREL,"â†¡":s.RELSTRETCH,"â†¢":s.WIDEREL,"â†£":s.WIDEREL,"â†¤":s.WIDEREL,"â†¥":s.RELSTRETCH,"â†¦":s.WIDEREL,"â†§":s.RELSTRETCH,"â†¨":s.RELSTRETCH,"â†©":s.WIDEREL,"â†ª":s.WIDEREL,"â†«":s.WIDEREL,"â†¬":s.WIDEREL,"â†­":s.WIDEREL,"â†®":s.RELACCENT,"â†¯":s.RELSTRETCH,"â†°":s.RELSTRETCH,"â†±":s.RELSTRETCH,"â†²":s.RELSTRETCH,"â†³":s.RELSTRETCH,"â†´":s.RELSTRETCH,"â†µ":s.RELSTRETCH,"â†¶":s.RELACCENT,"â†·":s.RELACCENT,"â†¸":s.REL,"â†¹":s.WIDEREL,"â†º":s.REL,"â†»":s.REL,"â†¼":s.WIDEREL,"â†½":s.WIDEREL,"â†¾":s.RELSTRETCH,"â†¿":s.RELSTRETCH,"â‡€":s.WIDEREL,"â‡":s.WIDEREL,"â‡‚":s.RELSTRETCH,"â‡ƒ":s.RELSTRETCH,"â‡„":s.WIDEREL,"â‡…":s.RELSTRETCH,"â‡†":s.WIDEREL,"â‡‡":s.WIDEREL,"â‡ˆ":s.RELSTRETCH,"â‡‰":s.WIDEREL,"â‡Š":s.RELSTRETCH,"â‡‹":s.WIDEREL,"â‡Œ":s.WIDEREL,"â‡":s.RELACCENT,"â‡":s.RELACCENT,"â‡":s.RELACCENT,"â‡":s.WIDEREL,"â‡‘":s.RELSTRETCH,"â‡’":s.WIDEREL,"â‡“":s.RELSTRETCH,"â‡”":s.WIDEREL,"â‡•":s.RELSTRETCH,"â‡–":s.RELSTRETCH,"â‡—":s.RELSTRETCH,"â‡˜":s.RELSTRETCH,"â‡™":s.RELSTRETCH,"â‡š":s.WIDEREL,"â‡›":s.WIDEREL,"â‡œ":s.WIDEREL,"â‡":s.WIDEREL,"â‡":s.REL,"â‡Ÿ":s.REL,"â‡ ":s.WIDEREL,"â‡¡":s.RELSTRETCH,"â‡¢":s.WIDEREL,"â‡£":s.RELSTRETCH,"â‡¤":s.WIDEREL,"â‡¥":s.WIDEREL,"â‡¦":s.WIDEREL,"â‡§":s.RELSTRETCH,"â‡¨":s.WIDEREL,"â‡©":s.RELSTRETCH,"â‡ª":s.RELSTRETCH,"â‡«":s.RELSTRETCH,"â‡¬":s.RELSTRETCH,"â‡­":s.RELSTRETCH,"â‡®":s.RELSTRETCH,"â‡¯":s.RELSTRETCH,"â‡°":s.WIDEREL,"â‡±":s.REL,"â‡²":s.REL,"â‡³":s.RELSTRETCH,"â‡´":s.RELACCENT,"â‡µ":s.RELSTRETCH,"â‡¶":s.WIDEREL,"â‡·":s.RELACCENT,"â‡¸":s.RELACCENT,"â‡¹":s.RELACCENT,"â‡º":s.RELACCENT,"â‡»":s.RELACCENT,"â‡¼":s.RELACCENT,"â‡½":s.WIDEREL,"â‡¾":s.WIDEREL,"â‡¿":s.WIDEREL,"âˆ":a(1,2,h.ORD),"âˆ…":s.ORD,"âˆ†":s.BIN3,"âˆˆ":s.REL,"âˆ‰":s.REL,"âˆŠ":s.REL,"âˆ‹":s.REL,"âˆŒ":s.REL,"âˆ":s.REL,"âˆ":s.BIN3,"âˆ’":s.BIN4,"âˆ“":s.BIN4,"âˆ”":s.BIN4,"âˆ•":s.TALLBIN,"âˆ–":s.BIN4,"âˆ—":s.BIN4,"âˆ˜":s.BIN4,"âˆ™":s.BIN4,"âˆ":s.REL,"âˆ":s.ORD,"âˆŸ":s.REL,"âˆ£":s.REL,"âˆ¤":s.REL,"âˆ¥":s.REL,"âˆ¦":s.REL,"âˆ§":s.BIN4,"âˆ¨":s.BIN4,"âˆ©":s.BIN4,"âˆª":s.BIN4,"âˆ´":s.REL,"âˆµ":s.REL,"âˆ¶":s.REL,"âˆ·":s.REL,"âˆ¸":s.BIN4,"âˆ¹":s.REL,"âˆº":s.BIN4,"âˆ»":s.REL,"âˆ¼":s.REL,"âˆ½":s.REL,"âˆ½Ì±":s.BIN3,"âˆ¾":s.REL,"âˆ¿":s.BIN3,"â‰€":s.BIN4,"â‰":s.REL,"â‰‚":s.REL,"â‰‚Ì¸":s.REL,"â‰ƒ":s.REL,"â‰„":s.REL,"â‰…":s.REL,"â‰†":s.REL,"â‰‡":s.REL,"â‰ˆ":s.REL,"â‰‰":s.REL,"â‰Š":s.REL,"â‰‹":s.REL,"â‰Œ":s.REL,"â‰":s.REL,"â‰":s.REL,"â‰Ì¸":s.REL,"â‰":s.REL,"â‰Ì¸":s.REL,"â‰":s.REL,"â‰‘":s.REL,"â‰’":s.REL,"â‰“":s.REL,"â‰”":s.REL,"â‰•":s.REL,"â‰–":s.REL,"â‰—":s.REL,"â‰˜":s.REL,"â‰™":s.REL,"â‰š":s.REL,"â‰›":s.REL,"â‰œ":s.REL,"â‰":s.REL,"â‰":s.REL,"â‰Ÿ":s.REL,"â‰ ":s.REL,"â‰¡":s.REL,"â‰¢":s.REL,"â‰£":s.REL,"â‰¤":s.REL,"â‰¥":s.REL,"â‰¦":s.REL,"â‰¦Ì¸":s.REL,"â‰§":s.REL,"â‰¨":s.REL,"â‰©":s.REL,"â‰ª":s.REL,"â‰ªÌ¸":s.REL,"â‰«":s.REL,"â‰«Ì¸":s.REL,"â‰¬":s.REL,"â‰­":s.REL,"â‰®":s.REL,"â‰¯":s.REL,"â‰°":s.REL,"â‰±":s.REL,"â‰²":s.REL,"â‰³":s.REL,"â‰´":s.REL,"â‰µ":s.REL,"â‰¶":s.REL,"â‰·":s.REL,"â‰¸":s.REL,"â‰¹":s.REL,"â‰º":s.REL,"â‰»":s.REL,"â‰¼":s.REL,"â‰½":s.REL,"â‰¾":s.REL,"â‰¿":s.REL,"â‰¿Ì¸":s.REL,"âŠ€":s.REL,"âŠ":s.REL,"âŠ‚":s.REL,"âŠ‚âƒ’":s.REL,"âŠƒ":s.REL,"âŠƒâƒ’":s.REL,"âŠ„":s.REL,"âŠ…":s.REL,"âŠ†":s.REL,"âŠ‡":s.REL,"âŠˆ":s.REL,"âŠ‰":s.REL,"âŠŠ":s.REL,"âŠ‹":s.REL,"âŠŒ":s.BIN4,"âŠ":s.BIN4,"âŠ":s.BIN4,"âŠ":s.REL,"âŠÌ¸":s.REL,"âŠ":s.REL,"âŠÌ¸":s.REL,"âŠ‘":s.REL,"âŠ’":s.REL,"âŠ“":s.BIN4,"âŠ”":s.BIN4,"âŠ•":s.BIN4,"âŠ–":s.BIN4,"âŠ—":s.BIN4,"âŠ˜":s.BIN4,"âŠ™":s.BIN4,"âŠš":s.BIN4,"âŠ›":s.BIN4,"âŠœ":s.BIN4,"âŠ":s.BIN4,"âŠ":s.BIN4,"âŠŸ":s.BIN4,"âŠ ":s.BIN4,"âŠ¡":s.BIN4,"âŠ¢":s.REL,"âŠ£":s.REL,"âŠ¤":s.ORD55,"âŠ¥":s.REL,"âŠ¦":s.REL,"âŠ§":s.REL,"âŠ¨":s.REL,"âŠ©":s.REL,"âŠª":s.REL,"âŠ«":s.REL,"âŠ¬":s.REL,"âŠ­":s.REL,"âŠ®":s.REL,"âŠ¯":s.REL,"âŠ°":s.REL,"âŠ±":s.REL,"âŠ²":s.REL,"âŠ³":s.REL,"âŠ´":s.REL,"âŠµ":s.REL,"âŠ¶":s.REL,"âŠ·":s.REL,"âŠ¸":s.REL,"âŠ¹":s.REL,"âŠº":s.BIN4,"âŠ»":s.BIN4,"âŠ¼":s.BIN4,"âŠ½":s.BIN4,"âŠ¾":s.BIN3,"âŠ¿":s.BIN3,"â‹„":s.BIN4,"â‹…":s.BIN4,"â‹†":s.BIN4,"â‹‡":s.BIN4,"â‹ˆ":s.REL,"â‹‰":s.BIN4,"â‹Š":s.BIN4,"â‹‹":s.BIN4,"â‹Œ":s.BIN4,"â‹":s.REL,"â‹":s.BIN4,"â‹":s.BIN4,"â‹":s.REL,"â‹‘":s.REL,"â‹’":s.BIN4,"â‹“":s.BIN4,"â‹”":s.REL,"â‹•":s.REL,"â‹–":s.REL,"â‹—":s.REL,"â‹˜":s.REL,"â‹™":s.REL,"â‹š":s.REL,"â‹›":s.REL,"â‹œ":s.REL,"â‹":s.REL,"â‹":s.REL,"â‹Ÿ":s.REL,"â‹ ":s.REL,"â‹¡":s.REL,"â‹¢":s.REL,"â‹£":s.REL,"â‹¤":s.REL,"â‹¥":s.REL,"â‹¦":s.REL,"â‹§":s.REL,"â‹¨":s.REL,"â‹©":s.REL,"â‹ª":s.REL,"â‹«":s.REL,"â‹¬":s.REL,"â‹­":s.REL,"â‹®":s.ORD55,"â‹¯":s.INNER,"â‹°":s.REL,"â‹±":[5,5,h.INNER,null],"â‹²":s.REL,"â‹³":s.REL,"â‹´":s.REL,"â‹µ":s.REL,"â‹¶":s.REL,"â‹·":s.REL,"â‹¸":s.REL,"â‹¹":s.REL,"â‹º":s.REL,"â‹»":s.REL,"â‹¼":s.REL,"â‹½":s.REL,"â‹¾":s.REL,"â‹¿":s.REL,"âŒ…":s.BIN3,"âŒ†":s.BIN3,"âŒ¢":s.REL4,"âŒ£":s.REL4,"âŒ©":s.OPEN,"âŒª":s.CLOSE,"âª":s.ORD,"â¯":[0,0,h.ORD,{stretchy:!0}],"â°":s.OPEN,"â±":s.CLOSE,"â”€":s.ORD,"â–³":s.BIN4,"â–µ":s.BIN4,"â–¹":s.BIN4,"â–½":s.BIN4,"â–¿":s.BIN4,"â—ƒ":s.BIN4,"â—¯":s.BIN3,"â™ ":s.ORD,"â™¡":s.ORD,"â™¢":s.ORD,"â™£":s.ORD,"â˜":s.REL,"âŸ°":s.RELSTRETCH,"âŸ±":s.RELSTRETCH,"âŸµ":s.WIDEREL,"âŸ¶":s.WIDEREL,"âŸ·":s.WIDEREL,"âŸ¸":s.WIDEREL,"âŸ¹":s.WIDEREL,"âŸº":s.WIDEREL,"âŸ»":s.WIDEREL,"âŸ¼":s.WIDEREL,"âŸ½":s.WIDEREL,"âŸ¾":s.WIDEREL,"âŸ¿":s.WIDEREL,"â¤€":s.RELACCENT,"â¤":s.RELACCENT,"â¤‚":s.RELACCENT,"â¤ƒ":s.RELACCENT,"â¤„":s.RELACCENT,"â¤…":s.RELACCENT,"â¤†":s.RELACCENT,"â¤‡":s.RELACCENT,"â¤ˆ":s.REL,"â¤‰":s.REL,"â¤Š":s.RELSTRETCH,"â¤‹":s.RELSTRETCH,"â¤Œ":s.WIDEREL,"â¤":s.WIDEREL,"â¤":s.WIDEREL,"â¤":s.WIDEREL,"â¤":s.WIDEREL,"â¤‘":s.RELACCENT,"â¤’":s.RELSTRETCH,"â¤“":s.RELSTRETCH,"â¤”":s.RELACCENT,"â¤•":s.RELACCENT,"â¤–":s.RELACCENT,"â¤—":s.RELACCENT,"â¤˜":s.RELACCENT,"â¤™":s.RELACCENT,"â¤š":s.RELACCENT,"â¤›":s.RELACCENT,"â¤œ":s.RELACCENT,"â¤":s.RELACCENT,"â¤":s.RELACCENT,"â¤Ÿ":s.RELACCENT,"â¤ ":s.RELACCENT,"â¤¡":s.RELSTRETCH,"â¤¢":s.RELSTRETCH,"â¤£":s.REL,"â¤¤":s.REL,"â¤¥":s.REL,"â¤¦":s.REL,"â¤§":s.REL,"â¤¨":s.REL,"â¤©":s.REL,"â¤ª":s.REL,"â¤«":s.REL,"â¤¬":s.REL,"â¤­":s.REL,"â¤®":s.REL,"â¤¯":s.REL,"â¤°":s.REL,"â¤±":s.REL,"â¤²":s.REL,"â¤³":s.RELACCENT,"â¤´":s.REL,"â¤µ":s.REL,"â¤¶":s.REL,"â¤·":s.REL,"â¤¸":s.REL,"â¤¹":s.REL,"â¤º":s.RELACCENT,"â¤»":s.RELACCENT,"â¤¼":s.RELACCENT,"â¤½":s.RELACCENT,"â¤¾":s.REL,"â¤¿":s.REL,"â¥€":s.REL,"â¥":s.REL,"â¥‚":s.RELACCENT,"â¥ƒ":s.RELACCENT,"â¥„":s.RELACCENT,"â¥…":s.RELACCENT,"â¥†":s.RELACCENT,"â¥‡":s.RELACCENT,"â¥ˆ":s.RELACCENT,"â¥‰":s.REL,"â¥Š":s.RELACCENT,"â¥‹":s.RELACCENT,"â¥Œ":s.REL,"â¥":s.REL,"â¥":s.WIDEREL,"â¥":s.RELSTRETCH,"â¥":s.WIDEREL,"â¥‘":s.RELSTRETCH,"â¥’":s.WIDEREL,"â¥“":s.WIDEREL,"â¥”":s.RELSTRETCH,"â¥•":s.RELSTRETCH,"â¥–":s.RELSTRETCH,"â¥—":s.RELSTRETCH,"â¥˜":s.RELSTRETCH,"â¥™":s.RELSTRETCH,"â¥š":s.WIDEREL,"â¥›":s.WIDEREL,"â¥œ":s.RELSTRETCH,"â¥":s.RELSTRETCH,"â¥":s.WIDEREL,"â¥Ÿ":s.WIDEREL,"â¥ ":s.RELSTRETCH,"â¥¡":s.RELSTRETCH,"â¥¢":s.RELACCENT,"â¥£":s.REL,"â¥¤":s.RELACCENT,"â¥¥":s.REL,"â¥¦":s.RELACCENT,"â¥§":s.RELACCENT,"â¥¨":s.RELACCENT,"â¥©":s.RELACCENT,"â¥ª":s.RELACCENT,"â¥«":s.RELACCENT,"â¥¬":s.RELACCENT,"â¥­":s.RELACCENT,"â¥®":s.RELSTRETCH,"â¥¯":s.RELSTRETCH,"â¥°":s.RELACCENT,"â¥±":s.RELACCENT,"â¥²":s.RELACCENT,"â¥³":s.RELACCENT,"â¥´":s.RELACCENT,"â¥µ":s.RELACCENT,"â¥¶":s.RELACCENT,"â¥·":s.RELACCENT,"â¥¸":s.RELACCENT,"â¥¹":s.RELACCENT,"â¥º":s.RELACCENT,"â¥»":s.RELACCENT,"â¥¼":s.RELACCENT,"â¥½":s.RELACCENT,"â¥¾":s.REL,"â¥¿":s.REL,"â¦":s.BIN3,"â¦‚":s.BIN3,"â¦™":s.BIN3,"â¦š":s.BIN3,"â¦›":s.BIN3,"â¦œ":s.BIN3,"â¦":s.BIN3,"â¦":s.BIN3,"â¦Ÿ":s.BIN3,"â¦ ":s.BIN3,"â¦¡":s.BIN3,"â¦¢":s.BIN3,"â¦£":s.BIN3,"â¦¤":s.BIN3,"â¦¥":s.BIN3,"â¦¦":s.BIN3,"â¦§":s.BIN3,"â¦¨":s.BIN3,"â¦©":s.BIN3,"â¦ª":s.BIN3,"â¦«":s.BIN3,"â¦¬":s.BIN3,"â¦­":s.BIN3,"â¦®":s.BIN3,"â¦¯":s.BIN3,"â¦°":s.BIN3,"â¦±":s.BIN3,"â¦²":s.BIN3,"â¦³":s.BIN3,"â¦´":s.BIN3,"â¦µ":s.BIN3,"â¦¶":s.BIN4,"â¦·":s.BIN4,"â¦¸":s.BIN4,"â¦¹":s.BIN4,"â¦º":s.BIN4,"â¦»":s.BIN4,"â¦¼":s.BIN4,"â¦½":s.BIN4,"â¦¾":s.BIN4,"â¦¿":s.BIN4,"â§€":s.REL,"â§":s.REL,"â§‚":s.BIN3,"â§ƒ":s.BIN3,"â§„":s.BIN4,"â§…":s.BIN4,"â§†":s.BIN4,"â§‡":s.BIN4,"â§ˆ":s.BIN4,"â§‰":s.BIN3,"â§Š":s.BIN3,"â§‹":s.BIN3,"â§Œ":s.BIN3,"â§":s.BIN3,"â§":s.REL,"â§":s.REL,"â§Ì¸":s.REL,"â§":s.REL,"â§Ì¸":s.REL,"â§‘":s.REL,"â§’":s.REL,"â§“":s.REL,"â§”":s.REL,"â§•":s.REL,"â§–":s.BIN4,"â§—":s.BIN4,"â§˜":s.BIN3,"â§™":s.BIN3,"â§›":s.BIN3,"â§œ":s.BIN3,"â§":s.BIN3,"â§":s.REL,"â§Ÿ":s.BIN3,"â§ ":s.BIN3,"â§¡":s.REL,"â§¢":s.BIN4,"â§£":s.REL,"â§¤":s.REL,"â§¥":s.REL,"â§¦":s.REL,"â§§":s.BIN3,"â§¨":s.BIN3,"â§©":s.BIN3,"â§ª":s.BIN3,"â§«":s.BIN3,"â§¬":s.BIN3,"â§­":s.BIN3,"â§®":s.BIN3,"â§¯":s.BIN3,"â§°":s.BIN3,"â§±":s.BIN3,"â§²":s.BIN3,"â§³":s.BIN3,"â§´":s.REL,"â§µ":s.BIN4,"â§¶":s.BIN4,"â§·":s.BIN4,"â§¸":s.BIN3,"â§¹":s.BIN3,"â§º":s.BIN3,"â§»":s.BIN3,"â§¾":s.BIN4,"â§¿":s.BIN4,"â¨":s.BIN3,"â¨":s.BIN3,"â¨Ÿ":s.BIN3,"â¨ ":s.BIN3,"â¨¡":s.BIN3,"â¨¢":s.BIN4,"â¨£":s.BIN4,"â¨¤":s.BIN4,"â¨¥":s.BIN4,"â¨¦":s.BIN4,"â¨§":s.BIN4,"â¨¨":s.BIN4,"â¨©":s.BIN4,"â¨ª":s.BIN4,"â¨«":s.BIN4,"â¨¬":s.BIN4,"â¨­":s.BIN4,"â¨®":s.BIN4,"â¨¯":s.BIN4,"â¨°":s.BIN4,"â¨±":s.BIN4,"â¨²":s.BIN4,"â¨³":s.BIN4,"â¨´":s.BIN4,"â¨µ":s.BIN4,"â¨¶":s.BIN4,"â¨·":s.BIN4,"â¨¸":s.BIN4,"â¨¹":s.BIN4,"â¨º":s.BIN4,"â¨»":s.BIN4,"â¨¼":s.BIN4,"â¨½":s.BIN4,"â¨¾":s.BIN4,"â¨¿":s.BIN4,"â©€":s.BIN4,"â©":s.BIN4,"â©‚":s.BIN4,"â©ƒ":s.BIN4,"â©„":s.BIN4,"â©…":s.BIN4,"â©†":s.BIN4,"â©‡":s.BIN4,"â©ˆ":s.BIN4,"â©‰":s.BIN4,"â©Š":s.BIN4,"â©‹":s.BIN4,"â©Œ":s.BIN4,"â©":s.BIN4,"â©":s.BIN4,"â©":s.BIN4,"â©":s.BIN4,"â©‘":s.BIN4,"â©’":s.BIN4,"â©“":s.BIN4,"â©”":s.BIN4,"â©•":s.BIN4,"â©–":s.BIN4,"â©—":s.BIN4,"â©˜":s.BIN4,"â©™":s.REL,"â©š":s.BIN4,"â©›":s.BIN4,"â©œ":s.BIN4,"â©":s.BIN4,"â©":s.BIN4,"â©Ÿ":s.BIN4,"â© ":s.BIN4,"â©¡":s.BIN4,"â©¢":s.BIN4,"â©£":s.BIN4,"â©¤":s.BIN4,"â©¥":s.BIN4,"â©¦":s.REL,"â©§":s.REL,"â©¨":s.REL,"â©©":s.REL,"â©ª":s.REL,"â©«":s.REL,"â©¬":s.REL,"â©­":s.REL,"â©®":s.REL,"â©¯":s.REL,"â©°":s.REL,"â©±":s.BIN4,"â©²":s.BIN4,"â©³":s.REL,"â©´":s.REL,"â©µ":s.REL,"â©¶":s.REL,"â©·":s.REL,"â©¸":s.REL,"â©¹":s.REL,"â©º":s.REL,"â©»":s.REL,"â©¼":s.REL,"â©½":s.REL,"â©½Ì¸":s.REL,"â©¾":s.REL,"â©¾Ì¸":s.REL,"â©¿":s.REL,"âª€":s.REL,"âª":s.REL,"âª‚":s.REL,"âªƒ":s.REL,"âª„":s.REL,"âª…":s.REL,"âª†":s.REL,"âª‡":s.REL,"âªˆ":s.REL,"âª‰":s.REL,"âªŠ":s.REL,"âª‹":s.REL,"âªŒ":s.REL,"âª":s.REL,"âª":s.REL,"âª":s.REL,"âª":s.REL,"âª‘":s.REL,"âª’":s.REL,"âª“":s.REL,"âª”":s.REL,"âª•":s.REL,"âª–":s.REL,"âª—":s.REL,"âª˜":s.REL,"âª™":s.REL,"âªš":s.REL,"âª›":s.REL,"âªœ":s.REL,"âª":s.REL,"âª":s.REL,"âªŸ":s.REL,"âª ":s.REL,"âª¡":s.REL,"âª¡Ì¸":s.REL,"âª¢":s.REL,"âª¢Ì¸":s.REL,"âª£":s.REL,"âª¤":s.REL,"âª¥":s.REL,"âª¦":s.REL,"âª§":s.REL,"âª¨":s.REL,"âª©":s.REL,"âªª":s.REL,"âª«":s.REL,"âª¬":s.REL,"âª­":s.REL,"âª®":s.REL,"âª¯":s.REL,"âª¯Ì¸":s.REL,"âª°":s.REL,"âª°Ì¸":s.REL,"âª±":s.REL,"âª²":s.REL,"âª³":s.REL,"âª´":s.REL,"âªµ":s.REL,"âª¶":s.REL,"âª·":s.REL,"âª¸":s.REL,"âª¹":s.REL,"âªº":s.REL,"âª»":s.REL,"âª¼":s.REL,"âª½":s.REL,"âª¾":s.REL,"âª¿":s.REL,"â«€":s.REL,"â«":s.REL,"â«‚":s.REL,"â«ƒ":s.REL,"â«„":s.REL,"â«…":s.REL,"â«†":s.REL,"â«‡":s.REL,"â«ˆ":s.REL,"â«‰":s.REL,"â«Š":s.REL,"â«‹":s.REL,"â«Œ":s.REL,"â«":s.REL,"â«":s.REL,"â«":s.REL,"â«":s.REL,"â«‘":s.REL,"â«’":s.REL,"â«“":s.REL,"â«”":s.REL,"â«•":s.REL,"â«–":s.REL,"â«—":s.REL,"â«˜":s.REL,"â«™":s.REL,"â«š":s.REL,"â«›":s.REL,"â«":s.REL,"â«Ì¸":s.REL,"â«":s.REL,"â«Ÿ":s.REL,"â« ":s.REL,"â«¡":s.REL,"â«¢":s.REL,"â«£":s.REL,"â«¤":s.REL,"â«¥":s.REL,"â«¦":s.REL,"â«§":s.REL,"â«¨":s.REL,"â«©":s.REL,"â«ª":s.REL,"â««":s.REL,"â«¬":s.REL,"â«­":s.REL,"â«®":s.REL,"â«¯":s.REL,"â«°":s.REL,"â«±":s.REL,"â«²":s.REL,"â«³":s.REL,"â«´":s.BIN4,"â«µ":s.BIN4,"â«¶":s.BIN4,"â«·":s.REL,"â«¸":s.REL,"â«¹":s.REL,"â«º":s.REL,"â«»":s.BIN4,"â«½":s.BIN4,"â«¾":s.BIN3,"â­…":s.RELSTRETCH,"â­†":s.RELSTRETCH,"ã€ˆ":s.OPEN,"ã€‰":s.CLOSE,"ï¸·":s.WIDEACCENT,"ï¸¸":s.WIDEACCENT}};function on(t,e){return t.length!==e.length?e.length-t.length:t===e?0:t<e?-1:1}function ln(t){return t.replace(/([\^$(){}.+*?\-|[\]:\\])/g,"\\$1")}function cn(t){return Array.from(t).map(t=>t.codePointAt(0))}function hn(t){return String.fromCodePoint(...t)}function dn(t){return!!t.match(/%\s*$/)}function un(t){return t.trim().split(/\s+/)}function pn(t){return t.replace(/\\U(?:([0-9A-Fa-f]{4})|\{\s*([0-9A-Fa-f]{1,6})\s*\})|\\./g,(t,e,i)=>"\\\\"===t?"\\":String.fromCodePoint(parseInt(e||i,16)))}function mn(t){return`&#x${t.codePointAt(0).toString(16).toUpperCase()};`}an.infix["^"]=s.WIDEREL,an.infix._=s.WIDEREL,an.infix["â«œ"]=s.REL;class gn extends zr{constructor(){super(...arguments),this._texClass=null,this.lspace=5/18,this.rspace=5/18}get texClass(){return null===this._texClass?this.getOperatorDef(this.getText())[2]:this._texClass}set texClass(t){this._texClass=t}get kind(){return"mo"}get isEmbellished(){return!0}coreParent(){let t=null,e=this;for(var i=this.factory.getNodeClass("math");e&&e.isEmbellished&&e.coreMO()===this&&!(e instanceof i);)e=(t=e).parent;return t||this}coreText(t){if(!t)return"";if(t.isEmbellished)return t.coreMO().getText();for(;((t.isKind("mrow")||t.isKind("TeXAtom")||t.isKind("mstyle")||t.isKind("mphantom"))&&1===t.childNodes.length||t.isKind("munderover"))&&t.childNodes[0];)t=t.childNodes[0];return t.isToken?t.getText():""}hasSpacingAttributes(){return this.attributes.isSet("lspace")||this.attributes.isSet("rspace")}get isAccent(){let t=!1;const e=this.coreParent().parent;var i;return t=e&&(i=e.isKind("mover")?e.childNodes[e.over].coreMO()?"accent":"":e.isKind("munder")?e.childNodes[e.under].coreMO()?"accentunder":"":e.isKind("munderover")?this===e.childNodes[e.over].coreMO()?"accent":this===e.childNodes[e.under].coreMO()?"accentunder":"":"")?void 0!==e.attributes.getExplicit(i)?t:this.attributes.get("accent"):t}setTeXclass(t){var{form:e,fence:i}=this.attributes.getList("form","fence");return void 0===this.getProperty("texClass")&&this.hasSpacingAttributes()?null:(i&&this.texClass===h.REL&&("prefix"===e&&(this.texClass=h.OPEN),"postfix"===e&&(this.texClass=h.CLOSE)),this.adjustTeXclass(t))}adjustTeXclass(t){var e=this.texClass;let i=this.prevClass;if(e===h.NONE)return t;if(t?(!t.getProperty("autoOP")||e!==h.BIN&&e!==h.REL||(i=t.texClass=h.ORD),i=this.prevClass=t.texClass||h.ORD,this.prevLevel=this.attributes.getInherited("scriptlevel")):i=this.prevClass=h.NONE,e!==h.BIN||i!==h.NONE&&i!==h.BIN&&i!==h.OP&&i!==h.REL&&i!==h.OPEN&&i!==h.PUNCT)if(i!==h.BIN||e!==h.REL&&e!==h.CLOSE&&e!==h.PUNCT){if(e===h.BIN){let t=null,e=this.parent;for(;e&&e.parent&&e.isEmbellished&&(1===e.childNodes.length||!e.isKind("mrow")&&e.core()===t);)e=(t=e).parent;t=t||this,e.childNodes[e.childNodes.length-1]===t&&(this.texClass=h.ORD)}}else t.texClass=this.prevClass=h.ORD;else this.texClass=h.ORD;return this}setInheritedAttributes(t={},e=!1,i=0,s=!1){super.setInheritedAttributes(t,e,i,s);t=this.getText();this.checkOperatorTable(t),this.checkPseudoScripts(t),this.checkPrimes(t),this.checkMathAccent(t)}getOperatorDef(t){var[e,i,s]=this.handleExplicitForm(this.getForms()),r=(this.attributes.setInherited("form",e),this.constructor),n=r.OPTABLE,e=n[e][t]||n[i][t]||n[s][t];if(e)return e;this.setProperty("noDictDef",!0);i=this.attributes.get("movablelimits");if((t.match(r.opPattern)||i)&&void 0===this.getProperty("texClass"))return a(1,2,h.OP);var n=rn(t),[s,e]=r.MMLSPACING[n[2]];return a(s,e,n[2])}checkOperatorTable(t){var e=this.getOperatorDef(t);void 0===this.getProperty("texClass")&&(this.texClass=e[2]);for(const t of Object.keys(e[3]||{}))this.attributes.setInherited(t,e[3][t]);this.lspace=((e[0]||-1)+1)/18,this.rspace=((e[1]||-1)+1)/18}getForms(){let t=null,e=this.parent,i=this.Parent;for(;i&&i.isEmbellished;)t=e,e=i.parent,i=i.Parent;if(t=t||this,e&&e.isKind("mrow")&&1!==e.nonSpaceLength()){if(e.firstNonSpace()===t)return["prefix","infix","postfix"];if(e.lastNonSpace()===t)return["postfix","infix","prefix"]}return["infix","prefix","postfix"]}handleExplicitForm(t){if(this.attributes.isSet("form")){const e=this.attributes.get("form");t=[e].concat(t.filter(t=>t!==e))}return t}checkPseudoScripts(t){var e=this.constructor.pseudoScripts;if(t.match(e)){const i=this.coreParent().Parent,s=!i||!(i.isKind("msubsup")&&!i.isKind("msub"));this.setProperty("pseudoscript",s),s&&(this.attributes.setInherited("lspace",0),this.attributes.setInherited("rspace",0))}}checkPrimes(t){var e=this.constructor.primes;if(t.match(e)){const i=this.constructor.remapPrimes,s=hn(cn(t).map(t=>i[t]));this.setProperty("primes",s)}}checkMathAccent(t){const e=this.Parent;if(void 0===this.getProperty("mathaccent")&&e&&e.isKind("munderover")){const[r,n,a]=e.childNodes;var i,s;r.isEmbellished&&r.coreMO()===this||(i=!(!n||!n.isEmbellished||n.coreMO()!==this),s=!(!a||!a.isEmbellished||n.coreMO()!==this),(i||s)&&(this.isMathAccent(t)?this.setProperty("mathaccent",!0):this.isMathAccentWithWidth(t)&&this.setProperty("mathaccent",!1)))}}isMathAccent(t=this.getText()){var e=this.constructor.mathaccents;return!!t.match(e)}isMathAccentWithWidth(t=this.getText()){var e=this.constructor.mathaccentsWithWidth;return!!t.match(e)}}gn.defaults=Object.assign(Object.assign({},zr.defaults),{form:"infix",fence:!1,separator:!1,lspace:"thickmathspace",rspace:"thickmathspace",stretchy:!1,symmetric:!1,maxsize:"infinity",minsize:"0em",largeop:!1,movablelimits:!1,accent:!1,linebreak:"auto",lineleading:"100%",linebreakstyle:"before",indentalign:"auto",indentshift:"0",indenttarget:"",indentalignfirst:"indentalign",indentshiftfirst:"indentshift",indentalignlast:"indentalign",indentshiftlast:"indentshift"}),gn.MMLSPACING=nn,gn.OPTABLE=an,gn.pseudoScripts=new RegExp(["^[\"'*`","Âª","Â°","Â²-Â´","Â¹","Âº","â€˜-â€Ÿ","â€²-â€·â—","â°â±","â´-â¿","â‚€-â‚","]+$"].join("")),gn.primes=new RegExp(["^[\"'","â€˜-â€Ÿ","]+$"].join("")),gn.opPattern=/^[a-zA-Z]{2,}$/,gn.remapPrimes={34:8243,39:8242,8216:8245,8217:8242,8218:8242,8219:8245,8220:8246,8221:8243,8222:8243,8223:8246},gn.mathaccents=new RegExp(["^[","Â´ÌËŠ","`Ì€Ë‹","Â¨Ìˆ","~ÌƒËœ","Â¯Ì„Ë‰","Ë˜Ì†","Ë‡ÌŒ","^Ì‚Ë†","âƒâƒ‘","âƒ–âƒ—âƒ¡","Ë™Ì‡","ËšÌŠ","âƒ›","âƒœ","]$"].join("")),gn.mathaccentsWithWidth=new RegExp(["^[","â†â†’â†”","âœâ","ââŸ","]$"].join(""));class fn extends zr{constructor(){super(...arguments),this.texclass=h.ORD}get kind(){return"mtext"}get isSpacelike(){return!!this.getText().match(/^\s*$/)&&!this.attributes.hasOneOf(fn.NONSPACELIKE)}}fn.NONSPACELIKE=["style","mathbackground","background"],fn.defaults=Object.assign({},zr.defaults);class bn extends zr{constructor(){super(...arguments),this.texclass=h.NONE}setTeXclass(t){return t}get kind(){return"mspace"}get arity(){return 0}get isSpacelike(){return!this.attributes.hasExplicit("linebreak")&&this.canBreak}get hasNewline(){var t=this.attributes.get("linebreak");return this.canBreak&&("newline"===t||"indentingnewline"===t)}get canBreak(){return!this.attributes.hasOneOf(bn.NONSPACELIKE)&&"-"!==String(this.attributes.get("width")).trim().charAt(0)}}bn.NONSPACELIKE=["height","depth","style","mathbackground","background"],bn.defaults=Object.assign(Object.assign({},zr.defaults),{width:"0em",height:"0ex",depth:"0ex",linebreak:"auto",indentshift:"auto",indentalign:"auto",indenttarget:"",indentalignfirst:"indentalign",indentshiftfirst:"indentshift",indentalignlast:"indentalign",indentshiftlast:"indentshift"});class En extends zr{constructor(){super(...arguments),this.texclass=h.ORD}get kind(){return"ms"}}En.defaults=Object.assign(Object.assign({},zr.defaults),{lquote:'"',rquote:'"'});class Nn extends o{constructor(){super(...arguments),this._core=null}get kind(){return"mrow"}get isSpacelike(){for(const t of this.childNodes)if(!t.isSpacelike)return!1;return!0}get isEmbellished(){let t=!1,e=0;for(const i of this.childNodes){if(i)if(i.isEmbellished){if(t)return!1;t=!0,this._core=e}else if(!i.isSpacelike)return!1;e++}return t}core(){return this.isEmbellished&&null!=this._core?this.childNodes[this._core]:this}coreMO(){return this.isEmbellished&&null!=this._core?this.childNodes[this._core].coreMO():this}nonSpaceLength(){let t=0;for(const e of this.childNodes)e&&!e.isSpacelike&&t++;return t}firstNonSpace(){for(const t of this.childNodes)if(t&&!t.isSpacelike)return t;return null}lastNonSpace(){let t=this.childNodes.length;for(;0<=--t;){var e=this.childNodes[t];if(e&&!e.isSpacelike)return e}return null}setTeXclass(t){if(null!=this.getProperty("open")||null!=this.getProperty("close")){this.getPrevClass(t),t=null;for(const e of this.childNodes)t=e.setTeXclass(t);return null==this.texClass&&(this.texClass=h.INNER),this}for(const i of this.childNodes)t=i.setTeXclass(t);return this.childNodes[0]&&this.updateTeXclass(this.childNodes[0]),t}}Nn.defaults=Object.assign({},o.defaults);class yn extends Nn{get kind(){return"inferredMrow"}get isInferred(){return!0}get notParent(){return!0}toString(){return"["+this.childNodes.join(",")+"]"}}yn.defaults=Nn.defaults;class xn extends Jr{get kind(){return"mfrac"}get arity(){return 2}get linebreakContainer(){return!0}get linebreakAlign(){return""}setTeXclass(t){this.getPrevClass(t);for(const t of this.childNodes)t.setTeXclass(null);return this}setChildInheritedAttributes(t,e,i,s){(!e||0<i)&&i++;var e=this.attributes.get("numalign"),r=this.attributes.get("denomalign"),e=this.addInheritedAttributes(Object.assign({},t),{numalign:e,indentshift:"0",indentalignfirst:e,indentshiftfirst:"0",indentalignlast:"indentalign",indentshiftlast:"indentshift"}),t=this.addInheritedAttributes(Object.assign({},t),{denalign:r,indentshift:"0",indentalignfirst:r,indentshiftfirst:"0",indentalignlast:"indentalign",indentshiftlast:"indentshift"});this.childNodes[0].setInheritedAttributes(e,!1,i,s),this.childNodes[1].setInheritedAttributes(t,!1,i,!0)}}xn.defaults=Object.assign(Object.assign({},Jr.defaults),{linethickness:"medium",numalign:"center",denomalign:"center",bevelled:!1});class An extends o{constructor(){super(...arguments),this.texclass=h.ORD}get kind(){return"msqrt"}get arity(){return-1}get linebreakContainer(){return!0}setTeXclass(t){return this.getPrevClass(t),this.childNodes[0].setTeXclass(null),this}setChildInheritedAttributes(t,e,i,s){this.childNodes[0].setInheritedAttributes(t,e,i,!0)}}An.defaults=Object.assign(Object.assign({},o.defaults),{"data-vertical-align":"bottom"});class vn extends o{constructor(){super(...arguments),this.texclass=h.ORD}get kind(){return"mroot"}get arity(){return 2}get linebreakContainer(){return!0}setTeXclass(t){return this.getPrevClass(t),this.childNodes[0].setTeXclass(null),this.childNodes[1].setTeXclass(null),this}setChildInheritedAttributes(t,e,i,s){this.childNodes[0].setInheritedAttributes(t,e,i,!0),this.childNodes[1].setInheritedAttributes(t,!1,i+2,s)}}vn.defaults=Object.assign(Object.assign({},o.defaults),{"data-vertical-align":"bottom"});class _n extends Kr{get kind(){return"mstyle"}get notParent(){return this.childNodes[0]&&1===this.childNodes[0].childNodes.length}setInheritedAttributes(t={},e=!1,i=0,s=!1){this.attributes.setInherited("displaystyle",e),this.attributes.setInherited("scriptlevel",i),super.setInheritedAttributes(t,e,i,s)}setChildInheritedAttributes(t,e,i,s){let r=this.attributes.getExplicit("scriptlevel");null!=r&&((r=r.toString()).match(/^\s*[-+]/)?i+=parseInt(r):i=parseInt(r),s=!1);var n=this.attributes.getExplicit("displaystyle"),n=(null!=n&&(e=!0===n,s=!1),this.attributes.getExplicit("data-cramped"));null!=n&&(s=n),t=this.addInheritedAttributes(t,this.attributes.getAllAttributes()),this.childNodes[0].setInheritedAttributes(t,e,i,s)}}_n.defaults=Object.assign(Object.assign({},Kr.defaults),{scriptlevel:Fr,displaystyle:Fr,scriptsizemultiplier:1/Math.sqrt(2),scriptminsize:".4em",mathbackground:Fr,mathcolor:Fr,dir:Fr,infixlinebreakstyle:"before"});class Tn extends o{constructor(){super(...arguments),this.texclass=h.ORD}get kind(){return"merror"}get arity(){return-1}get linebreakContainer(){return!0}}Tn.defaults=Object.assign({},o.defaults);class wn extends Kr{get kind(){return"mpadded"}get linebreakContainer(){return!0}setTeXclass(t){return this.getProperty("vbox")?(this.getPrevClass(t),this.texClass=h.ORD,this.childNodes[0].setTeXclass(null),this):super.setTeXclass(t)}}wn.defaults=Object.assign(Object.assign({},Kr.defaults),{width:"",height:"",depth:"",lspace:0,voffset:0});class Cn extends Kr{constructor(){super(...arguments),this.texclass=h.ORD}get kind(){return"mphantom"}}Cn.defaults=Object.assign({},Kr.defaults);class In extends o{constructor(){super(...arguments),this.texclass=h.INNER,this.separators=[],this.open=null,this.close=null}get kind(){return"mfenced"}setTeXclass(i){this.getPrevClass(i),this.open&&(i=this.open.setTeXclass(i)),this.childNodes[0]&&(i=this.childNodes[0].setTeXclass(i));for(let t=1,e=this.childNodes.length;t<e;t++)this.separators[t-1]&&(i=this.separators[t-1].setTeXclass(i)),this.childNodes[t]&&(i=this.childNodes[t].setTeXclass(i));return this.close&&(i=this.close.setTeXclass(i)),this.updateTeXclass(this.open),i}setChildInheritedAttributes(t,e,i,s){this.addFakeNodes();for(const r of[this.open,this.close].concat(this.separators))r&&r.setInheritedAttributes(t,e,i,s);super.setChildInheritedAttributes(t,e,i,s)}addFakeNodes(){let{open:t,close:e,separators:i}=this.attributes.getList("open","close","separators");if(t=t.replace(/[ \t\n\r]/g,""),e=e.replace(/[ \t\n\r]/g,""),i=i.replace(/[ \t\n\r]/g,""),t&&(this.open=this.fakeNode(t,{fence:!0,form:"prefix"},h.OPEN)),i){for(;i.length<this.childNodes.length-1;)i+=i.charAt(i.length-1);let t=0;for(const e of this.childNodes.slice(1))e&&this.separators.push(this.fakeNode(i.charAt(t++)))}e&&(this.close=this.fakeNode(e,{fence:!0,form:"postfix"},h.CLOSE))}fakeNode(t,e={},i=null){const s=this.factory.create("text").setText(t),r=this.factory.create("mo",e,[s]);return r.texClass=i,r.parent=this,r}}In.defaults=Object.assign(Object.assign({},o.defaults),{open:"(",close:")",separators:","});class Ln extends o{constructor(){super(...arguments),this.texclass=h.ORD}get kind(){return"menclose"}get arity(){return-1}get linebreakContainer(){return!0}setTeXclass(t){return t=this.childNodes[0].setTeXclass(t),this.updateTeXclass(this.childNodes[0]),t}}Ln.defaults=Object.assign(Object.assign({},o.defaults),{notation:"longdiv"});class Sn extends o{get kind(){return"maction"}get arity(){return 1}get selected(){var t=this.attributes.get("selection"),t=Math.max(1,Math.min(this.childNodes.length,t))-1;return this.childNodes[t]||this.factory.create("mrow")}get isEmbellished(){return this.selected.isEmbellished}get isSpacelike(){return this.selected.isSpacelike}core(){return this.selected.core()}coreMO(){return this.selected.coreMO()}verifyAttributes(t){super.verifyAttributes(t),"toggle"!==this.attributes.get("actiontype")&&this.attributes.hasExplicit("selection")&&this.attributes.unset("selection")}setTeXclass(t){"tooltip"===this.attributes.get("actiontype")&&this.childNodes[1]&&this.childNodes[1].setTeXclass(null);const e=this.selected;return t=e.setTeXclass(t),this.updateTeXclass(e),t}nextToggleSelection(){let t=Math.max(1,parseInt(this.attributes.get("selection"))+1);t>this.childNodes.length&&(t=1),this.attributes.set("selection",t)}setChildInheritedAttributes(t,e,i,s){var r;"tooltip"===this.attributes.get("actiontype").toLowerCase()?(null!=(r=this.childNodes[0])&&r.setInheritedAttributes(t,e,i,s),null!=(r=this.childNodes[1])&&r.setInheritedAttributes(t,!1,1,!1)):super.setChildInheritedAttributes(t,e,i,s)}}Sn.defaults=Object.assign(Object.assign({},o.defaults),{actiontype:"toggle",selection:1});class kn extends Jr{get kind(){return"msubsup"}get arity(){return 3}get base(){return 0}get sub(){return 1}get sup(){return 2}setChildInheritedAttributes(t,e,i,s){const r=this.childNodes;r[0].setInheritedAttributes(t,e,i,s),r[1].setInheritedAttributes(t,!1,i+1,s||1===this.sub),r[2]&&r[2].setInheritedAttributes(t,!1,i+1,s||2===this.sub)}}kn.defaults=Object.assign(Object.assign({},Jr.defaults),{subscriptshift:"",superscriptshift:""});class Rn extends kn{get kind(){return"msub"}get arity(){return 2}}Rn.defaults=Object.assign({},kn.defaults);class On extends kn{get kind(){return"msup"}get arity(){return 2}get sup(){return 1}get sub(){return 2}}On.defaults=Object.assign({},kn.defaults);class Mn extends Jr{get kind(){return"munderover"}get arity(){return 3}get base(){return 0}get under(){return 1}get over(){return 2}get linebreakContainer(){return!0}setChildInheritedAttributes(t,e,i,s){const r=this.childNodes;r[0].setInheritedAttributes(t,e,i,s||!!r[this.over]);var n=!(e||!r[0].coreMO().attributes.get("movablelimits")),a=this.constructor.ACCENTS;r[1].setInheritedAttributes(t,!1,this.getScriptlevel(a[1],n,i),s||1===this.under),this.setInheritedAccent(1,a[1],e,i,s,n),r[2]&&(r[2].setInheritedAttributes(t,!1,this.getScriptlevel(a[2],n,i),s||2===this.under),this.setInheritedAccent(2,a[2],e,i,s,n))}getScriptlevel(t,e,i){return!e&&this.attributes.get(t)||i++,i}setInheritedAccent(t,e,i,s,r,n){const a=this.childNodes[t];if(!this.attributes.hasExplicit(e)&&a.isEmbellished){const t=a.coreMO().attributes.get("accent");this.attributes.setInherited(e,t),t!==this.attributes.getDefault(e)&&a.setInheritedAttributes({},i,this.getScriptlevel(e,n,s),r)}}}Mn.defaults=Object.assign(Object.assign({},Jr.defaults),{accent:!1,accentunder:!1,align:"center"}),Mn.ACCENTS=["","accentunder","accent"];class Dn extends Mn{get kind(){return"munder"}get arity(){return 2}}Dn.defaults=Object.assign({},Mn.defaults);class Pn extends Mn{get kind(){return"mover"}get arity(){return 2}get over(){return 1}get under(){return 2}}Pn.defaults=Object.assign({},Mn.defaults),Pn.ACCENTS=["","accent","accentunder"];class Bn extends kn{get kind(){return"mmultiscripts"}get arity(){return 1}setChildInheritedAttributes(i,s,r,n){this.childNodes[0].setInheritedAttributes(i,s,r,n);let a=!1;for(let t=1,e=0;t<this.childNodes.length;t++){const o=this.childNodes[t];if(o.isKind("mprescripts")){if(!a&&(a=!0,t%2==0)){const i=this.factory.create("none");this.childNodes.splice(t,0,i),i.parent=this,t++}}else{const s=n||e%2==0;o.setInheritedAttributes(i,!1,r+1,s),e++}}this.childNodes.length%2==(a?1:0)&&(this.appendChild(this.factory.create("none")),this.childNodes[this.childNodes.length-1].setInheritedAttributes(i,!1,r+1,n))}verifyChildren(e){let i=!1;var s=e.fixMmultiscripts;for(let t=0;t<this.childNodes.length;t++){const r=this.childNodes[t];r.isKind("mprescripts")&&(i?r.mError(r.kind+" can only appear once in "+this.kind,e,!0):(i=!0,t%2!=0||s||this.mError("There must be an equal number of prescripts of each type",e)))}this.childNodes.length%2!=(i?1:0)||s||this.mError("There must be an equal number of scripts of each type",e),super.verifyChildren(e)}}Bn.defaults=Object.assign({},kn.defaults);class Fn extends o{get kind(){return"mprescripts"}get arity(){return 0}verifyTree(t){super.verifyTree(t),this.parent&&!this.parent.isKind("mmultiscripts")&&this.mError(this.kind+" must be a child of mmultiscripts",t,!0)}}Fn.defaults=Object.assign({},o.defaults);class Un extends o{get kind(){return"none"}get arity(){return 0}verifyTree(t){super.verifyTree(t),this.parent&&!this.parent.isKind("mmultiscripts")&&this.mError(this.kind+" must be a child of mmultiscripts",t,!0)}}Un.defaults=Object.assign({},o.defaults);class qn extends o{constructor(){super(...arguments),this.properties={useHeight:!0},this.texclass=h.ORD}get kind(){return"mtable"}get linebreakContainer(){return!0}get linebreakAlign(){return""}setInheritedAttributes(t,e,i,s){for(const e of Xr)t[e]&&this.attributes.setInherited(e,t[e][1]),this.attributes.hasExplicit(e)&&this.attributes.unset(e);super.setInheritedAttributes(t,e,i,s)}setChildInheritedAttributes(t,e,i,s){for(const t of this.childNodes)t.isKind("mtr")||this.replaceChild(this.factory.create("mtr"),t).appendChild(t);e=!(!this.attributes.getExplicit("displaystyle")&&!this.attributes.getDefault("displaystyle")),t=this.addInheritedAttributes(t,{columnalign:this.attributes.get("columnalign"),rowalign:"center","data-break-align":this.attributes.get("data-break-align")});const r=this.attributes.getExplicit("data-cramped"),n=un(this.attributes.get("rowalign"));for(const s of this.childNodes)t.rowalign[1]=n.shift()||t.rowalign[1],s.setInheritedAttributes(t,e,i,!!r)}verifyChildren(e){let i=null;const s=this.factory;for(let t=0;t<this.childNodes.length;t++){const n=this.childNodes[t];var r;n.isKind("mtr")?i=null:(r=n.isKind("mtd"),i?(this.removeChild(n),t--):i=this.replaceChild(s.create("mtr"),n),i.appendChild(r?n:s.create("mtd",{},[n])),e.fixMtables||(n.parent.removeChild(n),n.parent=this,r&&i.appendChild(s.create("mtd")),r=n.mError("Children of "+this.kind+" must be mtr or mlabeledtr",e,r),i.childNodes[i.childNodes.length-1].appendChild(r)))}super.verifyChildren(e)}setTeXclass(t){this.getPrevClass(t);for(const t of this.childNodes)t.setTeXclass(null);return this}}qn.defaults=Object.assign(Object.assign({},o.defaults),{align:"axis",rowalign:"baseline",columnalign:"center",groupalign:"{left}",alignmentscope:!0,columnwidth:"auto",width:"auto",rowspacing:"1ex",columnspacing:".8em",rowlines:"none",columnlines:"none",frame:"none",framespacing:"0.4em 0.5ex",equalrows:!1,equalcolumns:!1,displaystyle:!1,side:"right",minlabelspacing:"0.8em","data-break-align":"top"});class jn extends o{get kind(){return"mtr"}get linebreakContainer(){return!0}get linebreakAlign(){return""}setChildInheritedAttributes(t,e,i,s){for(const t of this.childNodes)t.isKind("mtd")||this.replaceChild(this.factory.create("mtd"),t).appendChild(t);const r=un(this.attributes.get("columnalign")),n=un(this.attributes.get("data-break-align"));1===this.arity&&(r.unshift(this.parent.attributes.get("side")),n.unshift("top")),t=this.addInheritedAttributes(t,{rowalign:this.attributes.get("rowalign"),columnalign:"center","data-break-align":"top"});for(const a of this.childNodes)t.columnalign[1]=r.shift()||t.columnalign[1],t["data-vertical-align"]=[this.kind,n.shift()||t["data-break-align"][1]],a.setInheritedAttributes(t,e,i,s)}verifyChildren(t){if(!this.parent||this.parent.isKind("mtable")){for(const e of this.childNodes)e.isKind("mtd")||(this.replaceChild(this.factory.create("mtd"),e).appendChild(e),t.fixMtables||e.mError("Children of "+this.kind+" must be mtd",t));super.verifyChildren(t)}else this.mError(this.kind+" can only be a child of an mtable",t,!0)}setTeXclass(t){this.getPrevClass(t);for(const t of this.childNodes)t.setTeXclass(null);return this}}jn.defaults=Object.assign(Object.assign({},o.defaults),{rowalign:Fr,columnalign:Fr,groupalign:Fr,"data-break-align":"top"});class Hn extends jn{get kind(){return"mlabeledtr"}get arity(){return 1}}class Gn extends Jr{get kind(){return"mtd"}get arity(){return-1}get linebreakContainer(){return!0}get linebreakAlign(){return"columnalign"}verifyChildren(t){!this.parent||this.parent.isKind("mtr")?super.verifyChildren(t):this.mError(this.kind+" can only be a child of an mtr or mlabeledtr",t,!0)}setTeXclass(t){return this.getPrevClass(t),this.childNodes[0].setTeXclass(null),this}}Gn.defaults=Object.assign(Object.assign({},Jr.defaults),{rowspan:1,columnspan:1,rowalign:Fr,columnalign:Fr,groupalign:Fr,"data-vertical-align":"top"});class Vn extends Kr{get kind(){return"maligngroup"}get isSpacelike(){return!0}setChildInheritedAttributes(t,e,i,s){t=this.addInheritedAttributes(t,this.attributes.getAllAttributes()),super.setChildInheritedAttributes(t,e,i,s)}}Vn.defaults=Object.assign(Object.assign({},Kr.defaults),{groupalign:Fr});class Wn extends o{get kind(){return"malignmark"}get arity(){return 0}get isSpacelike(){return!0}}Wn.defaults=Object.assign(Object.assign({},o.defaults),{edge:"left"});class Xn extends zr{constructor(){super(...arguments),this.texclass=h.ORD}get kind(){return"mglyph"}verifyAttributes(t){var{src:e,fontfamily:i,index:s}=this.attributes.getList("src","fontfamily","index");""!==e||""!==i&&""!==s?super.verifyAttributes(t):this.mError("mglyph must have either src or fontfamily and index attributes",t,!0)}}Xn.defaults=Object.assign(Object.assign({},zr.defaults),{alt:"",src:"",index:"",width:"auto",height:"auto",valign:"0em"});class zn extends Jr{get kind(){return"semantics"}get arity(){return 1}get notParent(){return!0}}zn.defaults=Object.assign(Object.assign({},Jr.defaults),{definitionUrl:null,encoding:null});class Kn extends o{get kind(){return"annotation-xml"}setChildInheritedAttributes(){}}Kn.defaults=Object.assign(Object.assign({},o.defaults),{definitionUrl:null,encoding:null,cd:"mathmlkeys",name:"",src:null});class Jn extends Kn{constructor(){super(...arguments),this.properties={isChars:!0}}get kind(){return"annotation"}}Jn.defaults=Object.assign({},Kn.defaults);class Yn extends Jr{get kind(){return"TeXAtom"}get arity(){return-1}get notParent(){return!0}constructor(t,e,i){super(t,e,i),this.texclass=h.ORD,this.setProperty("texClass",this.texClass)}setTeXclass(t){return this.childNodes[0].setTeXclass(null),this.adjustTeXclass(t)}adjustTeXclass(t){return t}}Yn.defaults=Object.assign({},Jr.defaults),Yn.prototype.adjustTeXclass=gn.prototype.adjustTeXclass;class $n extends Jr{get kind(){return"MathChoice"}get arity(){return 4}get notParent(){return!0}setInheritedAttributes(t,e,i,s){const r=e?0:Math.max(0,Math.min(i,2))+1,n=this.childNodes[r]||this.factory.create("mrow");this.parent.replaceChild(n,this),n.setInheritedAttributes(t,e,i,s)}}$n.defaults=Object.assign({},Jr.defaults);class Qn extends Qr{get kind(){return"html"}getHTML(){return this.getXML()}setHTML(e,i=null){try{i.getAttribute(e,"data-mjx-hdw")}catch(t){e=i.node("span",{},[e])}return this.setXML(e,i)}getSerializedHTML(){return this.adaptor.outerHTML(this.xml)}textContent(){return this.adaptor.textContent(this.xml)}toString(){var t=this.adaptor.kind(this.xml);return`HTML=<${t}>...</${t}>`}verifyTree(t){this.parent&&!this.parent.isToken&&this.mError("HTML can only be a child of a token element",t,!0)}}const Zn={[Zr.prototype.kind]:Zr,[tn.prototype.kind]:tn,[en.prototype.kind]:en,[gn.prototype.kind]:gn,[fn.prototype.kind]:fn,[bn.prototype.kind]:bn,[En.prototype.kind]:En,[Nn.prototype.kind]:Nn,[yn.prototype.kind]:yn,[xn.prototype.kind]:xn,[An.prototype.kind]:An,[vn.prototype.kind]:vn,[_n.prototype.kind]:_n,[Tn.prototype.kind]:Tn,[wn.prototype.kind]:wn,[Cn.prototype.kind]:Cn,[In.prototype.kind]:In,[Ln.prototype.kind]:Ln,[Sn.prototype.kind]:Sn,[Rn.prototype.kind]:Rn,[On.prototype.kind]:On,[kn.prototype.kind]:kn,[Dn.prototype.kind]:Dn,[Pn.prototype.kind]:Pn,[Mn.prototype.kind]:Mn,[Bn.prototype.kind]:Bn,[Fn.prototype.kind]:Fn,[Un.prototype.kind]:Un,[qn.prototype.kind]:qn,[Hn.prototype.kind]:Hn,[jn.prototype.kind]:jn,[Gn.prototype.kind]:Gn,[Vn.prototype.kind]:Vn,[Wn.prototype.kind]:Wn,[Xn.prototype.kind]:Xn,[zn.prototype.kind]:zn,[Jn.prototype.kind]:Jn,[Kn.prototype.kind]:Kn,[Yn.prototype.kind]:Yn,[$n.prototype.kind]:$n,[$r.prototype.kind]:$r,[Qr.prototype.kind]:Qr,[Qn.prototype.kind]:Qn};class ta extends Br{get MML(){return this.node}}ta.defaultNodes=Zn;class ea{constructor(){this.bits=0}static allocate(...t){for(const e of t){if(this.has(e))throw new Error("Bit already allocated for "+e);if(this.next===ea.MAXBIT)throw new Error("Maximum number of bits already allocated");this.names.set(e,this.next),this.next<<=1}}static has(t){return this.names.has(t)}set(t){this.bits|=this.getBit(t)}clear(t){this.bits&=~this.getBit(t)}isSet(t){return!!(this.bits&this.getBit(t))}reset(){this.bits=0}getBit(t){var e=this.constructor.names.get(t);if(e)return e;throw new Error("Unknown bit-field name: "+t)}}function ia(...t){var e=class extends ea{};return e.allocate(...t),e}function sa(t){return new Promise(function i(s,r){const e=t=>{var e;t.retry instanceof Promise?t.retry.then(()=>i(s,r)).catch(t=>r(t)):null!=(e=t.restart)&&e.isCallback?MathJax.Callback.After(()=>i(s,r),t.restart):r(t)};try{const i=t();i instanceof Promise?i.then(t=>s(t)).catch(t=>e(t)):s(i)}catch(t){e(t)}})}function ra(t){const e=new Error("MathJax retry -- an asynchronous action is required; try using one of the promise-based functions and await its resolution.");throw e.retry=t,e}ea.MAXBIT=1<<31,ea.next=1,ea.names=new Map;function na(t,a,o,l){return new(o=o||Promise)(function(i,e){function s(t){try{n(l.next(t))}catch(t){e(t)}}function r(t){try{n(l.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(s,r)}n((l=l.apply(t,a||[])).next())})}var c,p;class aa extends Ks{static create(t){const e=new this;for(const r of Object.keys(t)){var[i,s]=this.action(r,t[r]);s&&e.add(i,s)}return e}static action(t,e){let i,s,r=!0;const n=e[0];if(1===e.length||"boolean"==typeof e[1])2===e.length&&(r=e[1]),[i,s]=this.methodActions(t);else if("string"==typeof e[1])if("string"==typeof e[2]){4===e.length&&(r=e[3]);const[t,n]=e.slice(1);[i,s]=this.methodActions(t,n)}else 3===e.length&&(r=e[2]),[i,s]=this.methodActions(e[1]);else 4===e.length&&(r=e[3]),[i,s]=e.slice(1);return[{id:t,renderDoc:i,renderMath:s,convert:r},n]}static methodActions(e,i=e){return[t=>(e&&t[e](),!1),(t,e)=>(i&&t[i](e),!1)]}renderDoc(t,e=u.UNPROCESSED){for(const i of this.items)if(i.priority>=e&&i.item.renderDoc(t))return}renderMath(t,e,i=u.UNPROCESSED){for(const s of this.items)if(s.priority>=i&&s.item.renderMath(t,e))return}renderConvert(t,e,i=u.LAST){for(const s of this.items){if(s.priority>i)return;if(s.item.convert&&s.item.renderMath(t,e))return}}findID(t){for(const e of this.items)if(e.item.id===t)return e.item;return null}}const oa={all:!1,processed:!1,inputJax:null,outputJax:null},la={all:!0,processed:!0,inputJax:[],outputJax:[]};class ca extends Cr{compile(t){return null}}class ha extends Ir{typeset(t,e=0){return null}escaped(t,e){return null}}class da extends Rr{}class ua{constructor(t,e,i){var s=this.constructor;this.document=t,this.options=mr(pr({},s.OPTIONS),i),this.math=new(this.options.MathList||da),this.renderActions=aa.create(this.options.renderActions),this._actionPromises=[],this._readyPromise=Promise.resolve(),this.processed=new ua.ProcessBits,this.outputJax=this.options.OutputJax||new ha;let r=this.options.InputJax||[new ca];Array.isArray(r)||(r=[r]),this.inputJax=r,this.adaptor=e,this.outputJax.setAdaptor(e),this.inputJax.map(t=>t.setAdaptor(e)),this.mmlFactory=this.options.MmlFactory||new ta,this.inputJax.map(t=>t.setMmlFactory(this.mmlFactory)),this.outputJax.initialize(),this.inputJax.map(t=>t.initialize())}get kind(){return this.constructor.KIND}addRenderAction(t,...e){var[t,e]=aa.action(t,e);this.renderActions.add(t,e)}removeRenderAction(t){t=this.renderActions.findID(t);t&&this.renderActions.remove(t)}render(){return this.clearPromises(),this.renderActions.renderDoc(this),this}renderPromise(){return this.whenReady(()=>sa(()=>na(this,void 0,void 0,function*(){return this.render(),yield this.actionPromises(),this.clearPromises(),this})))}rerender(t=u.RERENDER){return this.state(t-1),this.render(),this}rerenderPromise(t=u.RERENDER){return this.whenReady(()=>sa(()=>na(this,void 0,void 0,function*(){return this.rerender(t),yield this.actionPromises(),this.clearPromises(),this})))}convert(t,e={}){let{format:i,display:s,end:r,ex:n,em:a,containerWidth:o,scale:l,family:c}=mr({format:this.inputJax[0].name,display:!0,end:u.LAST,em:16,ex:8,containerWidth:null,scale:1,family:""},e);null===o&&(o=80*n);const h=this.inputJax.reduce((t,e)=>e.name===i?e:t,null),d=new this.options.MathItem(t,h,s);return d.start.node=this.adaptor.body(this.document),d.setMetrics(a,n,o,l),c&&this.outputJax.options.mtextInheritFont&&(d.outputData.mtextFamily=c),c&&this.outputJax.options.merrorInheritFont&&(d.outputData.merrorFamily=c),this.clearPromises(),d.convert(this,r),d.typesetRoot||d.root}convertPromise(e,i={}){return this.whenReady(()=>sa(()=>na(this,void 0,void 0,function*(){var t=this.convert(e,i);return yield this.actionPromises(),this.clearPromises(),t})))}whenReady(s){return this._readyPromise=this._readyPromise.catch(t=>{}).then(()=>{var t=this._readyPromise;this._readyPromise=Promise.resolve();const e=s(),i=this._readyPromise.then(()=>e);return this._readyPromise=t,i})}actionPromises(){return Promise.all(this._actionPromises)}clearPromises(){this._actionPromises=[]}savePromise(t){this._actionPromises.push(t)}findMath(t=0){return this.processed.set("findMath"),this}compile(){if(!this.processed.isSet("compile")){const e=[];for(const i of this.math)this.compileMath(i),void 0!==i.inputData.recompile&&e.push(i);for(const s of e){var t=s.inputData.recompile;s.state(t.state),s.inputData.recompile=t,this.compileMath(s)}this.processed.set("compile")}return this}compileMath(e){try{e.compile(this)}catch(t){if(t.retry||t.restart)throw t;this.options.compileError(this,e,t),e.inputData.error=t}}compileError(t,e){t.root=this.mmlFactory.create("math",null,[this.mmlFactory.create("merror",{"data-mjx-error":e.message,title:e.message},[this.mmlFactory.create("mtext",null,[this.mmlFactory.create("text").setText("Math input error")])])]),t.display&&t.root.attributes.set("display","block"),t.inputData.error=e.message}typeset(){if(!this.processed.isSet("typeset")){for(const e of this.math)try{e.typeset(this)}catch(t){if(t.retry||t.restart)throw t;this.options.typesetError(this,e,t),e.outputData.error=t}this.processed.set("typeset")}return this}typesetError(t,e){t.typesetRoot=this.adaptor.node("mjx-container",{class:"MathJax mjx-output-error",jax:this.outputJax.name},[this.adaptor.node("span",{"data-mjx-error":e.message,title:e.message,style:{color:"red","background-color":"yellow","line-height":"normal"}},[this.adaptor.text("Math output error")])]),t.display&&this.adaptor.setAttributes(t.typesetRoot,{style:{display:"block",margin:"1em 0","text-align":"center"}}),t.outputData.error=e.message}getMetrics(){return this.processed.isSet("getMetrics")||(this.outputJax.getMetrics(this),this.processed.set("getMetrics")),this}updateDocument(){if(!this.processed.isSet("updateDocument")){for(const t of this.math.reversed())t.updateDocument(this);this.processed.set("updateDocument")}return this}removeFromDocument(t=0){return this}state(t,e=!1){for(const i of this.math)i.state(t,e);return t<u.INSERTED&&this.processed.clear("updateDocument"),t<u.TYPESET&&(this.processed.clear("typeset"),this.processed.clear("getMetrics")),t<u.COMPILED&&this.processed.clear("compile"),t<u.FINDMATH&&this.processed.clear("findMath"),this}reset(e={processed:!0}){return(e=mr(Object.assign({},oa),e)).all&&Object.assign(e,la),e.processed&&this.processed.reset(),e.inputJax&&this.inputJax.forEach(t=>t.reset(...e.inputJax)),e.outputJax&&this.outputJax.reset(...e.outputJax),this}clear(){return this.reset(),this.math.clear(),this}done(){return Promise.resolve()}concat(t){return this.math.merge(t),this}clearMathItemsWithin(t){const e=this.getMathItemsWithin(t);for(const t of e.slice(0).reverse())t.clear();return this.math.remove(...e),e}getMathItemsWithin(t){Array.isArray(t)||(t=[t]);const e=this.adaptor,i=[],s=e.getElements(t,this.document);t:for(const t of this.math)for(const r of s)if(t.start.node&&e.contains(r,t.start.node)){i.push(t);continue t}return i}}ua.KIND="MathDocument",ua.OPTIONS={OutputJax:null,InputJax:null,MmlFactory:null,MathList:da,MathItem:class extends Mr{},compileError:(t,e,i)=>{t.compileError(e,i)},typesetError:(t,e,i)=>{t.typesetError(e,i)},renderActions:lr({find:[u.FINDMATH,"findMath","",!1],compile:[u.COMPILED],metrics:[u.METRICS,"getMetrics","",!1],typeset:[u.TYPESET],update:[u.INSERTED,"updateDocument",!1]})},ua.ProcessBits=ia("findMath","compile","getMetrics","typeset","updateDocument");class pa extends ua{}class ma{constructor(t,e=5){this.documentClass=pa,this.adaptor=t,this.priority=e}get name(){return this.constructor.NAME}handlesDocument(t){return!1}create(t,e){return new this.documentClass(t,this.adaptor,e)}}ma.NAME="generic";class ga extends Ks{register(t){return this.add(t,t.priority)}unregister(t){this.remove(t)}handlesDocument(t){for(const e of this){const i=e.item;if(i.handlesDocument(t))return i}throw new Error("Can't find handler for document")}document(t,e=null){return this.handlesDocument(t).create(t,e)}}class fa{static methodName(t){return"visit"+(t.charAt(0).toUpperCase()+t.substring(1)).replace(/[^a-z0-9_]/gi,"_")+"Node"}constructor(t){this.nodeHandlers=new Map;for(const e of t.getKinds()){const t=this[fa.methodName(e)];t&&this.nodeHandlers.set(e,t)}}visitTree(t,...e){return this.visitNode(t,...e)}visitNode(t,...e){return(this.nodeHandlers.get(t.kind)||this.visitDefault).call(this,t,...e)}visitDefault(t,...e){if("childNodes"in t)for(const i of t.childNodes)this.visitNode(i,...e)}setNodeHandler(t,e){this.nodeHandlers.set(t,e)}removeNodeHandler(t){this.nodeHandlers.delete(t)}}const ba="data-mjx-";class Ea extends fa{constructor(t=null){super(t=t||new ta)}visitTextNode(t){}visitXMLNode(t){}visitHtmlNode(t){}getKind(t){t=t.kind;return br(t,this.constructor.rename,t)}getAttributeList(t){const e=this.constructor,i=br(t.kind,e.defaultAttributes,{}),s=Object.assign({},i,this.getDataAttributes(t),t.attributes.getAllAttributes()),r=e.variants;return Object.hasOwn(s,"mathvariant")&&(Object.hasOwn(r,s.mathvariant)?s.mathvariant=r[s.mathvariant]:t.getProperty("ignore-variant")&&delete s.mathvariant),s}getDataAttributes(e){const i={},t=e.attributes.getExplicit("mathvariant"),s=this.constructor.variants;t&&(e.getProperty("ignore-variant")||Object.hasOwn(s,t))&&this.setDataAttribute(i,"variant",t),e.getProperty("variantForm")&&this.setDataAttribute(i,"alternate","1"),e.getProperty("pseudoscript")&&this.setDataAttribute(i,"pseudoscript","true"),!1===e.getProperty("autoOP")&&this.setDataAttribute(i,"auto-op","false");var r=e.getProperty("vbox"),r=(r&&this.setDataAttribute(i,"vbox",r),e.getProperty("scriptalign"));r&&this.setDataAttribute(i,"script-align",r);const n=e.getProperty("mathaccent");void 0!==n&&(n&&!e.isMathAccent()||!n&&!e.isMathAccentWithWidth())&&this.setDataAttribute(i,"mathaccent",n.toString());r=e.getProperty("texClass");if(void 0!==r){let t=!0;if(r===h.OP&&e.isKind("mi")){const i=e.getText();t=!(1<i.length&&i.match(tn.operatorName))}t&&this.setDataAttribute(i,"texclass",r<0?"NONE":Hr[r])}return e.getProperty("smallmatrix")&&this.setDataAttribute(i,"smallmatrix","true"),i}setDataAttribute(t,e,i){t[ba+e]=i}}Ea.rename={TeXAtom:"mrow"},Ea.variants={"-tex-calligraphic":"script","-tex-bold-calligraphic":"bold-script","-tex-oldstyle":"normal","-tex-bold-oldstyle":"bold","-tex-mathit":"italic"},Ea.defaultAttributes={math:{xmlns:"http://www.w3.org/1998/Math/MathML"}};class Na extends Ea{constructor(){super(...arguments),this.document=null}visitTree(t,e){e=(this.document=e).createElement("top");return this.visitNode(t,e),this.document=null,e.firstChild}visitTextNode(t,e){e.appendChild(this.document.createTextNode(t.getText()))}visitXMLNode(t,e){e.appendChild(t.getXML().cloneNode(!0))}visitHtmlNode(t,e){e.appendChild(t.getHTML().cloneNode(!0))}visitInferredMrowNode(t,e){for(const i of t.childNodes)this.visitNode(i,e)}visitDefault(t,e){var i=this.document.createElement(this.getKind(t));this.addAttributes(t,i);for(const e of t.childNodes)this.visitNode(e,i);e.appendChild(i)}addAttributes(t,e){const i=this.getAttributeList(t);for(const t of Object.keys(i))e.setAttribute(t,i[t].toString())}}class ya extends Ea{visitTree(t){return this.visitNode(t,"")}visitTextNode(t,e){return this.quoteHTML(t.getText())}visitXMLNode(t,e){return e+t.getSerializedXML()}visitHtmlNode(t,e){return t.getSerializedHTML()}visitInferredMrowNode(t,e){const i=[];for(const s of t.childNodes)i.push(this.visitNode(s,e));return i.join("\n")}visitAnnotationNode(t,e){var i=this.childNodeMml(t,"","");return`${e}<annotation${this.getAttributes(t)}>${i}</annotation>`}visitDefault(t,e){const i=this.getKind(t),[s,r]=t.isToken||0===t.childNodes.length?["",""]:["\n",e],n=this.childNodeMml(t,e+"  ",s),a=n.match(/\S/)?s+n+r:"";return`${e}<${i}${this.getAttributes(t)}>${a}</${i}>`}childNodeMml(t,e,i){let s="";for(const r of t.childNodes)s+=this.visitNode(r,e)+i;return s}getAttributes(t){const e=[],i=this.getAttributeList(t);for(const t of Object.keys(i)){var s=String(i[t]);void 0!==s&&e.push(t+'="'+this.quoteHTML(s)+'"')}return e.length?" "+e.join(" "):""}quoteHTML(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/[\uD800-\uDBFF]./g,this.toEntity).replace(/[\u0080-\uD7FF\uE000-\uFFFF]/g,this.toEntity)}toEntity(t){return mn(t)}}class xa{get kind(){return this.node.kind}constructor(t,e){this.factory=t,this.node=e}wrap(t){return this.factory.wrap(t)}walkTree(t,e){if(t(this,e),"childNodes"in this)for(const i of this.childNodes)i&&i.walkTree(t,e);return e}}class Aa extends Pr{wrap(t,...e){return this.create(t.kind,t,...e)}}const va={version:Bs,context:Ws,handlers:new ga,document:function(t,e){return va.handlers.document(t,e)},handleRetriesFor:sa,retryAfter:ra,asyncLoad:null,asyncIsSynchronous:!1};class _a extends Mr{get adaptor(){return this.inputJax.adaptor}constructor(t,e,i=!0,s={node:null,n:0,delim:""},r={node:null,n:0,delim:""}){super(t,e,i,s,r)}updateDocument(t){if(this.state()<u.INSERTED){if(this.inputJax.processStrings){let t=this.start.node;if(t===this.end.node)this.end.n&&this.end.n<this.adaptor.value(this.end.node).length&&this.adaptor.split(this.end.node,this.end.n),this.start.n&&(t=this.adaptor.split(this.start.node,this.start.n)),this.adaptor.replace(this.typesetRoot,t);else{for(this.start.n&&(t=this.adaptor.split(t,this.start.n));t!==this.end.node;){var e=this.adaptor.next(t);this.adaptor.remove(t),t=e}this.adaptor.insert(this.typesetRoot,t),this.end.n<this.adaptor.value(t).length&&this.adaptor.split(t,this.end.n),this.adaptor.remove(t)}}else this.adaptor.replace(this.typesetRoot,this.start.node);this.start.node=this.end.node=this.typesetRoot,this.start.n=this.end.n=0,this.state(u.INSERTED)}}updateStyleSheet(t){t.addStyleSheet()}removeFromDocument(e=!1){if(super.removeFromDocument(e),this.state()>=u.TYPESET){const s=this.adaptor,r=this.start.node;let t=s.text("");if(e){const e=this.start.delim+this.math+this.end.delim;var i;t=this.inputJax.processStrings?s.text(e):(i=s.parse(e,"text/html"),s.firstChild(s.body(i)))}s.parent(r)&&s.replace(t,r),this.start.node=this.end.node=t,this.start.n=this.end.n=0}}}class Ta extends Rr{}class wa{constructor(t=null){var e=this.constructor;this.options=mr(pr({},e.OPTIONS),t),this.init(),this.getPatterns()}init(){this.strings=[],this.string="",this.snodes=[],this.nodes=[],this.stack=[]}getPatterns(){const t=cr(this.options.skipHtmlTags),e=cr(this.options.ignoreHtmlClass),i=cr(this.options.processHtmlClass);this.skipHtmlTags=new RegExp("^(?:"+t.join("|")+")$","i"),this.ignoreHtmlClass=new RegExp("(?:^| )(?:"+e.join("|")+")(?: |$)"),this.processHtmlClass=new RegExp("(?:^| )(?:"+i+")(?: |$)")}pushString(){this.string.match(/\S/)&&(this.strings.push(this.string),this.nodes.push(this.snodes)),this.string="",this.snodes=[]}extendString(t,e){this.snodes.push([t,e.length]),this.string+=e}handleText(t,e){return e||this.extendString(t,this.adaptor.value(t)),this.adaptor.next(t)}handleTag(t,e){if(!e){const e=this.options.includeHtmlTags[this.adaptor.kind(t)];e instanceof Function?this.extendString(t,e(t,this.adaptor)):this.extendString(t,e)}return this.adaptor.next(t)}handleContainer(t,e){this.pushString();var i=this.adaptor.getAttribute(t,"class")||"",s=this.adaptor.kind(t)||"",r=this.processHtmlClass.exec(i);let n=t;return!this.adaptor.firstChild(t)||this.adaptor.getAttribute(t,"data-MJX")||!r&&this.skipHtmlTags.exec(s)?n=this.adaptor.next(t):(this.adaptor.next(t)&&this.stack.push([this.adaptor.next(t),e]),n=this.adaptor.firstChild(t),e=(e||this.ignoreHtmlClass.exec(i))&&!r),[n,e]}handleOther(t,e){return this.pushString(),this.adaptor.next(t)}find(t){this.init();const e=this.adaptor.next(t);let i=!1;for(var s=this.options.includeHtmlTags;t&&t!==e;){const e=this.adaptor.kind(t);"#text"===e?t=this.handleText(t,i):Object.hasOwn(s,e)?t=this.handleTag(t,i):e?[t,i]=this.handleContainer(t,i):t=this.handleOther(t,i),!t&&this.stack.length&&(this.pushString(),[t,i]=this.stack.pop())}this.pushString();var r=[this.strings,this.nodes];return this.init(),r}}wa.OPTIONS={skipHtmlTags:["script","noscript","style","textarea","pre","code","math","select","option","mjx-container"],includeHtmlTags:lr({br:"\n",wbr:"","#comment":""}),ignoreHtmlClass:"mathjax_ignore",processHtmlClass:"mathjax_process"},Dr("STYLES",u.INSERTED+1);class Ca extends ua{constructor(t,e,i){var[i,s]=fr(i,wa.OPTIONS);super(t,e,i),this.domStrings=this.options.DomStrings||new wa(s),this.domStrings.adaptor=e,this.styles=[]}findPosition(t,e,i,s){const r=this.adaptor,n=1/(s[t].length||1);let a=t;for(var[o,l]of s[t]){if(e<=l&&"#text"===r.kind(o))return{i:a,node:o,n:Math.max(e,0),delim:i};e-=l,a+=n}return{node:null,n:0,delim:i}}mathItem(t,e,i){var s=t.math,r=this.findPosition(t.n,t.start.n,t.open,i),i=this.findPosition(t.n,t.end.n,t.close,i);return new this.options.MathItem(s,e,t.display,r,i)}findMath(t){if(!this.processed.isSet("findMath")){this.adaptor.document=this.document,t=mr({elements:this.options.elements||[this.adaptor.body(this.document)]},t);var e=this.adaptor.getElements(t.elements,this.document);for(const t of this.inputJax){var i=t.processStrings?this.findMathFromStrings(t,e):this.findMathFromDOM(t,e);this.math.merge(i)}this.processed.set("findMath")}return this}findMathFromStrings(t,e){const i=[],s=[];for(const t of e){const[e,r]=this.domStrings.find(t);i.push(...e),s.push(...r)}const r=new this.options.MathList;for(const e of t.findMath(i))r.push(this.mathItem(e,t,s));return r}findMathFromDOM(t,e){const i=[];for(const s of e)for(const e of t.findMath(s))i.push(new this.options.MathItem(e.math,t,e.display,e.start,e.end));return new this.options.MathList(...i)}updateDocument(){return this.processed.isSet("updateDocument")||(this.addPageElements(),this.addStyleSheet(),super.updateDocument(),this.processed.set("updateDocument")),this}addPageElements(){const t=this.adaptor,e=t.body(this.document),i=this.documentPageElements();var s;i&&((s=t.firstChild(e))?t.insert(i,s):t.append(e,i))}addStyleSheet(){const t=this.documentStyleSheet(),e=this.adaptor;var i,s;t&&!e.parent(t)&&(i=e.head(this.document),(s=this.findSheet(i,e.getAttribute(t,"id")))?e.replace(t,s):e.append(i,t))}findSheet(t,e){if(e)for(const i of this.adaptor.tags(t,"style"))if(this.adaptor.getAttribute(i,"id")===e)return i;return null}removeFromDocument(t=!1){if(this.processed.isSet("updateDocument"))for(const e of this.math)e.state()>=u.INSERTED&&e.state(u.TYPESET,t);return this.processed.clear("updateDocument"),this}documentStyleSheet(){return this.outputJax.styleSheet(this)}documentPageElements(){return this.outputJax.pageElements(this)}addStyles(t){this.styles.push(t),"insertStyles"in this.outputJax&&this.outputJax.insertStyles(t)}getStyles(){return this.styles}}Ca.KIND="HTML",Ca.OPTIONS=Object.assign(Object.assign({},ua.OPTIONS),{renderActions:lr(Object.assign(Object.assign({},ua.OPTIONS.renderActions),{styles:[u.STYLES,"","updateStyleSheet",!1]})),MathList:Ta,MathItem:_a,DomStrings:null});class Ia extends ma{constructor(){super(...arguments),this.documentClass=Ca}handlesDocument(t){const e=this.adaptor;if("string"==typeof t)try{t=e.parse(t,"text/html")}catch(t){}return t instanceof e.window.Document||t instanceof e.window.HTMLElement||t instanceof e.window.DocumentFragment}create(t,e){const i=this.adaptor;if("string"==typeof t)t=i.parse(t,"text/html");else if(t instanceof i.window.HTMLElement||t instanceof i.window.DocumentFragment){const e=t;t=i.parse("","text/html"),i.append(i.body(t),e)}return super.create(t,e)}}function La(s){return va.asyncLoad?new Promise((e,i)=>{const t=va.asyncLoad(s);t instanceof Promise?t.then(t=>e(t)).catch(t=>i(t)):e(t)}):Promise.reject(`Can't load '${s}': No mathjax.asyncLoad method specified`)}const Sa=1e6,ka={px:1,in:96,cm:96/2.54,mm:96/25.4},Ra={em:1,ex:.431,pt:.1,pc:1.2,mu:1/18},Oa={veryverythinmathspace:1/18,verythinmathspace:2/18,thinmathspace:3/18,mediummathspace:4/18,thickmathspace:5/18,verythickmathspace:6/18,veryverythickmathspace:7/18,negativeveryverythinmathspace:-1/18,negativeverythinmathspace:-2/18,negativethinmathspace:-3/18,negativemediummathspace:-4/18,negativethickmathspace:-5/18,negativeverythickmathspace:-6/18,negativeveryverythickmathspace:-7/18,thin:.04,medium:.06,thick:.1,normal:1,big:2,small:1/Math.sqrt(2),infinity:Sa};function Ma(t,e=0,i=1,s=16){if(""===(t="string"!=typeof t?String(t):t)||null==t)return e;if(Oa[t])return Oa[t];t=t.match(/^\s*([-+]?(?:\.\d+|\d+(?:\.\d*)?))?(pt|em|ex|mu|px|pc|in|mm|cm|%)?/);if(!t||""===t[0])return e;var r=parseFloat(t[1]||"1"),t=t[2];return Object.hasOwn(ka,t)?r*ka[t]/s/i:Object.hasOwn(Ra,t)?r*Ra[t]:"%"===t?r/100*e:r*e}function Da(t){return(100*t).toFixed(1).replace(/\.?0+$/,"")+"%"}function Pa(t){return Math.abs(t)<.001?"0":t.toFixed(3).replace(/\.?0+$/,"")+"em"}function Ba(t,e=-Sa,i=16){return t*=i,e&&t<e&&(t=e),Math.abs(t)<.1?"0":t.toFixed(1).replace(/\.0$/,"")+"px"}class Fa{static zero(){return new Fa({h:0,d:0,w:0})}static empty(){return new Fa}constructor(t={w:0,h:-Sa,d:-Sa}){this.w=t.w||0,this.h="h"in t?t.h:-Sa,this.d="d"in t?t.d:-Sa,this.L=this.R=this.ic=this.oc=this.sk=this.dx=0,this.scale=this.rscale=1,this.pwidth=""}empty(){return this.w=0,this.h=this.d=-Sa,this}clean(){this.w===-Sa&&(this.w=0),this.h===-Sa&&(this.h=0),this.d===-Sa&&(this.d=0)}rescale(t){this.w*=t,this.h*=t,this.d*=t}combine(t,e=0,i=0){var s=t.rscale,e=e+s*(t.w+t.L+t.R),r=i+s*t.h,s=s*t.d-i;e>this.w&&(this.w=e),r>this.h&&(this.h=r),s>this.d&&(this.d=s)}append(t){var e=t.rscale;this.w+=e*(t.w+t.L+t.R),e*t.h>this.h&&(this.h=e*t.h),e*t.d>this.d&&(this.d=e*t.d)}updateFrom(t){this.h=t.h,this.d=t.d,this.w=t.w,t.pwidth&&(this.pwidth=t.pwidth)}copy(){var t=new Fa;return Object.assign(t,this),t}}Fa.fullWidth="100%",Fa.boxSides=[["Top",0,"h"],["Right",1,"w"],["Bottom",2,"d"],["Left",3,"w"]];const Ua={loadMissingEntities:!0},qa={ApplyFunction:"â¡",Backslash:"âˆ–",Because:"âˆµ",Breve:"Ë˜",Cap:"â‹’",CenterDot:"Â·",CircleDot:"âŠ™",CircleMinus:"âŠ–",CirclePlus:"âŠ•",CircleTimes:"âŠ—",Congruent:"â‰¡",ContourIntegral:"âˆ®",Coproduct:"âˆ",Cross:"â¨¯",Cup:"â‹“",CupCap:"â‰",Dagger:"â€¡",Del:"âˆ‡",Delta:"Î”",Diamond:"â‹„",DifferentialD:"â…†",DotEqual:"â‰",DoubleDot:"Â¨",DoubleRightTee:"âŠ¨",DoubleVerticalBar:"âˆ¥",DownArrow:"â†“",DownLeftVector:"â†½",DownRightVector:"â‡",DownTee:"âŠ¤",Downarrow:"â‡“",Element:"âˆˆ",EqualTilde:"â‰‚",Equilibrium:"â‡Œ",Exists:"âˆƒ",ExponentialE:"â…‡",FilledVerySmallSquare:"â–ª",ForAll:"âˆ€",Gamma:"Î“",Gg:"â‹™",GreaterEqual:"â‰¥",GreaterEqualLess:"â‹›",GreaterFullEqual:"â‰§",GreaterLess:"â‰·",GreaterSlantEqual:"â©¾",GreaterTilde:"â‰³",Hacek:"Ë‡",Hat:"^",HumpDownHump:"â‰",HumpEqual:"â‰",Im:"â„‘",ImaginaryI:"â…ˆ",Integral:"âˆ«",Intersection:"â‹‚",InvisibleComma:"â£",InvisibleTimes:"â¢",Lambda:"Î›",Larr:"â†",LeftAngleBracket:"âŸ¨",LeftArrow:"â†",LeftArrowRightArrow:"â‡†",LeftCeiling:"âŒˆ",LeftDownVector:"â‡ƒ",LeftFloor:"âŒŠ",LeftRightArrow:"â†”",LeftTee:"âŠ£",LeftTriangle:"âŠ²",LeftTriangleEqual:"âŠ´",LeftUpVector:"â†¿",LeftVector:"â†¼",Leftarrow:"â‡",Leftrightarrow:"â‡”",LessEqualGreater:"â‹š",LessFullEqual:"â‰¦",LessGreater:"â‰¶",LessSlantEqual:"â©½",LessTilde:"â‰²",Ll:"â‹˜",Lleftarrow:"â‡š",LongLeftArrow:"âŸµ",LongLeftRightArrow:"âŸ·",LongRightArrow:"âŸ¶",Longleftarrow:"âŸ¸",Longleftrightarrow:"âŸº",Longrightarrow:"âŸ¹",Lsh:"â†°",MinusPlus:"âˆ“",NestedGreaterGreater:"â‰«",NestedLessLess:"â‰ª",NotDoubleVerticalBar:"âˆ¦",NotElement:"âˆ‰",NotEqual:"â‰ ",NotExists:"âˆ„",NotGreater:"â‰¯",NotGreaterEqual:"â‰±",NotLeftTriangle:"â‹ª",NotLeftTriangleEqual:"â‹¬",NotLess:"â‰®",NotLessEqual:"â‰°",NotPrecedes:"âŠ€",NotPrecedesSlantEqual:"â‹ ",NotRightTriangle:"â‹«",NotRightTriangleEqual:"â‹­",NotSubsetEqual:"âŠˆ",NotSucceeds:"âŠ",NotSucceedsSlantEqual:"â‹¡",NotSupersetEqual:"âŠ‰",NotTilde:"â‰",NotVerticalBar:"âˆ¤",Omega:"Î©",OverBar:"â€¾",OverBrace:"â",PartialD:"âˆ‚",Phi:"Î¦",Pi:"Î ",PlusMinus:"Â±",Precedes:"â‰º",PrecedesEqual:"âª¯",PrecedesSlantEqual:"â‰¼",PrecedesTilde:"â‰¾",Product:"âˆ",Proportional:"âˆ",Psi:"Î¨",Rarr:"â† ",Re:"â„œ",ReverseEquilibrium:"â‡‹",RightAngleBracket:"âŸ©",RightArrow:"â†’",RightArrowLeftArrow:"â‡„",RightCeiling:"âŒ‰",RightDownVector:"â‡‚",RightFloor:"âŒ‹",RightTee:"âŠ¢",RightTeeArrow:"â†¦",RightTriangle:"âŠ³",RightTriangleEqual:"âŠµ",RightUpVector:"â†¾",RightVector:"â‡€",Rightarrow:"â‡’",Rrightarrow:"â‡›",Rsh:"â†±",Sigma:"Î£",SmallCircle:"âˆ˜",Sqrt:"âˆš",Square:"â–¡",SquareIntersection:"âŠ“",SquareSubset:"âŠ",SquareSubsetEqual:"âŠ‘",SquareSuperset:"âŠ",SquareSupersetEqual:"âŠ’",SquareUnion:"âŠ”",Star:"â‹†",Subset:"â‹",SubsetEqual:"âŠ†",Succeeds:"â‰»",SucceedsEqual:"âª°",SucceedsSlantEqual:"â‰½",SucceedsTilde:"â‰¿",SuchThat:"âˆ‹",Sum:"âˆ‘",Superset:"âŠƒ",SupersetEqual:"âŠ‡",Supset:"â‹‘",Therefore:"âˆ´",Theta:"Î˜",Tilde:"âˆ¼",TildeEqual:"â‰ƒ",TildeFullEqual:"â‰…",TildeTilde:"â‰ˆ",UnderBar:"_",UnderBrace:"âŸ",Union:"â‹ƒ",UnionPlus:"âŠ",UpArrow:"â†‘",UpDownArrow:"â†•",UpTee:"âŠ¥",Uparrow:"â‡‘",Updownarrow:"â‡•",Upsilon:"Î¥",Vdash:"âŠ©",Vee:"â‹",VerticalBar:"âˆ£",VerticalTilde:"â‰€",Vvdash:"âŠª",Wedge:"â‹€",Xi:"Î",amp:"&",acute:"Â´",aleph:"â„µ",alpha:"Î±",amalg:"â¨¿",and:"âˆ§",ang:"âˆ ",angmsd:"âˆ¡",angsph:"âˆ¢",ape:"â‰Š",backprime:"â€µ",backsim:"âˆ½",backsimeq:"â‹",beta:"Î²",beth:"â„¶",between:"â‰¬",bigcirc:"â—¯",bigodot:"â¨€",bigoplus:"â¨",bigotimes:"â¨‚",bigsqcup:"â¨†",bigstar:"â˜…",bigtriangledown:"â–½",bigtriangleup:"â–³",biguplus:"â¨„",blacklozenge:"â§«",blacktriangle:"â–´",blacktriangledown:"â–¾",blacktriangleleft:"â—‚",bowtie:"â‹ˆ",boxdl:"â”",boxdr:"â”Œ",boxminus:"âŠŸ",boxplus:"âŠ",boxtimes:"âŠ ",boxul:"â”˜",boxur:"â””",bsol:"\\",bull:"â€¢",cap:"âˆ©",check:"âœ“",chi:"Ï‡",circ:"Ë†",circeq:"â‰—",circlearrowleft:"â†º",circlearrowright:"â†»",circledR:"Â®",circledS:"â“ˆ",circledast:"âŠ›",circledcirc:"âŠš",circleddash:"âŠ",clubs:"â™£",colon:":",comp:"âˆ",ctdot:"â‹¯",cuepr:"â‹",cuesc:"â‹Ÿ",cularr:"â†¶",cup:"âˆª",curarr:"â†·",curlyvee:"â‹",curlywedge:"â‹",dagger:"â€ ",daleth:"â„¸",ddarr:"â‡Š",deg:"Â°",delta:"Î´",digamma:"Ï",div:"Ã·",divideontimes:"â‹‡",dot:"Ë™",doteqdot:"â‰‘",dotplus:"âˆ”",dotsquare:"âŠ¡",dtdot:"â‹±",ecir:"â‰–",efDot:"â‰’",egs:"âª–",ell:"â„“",els:"âª•",empty:"âˆ…",epsi:"Îµ",epsiv:"Ïµ",erDot:"â‰“",eta:"Î·",eth:"Ã°",flat:"â™­",fork:"â‹”",frown:"âŒ¢",gEl:"âªŒ",gamma:"Î³",gap:"âª†",gimel:"â„·",gnE:"â‰©",gnap:"âªŠ",gne:"âªˆ",gnsim:"â‹§",gt:">",gtdot:"â‹—",harrw:"â†­",hbar:"â„",hellip:"â€¦",hookleftarrow:"â†©",hookrightarrow:"â†ª",imath:"Ä±",infin:"âˆ",intcal:"âŠº",iota:"Î¹",jmath:"È·",kappa:"Îº",kappav:"Ï°",lEg:"âª‹",lambda:"Î»",lap:"âª…",larrlp:"â†«",larrtl:"â†¢",lbrace:"{",lbrack:"[",le:"â‰¤",leftleftarrows:"â‡‡",leftthreetimes:"â‹‹",lessdot:"â‹–",lmoust:"â°",lnE:"â‰¨",lnap:"âª‰",lne:"âª‡",lnsim:"â‹¦",longmapsto:"âŸ¼",looparrowright:"â†¬",lowast:"âˆ—",loz:"â—Š",lt:"<",ltimes:"â‹‰",ltri:"â—ƒ",macr:"Â¯",malt:"âœ ",mho:"â„§",mu:"Î¼",multimap:"âŠ¸",nLeftarrow:"â‡",nLeftrightarrow:"â‡",nRightarrow:"â‡",nVDash:"âŠ¯",nVdash:"âŠ®",natur:"â™®",nearr:"â†—",nharr:"â†®",nlarr:"â†š",not:"Â¬",nrarr:"â†›",nu:"Î½",nvDash:"âŠ­",nvdash:"âŠ¬",nwarr:"â†–",omega:"Ï‰",omicron:"Î¿",or:"âˆ¨",osol:"âŠ˜",period:".",phi:"Ï†",phiv:"Ï•",pi:"Ï€",piv:"Ï–",prap:"âª·",precnapprox:"âª¹",precneqq:"âªµ",precnsim:"â‹¨",prime:"â€²",psi:"Ïˆ",quot:'"',rarrtl:"â†£",rbrace:"}",rbrack:"]",rho:"Ï",rhov:"Ï±",rightrightarrows:"â‡‰",rightthreetimes:"â‹Œ",ring:"Ëš",rmoust:"â±",rtimes:"â‹Š",rtri:"â–¹",scap:"âª¸",scnE:"âª¶",scnap:"âªº",scnsim:"â‹©",sdot:"â‹…",searr:"â†˜",sect:"Â§",sharp:"â™¯",sigma:"Ïƒ",sigmav:"Ï‚",simne:"â‰†",smile:"âŒ£",spades:"â™ ",sub:"âŠ‚",subE:"â«…",subnE:"â«‹",subne:"âŠŠ",supE:"â«†",supnE:"â«Œ",supne:"âŠ‹",swarr:"â†™",tau:"Ï„",theta:"Î¸",thetav:"Ï‘",tilde:"Ëœ",times:"Ã—",triangle:"â–µ",triangleq:"â‰œ",upsi:"Ï…",upuparrows:"â‡ˆ",veebar:"âŠ»",vellip:"â‹®",weierp:"â„˜",xi:"Î¾",yen:"Â¥",zeta:"Î¶",zigrarr:"â‡",nbsp:"Â ",rsquo:"â€™",lsquo:"â€˜"},ja={};function Ha(t){return t.replace(/&([a-z][a-z0-9]*|#(?:[0-9]+|x[0-9a-f]+));/gi,Ga)}function Ga(t,e){if("#"===e.charAt(0))return Va(e.slice(1));if(qa[e])return qa[e];if(Ua.loadMissingEntities){const t=e.match(/^[a-zA-Z](fr|scr|opf)$/)?RegExp.$1:e.charAt(0).toLowerCase();ja[t]||(ja[t]=!0,ra(La("./util/entities/"+t+".js")))}return t}function Va(t){t="x"===t.charAt(0)?parseInt(t.slice(1),16):parseInt(t);return String.fromCodePoint(t)}class Wa{get cssText(){return this.getStyleString()}constructor(t=null){this.styles={},this.addStyles(t)}addStyles(t){if(t)for(const e of Object.keys(t))this.styles[e]||(this.styles[e]={}),Object.assign(this.styles[e],t[e])}removeStyles(...t){for(const e of t)delete this.styles[e]}clear(){this.styles={}}getStyleString(){return this.getStyleRules().join("\n\n")}getStyleRules(){const t=Object.keys(this.styles),e=new Array(t.length);let i=0;for(const s of t)e[i++]=s+" {\n"+this.getStyleDefString(this.styles[s])+"\n}";return e}getStyleDefString(t){const e=Object.keys(t),i=new Array(e.length);let s=0;for(const r of e)i[s++]="  "+r+": "+t[r]+";";return i.join("\n")}}const Xa=["top","right","bottom","left"],za=["width","style","color"];function Ka(t){const e=t.split(/((?:'[^']*'|"[^"]*"|,[\s\n]|[^\s\n])*)/g),i=[];for(;1<e.length;)e.shift(),i.push(e.shift());return i}function Ja(t){const e=Ka(this.styles[t]);0===e.length&&e.push(""),1===e.length&&e.push(e[0]),2===e.length&&e.push(e[0]),3===e.length&&e.push(e[1]);for(const i of eo.connect[t].children)this.setStyle(this.childName(t,i),e.shift())}const Ya=/^(?:[\d.]+(?:[a-z]+)|thin|medium|thick|inherit|initial|unset)$/,$a=/^(?:none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset|inherit|initial|unset)$/;function Qa(t){const e={width:"",style:"",color:""};for(const i of Ka(this.styles[t]))i.match(Ya)&&""===e.width?e.width=i:i.match($a)&&""===e.style?e.style=i:e.color=i;for(const s of eo.connect[t].children)this.setStyle(this.childName(t,s),e[s])}function Za(t){const e=[];for(const s of eo.connect[t].children){var i=this.styles[this.childName(t,s)];i&&e.push(i)}e.length?this.styles[t]=e.join(" "):delete this.styles[t]}const to={style:/^(?:normal|italic|oblique|inherit|initial|unset)$/,variant:new RegExp("^(?:"+["normal|none","inherit|initial|unset","common-ligatures|no-common-ligatures","discretionary-ligatures|no-discretionary-ligatures","historical-ligatures|no-historical-ligatures","contextual|no-contextual","(?:stylistic|character-variant|swash|ornaments|annotation)\\([^)]*\\)","small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps","lining-nums|oldstyle-nums|proportional-nums|tabular-nums","diagonal-fractions|stacked-fractions","ordinal|slashed-zero","jis78|jis83|jis90|jis04|simplified|traditional","full-width|proportional-width","ruby"].join("|")+")$"),weight:/^(?:normal|bold|bolder|lighter|[1-9]00|inherit|initial|unset)$/,stretch:new RegExp("^(?:"+["normal","(?:(?:ultra|extra|semi)-)?(?:condensed|expanded)","inherit|initial|unset"].join("|")+")$"),size:new RegExp("^(?:"+["xx-small|x-small|small|medium|large|x-large|xx-large|larger|smaller","[\\d.]+%|[\\d.]+[a-z]+","inherit|initial|unset"].join("|")+")(?:/(?:normal|[\\d.]+(?:%|[a-z]+)?))?$")};class eo{constructor(t=""){this.parse(t)}sanitizeValue(t){var e=this.constructor.pattern;if(!t.match(e.sanitize))return t;const i=(t=t.replace(e.value,"$1")).replace(/\\./g,"").replace(/(['"]).*?\1/g,"").replace(/[^'"]/g,"");return i.length&&(t+=i.charAt(0)),t}get cssText(){const t=[];for(const s of Object.keys(this.styles)){var e=this.parentName(s),i=s.replace(/.*-/,"");this.styles[e]&&null!=(e=null==(e=eo.connect[e])?void 0:e.children)&&e.includes(i)||t.push(`${s}: ${this.styles[s]};`)}return t.join(" ")}get styleList(){return Object.assign({},this.styles)}set(t,e){var i;for(t=this.normalizeName(t),this.setStyle(t,String(e)),eo.connect[t]&&!eo.connect[t].combine&&(this.combineChildren(t),delete this.styles[t]);t.match(/-/);){const e=t;if(t=this.parentName(t),!(eo.connect[e]||null!=(i=null==(i=eo.connect[t])?void 0:i.children)&&i.includes(e.substring(t.length+1))))break;eo.connect[t].combine.call(this,t)}}get(t){return t=this.normalizeName(t),Object.hasOwn(this.styles,t)?this.styles[t]:""}setStyle(t,e){this.styles[t]=this.sanitizeValue(e),eo.connect[t]&&eo.connect[t].children&&eo.connect[t].split.call(this,t),""===e&&delete this.styles[t]}combineChildren(t){var e=this.parentName(t);for(const i of eo.connect[t].children){const t=this.childName(e,i);eo.connect[t].combine.call(this,t)}}parentName(t){var e=t.replace(/-[^-]*$/,"");return t===e?"":e}childName(t,e){return e.match(/-/)?e:(eo.connect[t]&&!eo.connect[t].combine&&(e+=t.replace(/.*-/,"-"),t=this.parentName(t)),t+"-"+e)}normalizeName(t){return t.replace(/[A-Z]/g,t=>"-"+t.toLowerCase())}parse(t=""){const e=this.constructor.pattern,i=(this.styles={},t.replace(/\n/g," ").replace(e.comment,"").split(e.style));for(;1<i.length;){const[t,e,s]=i.splice(0,3);if(t.match(/[^\s\n;]/))return;this.set(e,s)}}}function io(t){return t.reduce((t,e)=>t+e,0)}function so(t){return t.reduce((t,e)=>Math.max(t,e),0)}if(eo.pattern={sanitize:/['";]/,value:/^((:?'(?:\\.|[^'])*(?:'|$)|"(?:\\.|[^"])*(?:"|$)|\n|\\.|[^'";])*?)[\s\n]*(?:;|$).*/,style:/([-a-z]+)[\s\n]*:[\s\n]*((?:'(?:\\.|[^'])*(?:'|$)|"(?:\\.|[^"])*(?:"|$)|\n|\\.|[^'";])*?)[\s\n]*(?:;|$)/g,comment:/\/\*[^]*?\*\//g},eo.connect={padding:{children:Xa,split:Ja,combine:function(t){const e=eo.connect[t].children,i=[];for(const s of e){const e=this.styles[t+"-"+s];if(!e)return void delete this.styles[t];i.push(e)}i[3]===i[1]&&(i.pop(),i[2]===i[0]&&(i.pop(),i[1]===i[0]&&i.pop())),this.styles[t]=i.join(" ")}},border:{children:Xa,split:function(t){for(const e of eo.connect[t].children)this.setStyle(this.childName(t,e),this.styles[t])},combine:function(t){const e=[...eo.connect[t].children],i=this.styles[this.childName(t,e.shift())];for(const s of e)if(this.styles[this.childName(t,s)]!==i)return void delete this.styles[t];this.styles[t]=i}},"border-top":{children:za,split:Qa,combine:Za},"border-right":{children:za,split:Qa,combine:Za},"border-bottom":{children:za,split:Qa,combine:Za},"border-left":{children:za,split:Qa,combine:Za},"border-width":{children:Xa,split:Ja,combine:null},"border-style":{children:Xa,split:Ja,combine:null},"border-color":{children:Xa,split:Ja,combine:null},font:{children:["style","variant","weight","stretch","line-height","size","family"],split:function(t){const e=Ka(this.styles[t]),i={style:"",variant:[],weight:"",stretch:"",size:"",family:"","line-height":""};for(const t of e){i.family||(i.family=t);for(const e of Object.keys(to)){var s,r;(Array.isArray(i[e])||""===i[e])&&t.match(to[e])&&(i.family===t&&(i.family=""),"size"===e?([s,r]=t.split(/\//),i[e]=s,r&&(i["line-height"]=r)):""===i.size&&(Array.isArray(i[e])?i[e].push(t):""===i[e]&&(i[e]=t)))}}(function(t,e){for(const s of eo.connect[t].children){var i=this.childName(t,s);if(Array.isArray(e[s])){const t=e[s];t.length&&(this.styles[i]=t.join(" "))}else""!==e[s]&&(this.styles[i]=e[s])}}).call(this,t,i),delete this.styles[t]},combine:function(t){}}},MathJax.loader&&MathJax.loader.checkVersion("core",Bs,"core"),Hs({_:{adaptors:{HTMLAdaptor:W,browserAdaptor:X},components:{global:P},core:{DOMAdaptor:V,FindMath:z,Handler:jt,HandlerList:Ht,InputJax:K,MathDocument:qt,MathItem:$,MathList:Y,MmlTree:{Attributes:tt,MML:Pt,MathMLVisitor:Vt,MmlFactory:Bt,MmlNode:it,MmlNodes:{HtmlNode:Dt,TeXAtom:Ot,maction:At,maligngroup:Lt,malignmark:St,math:st,mathchoice:Mt,menclose:xt,merror:bt,mfenced:yt,mfrac:pt,mglyph:kt,mi:rt,mmultiscripts:Tt,mn:nt,mo:lt,mpadded:Et,mphantom:Nt,mroot:gt,mrow:ut,ms:dt,mspace:ht,msqrt:mt,mstyle:ft,msubsup:vt,mtable:wt,mtd:It,mtext:ct,mtr:Ct,munderover:_t,semantics:Rt},MmlVisitor:Gt,OperatorDictionary:at,SerializedMmlVisitor:i},OutputJax:t,Tree:{Factory:Q,Node:et,NodeFactory:Z,Visitor:e,Wrapper:Wt,WrapperFactory:Xt}},handlers:{html_ts:Zt,html:{HTMLDocument:$t,HTMLDomStrings:Yt,HTMLHandler:Qt,HTMLMathItem:Kt,HTMLMathList:Jt}},mathjax:zt,util:{AsyncLoad:te,BBox:ie,BitField:Ft,Entities:se,FunctionList:q,LinkedList:J,Options:H,PrioritizedList:U,Retries:Ut,StyleJson:re,Styles:ne,context:B,lengths:ee,numeric:ae,string:ot}}}),MathJax.startup&&(MathJax.startup.registerConstructor("HTMLHandler",Ia),MathJax.startup.registerConstructor("browserAdaptor",Tr),MathJax.startup.useHandler("HTMLHandler"),MathJax.startup.useAdaptor("browserAdaptor")),MathJax.loader){const P=MathJax.config.loader;MathJax._.mathjax.mathjax.asyncLoad=t=>"node:"===t.substring(0,5)?P.require(t):MathJax.loader.load(t).then(t=>t[0])}class ro extends wr{constructor(t){super(t),this.getPatterns()}getPatterns(){const t=this.options,e=[],i=[],s=[];this.end={},this.env=this.sub=0;let r=1;t.inlineMath.forEach(t=>this.addPattern(e,t,!1)),t.displayMath.forEach(t=>this.addPattern(e,t,!0)),e.length&&i.push(e.sort(on).join("|")),t.processEnvironments&&(i.push("\\\\begin\\s*\\{([^}]*)\\}"),this.env=r,r++),t.processEscapes&&s.push("\\\\([\\\\$])"),t.processRefs&&s.push("(\\\\(?:eq)?ref\\s*\\{[^}]*\\})"),s.length&&(i.push("("+s.join("|")+")"),this.sub=r),this.start=new RegExp(i.join("|"),"g"),this.hasPatterns=0<i.length}addPattern(t,e,i){var[e,s]=e;t.push(ln(e)),this.end[e]=[s,i,this.endPattern(s)]}endPattern(t,e){return new RegExp((e||ln(t))+"|\\\\(?:[a-zA-Z]|.)|[{}]","g")}findEnd(t,e,i,s){const[r,n,a]=s,o=a.lastIndex=i.index+i[0].length;let l,c=0;for(;l=a.exec(t);){if((l[1]||l[0])===r&&0===c)return Or(i[0],t.substring(o,l.index),l[0],e,i.index,l.index+l[0].length,n);"{"===l[0]?c++:"}"===l[0]&&c&&c--}return null}findMathInString(t,e,i){let s,r;for(this.start.lastIndex=0;s=this.start.exec(i);){if(void 0!==s[this.env]&&this.env){const t="\\\\end\\s*(\\{"+ln(s[this.env])+"\\})";(r=this.findEnd(i,e,s,["{"+s[this.env]+"}",!0,this.endPattern(null,t)]))&&(r.math=r.open+r.math+r.close,r.open=r.close="")}else if(void 0!==s[this.sub]&&this.sub){const t=s[this.sub],i=s.index+s[this.sub].length;r=2===t.length?Or("\\",t.substring(1),"",e,s.index,i):Or("",t,"",e,s.index,i,!1)}else r=this.findEnd(i,e,s,this.end[s[0]]);r&&(t.push(r),this.start.lastIndex=r.end.n)}}findMath(i){var s=[];if(this.hasPatterns)for(let t=0,e=i.length;t<e;t++)this.findMathInString(s,t,i[t]);return s}}ro.OPTIONS={inlineMath:[["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0,processRefs:!0};const no={attrs:new Set(["autoOP","fnOP","movesupsub","subsupOK","texprimestyle","useHeight","variantForm","withDelims","mathaccent","open","close"]),createEntity:t=>String.fromCodePoint(parseInt(t,16)),getChildren:t=>t.childNodes,getText:t=>t.getText(),appendChildren(t,e){for(const i of e)t.appendChild(i)},setAttribute(t,e,i){t.attributes.set(e,i)},setProperty(t,e,i){t.setProperty(e,i)},setProperties(t,e){for(const s of Object.keys(e)){var i=e[s];"texClass"===s?(t.texClass=i,t.setProperty(s,i)):"movablelimits"===s?(t.setProperty("movablelimits",i),(t.isKind("mo")||t.isKind("mstyle"))&&t.attributes.set("movablelimits",i)):"inferred"!==s&&(no.attrs.has(s)?t.setProperty(s,i):t.attributes.set(s,i))}},getProperty:(t,e)=>t.getProperty(e),getAttribute:(t,e)=>t.attributes.get(e),removeAttribute(t,e){t.attributes.unset(e)},removeProperties(t,...e){t.removeProperty(...e)},getChildAt:(t,e)=>t.childNodes[e],setChild(t,e,i){(t.childNodes[e]=i)&&(i.parent=t)},copyChildren(t,e){var i=t.childNodes;for(let t=0;t<i.length;t++)this.setChild(e,t,i[t])},copyAttributes(t,e){e.attributes=t.attributes,this.setProperties(e,t.getAllProperties())},isType:(t,e)=>t.isKind(e),isEmbellished:t=>t.isEmbellished,getTexClass:t=>t.texClass,getCoreMO:t=>t.coreMO(),isNode:t=>t instanceof o||t instanceof Yr,isInferred:t=>t.isInferred,getForm(t){if(!t.isKind("mo"))return null;const e=t,i=e.getForms();for(const t of i){const i=this.getOp(e,t);if(i)return i}return null},getOp:(t,e="infix")=>gn.OPTABLE[e][t.getText()]||null,getMoAttribute(t,e){if(!t.attributes.isSet(e))for(const s of["infix","postfix","prefix"]){var i=null==(i=null==(i=this.getOp(t,s))?void 0:i[3])?void 0:i[e];if(void 0!==i)return i}return t.attributes.get(e)}},d=no;function ao(t,e,i){const s=[];for(const n of t.getList("m"+e+i)){var r=n.childNodes;if(!r[n[e]]||!r[n[i]]){const a=n.parent,o=r[n[e]]?t.nodeFactory.create("node","m"+e,[r[n.base],r[n[e]]]):t.nodeFactory.create("node","m"+i,[r[n.base],r[n[i]]]);d.copyAttributes(n,o),a.replaceChild(o,n),s.push(n)}}t.removeFromList("m"+e+i,s)}function oo(t,e,i){const s=[];for(const r of t.getList(e))if(!r.attributes.get("displaystyle")){const e=r.childNodes[r.base],n=e.coreMO();if(e.getProperty("movablelimits")&&!n.attributes.hasExplicit("movablelimits")){const e=t.nodeFactory.create("node",i,r.childNodes);d.copyAttributes(r,e),r.parent.replaceChild(e,r),s.push(r)}}t.removeFromList(e,s)}const lo={cleanStretchy(t){const e=t.data;for(const t of e.getList("fixStretchy"))if(d.getProperty(t,"fixStretchy")){var i=d.getForm(t);i&&i[3]&&i[3].stretchy&&d.setAttribute(t,"stretchy",!1);const s=t.parent;if(!(d.getTexClass(t)||i&&i[2])){const r=e.nodeFactory.create("node","TeXAtom",[t]);s.replaceChild(r,t),r.inheritAttributesFrom(t)}d.removeProperties(t,"fixStretchy")}},cleanAttributes(t){t.data.root.walkTree((t,e)=>{const i=t.attributes,s=new Set((i.get("mjx-keep-attrs")||"").split(/ /));i.unset("mjx-keep-attrs");for(const e of i.getExplicitNames())s.has(e)||i.get(e)!==t.attributes.getInherited(e)||i.unset(e)},{})},combineRelations(t){const e=[];for(const i of t.data.getList("mo"))if(!i.getProperty("relationsCombined")&&i.parent&&(!i.parent||d.isType(i.parent,"mrow"))&&d.getTexClass(i)===h.REL){let t;const s=i.parent.childNodes,r=s.indexOf(i)+1,n=d.getProperty(i,"variantForm");for(;r<s.length&&(t=s[r])&&d.isType(t,"mo")&&d.getTexClass(t)===h.REL;){if(n!==d.getProperty(t,"variantForm")||!function(t,e){const i=(e,i)=>e.getExplicitNames().filter(t=>t!==i&&("stretchy"!==t||e.getExplicit("stretchy"))&&"data-latex"!==t&&"data-latex-item"!==t),s=t.attributes,r=e.attributes,n=i(s,"lspace"),a=i(r,"rspace");if(n.length===a.length){for(const t of n)if(s.getExplicit(t)!==r.getExplicit(t))return;return 1}}(i,t)){i.attributes.hasExplicit("rspace")||d.setAttribute(i,"rspace","0pt"),t.attributes.hasExplicit("lspace")||d.setAttribute(t,"lspace","0pt");break}d.appendChildren(i,d.getChildren(t)),function(t,e,i){const s=e.attributes,r=i.attributes;t.forEach(t=>{var e=r.getExplicit(t);null!=e&&s.set(t,e)})}(["stretchy","rspace"],i,t);for(const e of t.getPropertyNames())i.setProperty(e,t.getProperty(e));t.attributes.get("data-latex")&&i.attributes.set("data-latex",i.attributes.get("data-latex")+t.attributes.get("data-latex")),s.splice(r,1),e.push(t),t.parent=null,t.setProperty("relationsCombined",!0),i.setProperty("texClass",h.REL)}i.attributes.setInherited("form",i.getForms()[0])}t.data.removeFromList("mo",e)},cleanSubSup(t){t=t.data;t.error||(ao(t,"sub","sup"),ao(t,"under","over"))},moveLimits(t){t=t.data;oo(t,"munderover","msubsup"),oo(t,"munder","msub"),oo(t,"mover","msup")},setInherited(t){t.data.root.setInheritedAttributes({},t.math.display,0,!1)},checkScriptlevel(t){const e=t.data,i=[];for(const t of e.getList("mstyle"))if(1===t.childNodes[0].childNodes.length){const e=t.attributes;for(const t of["displaystyle","scriptlevel"])e.getExplicit(t)===e.getInherited(t)&&e.unset(t);const s=e.getExplicitNames();if(0===s.filter(t=>"data-latex"!==t.substring(0,10)).length){const r=t.childNodes[0].childNodes[0];s.forEach(t=>r.attributes.set(t,e.get(t))),t.parent.replaceChild(r,t),i.push(t)}}e.removeFromList("mstyle",i)}},co=lo;(j=c=c||{}).HANDLER="handler",j.FALLBACK="fallback",j.ITEMS="items",j.TAGS="tags",j.OPTIONS="options",j.NODES="nodes",j.PREPROCESSORS="preprocessors",j.POSTPROCESSORS="postprocessors",j.INIT="init",j.CONFIG="config",j.PRIORITY="priority",j.PARSER="parser",(F=p=p||{}).DELIMITER="delimiter",F.MACRO="macro",F.CHARACTER="character",F.ENVIRONMENT="environment";var ho;const m={UNIT_CASES:new class{constructor(t){this.num="([-+]?([.,]\\d+|\\d+([.,]\\d*)?))",this.unit="",this.dimenEnd=/./,this.dimenRest=/./,this.map=new Map(t),this.updateDimen()}updateDimen(){this.unit=`(${Array.from(this.map.keys()).join("|")})`,this.dimenEnd=RegExp("^\\s*"+this.num+"\\s*"+this.unit+"\\s*$"),this.dimenRest=RegExp("^\\s*"+this.num+"\\s*"+this.unit+" ?")}set(t,e){return this.map.set(t,e),this.updateDimen(),this}get(t){return this.map.get(t)||this.map.get("pt")}delete(t){return!!this.map.delete(t)&&(this.updateDimen(),!0)}}([["em",1],["ex",.43],["pt",.1],["pc",1.2],["px",.1],["in",7.2],["cm",7.2/2.54],["mm",7.2/25.4],["mu",1/18]]),matchDimen(t,e=!1){const i=t.match(e?m.UNIT_CASES.dimenRest:m.UNIT_CASES.dimenEnd);return i?([t,e,s]=[[i[1].replace(/,/,"."),i[4],i[0].length]][0],"mu"!==e?[t,e,s]:[m.em(m.UNIT_CASES.get(e)*parseFloat(t)).slice(0,-2),"em",s]):[null,null,0];var s},dimen2em(t){var[t,e]=m.matchDimen(t),t=parseFloat(t||"1");return m.UNIT_CASES.get(e)*t},em:t=>Math.abs(t)<6e-4?"0em":t.toFixed(3).replace(/\.?0+$/,"")+"em",trimSpaces(t){if("string"!=typeof t)return t;let e=t.trim();return e.match(/\\$/)&&t.match(/ $/)&&(e+=" "),e}};class uo{constructor(t,e,i){this._factory=t,this._env=e,this.global={},this.stack=[],this.global={isInner:i},this.stack=[this._factory.create("start",this.global)],e&&(this.stack[0].env=e),this.env=this.stack[0].env}set env(t){this._env=t}get env(){return this._env}Push(...t){for(const s of t)if(s){const t=d.isNode(s)?this._factory.create("mml",s):s;t.global=this.global;var[e,i]=this.stack.length?this.Top().checkItem(t):[null,!0];i&&(e?(this.Pop(),this.Push(...e)):(t.isKind("null")||this.stack.push(t),t.env?(t.copyEnv&&Object.assign(t.env,this.env),this.env=t.env):t.env=this.env))}}Pop(){const t=this.stack.pop();return t.isOpen||delete t.env,this.env=this.stack.length?this.Top().env:{},t}Top(t=1){return this.stack.length<t?null:this.stack[this.stack.length-t]}Prev(t){const e=this.Top();return t?e.First:e.Pop()}get height(){return this.stack.length}toString(){return"stack[\n  "+this.stack.join("\n  ")+"\n]"}}class po{static processString(t,i){const s=t.split(po.pattern);for(let e=1,t=s.length;e<t;e+=2){let t=s[e].charAt(0);"0"<=t&&t<="9"?(s[e]=i[parseInt(s[e],10)-1],"number"==typeof s[e]&&(s[e]=s[e].toString())):"{"===t&&("0"<=(t=s[e].substring(1))&&t<="9"?(s[e]=i[parseInt(s[e].substring(1,s[e].length-1),10)-1],"number"==typeof s[e]&&(s[e]=s[e].toString())):s[e].match(/^\{([a-z]+):%(\d+)\|(.*)\}$/)&&(s[e]="%"+s[e]))}return s.join("")}constructor(t,e,...i){this.id=t,this.message=po.processString(e,i)}}po.pattern=/%(\d+|\{\d+\}|\{[a-z]+:%\d+(?:\|(?:%\{\d+\}|%.|[^}])*)+\}|.)/g;const g=po;class mo{constructor(t){this._nodes=t,this.startStr="",this.startI=0,this.stopI=0}get nodes(){return this._nodes}Push(...t){this._nodes.push(...t)}Pop(){return this._nodes.pop()}get First(){return this._nodes[this.Size()-1]}set First(t){this._nodes[this.Size()-1]=t}get Last(){return this._nodes[0]}set Last(t){this._nodes[0]=t}Peek(t){return null==t&&(t=1),this._nodes.slice(this.Size()-t)}Size(){return this._nodes.length}Clear(){this._nodes=[]}toMml(t=!0,e){return 1!==this._nodes.length||e?this.create("node",t?"inferredMrow":"mrow",this._nodes,{}):this.First}create(t,...e){return this.factory.configuration.nodeFactory.create(t,...e)}}class n extends mo{constructor(t,...e){super(e),this.factory=t,this.global={},this._properties={},this.isOpen&&(this._env={})}get kind(){return"base"}get env(){return this._env}set env(t){this._env=t}get copyEnv(){return!0}getProperty(t){return this._properties[t]}setProperty(t,e){return this._properties[t]=e,this}get isOpen(){return!1}get isClose(){return!1}get isFinal(){return!1}isKind(t){return t===this.kind}checkItem(t){if(t.isKind("over")&&this.isOpen&&(t.setProperty("num",this.toMml(!1)),this.Clear()),t.isKind("cell")&&this.isOpen){if(t.getProperty("linebreak"))return n.fail;throw new g("Misplaced","Misplaced %1",t.getName())}var e,i;if(t.isClose&&this.getErrors(t.kind))throw[e,i]=this.getErrors(t.kind),new g(e,i,t.getName());return t.isFinal?(this.Push(t.First),n.fail):n.success}clearEnv(){for(const t of Object.keys(this.env))delete this.env[t]}setProperties(t){return Object.assign(this._properties,t),this}getName(){return this.getProperty("name")}toString(){return this.kind+"["+this.nodes.join("; ")+"]"}getErrors(t){return this.constructor.errors[t]||n.errors[t]}}n.fail=[null,!1],n.success=[null,!0],n.errors={end:["MissingBeginExtraEnd","Missing \\begin{%1} or extra \\end{%1}"],close:["ExtraCloseMissingOpen","Extra close brace or missing open brace"],right:["MissingLeftExtraRight","Missing \\left or extra \\right"],middle:["ExtraMiddle","Extra \\middle"]};const l={Variant:{NORMAL:"normal",BOLD:"bold",ITALIC:"italic",BOLDITALIC:"bold-italic",DOUBLESTRUCK:"double-struck",FRAKTUR:"fraktur",BOLDFRAKTUR:"bold-fraktur",SCRIPT:"script",BOLDSCRIPT:"bold-script",SANSSERIF:"sans-serif",BOLDSANSSERIF:"bold-sans-serif",SANSSERIFITALIC:"sans-serif-italic",SANSSERIFBOLDITALIC:"sans-serif-bold-italic",MONOSPACE:"monospace",INITIAL:"inital",TAILED:"tailed",LOOPED:"looped",STRETCHED:"stretched",CALLIGRAPHIC:"-tex-calligraphic",BOLDCALLIGRAPHIC:"-tex-bold-calligraphic",OLDSTYLE:"-tex-oldstyle",BOLDOLDSTYLE:"-tex-bold-oldstyle",MATHITALIC:"-tex-mathit"},Form:{PREFIX:"prefix",INFIX:"infix",POSTFIX:"postfix"},LineBreak:{AUTO:"auto",NEWLINE:"newline",NOBREAK:"nobreak",GOODBREAK:"goodbreak",BADBREAK:"badbreak"},LineBreakStyle:{BEFORE:"before",AFTER:"after",DUPLICATE:"duplicate",INFIXLINBREAKSTYLE:"infixlinebreakstyle"},IndentAlign:{LEFT:"left",CENTER:"center",RIGHT:"right",AUTO:"auto",ID:"id",INDENTALIGN:"indentalign"},IndentShift:{INDENTSHIFT:"indentshift"},LineThickness:{THIN:"thin",MEDIUM:"medium",THICK:"thick"},Notation:{LONGDIV:"longdiv",ACTUARIAL:"actuarial",PHASORANGLE:"phasorangle",RADICAL:"radical",BOX:"box",ROUNDEDBOX:"roundedbox",CIRCLE:"circle",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",UPDIAGONALSTRIKE:"updiagonalstrike",DOWNDIAGONALSTRIKE:"downdiagonalstrike",VERTICALSTRIKE:"verticalstrike",HORIZONTALSTRIKE:"horizontalstrike",NORTHEASTARROW:"northeastarrow",MADRUWB:"madruwb",UPDIAGONALARROW:"updiagonalarrow"},Align:{TOP:"top",BOTTOM:"bottom",CENTER:"center",BASELINE:"baseline",AXIS:"axis",LEFT:"left",RIGHT:"right"},Lines:{NONE:"none",SOLID:"solid",DASHED:"dashed"},Side:{LEFT:"left",RIGHT:"right",LEFTOVERLAP:"leftoverlap",RIGHTOVERLAP:"rightoverlap"},Width:{AUTO:"auto",FIT:"fit"},Actiontype:{TOGGLE:"toggle",STATUSLINE:"statusline",TOOLTIP:"tooltip",INPUT:"input"},Overflow:{LINBREAK:"linebreak",SCROLL:"scroll",ELIDE:"elide",TRUNCATE:"truncate",SCALE:"scale"},Unit:{EM:"em",EX:"ex",PX:"px",IN:"in",CM:"cm",MM:"mm",PT:"pt",PC:"pc"},Attr:{LATEX:"data-latex",LATEXITEM:"data-latex-item"}};class go{constructor(t,e,i){this._string=t,this.configuration=i,this.macroCount=0,this.i=0,this.currentCS="",this.saveI=0;t=Object.hasOwn(e,"isInner"),i=e.isInner;let s;if(delete e.isInner,e){s={};for(const t of Object.keys(e))s[t]=e[t]}this.configuration.pushParser(this),this.stack=new uo(this.itemFactory,s,!t||i),this.Parse(),this.Push(this.itemFactory.create("stop")),this.updateResult(this.string,this.i),this.stack.env=s}get options(){return this.configuration.options}get itemFactory(){return this.configuration.itemFactory}get tags(){return this.configuration.tags}set string(t){this._string=t}get string(){return this._string}parse(t,e){var i=this.saveI,t=(this.saveI=this.i,this.configuration.handlers.get(t).parse(e));return this.updateResult(e[1],i),this.saveI=i,t}lookup(t,e){return this.configuration.handlers.get(t).lookup(e)}contains(t,e){return this.configuration.handlers.get(t).contains(e)}toString(){let t="";for(const e of Array.from(this.configuration.handlers.keys()))t+=e+": "+this.configuration.handlers.get(e)+"\n";return t}Parse(){for(var t;this.i<this.string.length;)t=this.getCodePoint(),this.i+=t.length,this.parse(p.CHARACTER,[this,t])}Push(t){t instanceof n&&(t.startI=this.saveI,t.stopI=this.i,t.startStr=this.string),t instanceof o&&t.isInferred?this.PushAll(t.childNodes):this.stack.Push(t)}PushAll(t){for(const e of t)this.stack.Push(e)}mml(){if(!this.stack.Top().isKind("mml"))return null;const t=this.stack.Top().First;return this.configuration.popParser(),t.attributes.set(l.Attr.LATEX,this.string),t}convertDelimiter(t){var t=this.lookup(p.DELIMITER,t);return null!=(t=null==t?void 0:t.char)?t:null}getCodePoint(){var t=this.string.codePointAt(this.i);return void 0===t?"":String.fromCodePoint(t)}nextIsSpace(){return!!this.string.charAt(this.i).match(/\s/)}GetNext(){for(;this.nextIsSpace();)this.i++;return this.getCodePoint()}GetCS(){var t=this.string.slice(this.i).match(/^(([a-z]+) ?|[\uD800-\uDBFF].|.)/i);return t?(this.i+=t[0].length,t[2]||t[1]):(this.i++," ")}GetArgument(e,t=!1){switch(this.GetNext()){case"":if(t)return null;throw new g("MissingArgFor","Missing argument for %1",this.currentCS);case"}":if(t)return null;throw new g("ExtraCloseMissingOpen","Extra close brace or missing open brace");case"\\":return this.i++,"\\"+this.GetCS();case"{":{const e=++this.i;let t=1;for(;this.i<this.string.length;)switch(this.string.charAt(this.i++)){case"\\":this.i++;break;case"{":t++;break;case"}":if(0==--t)return this.string.slice(e,this.i-1)}throw new g("MissingCloseBrace","Missing close brace")}}var i=this.getCodePoint();return this.i+=i.length,i}GetBrackets(t,e,i=!1){if("["!==this.GetNext())return e;var s=++this.i;let r=0,n=0;for(;this.i<this.string.length;)switch(this.string.charAt(this.i++)){case"{":r++;break;case"\\":this.i++;break;case"}":if(r--<=0)throw new g("ExtraCloseLooking","Extra close brace while looking for %1","']'");break;case"[":0===r&&n++;break;case"]":if(0===r){if(!i||0===n)return this.string.slice(s,this.i-1);n--}}throw new g("MissingCloseBracket","Could not find closing ']' for argument to %1",this.currentCS)}GetDelimiter(t,e=!1){let i=this.GetNext();if(this.i+=i.length,this.i<=this.string.length&&("\\"===i?i+=this.GetCS():"{"===i&&e&&(this.i--,i=this.GetArgument(t).trim()),this.contains(p.DELIMITER,i)))return this.convertDelimiter(i);throw new g("MissingOrUnrecognizedDelim","Missing or unrecognized delimiter for %1",this.currentCS)}GetDimen(t){if("{"===this.GetNext()){var t=this.GetArgument(t),[t,e]=m.matchDimen(t);if(t)return t+e}else{const t=this.string.slice(this.i),[i,s,r]=m.matchDimen(t,!0);if(i)return this.i+=r,i+s}throw new g("MissingDimOrUnits","Missing dimension or its units for %1",this.currentCS)}GetUpTo(e,i){for(;this.nextIsSpace();)this.i++;var s=this.i;let r=0;for(;this.i<this.string.length;){const e=this.i;let t=this.GetNext();switch(this.i+=t.length,t){case"\\":t+=this.GetCS();break;case"{":r++;break;case"}":if(0===r)throw new g("ExtraCloseLooking","Extra close brace while looking for %1",i);r--}if(0===r&&t===i)return this.string.slice(s,e)}throw new g("TokenNotFoundForCommand","Could not find %1 for %2",i,this.currentCS)}ParseArg(t){return new go(this.GetArgument(t),this.stack.env,this.configuration).mml()}ParseUpTo(t,e){return new go(this.GetUpTo(t,e),this.stack.env,this.configuration).mml()}GetDelimiterArg(t){t=m.trimSpaces(this.GetArgument(t));if(""===t)return null;if(this.contains(p.DELIMITER,t))return t;throw new g("MissingOrUnrecognizedDelim","Missing or unrecognized delimiter for %1",this.currentCS)}GetStar(){var t="*"===this.GetNext();return t&&this.i++,t}create(t,...e){const i=this.configuration.nodeFactory.create(t,...e);return i.isToken&&i.attributes.hasExplicit("mathvariant")&&"-"===i.attributes.get("mathvariant").charAt(0)&&i.setProperty("ignore-variant",!0),i}updateResult(e,i){const s=this.stack.Prev(!0);if(s){var t=s.attributes.get(l.Attr.LATEXITEM);if(void 0!==t)s.attributes.set(l.Attr.LATEX,t);else{let t=(i=i<this.saveI?this.saveI:i)!==this.i?this.string.slice(i,this.i):e;if(t=t.trim())if("\\"===e&&(t="\\"+t),"^"!==s.attributes.get(l.Attr.LATEX)||"^"===t||"\\^"===t)if("_"!==s.attributes.get(l.Attr.LATEX)||"_"===t||"\\_"===t)"}"!==t?s.attributes.set(l.Attr.LATEX,t):this.composeBraces(s);else if(s.childNodes[1]&&("}"===t?this.composeBraces(s.childNodes[1]):s.childNodes[1].attributes.set(l.Attr.LATEX,t)),s.childNodes[2]){const e=s.childNodes[2].attributes.get(l.Attr.LATEX);this.composeLatex(s,`^${e}_`,0,1)}else this.composeLatex(s,"_",0,1);else if(s.childNodes[2]&&("}"===t?this.composeBraces(s.childNodes[2]):s.childNodes[2].attributes.set(l.Attr.LATEX,t)),s.childNodes[1]){const e=s.childNodes[1].attributes.get(l.Attr.LATEX);this.composeLatex(s,`_${e}^`,0,2)}else this.composeLatex(s,"^",0,2)}}}composeLatex(t,e,i,s){t.childNodes[i]&&t.childNodes[s]&&(i=(t.childNodes[i].attributes.get(l.Attr.LATEX)||"")+e+t.childNodes[s].attributes.get(l.Attr.LATEX),t.attributes.set(l.Attr.LATEX,i))}composeBraces(t){var e=this.composeBracedContent(t);t.attributes.set(l.Attr.LATEX,`{${e}}`)}composeBracedContent(t){var e,i=(null==(i=t.childNodes[0])?void 0:i.childNodes)||[];let s="";for(const t of i){const i=(null==(e=null==t?void 0:t.attributes)?void 0:e.get(l.Attr.LATEX))||"";i&&(s+=s&&s.match(/[a-zA-Z]$/)&&i.match(/^[a-zA-Z]/)?" "+i:i)}return s}}class fo extends n{}class bo extends Pr{constructor(){super(...arguments),this.defaultKind="dummy",this.configuration=null}}bo.DefaultStackItems={[fo.prototype.kind]:fo};const Eo=bo;class No{constructor(){this.mmlFactory=null,this.factory={node:No.createNode,token:No.createToken,text:No.createText,error:No.createError}}static createNode(t,e,i=[],s={},r){const n=t.mmlFactory.create(e);return n.setChildren(i),r&&n.appendChild(r),d.setProperties(n,s),n}static createToken(t,e,i={},s=""){s=t.create("text",s);return t.create("node",e,[],i,s)}static createText(t,e){return null==e?null:t.mmlFactory.create("text").setText(e)}static createError(t,e){var i=t.create("text",e),i=t.create("node","mtext",[],{},i);return t.create("node","merror",[i],{"data-mjx-error":e})}setMmlFactory(t){this.mmlFactory=t}set(t,e){this.factory[t]=e}setCreators(t){for(const e in t)this.set(e,t[e])}create(t,...e){var i=(this.factory[t]||this.factory.node)(this,e[0],...e.slice(1));return"node"===t&&this.configuration.addNode(e[0],i),i}get(t){return this.factory[t]}}class yo{static oneof(...e){return new this("string",t=>e.includes(t),t=>t)}constructor(t,e,i){this.name=t,this.verify=e,this.convert=i}}const xo={boolean:new yo("boolean",t=>"true"===t||"false"===t,t=>"true"===t),number:new yo("number",t=>!!t.match(/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[-+]?\d+)?$/),t=>parseFloat(t)),integer:new yo("integer",t=>!!t.match(/^[-+]?\d+$/),t=>parseInt(t)),string:new yo("string",t=>!0,t=>t),dimen:new yo("dimen",t=>null!==m.matchDimen(t)[0],t=>t)};function Ao(t,e){if(0===e)return t.replace(/^\s+/,"").replace(/([^\\\s]|^)((?:\\\\)*(?:\\\s)?)?\s+$/,"$1$2");for(;0<e;)t=t.trim().slice(1,-1),e--;return t}function vo(t,e,i=!1,s=!1){var r=t.length;let n=0,a="",o=0,l=0,c=!0;for(;o<r;){const s=t[o++];switch(s){case"\\":a+=s+(t[o++]||""),c=!1;continue;case" ":break;case"{":c&&l++,n++;break;case"}":if(!n)throw new g("ExtraCloseMissingOpen","Extra close brace or missing open brace");n--,c=!1;break;default:if(!n&&e.includes(s))return[Ao(a,i?Math.min(1,l):l),s,t.slice(o)];l>n&&(l=n),c=!1}a+=s}if(n)throw new g("ExtraOpenMissingClose","Extra open brace or missing close brace");return s&&l?["","",Ao(a,1)]:[Ao(a,i?Math.min(1,l):l),"",t.slice(o)]}const f={cols:(...t)=>t.map(t=>m.em(t)).join(" "),fenced(t,e,i,s,r="",n=""){const a=t.nodeFactory,o=a.create("node","mrow",[],{open:e,close:s,texClass:h.INNER});let l;if(r)l=new go("\\"+r+"l"+e,t.parser.stack.env,t).mml();else{const t=a.create("text",e);l=a.create("node","mo",[],{fence:!0,stretchy:!0,symmetric:!0,texClass:h.OPEN},t)}if(d.appendChildren(o,[l,i]),r)l=new go("\\"+r+"r"+s,t.parser.stack.env,t).mml();else{const t=a.create("text",s);l=a.create("node","mo",[],{fence:!0,stretchy:!0,symmetric:!0,texClass:h.CLOSE},t)}return n&&l.attributes.set("mathcolor",n),d.appendChildren(o,[l]),o},fixedFence(t,e,i,s){var r=t.nodeFactory.create("node","mrow",[],{open:e,close:s,texClass:h.ORD});return e&&d.appendChildren(r,[f.mathPalette(t,e,"l")]),d.isType(i,"mrow")?d.appendChildren(r,d.getChildren(i)):d.appendChildren(r,[i]),s&&d.appendChildren(r,[f.mathPalette(t,s,"r")]),r},mathPalette(t,e,i){var s="{\\big"+i+" "+(e="{"!==e&&"}"!==e?e:"\\"+e)+"}";return new go("\\mathchoice{\\bigg"+i+" "+e+"}"+s+s+s,{},t).mml()},fixInitialMO(i,s){for(let t=0,e=s.length;t<e;t++){var r=s[t];if(r&&!d.isType(r,"mspace")&&(!d.isType(r,"TeXAtom")||d.getChildren(r)[0]&&d.getChildren(d.getChildren(r)[0]).length)){(d.isEmbellished(r)||d.isType(r,"TeXAtom")&&d.getTexClass(r)===h.REL)&&(r=i.nodeFactory.create("node","mi"),s.unshift(r));break}}},internalMath(t,e,i,s){if(e=e.replace(/ +/g," "),t.configuration.options.internalMath)return t.configuration.options.internalMath(t,e,i,s);var s=s||t.stack.env.font,r=s?{mathvariant:s}:{};let n,a,o=[],l=0,c=0,h="",d=0;if(e.match(/\\?[${}\\]|\\\(|\\(?:eq)?ref\s*\{|\\U/)){for(;l<e.length;)if("$"===(n=e.charAt(l++)))"$"===h&&0===d?(a=t.create("node","TeXAtom",[new go(e.slice(c,l-1),{},t.configuration).mml()]),o.push(a),h="",c=l):""===h&&(c<l-1&&o.push(f.internalText(t,e.slice(c,l-1),r)),h="$",c=l);else if("{"===n&&""!==h)d++;else if("}"===n)if("}"===h&&0===d){const i=new go(e.slice(c,l),{},t.configuration).mml();a=t.create("node","TeXAtom",[i],r),o.push(a),h="",c=l}else""!==h&&d&&d--;else if("\\"===n)if(""===h&&e.substring(l).match(/^(eq)?ref\s*\{/)){const i=RegExp["$&"].length;c<l-1&&o.push(f.internalText(t,e.slice(c,l-1),r)),h="}",c=l-1,l+=i}else if("("===(n=e.charAt(l++))&&""===h)c<l-2&&o.push(f.internalText(t,e.slice(c,l-2),r)),h=")",c=l;else if(")"===n&&")"===h&&0===d)a=t.create("node","TeXAtom",[new go(e.slice(c,l-2),{},t.configuration).mml()]),o.push(a),h="",c=l;else if(n.match(/[${}\\]/)&&""===h)l--,e=e.substring(0,l-1)+e.substring(l);else if("U"===n){const t=e.substring(l).match(/^\s*(?:([0-9A-F])|\{\s*([0-9A-F]+)\s*\})/);if(!t)throw new g("BadRawUnicode","Argument to %1 must a hexadecimal number with 1 to 6 digits","\\U");const i=String.fromCodePoint(parseInt(t[1]||t[2],16));e=e.substring(0,l-2)+i+e.substring(l+t[0].length),l=l-2+i.length}if(""!==h)throw new g("MathNotTerminated","Math mode is not properly terminated")}return c<e.length&&o.push(f.internalText(t,e.slice(c),r)),null!=i?o=[t.create("node","mstyle",o,{displaystyle:!1,scriptlevel:i})]:1<o.length&&(o=[t.create("node","mrow",o)]),o},internalText(t,e,i){e=e.replace(/\n+/g," ").replace(/^ +/,qa.nbsp).replace(/ +$/,qa.nbsp);e=t.create("text",e);return t.create("node","mtext",[],i,e)},underOver(t,e,i,s,r){if(f.checkMovableLimits(e),d.isType(e,"munderover")&&d.isEmbellished(e)){d.setProperties(d.getCoreMO(e),{lspace:0,rspace:0});const i=t.create("node","mo",[],{rspace:0});e=t.create("node","mrow",[i,e])}e=t.create("node","munderover",[e]);d.setChild(e,"over"===s?e.over:e.under,i);let n=e;return r&&(n=t.create("node","TeXAtom",[t.create("node","mstyle",[e],{displaystyle:!0,scriptlevel:0})],{texClass:h.OP,movesupsub:!0})),d.setProperty(n,"subsupOK",!0),n},checkMovableLimits(t){var e=d.isType(t,"mo")?d.getForm(t):null;(d.getProperty(t,"movablelimits")||e&&e[3]&&e[3].movablelimits)&&d.setProperties(t,{movablelimits:!1})},setArrayAlign:(t,e,i)=>("t"===(e=i?e:m.trimSpaces(e||""))?t.arraydef.align="baseline 1":"b"===e?t.arraydef.align="baseline -1":"c"===e?t.arraydef.align="axis":e&&(i?(i.string=`[${e}]`+i.string.slice(i.i),i.i=0):t.arraydef.align=e),t),substituteArgs(e,i,s){let r="",n="",a=0;for(;a<s.length;){let t=s.charAt(a++);if("\\"===t)r+=t+s.charAt(a++);else if("#"===t)if("#"===(t=s.charAt(a++)))r+=t;else{if(!t.match(/[1-9]/)||parseInt(t,10)>i.length)throw new g("IllegalMacroParam","Illegal macro parameter reference");n=f.addArgs(e,f.addArgs(e,n,r),i[parseInt(t,10)-1]),r=""}else r+=t}return f.addArgs(e,n,r)},addArgs(t,e,i){if(i.match(/^[a-z]/i)&&e.match(/(^|[^\\])(\\\\)*\\[a-z]+$/i)&&(e+=" "),e.length+i.length>t.configuration.options.maxBuffer)throw new g("MaxBufferSize","MathJax internal buffer size exceeded; is there a recursive macro call?");return e+i},checkMaxMacros(t,e=!0){if(!(++t.macroCount<=t.configuration.options.maxMacros))throw e?new g("MaxMacroSub1","MathJax maximum macro substitution count exceeded; is here a recursive macro call?"):new g("MaxMacroSub2","MathJax maximum substitution count exceeded; is there a recursive latex environment?")},checkEqnEnv(t,e=!0){const i=t.stack.Top(),s=i.First;if(!(i.getProperty("nestable")&&e&&!s||i.getProperty("nestStart"))&&(!i.isKind("start")||s))throw new g("ErroneousNestingEq","Erroneous nesting of equation structures")},copyNode(t,e){const i=t.copy(),s=e.configuration;return i.walkTree(t=>{s.addNode(t.kind,t);for(const e of(t.getProperty("in-lists")||"").split(/,/))e&&s.addNode(e,t)}),i},mmlFilterAttribute:(t,e,i)=>i,getFontDef(t){t=t.stack.env.font;return t?{mathvariant:t}:{}},keyvalOptions(t,e=null,i=!1,s=!1){const r=function(t,e=!1){const i={};let s,r,n,a=t,o=!0;for(;a;)[r,s,a]=vo(a,["=",","],e,o),o=!1,"="===s?([n,s,a]=vo(a,[","],e),n="false"===n||"true"===n?JSON.parse(n):n,i[r]=n):r&&(i[r]=!0);return i}(t,s);if(e)for(const t of Object.keys(r))if(Object.hasOwn(e,t)){if(e[t]instanceof yo){const i=e[t],s=String(r[t]);if(!i.verify(s))throw new g("InvalidValue","Value for key '%1' is not of the expected type",t);r[t]=i.convert(s)}}else{if(i)throw new g("InvalidOption","Invalid option: %1",t);delete r[t]}return r},isLatinOrGreekChar:t=>!!t.normalize("NFD").match(/[a-zA-Z\u0370-\u03F0]/)};class _o{constructor(){this.columnHandler={l:t=>t.calign[t.j++]="left",c:t=>t.calign[t.j++]="center",r:t=>t.calign[t.j++]="right",p:t=>this.getColumn(t,"top"),m:t=>this.getColumn(t,"middle"),b:t=>this.getColumn(t,"bottom"),w:t=>this.getColumn(t,"top",""),W:t=>this.getColumn(t,"top",""),"|":t=>this.addRule(t,"solid"),":":t=>this.addRule(t,"dashed"),">":t=>t.cstart[t.j]=(t.cstart[t.j]||"")+this.getBraces(t),"<":t=>t.cend[t.j-1]=(t.cend[t.j-1]||"")+this.getBraces(t),"@":t=>this.addAt(t,this.getBraces(t)),"!":t=>this.addBang(t,this.getBraces(t)),"*":t=>this.repeat(t),P:t=>this.macroColumn(t,">{$}p{#1}<{$}",1),M:t=>this.macroColumn(t,">{$}m{#1}<{$}",1),B:t=>this.macroColumn(t,">{$}b{#1}<{$}",1)," ":t=>{}},this.MAXCOLUMNS=1e4}process(t,e,i){const s={parser:t,template:e,i:0,j:0,c:"",cwidth:[],calign:[],cspace:[],clines:[],cstart:i.cstart,cend:i.cend,ralign:i.ralign,cextra:i.cextra};let r=0;for(;s.i<s.template.length;){if(r++>this.MAXCOLUMNS)throw new g("MaxColumns","Too many column specifiers (perhaps looping column definitions?)");const t=s.template.codePointAt(s.i),e=s.c=String.fromCodePoint(t);if(s.i+=e.length,!Object.hasOwn(this.columnHandler,e))throw new g("BadPreamToken","Illegal pream-token (%1)",e);this.columnHandler[e](s)}this.setColumnAlign(s,i),this.setColumnWidths(s,i),this.setColumnSpacing(s,i),this.setColumnLines(s,i),this.setPadding(s,i)}setColumnAlign(t,e){e.arraydef.columnalign=t.calign.join(" ")}setColumnWidths(t,e){if(t.cwidth.length){const i=[...t.cwidth];i.length<t.calign.length&&i.push("auto"),e.arraydef.columnwidth=i.map(t=>t||"auto").join(" ")}}setColumnSpacing(t,e){if(t.cspace.length){const i=[...t.cspace];i.length<t.calign.length&&i.push("1em"),e.arraydef.columnspacing=i.slice(1).map(t=>t||"1em").join(" ")}}setColumnLines(t,e){if(t.clines.length){const i=[...t.clines];i[0]&&e.frame.push(["left",i[0]]),i.length>t.calign.length?e.frame.push(["right",i.pop()]):i.length<t.calign.length&&i.push("none"),1<i.length&&(e.arraydef.columnlines=i.slice(1).map(t=>t||"none").join(" "))}}setPadding(t,e){var i,s;(t.cextra[0]||t.cextra[t.calign.length-1])&&(i=t.calign.length-1,s=t.cspace,t=t.cextra[i]?s[i]:null,e.arraydef["data-array-padding"]=`${s[0]||".5em"} `+(t||".5em"))}getColumn(t,e,i="left"){t.calign[t.j]=i||this.getAlign(t),t.cwidth[t.j]=this.getDimen(t),t.ralign[t.j]=[e,t.cwidth[t.j],t.calign[t.j]],t.j++}getDimen(t){var e=this.getBraces(t);if(m.matchDimen(e)[0])return e;throw new g("MissingColumnDimOrUnits","Missing dimension or its units for %1 column declaration",t.c)}getAlign(t){return br(this.getBraces(t).toLowerCase(),{l:"left",c:"center",r:"right"},"")}getBraces(t){for(;" "===t.template[t.i];)t.i++;if(t.i>=t.template.length)throw new g("MissingArgForColumn","Missing argument for %1 column declaration",t.c);if("{"!==t.template[t.i])return t.template[t.i++];var e=++t.i;let i=1;for(;t.i<t.template.length;)switch(t.template.charAt(t.i++)){case"\\":t.i++;break;case"{":i++;break;case"}":if(0==--i)return t.template.slice(e,t.i-1)}throw new g("MissingCloseBrace","Missing close brace")}macroColumn(t,e,i){const s=[];for(;0<i&&i--;)s.push(this.getBraces(t));t.template=f.substituteArgs(t.parser,s,e)+t.template.slice(t.i),t.i=0}addRule(t,e){t.clines[t.j]&&this.addAt(t,"\\,"),t.clines[t.j]=e,"0"===t.cspace[t.j]&&(t.cstart[t.j]="\\hspace{.5em}")}addAt(t,e){const{cstart:i,cspace:s,j:r}=t;t.cextra[r]=!0,t.calign[r]="center",t.clines[r]&&(".5em"===s[r]?i[r-1]+="\\hspace{.25em}":s[r]||(t.cend[r-1]=(t.cend[r-1]||"")+"\\hspace{.5em}")),i[r]=e,s[r]="0",s[++t.j]="0"}addBang(t,e){const{cstart:i,cspace:s,j:r}=t;t.cextra[r]=!0,t.calign[r]="center",i[r]=("0"===s[r]&&t.clines[r]?"\\hspace{.25em}":"")+e,s[r]||(s[r]=".5em"),s[++t.j]=".5em"}repeat(t){var e=this.getBraces(t),i=this.getBraces(t),s=parseInt(e);if(String(s)!==e)throw new g("ColArgNotNum","First argument to %1 column specifier must be a number","*");t.template=new Array(s).fill(i).join("")+t.template.substring(t.i),t.i=0}}const To=l.Variant;class wo{constructor(t,e=[]){this.options={},this.columnParser=new _o,this.packageData=new Map,this.parsers=[],this.root=null,this.nodeLists={},this.error=!1,this.handlers=t.handlers,this.nodeFactory=new No,(this.nodeFactory.configuration=this).nodeFactory.setCreators(t.nodes),this.itemFactory=new Eo(t.items),pr((this.itemFactory.configuration=this).options,...e),pr(this.options,t.options),this.mathStyle=wo.getVariant.get(this.options.mathStyle)||wo.getVariant.get("TeX")}pushParser(t){this.parsers.unshift(t)}popParser(){this.parsers.shift()}get parser(){return this.parsers[0]}clear(){this.parsers=[],this.root=null,this.nodeLists={},this.error=!1,this.tags.resetTag()}addNode(t,e){let i=this.nodeLists[t];if((i=i||(this.nodeLists[t]=[])).push(e),e.kind!==t){const i=d.getProperty(e,"in-lists")||"",s=(i?i.split(/,/):[]).concat(t).join(",");d.setProperty(e,"in-lists",s)}}getList(t){const e=this.nodeLists[t]||[],i=[];for(const t of e)this.inTree(t)&&i.push(t);return this.nodeLists[t]=i}removeFromList(t,e){const i=this.nodeLists[t]||[];for(const t of e){const e=i.indexOf(t);0<=e&&i.splice(e,1)}}inTree(t){for(;t&&t!==this.root;)t=t.parent;return!!t}}wo.getVariant=new Map([["TeX",(t,e)=>e&&t.match(/^[\u0391-\u03A9\u03F4]/)?To.NORMAL:""],["ISO",t=>To.ITALIC],["French",t=>t.normalize("NFD").match(/^[a-z]/)?To.ITALIC:To.NORMAL],["upright",t=>To.NORMAL]]);const Co=wo;class Io{constructor(t="???",e=""){this.tag=t,this.id=e}}class Lo{constructor(t="",e=!1,i=!1,s=null,r="",n="",a=!1,o=""){this.env=t,this.taggable=e,this.defaultTags=i,this.tag=s,this.tagId=r,this.tagFormat=n,this.noTag=a,this.labelId=o}}class So{constructor(){this.counter=0,this.allCounter=0,this.configuration=null,this.ids={},this.allIds={},this.labels={},this.allLabels={},this.redo=!1,this.refUpdate=!1,this.currentTag=new Lo,this.history=[],this.stack=[],this.enTag=function(t,e){const i=this.configuration.nodeFactory,s=i.create("node","mtd",[t]),r=i.create("node","mlabeledtr",[e,s]);return i.create("node","mtable",[r],{side:this.configuration.options.tagSide,minlabelspacing:this.configuration.options.tagIndent,displaystyle:!0})}}start(t,e,i){this.currentTag&&this.stack.push(this.currentTag);var s=this.label;this.currentTag=new Lo(t,e,i),this.label=s}get env(){return this.currentTag.env}end(){this.history.push(this.currentTag);var t=this.label;this.currentTag=this.stack.pop(),t&&!this.label&&(this.label=t)}tag(t,e){this.currentTag.tag=t,this.currentTag.tagFormat=e?t:this.formatTag(t),this.currentTag.noTag=!1}notag(){this.tag("",!0),this.currentTag.noTag=!0}get noTag(){return this.currentTag.noTag}set label(t){this.currentTag.labelId=t}get label(){return this.currentTag.labelId}formatUrl(t,e){return e+"#"+encodeURIComponent(t)}formatTag(t){return"("+t+")"}formatRef(t){return this.formatTag(t)}formatId(t){return"mjx-eqn:"+t.replace(/\s/g,"_")}formatNumber(t){return t.toString()}autoTag(){null==this.currentTag.tag&&(this.counter++,this.tag(this.formatNumber(this.counter),!1))}clearTag(){this.tag(null,!0),this.currentTag.tagId=""}getTag(t=!1){if(t)return this.autoTag(),this.makeTag();t=this.currentTag;return t.taggable&&!t.noTag&&(t.defaultTags&&this.autoTag(),t.tag)?this.makeTag():null}resetTag(){this.history=[],this.redo=!1,this.refUpdate=!1,this.clearTag()}reset(t=0){this.resetTag(),this.counter=this.allCounter=t,this.allLabels={},this.allIds={},this.label=""}startEquation(t){this.history=[],this.stack=[],this.clearTag(),this.currentTag=new Lo("",void 0,void 0),this.labels={},this.ids={},this.counter=this.allCounter,this.redo=!1;t=t.inputData.recompile;t&&(this.refUpdate=!0,this.counter=t.counter)}finishEquation(t){this.redo&&(t.inputData.recompile={state:t.state(),counter:this.allCounter}),this.refUpdate||(this.allCounter=this.counter),Object.assign(this.allIds,this.ids),Object.assign(this.allLabels,this.labels)}finalize(t,e){if(!e.display||this.currentTag.env||null==this.currentTag.tag)return t;e=this.makeTag();return this.enTag(t,e)}makeId(){this.currentTag.tagId=this.formatId(this.configuration.options.useLabelIds&&this.label||this.currentTag.tag)}makeTag(){this.makeId(),this.label&&(this.labels[this.label]=new Io(this.currentTag.tag,this.currentTag.tagId),this.label="");var t=new go("\\text{"+this.currentTag.tagFormat+"}",{},this.configuration).mml();return this.configuration.nodeFactory.create("node","mtd",[t],{id:this.currentTag.tagId,rowalign:this.configuration.options.tagAlign})}}class ko extends So{autoTag(){}getTag(){return this.currentTag.tag?super.getTag():null}}class Ro extends So{finalize(t,e){if(!e.display||this.history.find(function(t){return t.taggable}))return t;e=this.getTag(!0);return this.enTag(t,e)}}const Oo=new Map([["none",ko],["all",Ro]]);let Mo="none";const Do={OPTIONS:{tags:Mo,tagSide:"right",tagIndent:"0.8em",useLabelIds:!0,ignoreDuplicateLabels:!1,tagAlign:"baseline"},add(t,e){Oo.set(t,e)},addTags(t){for(const e of Object.keys(t))Do.add(e,t[e])},create(t){const e=Oo.get(t)||Oo.get(Mo);if(e)return new e;throw Error("Unknown tags class")},setDefault(t){Mo=t},getDefault:()=>Do.create(Mo)};class Po{constructor(t,e,i){this._token=t,this._char=e,this._attributes=i}get token(){return this._token}get char(){return this._char}get attributes(){return this._attributes}}class Bo{constructor(t,e,i=[]){this._token=t,this._func=e,this._args=i}get token(){return this._token}get func(){return this._func}get args(){return this._args}}function Fo(t){return void 0===t||t}class Uo{constructor(t,e){this._name=t,this._parser=e,Ko.register(this)}get name(){return this._name}parserFor(t){return this.contains(t)?this.parser:null}parse([t,e]){const i=this.parserFor(e),s=this.lookup(e);return i&&s?Fo(i(t,s)):null}set parser(t){this._parser=t}get parser(){return this._parser}}class qo extends Uo{constructor(t,e,i){super(t,e),this._regExp=i}contains(t){return this._regExp.test(t)}lookup(t){return this.contains(t)?t:null}}class jo extends Uo{constructor(){super(...arguments),this.map=new Map}lookup(t){return this.map.get(t)}contains(t){return this.map.has(t)}add(t,e){this.map.set(t,e)}remove(t){this.map.delete(t)}}class Ho extends jo{constructor(t,e,i){super(t,e);for(const t of Object.keys(i)){const e=i[t],[s,r]="string"==typeof e?[e,null]:e,n=new Po(t,s,r);this.add(t,n)}}}class Go extends Ho{parse([t,e]){return super.parse([t,"\\"+e])}}class Vo extends jo{constructor(i,t,s={}){super(i,null);var r=t=>"string"==typeof t?s[t]:t;for(const[i,s]of Object.entries(t)){let t,e;e=Array.isArray(s)?(t=r(s[0]),s.slice(1)):(t=r(s),[]);var n=new Bo(i,t,e);this.add(i,n)}}parserFor(t){t=this.lookup(t);return t?t.func:null}parse([t,e]){const i=this.lookup(e),s=this.parserFor(e);return i&&s?Fo(s(t,i.token,...i.args)):null}}class Wo extends Vo{parse([t,e]){const i=this.lookup(e),s=this.parserFor(e);if(!i||!s)return null;var r=t.currentCS,e=(t.currentCS="\\"+e,s(t,"\\"+i.token,...i.args));return t.currentCS=r,Fo(e)}}class Xo extends Vo{constructor(t,e,i,s={}){super(t,i,s),this.parser=e}parse([t,e]){var i=this.lookup(e),e=this.parserFor(e);return i&&e?Fo(this.parser(t,i.token,e,i.args)):null}}const zo=new Map,Ko={register(t){zo.set(t.name,t)},getMap:t=>zo.get(t)};class Jo{constructor(){this._configuration=new Ks,this._fallback=new Js}add(t,e,i=Ks.DEFAULTPRIORITY){for(const e of t.slice().reverse()){const t=Ko.getMap(e);if(!t)return void this.warn(`Configuration '${e}' not found! Omitted.`);this._configuration.add(t,i)}e&&this._fallback.add(e,i)}remove(t,e=null){for(const e of t){const t=this.retrieve(e);t&&this._configuration.remove(t)}e&&this._fallback.remove(e)}parse(t){for(const{item:e}of this._configuration){const i=e.parse(t);if(i===Jo.FALLBACK)break;if(i)return i}const[e,i]=t;Array.from(this._fallback)[0].item(e,i)}lookup(t){const e=this.applicable(t);return e?e.lookup(t):null}contains(t){const e=this.applicable(t);return!(!e||e instanceof Ho&&null===e.lookup(t).char)}toString(){const t=[];for(var{item:e}of this._configuration)t.push(e.name);return t.join(", ")}applicable(t){for(var{item:e}of this._configuration)if(e.contains(t))return e;return null}retrieve(t){for(var{item:e}of this._configuration)if(e.name===t)return e;return null}warn(t){console.log("TexParser Warning: "+t)}}Jo.FALLBACK=Symbol("fallback");class Yo{constructor(){this.map=new Map}add(e,i,s=Ks.DEFAULTPRIORITY){for(const n of Object.keys(e)){var r=n;let t=this.get(r);t||(t=new Jo,this.set(r,t)),t.add(e[r],i[r],s)}}remove(t,e){for(const i of Object.keys(t)){const s=this.get(i);s&&s.remove(t[i],e[i])}}set(t,e){this.map.set(t,e)}get(t){return this.map.get(t)}retrieve(t){for(const i of this.map.values()){var e=i.retrieve(t);if(e)return e}return null}keys(){return this.map.keys()}}class $o{static makeProcessor(t,e){return Array.isArray(t)?t:[t,e]}static _create(t,e={}){var i;const s=null!=(i=e.priority)?i:Ks.DEFAULTPRIORITY,r=e.init?this.makeProcessor(e.init,s):null,n=e.config?this.makeProcessor(e.config,s):null,a=(e.preprocessors||[]).map(t=>this.makeProcessor(t,s)),o=(e.postprocessors||[]).map(t=>this.makeProcessor(t,s)),l=e.parser||"tex";return new $o(t,e[c.HANDLER]||{},e[c.FALLBACK]||{},e[c.ITEMS]||{},e[c.TAGS]||{},e[c.OPTIONS]||{},e[c.NODES]||{},a,o,r,n,s,l)}static create(t,e={}){e=$o._create(t,e);return Zo.set(t,e),e}static local(t={}){return $o._create("",t)}constructor(t,e={},i={},s={},r={},n={},a={},o=[],l=[],c=null,h=null,d,u){this.name=t,this.handler=e,this.fallback=i,this.items=s,this.tags=r,this.options=n,this.nodes=a,this.preprocessors=o,this.postprocessors=l,this.initMethod=c,this.configMethod=h,this.priority=d,this.parser=u,this.handler=Object.assign({[p.CHARACTER]:[],[p.DELIMITER]:[],[p.MACRO]:[],[p.ENVIRONMENT]:[]},e)}get init(){return this.initMethod?this.initMethod[0]:null}get config(){return this.configMethod?this.configMethod[0]:null}}const Qo=new Map,Zo={set(t,e){Qo.set(t,e)},get:t=>Qo.get(t),keys:()=>Qo.keys()};class tl{constructor(t,e=["tex"]){this.initMethod=new Js,this.configMethod=new Js,this.configurations=new Ks,this.parsers=[],this.handlers=new Yo,this.items={},this.tags={},this.options={},this.nodes={},this.parsers=e;for(const e of t.slice().reverse())this.addPackage(e);for(const{item:t,priority:e}of this.configurations)this.append(t,e)}init(){this.initMethod.execute(this)}config(t){this.configMethod.execute(this,t);for(const e of this.configurations)this.addFilters(t,e.item)}addPackage(t){var e="string"==typeof t?t:t[0],e=this.getPackage(e);e&&this.configurations.add(e,"string"==typeof t?e.priority:t[1])}add(t,e,i={}){const s=this.getPackage(t),r=(this.append(s),this.configurations.add(s,s.priority),this.init(),e.parseOptions);r.nodeFactory.setCreators(s.nodes);for(const t of Object.keys(s.items))r.itemFactory.setNodeClass(t,s.items[t]);Do.addTags(s.tags),pr(r.options,s.options),mr(r.options,i),this.addFilters(e,s),s.config&&s.config(this,e)}getPackage(t){var e=Zo.get(t);if(e&&!this.parsers.includes(e.parser))throw Error(`Package '${t}' doesn't target the proper parser`);return e||this.warn(`Package '${t}' not found.  Omitted.`),e}append(t,e){e=e||t.priority,t.initMethod&&this.initMethod.add(t.initMethod[0],t.initMethod[1]),t.configMethod&&this.configMethod.add(t.configMethod[0],t.configMethod[1]),this.handlers.add(t.handler,t.fallback,e),Object.assign(this.items,t.items),Object.assign(this.tags,t.tags),pr(this.options,t.options),Object.assign(this.nodes,t.nodes)}addFilters(t,e){for(var[i,s]of e.preprocessors)t.preFilters.add(i,s);for(var[r,n]of e.postprocessors)t.postFilters.add(r,n)}warn(t){console.warn("MathJax Warning: "+t)}}class el extends n{constructor(t,e){super(t),this.global=e}get kind(){return"start"}get isOpen(){return!0}checkItem(t){if(t.isKind("stop")){let t=this.toMml();return this.global.isInner||(t=this.factory.configuration.tags.finalize(t,this.env)),[[this.factory.create("mml",t)],!0]}return super.checkItem(t)}}class il extends n{get kind(){return"stop"}get isClose(){return!0}}class sl extends n{get kind(){return"open"}get isOpen(){return!0}checkItem(t){var e;return t.isKind("close")?(e=this.toMml(),Cl(e=this.create("node","TeXAtom",[e]),t),[[this.factory.create("mml",e)],!0]):super.checkItem(t)}}sl.errors=Object.assign(Object.create(n.errors),{stop:["ExtraOpenMissingClose","Extra open brace or missing close brace"]});class rl extends n{get kind(){return"close"}get isClose(){return!0}}class nl extends n{get kind(){return"null"}}class al extends n{get kind(){return"prime"}checkItem(t){const[e,i]=this.Peek(2),s=(d.isType(e,"msubsup")||d.isType(e,"msup"))&&!d.getChildAt(e,e.sup),r=(d.isType(e,"munderover")||d.isType(e,"mover"))&&!d.getChildAt(e,e.over)&&!d.getProperty(e,"subsupOK");if(!s&&!r)return[[this.create("node",e.getProperty("movesupsub")?"mover":"msup",[e,i]),t],!0];var n=s?e.sup:e.over;return d.setChild(e,n,i),[[e,t],!0]}}class ol extends n{get kind(){return"subsup"}checkItem(t){if(t.isKind("open")||t.isKind("left"))return n.success;const e=this.First,i=this.getProperty("position");if(t.isKind("mml")){if(this.getProperty("primes"))if(2!==i)d.setChild(e,2,this.getProperty("primes"));else{d.setProperty(this.getProperty("primes"),"variantForm",!0);const e=this.create("node","mrow",[this.getProperty("primes"),t.First]);t.First=e}return d.setChild(e,i,t.First),null!=this.getProperty("movesupsub")&&d.setProperty(e,"movesupsub",this.getProperty("movesupsub")),[[this.factory.create("mml",e)],!0]}super.checkItem(t);const s=this.getErrors(["","sub","sup"][i]);throw new g(s[0],s[1],...s.splice(2))}}ol.errors=Object.assign(Object.create(n.errors),{stop:["MissingScript","Missing superscript or subscript argument"],sup:["MissingOpenForSup","Missing open brace for superscript"],sub:["MissingOpenForSub","Missing open brace for subscript"]});class ll extends n{constructor(t){super(t),this.setProperty("name","\\over")}get kind(){return"over"}get isClose(){return!0}checkItem(e){if(e.isKind("over"))throw new g("AmbiguousUseOf","Ambiguous use of %1",e.getName());if(e.isClose){let t=this.create("node","mfrac",[this.getProperty("num"),this.toMml(!1)]);return null!=this.getProperty("thickness")&&d.setAttribute(t,"linethickness",this.getProperty("thickness")),(this.getProperty("ldelim")||this.getProperty("rdelim"))&&(d.setProperty(t,"withDelims",!0),t=f.fixedFence(this.factory.configuration,this.getProperty("ldelim"),t,this.getProperty("rdelim"))),t.attributes.set(l.Attr.LATEXITEM,this.getProperty("name")),[[this.factory.create("mml",t),e],!0]}return super.checkItem(e)}toString(){return"over["+this.getProperty("num")+" / "+this.nodes.join("; ")+"]"}}class cl extends n{constructor(t,e){super(t),this.setProperty("delim",e)}get kind(){return"left"}get isOpen(){return!0}checkItem(t){if(t.isKind("right")){const i=f.fenced(this.factory.configuration,this.getProperty("delim"),this.toMml(),t.getProperty("delim"),"",t.getProperty("color")),s=i.childNodes[0],r=i.childNodes[i.childNodes.length-1],n=this.factory.create("mml",i);return Cl(s,this,"\\left"),Cl(r,t,"\\right"),n.Peek()[0].attributes.set(l.Attr.LATEXITEM,"\\left"+t.startStr.slice(this.startI,t.stopI)),[[n],!0]}if(t.isKind("middle")){const a={stretchy:!0};t.getProperty("color")&&(a.mathcolor=t.getProperty("color"));var e=this.create("token","mo",a,t.getProperty("delim"));return Cl(e,t,"\\middle"),this.Push(this.create("node","TeXAtom",[],{texClass:h.CLOSE}),e,this.create("node","TeXAtom",[],{texClass:h.OPEN})),this.env={},[[this],!0]}return super.checkItem(t)}}cl.errors=Object.assign(Object.create(n.errors),{stop:["ExtraLeftMissingRight","Extra \\left or missing \\right"]});class hl extends n{constructor(t,e,i){super(t),this.setProperty("delim",e),i&&this.setProperty("color",i)}get kind(){return"middle"}get isClose(){return!0}}class dl extends n{constructor(t,e,i){super(t),this.setProperty("delim",e),i&&this.setProperty("color",i)}get kind(){return"right"}get isClose(){return!0}}class ul extends n{get kind(){return"break"}constructor(t,e,i){super(t),this.setProperty("linebreak",e),this.setProperty("insert",i)}checkItem(t){var e,i=this.getProperty("linebreak");if(t.isKind("mml")){const s=t.First;if(s.isKind("mo")){if("after"!==((null==(e=null==(e=d.getOp(s))?void 0:e[3])?void 0:e.linebreakstyle)||d.getAttribute(s,"linebreakstyle")))return d.setAttribute(s,"linebreak",i),[[t],!0];if(!this.getProperty("insert"))return[[t],!0]}}const s=this.create("token","mspace",{linebreak:i});return[[this.factory.create("mml",s),t],!0]}}class pl extends n{get kind(){return"begin"}get isOpen(){return!0}checkItem(t){if(t.isKind("end")){if(t.getName()!==this.getName())throw new g("EnvBadEnd","\\begin{%1} ended with \\end{%2}",this.getName(),t.getName());var e=this.toMml();return Cl(e,t),[[this.factory.create("mml",e)],!0]}if(t.isKind("stop"))throw new g("EnvMissingEnd","Missing \\end{%1}",this.getName());return super.checkItem(t)}}class ml extends n{get kind(){return"end"}get isClose(){return!0}}class gl extends n{get kind(){return"style"}checkItem(t){if(!t.isClose)return super.checkItem(t);var e=this.create("node","mstyle",this.nodes,this.getProperty("styles"));return[[this.factory.create("mml",e),t],!0]}}class fl extends n{get kind(){return"position"}checkItem(t){if(t.isClose)throw new g("MissingBoxFor","Missing box for %1",this.getName());if(t.isFinal){var e=t.toMml();switch(this.getProperty("move")){case"vertical":return e=this.create("node","mpadded",[e],{height:this.getProperty("dh"),depth:this.getProperty("dd"),voffset:this.getProperty("dh")}),[[this.factory.create("mml",e)],!0];case"horizontal":return[[this.factory.create("mml",this.getProperty("left")),t,this.factory.create("mml",this.getProperty("right"))],!0]}}return super.checkItem(t)}}class bl extends n{get kind(){return"cell"}get isClose(){return!0}}class El extends n{get isFinal(){return!0}get kind(){return"mml"}}class Nl extends n{get kind(){return"fn"}checkItem(e){var i=this.First;if(i){if(e.isOpen)return n.success;if(!e.isKind("fn")){let t=e.First;if(!e.isKind("mml")||!t)return[[i,e],!0];if(d.isType(t,"mstyle")&&t.childNodes.length&&d.isType(t.childNodes[0].childNodes[0],"mspace")||d.isType(t,"mspace"))return[[i,e],!0];d.isEmbellished(t)&&(t=d.getCoreMO(t));var s=d.getForm(t);if(null!=s&&[0,0,1,1,0,1,1,0,0,0][s[2]])return[[i,e],!0]}return[[i,this.create("token","mo",{texClass:h.NONE},qa.ApplyFunction),e],!0]}return super.checkItem(e)}}class yl extends n{constructor(){super(...arguments),this.remap=Ko.getMap("not_remap")}get kind(){return"not"}checkItem(t){let e,i,s;if(t.isKind("open")||t.isKind("left"))return n.success;if(t.isKind("mml")&&(d.isType(t.First,"mo")||d.isType(t.First,"mi")||d.isType(t.First,"mtext"))&&(e=t.First,1===(i=d.getText(e)).length&&!d.getProperty(e,"movesupsub")&&1===d.getChildren(e).length))return this.remap.contains(i)?(s=this.create("text",this.remap.lookup(i).char),d.setChild(e,0,s)):(s=this.create("text","Ì¸"),d.appendChildren(e,[s])),[[t],!0];s=this.create("text","â§¸");var r=this.create("node","mtext",[],{},s),r=this.create("node","mpadded",[r],{width:0});return[[e=this.create("node","TeXAtom",[r],{texClass:h.REL}),t],!0]}}class xl extends n{get kind(){return"nonscript"}checkItem(e){if(e.isKind("mml")&&1===e.Size()){let t=e.First;var i;(t=t.isKind("mstyle")&&t.notParent?d.getChildren(d.getChildren(t)[0])[0]:t).isKind("mspace")&&(t!==e.First&&(i=this.create("node","mrow",[e.Pop()]),e.Push(i)),this.factory.configuration.addNode("nonscript",e.First))}return[[e],!0]}}class Al extends n{get kind(){return"dots"}checkItem(t){if(t.isKind("open")||t.isKind("left"))return n.success;let e=this.getProperty("ldots");var i=t.First;if(t.isKind("mml")&&d.isEmbellished(i)){const t=d.getTexClass(d.getCoreMO(i));t!==h.BIN&&t!==h.REL||(e=this.getProperty("cdots"))}return[[e,t],!0]}}class vl extends n{constructor(){super(...arguments),this.table=[],this.row=[],this.frame=[],this.hfill=[],this.arraydef={},this.cstart=[],this.cend=[],this.cextra=[],this.atEnd=!1,this.ralign=[],this.breakAlign={cell:"",row:"",table:""},this.templateSubs=0}get kind(){return"array"}get isOpen(){return!0}get copyEnv(){return!1}checkItem(t){if(!t.isClose||t.isKind("over"))return super.checkItem(t);if(t.getProperty("isEntry"))return this.EndEntry(),this.clearEnv(),this.StartEntry(),n.fail;if(t.getProperty("isCR"))return this.EndEntry(),this.EndRow(),this.clearEnv(),this.StartEntry(),n.fail;this.EndTable(),this.clearEnv();var e=this.factory.create("mml",this.createMml());if(this.getProperty("requireClose")){if(t.isKind("close"))return[[e],!0];throw new g("MissingCloseBrace","Missing close brace")}return[[e,t],!0]}createMml(){var t=this.arraydef.scriptlevel;delete this.arraydef.scriptlevel;let e=this.create("node","mtable",this.table,this.arraydef);return t&&e.setProperty("smallmatrix",!0),this.breakAlign.table&&d.setAttribute(e,"data-break-align",this.breakAlign.table),this.getProperty("arrayPadding")&&(d.setAttribute(e,"data-frame-styles",""),d.setAttribute(e,"framespacing",this.getProperty("arrayPadding"))),e=this.handleFrame(e),void 0!==t&&(e=this.create("node","mstyle",[e],{scriptlevel:t})),e=this.getProperty("open")||this.getProperty("close")?f.fenced(this.factory.configuration,this.getProperty("open"),e,this.getProperty("close")):e}handleFrame(t){if(!this.frame.length)return t;const e=new Map(this.frame),i=this.frame.reduce((t,[,e])=>e===t?e:"",this.frame[0][1]);if(i){if(4===this.frame.length)return d.setAttribute(t,"frame",i),d.removeAttribute(t,"data-frame-styles"),t;if("solid"===i)return d.setAttribute(t,"data-frame-styles",""),this.create("node","menclose",[t],{notation:Array.from(e.keys()).join(" "),"data-padding":0})}var s=Xa.map(t=>e.get(t)||"none").join(" ");return d.setAttribute(t,"data-frame-styles",s),t}StartEntry(){var r=this.row.length;let n=this.cstart[r],a=this.cend[r];var o=this.ralign[r],l=this.cextra;if(n||a||o||l[r]||l[r+1]){let[t,e,i,s]=this.getEntry();if(!l[r]||this.atEnd&&!l[r+1]||(n+="&"),"&"!==i&&(s=!!e.trim()||!!(r||i&&"\\end"!==i.substring(0,4)),l[r+1]&&!l[r]&&(a=(a||"")+"&",this.atEnd=!0)),s||t){const c=this.parser;if(s&&(n&&(e=f.addArgs(c,n,e)),a&&(e=f.addArgs(c,e,a)),o&&(e="\\text{"+e.trim()+"}"),(n||a||o)&&++this.templateSubs>c.configuration.options.maxTemplateSubtitutions))throw new g("MaxTemplateSubs","Maximum template substitutions exceeded; is there an invalid use of \\\\ in the template?");t&&(e=f.addArgs(c,t,e)),c.string=f.addArgs(c,e,c.string),c.i=0}}}getEntry(){const e=this.parser,t=/^([^]*?)([&{}]|\\\\|\\(?:begin|end)\s*\{array\}|\\cr|\\)/;let i,s=0,r=0,n=e.i;const a=["","","",!1];for(;null!==(i=e.string.slice(n).match(t));)switch(n+=i[0].length,i[2]){case"\\":n++;break;case"{":s++;break;case"}":if(!s)return a;s--;break;case"\\begin{array}":s||r++;break;case"\\end{array}":if(!s&&r){r--;break}default:{if(s||r)continue;n-=i[2].length;let t=e.string.slice(e.i,n).trim();const a=t.match(/^(?:\s*\\(?:h(?:dash)?line|hfil{1,3}|rowcolor\s*\{.*?\}))+/);return a&&(t=t.slice(a[0].length)),e.string=e.string.slice(n),e.i=0,[(null==a?void 0:a[0])||"",t,i[2],!0]}}return a}EndEntry(){const t=this.create("node","mtd",this.nodes);this.hfill.length&&(0===this.hfill[0]&&d.setAttribute(t,"columnalign","right"),this.hfill[this.hfill.length-1]===this.Size()&&d.setAttribute(t,"columnalign",d.getAttribute(t,"columnalign")?"center":"left"));var e=this.ralign[this.row.length];if(e){const[i,s,r]=e,n=this.create("node","mpadded",t.childNodes[0].childNodes,{width:s,"data-overflow":"auto","data-align":r,"data-vertical-align":i});n.setProperty("vbox",i),t.childNodes[0].childNodes=[],t.appendChild(n)}else this.breakAlign.cell&&d.setAttribute(t,"data-vertical-align",this.breakAlign.cell);this.breakAlign.cell="",this.row.push(t),this.Clear(),this.hfill=[]}EndRow(){let t="mtr";this.getProperty("isNumbered")&&3===this.row.length?(this.row.unshift(this.row.pop()),t="mlabeledtr"):this.getProperty("isLabeled")&&(t="mlabeledtr",this.setProperty("isLabeled",!1));var e=this.create("node",t,this.row);this.breakAlign.row&&(d.setAttribute(e,"data-break-align",this.breakAlign.row),this.breakAlign.row=""),Cl(e,this),this.table.push(e),this.row=[],this.atEnd=!1}EndTable(){(this.Size()||this.row.length)&&(this.EndEntry(),this.EndRow()),this.checkLines()}checkLines(){if(this.arraydef.rowlines){const t=this.arraydef.rowlines.split(/ /);t.length===this.table.length?(this.frame.push(["bottom",t.pop()]),t.length?this.arraydef.rowlines=t.join(" "):delete this.arraydef.rowlines):t.length<this.table.length-1&&(this.arraydef.rowlines+=" none")}if(this.getProperty("rowspacing")){const e=this.arraydef.rowspacing.split(/ /);for(;e.length<this.table.length;)e.push(this.getProperty("rowspacing")+"em");this.arraydef.rowspacing=e.join(" ")}}addRowSpacing(t){if(this.arraydef.rowspacing){const i=this.arraydef.rowspacing.split(/ /);if(!this.getProperty("rowspacing")){const t=m.dimen2em(i[0]);this.setProperty("rowspacing",t)}for(var e=this.getProperty("rowspacing");i.length<this.table.length;)i.push(m.em(e));i[this.table.length-1]=m.em(Math.max(0,e+m.dimen2em(t))),this.arraydef.rowspacing=i.join(" ")}}}class _l extends vl{constructor(t,...e){super(t),this.maxrow=0,this.factory.configuration.tags.start(e[0],e[2],e[1])}get kind(){return"eqnarray"}EndEntry(){var t=this.arraydef.columnalign.split(/ /);"right"!==(this.row.length&&t.length?t[this.row.length%t.length]:"right")&&f.fixInitialMO(this.factory.configuration,this.nodes),super.EndEntry()}EndRow(){this.row.length>this.maxrow&&(this.maxrow=this.row.length);const t=this.factory.configuration.tags.getTag();t&&(this.row=[t].concat(this.row),this.setProperty("isLabeled",!0)),this.factory.configuration.tags.clearTag(),super.EndRow()}EndTable(){super.EndTable(),this.factory.configuration.tags.end(),this.extendArray("columnalign",this.maxrow),this.extendArray("columnwidth",this.maxrow),this.extendArray("columnspacing",this.maxrow-1),this.extendArray("data-break-align",this.maxrow),this.addIndentshift()}extendArray(t,e){if(this.arraydef[t]){const i=this.arraydef[t].split(/ /),s=[...i];if(1<s.length){for(;s.length<e;)s.push(...i);this.arraydef[t]=s.slice(0,e).join(" ")}}}addIndentshift(){const t=this.arraydef.columnalign.split(/ /);let e="";for(const i of t.keys()){if("left"===t[i]&&0<i){const t="center"===e?".7em":"2em";for(const e of this.table){const s=e.childNodes[e.isKind("mlabeledtr")?i+1:i];if(s){const e=this.create("node","mstyle",s.childNodes[0].childNodes,{indentshift:t});s.childNodes[0].childNodes=[],s.appendChild(e)}}}e=t[i]}}}class Tl extends pl{get kind(){return"mstyle"}constructor(t,e,i){super(t),this.attrList=e,this.setProperty("name",i)}checkItem(t){return t.isKind("end")&&t.getName()===this.getName()?[[this.create("node","mstyle",[this.toMml()],this.attrList)],!0]:super.checkItem(t)}}class wl extends n{constructor(t,...e){super(t),this.factory.configuration.tags.start("equation",!0,e[0])}get kind(){return"equation"}get isOpen(){return!0}checkItem(t){var e,i;if(t.isKind("end"))return e=this.toMml(),i=this.factory.configuration.tags.getTag(),this.factory.configuration.tags.end(),[[i?this.factory.configuration.tags.enTag(e,i):e,t],!0];if(t.isKind("stop"))throw new g("EnvMissingEnd","Missing \\end{%1}",this.getName());return super.checkItem(t)}}function Cl(t,e,i=""){e=e.startStr.slice(e.startI,e.stopI);e&&(t.attributes.set(l.Attr.LATEXITEM,i?i+e:e),t.attributes.set(l.Attr.LATEX,i?i+e:e))}const Il={fontfamily:1,fontsize:1,fontweight:1,fontstyle:1,color:1,background:1,id:1,class:1,href:1,style:1};function Ll(t,e=1/0){const i=t.replace(/\s+/g,"").split("").map(t=>{var e={t:"top",b:"bottom",m:"middle",c:"center"}[t];if(e)return e;throw new g("BadBreakAlign","Invalid alignment character: %1",t)});if(i.length>e)throw new g("TooManyAligns","Too many alignment characters: %1",t);return 1===e?i[0]:i.join(" ")}function Sl(t,e){const i=t.stack.env,s=i.inRoot,r=(i.inRoot=!0,new go(e,i,t.configuration));let n=r.mml();var a=r.stack.global;if(a.leftRoot||a.upRoot){const e={};a.leftRoot&&(e.width=a.leftRoot),a.upRoot&&(e.voffset=a.upRoot,e.height=a.upRoot),n=t.create("node","mpadded",[n],e)}return i.inRoot=s,n}const kl={Open(t,e){t.Push(t.itemFactory.create("open"))},Close(t,e){t.Push(t.itemFactory.create("close"))},Bar(t,e){t.Push(t.create("token","mo",{stretchy:!1,texClass:h.ORD},e))},Tilde(t,e){t.Push(t.create("token","mtext",{},qa.nbsp))},Space(t,e){},Superscript(t,e){let i,s;t.GetNext().match(/\d/)&&(t.string=t.string.substring(0,t.i+1)+" "+t.string.substring(t.i+1));const r=t.stack.Top();r.isKind("prime")?([s,i]=r.Peek(2),t.stack.Pop()):s=(s=t.stack.Prev())||t.create("token","mi",{},"");var n=d.getProperty(s,"movesupsub");let a=d.isType(s,"msubsup")?s.sup:s.over;if(d.isType(s,"msubsup")&&!d.isType(s,"msup")&&d.getChildAt(s,s.sup)||d.isType(s,"munderover")&&!d.isType(s,"mover")&&d.getChildAt(s,s.over)&&!d.getProperty(s,"subsupOK"))throw new g("DoubleExponent","Double exponent: use braces to clarify");d.isType(s,"msubsup")&&!d.isType(s,"msup")||(a=n?(s=d.isType(s,"munderover")&&!d.isType(s,"mover")&&!d.getChildAt(s,s.over)?s:t.create("node","munderover",[s],{movesupsub:!0})).over:(s=t.create("node","msubsup",[s])).sup),t.Push(t.itemFactory.create("subsup",s).setProperties({position:a,primes:i,movesupsub:n}))},Subscript(t,e){let i,s;t.GetNext().match(/\d/)&&(t.string=t.string.substring(0,t.i+1)+" "+t.string.substring(t.i+1));const r=t.stack.Top();r.isKind("prime")?([s,i]=r.Peek(2),t.stack.Pop()):s=(s=t.stack.Prev())||t.create("token","mi",{},"");var n=d.getProperty(s,"movesupsub");let a=d.isType(s,"msubsup")?s.sub:s.under;if(d.isType(s,"msubsup")&&!d.isType(s,"msup")&&d.getChildAt(s,s.sub)||d.isType(s,"munderover")&&!d.isType(s,"mover")&&d.getChildAt(s,s.under)&&!d.getProperty(s,"subsupOK"))throw new g("DoubleSubscripts","Double subscripts: use braces to clarify");d.isType(s,"msubsup")&&!d.isType(s,"msup")||(a=n?(s=d.isType(s,"munderover")&&!d.isType(s,"mover")&&!d.getChildAt(s,s.under)?s:t.create("node","munderover",[s],{movesupsub:!0})).under:(s=t.create("node","msubsup",[s])).sub),t.Push(t.itemFactory.create("subsup",s).setProperties({position:a,primes:i,movesupsub:n}))},Prime(t,e){let i=t.stack.Prev();if(i=i||t.create("token","mi"),d.isType(i,"msubsup")&&!d.isType(i,"msup")&&d.getChildAt(i,i.sup)||d.isType(i,"munderover")&&!d.isType(i,"mover")&&d.getChildAt(i,i.over)&&!d.getProperty(i,"subsupOK"))throw new g("DoubleExponentPrime","Prime causes double exponent: use braces to clarify");let s="";for(t.i--;s+=qa.prime,t.i++,"'"===(e=t.GetNext())||e===qa.rsquo;);s=["","â€²","â€³","â€´","â—"][s.length]||s;var r=t.create("token","mo",{variantForm:!0},s);t.Push(t.itemFactory.create("prime",i,r))},Comment(t,e){for(;t.i<t.string.length&&"\n"!==t.string.charAt(t.i);)t.i++},Hash(t,e){throw new g("CantUseHash1","You can't use 'macro parameter character #' in math mode")},MathFont(t,e,i,s=""){e=t.GetArgument(e),e=new go(e,Object.assign(Object.assign({multiLetterIdentifiers:t.options.identifierPattern},t.stack.env),{font:i,italicFont:s,noAutoOP:!0}),t.configuration).mml();t.Push(t.create("node","TeXAtom",[e]))},SetFont(t,e,i){t.stack.env.font=i,t.Push(t.itemFactory.create("null"))},SetStyle(t,e,i,s,r){t.stack.env.style=i,t.stack.env.level=r,t.Push(t.itemFactory.create("style").setProperty("styles",{displaystyle:s,scriptlevel:r}))},SetSize(t,e,i){t.stack.env.size=i,t.Push(t.itemFactory.create("style").setProperty("styles",{mathsize:Pa(i)}))},Spacer(t,e,i){i=t.create("node","mspace",[],{width:Pa(i)}),i=t.create("node","mstyle",[i],{scriptlevel:0});t.Push(i)},DiscretionaryTimes(t,e){t.Push(t.create("token","mo",{linebreakmultchar:"Ã—"},"â¢"))},AllowBreak(t,e){t.Push(t.create("token","mspace"))},Break(t,e){t.Push(t.create("token","mspace",{linebreak:l.LineBreak.NEWLINE}))},Linebreak(t,e,i){let s=!0;const r=t.stack.Prev(!0);r&&r.isKind("mo")&&d.getMoAttribute(r,"linebreakstyle")!==l.LineBreakStyle.BEFORE&&(r.attributes.set("linebreak",i),s=!1),t.Push(t.itemFactory.create("break",i,s))},LeftRight(t,e){var i=e.substring(1);t.Push(t.itemFactory.create(i,t.GetDelimiter(e),t.stack.env.color))},NamedFn(t,e,i){i=i||e.substring(1);e=t.create("token","mi",{texClass:h.OP},i);t.Push(t.itemFactory.create("fn",e))},NamedOp(t,e,i){i=(i=i||e.substring(1)).replace(/&thinsp;/,"â€†");e=t.create("token","mo",{movablelimits:!0,movesupsub:!0,form:l.Form.PREFIX,texClass:h.OP},i);t.Push(e)},Limits(t,e,i){let s=t.stack.Prev(!0);if(!s||d.getTexClass(d.getCoreMO(s))!==h.OP&&null==d.getProperty(s,"movesupsub"))throw new g("MisplacedLimits","%1 is allowed only on operators",t.currentCS);const r=t.stack.Top();let n;d.isType(s,"munderover")&&!i?(n=t.create("node","msubsup"),d.copyChildren(s,n),s=r.Last=n):d.isType(s,"msubsup")&&i&&(n=t.create("node","munderover"),d.copyChildren(s,n),s=r.Last=n),d.setProperty(s,"movesupsub",!!i),d.setProperties(d.getCoreMO(s),{movablelimits:!1}),((d.isType(s,"mo")?d.getMoAttribute(s,"movableLimits"):d.getAttribute(s,"movablelimits"))||d.getProperty(s,"movablelimits"))&&d.setProperties(s,{movablelimits:!1})},Over(t,e,i,s){const r=t.itemFactory.create("over").setProperty("name",t.currentCS);i||s?(r.setProperty("ldelim",i),r.setProperty("rdelim",s)):e.match(/withdelims$/)&&(r.setProperty("ldelim",t.GetDelimiter(e)),r.setProperty("rdelim",t.GetDelimiter(e))),e.match(/^\\above/)?r.setProperty("thickness",t.GetDimen(e)):(e.match(/^\\atop/)||i||s)&&r.setProperty("thickness",0),t.Push(r)},Frac(t,e){var i=t.ParseArg(e),e=t.ParseArg(e),i=t.create("node","mfrac",[i,e]);t.Push(i)},Sqrt(t,e){var i=t.GetBrackets(e);let s=t.GetArgument(e),r=("\\frac"===s&&(s+="{"+t.GetArgument(s)+"}{"+t.GetArgument(s)+"}"),new go(s,t.stack.env,t.configuration).mml());r=i?t.create("node","mroot",[r,Sl(t,i)]):t.create("node","msqrt",[r]),t.Push(r)},Root(t,e){var i=t.GetUpTo(e,"\\of"),e=t.ParseArg(e),e=t.create("node","mroot",[e,Sl(t,i)]);t.Push(e)},MoveRoot(t,e,i){if(!t.stack.env.inRoot)throw new g("MisplacedMoveRoot","%1 can appear only within a root",t.currentCS);if(t.stack.global[i])throw new g("MultipleMoveRoot","Multiple use of %1",t.currentCS);let s=t.GetArgument(e);if(!s.match(/-?[0-9]+/))throw new g("IntegerArg","The argument to %1 must be an integer",t.currentCS);"-"!==(s=parseInt(s,10)/15+"em").substring(0,1)&&(s="+"+s),t.stack.global[i]=s},Accent(t,e,i,s){var e=t.ParseArg(e),r=Object.assign(Object.assign({},f.getFontDef(t)),{accent:!0,mathaccent:void 0===s||s}),i=d.createEntity(i),r=t.create("token","mo",r,i),i=(d.setAttribute(r,"stretchy",!!s),d.isEmbellished(e)?d.getCoreMO(e):e),s=((d.isType(i,"mo")||d.getProperty(i,"movablelimits"))&&d.setProperties(i,{movablelimits:!1}),t.create("node","munderover")),i=(d.setChild(s,0,e),d.setChild(s,1,null),d.setChild(s,2,r),t.create("node","TeXAtom",[s]));t.Push(i)},UnderOver(t,e,i,s){const r=d.createEntity(i),n=t.create("token","mo",{stretchy:!0,accent:!0},r);r.match(gn.mathaccentsWithWidth)&&n.setProperty("mathaccent",!1);i="o"===e.charAt(1)?"over":"under",e=t.ParseArg(e);t.Push(f.underOver(t,e,n,i,s))},Overset(t,e){const i=t.ParseArg(e),s=t.ParseArg(e),r=i.coreMO(),n=r.isKind("mo")&&!0===d.getMoAttribute(r,"accent");f.checkMovableLimits(s);e=t.create("node","mover",[s,i],{accent:n});t.Push(e)},Underset(t,e){const i=t.ParseArg(e),s=t.ParseArg(e),r=i.coreMO(),n=r.isKind("mo")&&!0===d.getMoAttribute(r,"accent");f.checkMovableLimits(s);e=t.create("node","munder",[s,i],{accentunder:n});t.Push(e)},Overunderset(t,e){const i=t.ParseArg(e),s=t.ParseArg(e),r=t.ParseArg(e),n=i.coreMO(),a=s.coreMO(),o=n.isKind("mo")&&!0===d.getMoAttribute(n,"accent"),l=a.isKind("mo")&&!0===d.getMoAttribute(a,"accent");f.checkMovableLimits(r);e=t.create("node","munderover",[r,s,i],{accent:o,accentunder:l});t.Push(e)},TeXAtom(t,e,i){const s={texClass:i};let r,n;if(i===h.OP){s.movesupsub=s.movablelimits=!0;const i=t.GetArgument(e),a=i.match(/^\s*\\rm\s+([a-zA-Z0-9 ]+)$/);if(a)s.mathvariant=l.Variant.NORMAL,n=t.create("token","mi",s,a[1]);else{const e=new go(i,t.stack.env,t.configuration).mml();n=t.create("node","TeXAtom",[e],s)}r=t.itemFactory.create("fn",n)}else r=t.create("node","TeXAtom",[t.ParseArg(e)],s);t.Push(r)},VBox(t,e,i){const s=new go(t.GetArgument(e),t.stack.env,t.configuration),r={"data-vertical-align":i,texClass:h.ORD},n=(s.stack.env.hsize&&(r.width=s.stack.env.hsize,r["data-overflow"]="linebreak"),t.create("node","mpadded",[s.mml()],r));n.setProperty("vbox",i),t.Push(n)},Hsize(t,e){"="===t.GetNext()&&t.i++,t.stack.env.hsize=t.GetDimen(e),t.Push(t.itemFactory.create("null"))},ParBox(t,e){const i=t.GetBrackets(e,"c"),s=t.GetDimen(e),r=f.internalMath(t,t.GetArgument(e)),n=Ll(i,1),a=t.create("node","mpadded",r,{width:s,"data-overflow":"linebreak","data-vertical-align":n});a.setProperty("vbox",n),t.Push(a)},BreakAlign(t,e){const i=t.stack.Top();if(!(i instanceof vl))throw new g("BreakNotInArray","%1 must be used in an alignment environment",t.currentCS);switch(t.GetArgument(e).trim()){case"c":if(i.First)throw new g("BreakFirstInEntry","%1 must be at the beginning of an alignment entry",t.currentCS+"{c}");i.breakAlign.cell=Ll(t.GetArgument(e),1);break;case"r":if(i.row.length||i.First)throw new g("BreakFirstInRow","%1 must be at the beginning of an alignment row",t.currentCS+"{r}");i.breakAlign.row=Ll(t.GetArgument(e));break;case"t":if(i.table.length||i.row.length||i.First)throw new g("BreakFirstInTable","%1 must be at the beginning of an alignment",t.currentCS+"{t}");i.breakAlign.table=Ll(t.GetArgument(e));break;default:throw new g("BreakType","First argument to %1 must be one of c, r, or t",t.currentCS)}},MmlToken(e,i){var s=e.GetArgument(i);let r=e.GetBrackets(i,"").replace(/^\s+/,"");const t=e.GetArgument(i),n={},a=[];let o;try{o=e.create("node",s)}catch(e){o=null}if(!o||!o.isToken)throw new g("NotMathMLToken","%1 is not a token element",s);for(;""!==r;){const i=r.match(/^([a-z]+)\s*=\s*('[^']*'|"[^"]*"|[^ ,]*)\s*,?\s*/i);if(!i)throw new g("InvalidMathMLAttr","Invalid MathML attribute: %1",r);if(!o.attributes.hasDefault(i[1])&&!Il[i[1]])throw new g("UnknownAttrForElement","%1 is not a recognized attribute for %2",i[1],s);let t=f.mmlFilterAttribute(e,i[1],i[2].replace(/^(['"])(.*)\1$/,"$2"));t&&("true"===t.toLowerCase()?t=!0:"false"===t.toLowerCase()&&(t=!1),n[i[1]]=t,a.push(i[1])),r=r.substring(i[0].length)}a.length&&(n["mjx-keep-attrs"]=a.join(" "));i=e.create("text",pn(t));o.appendChild(i),d.setProperties(o,n),e.Push(o)},Strut(t,e){var i=t.create("node","mrow"),i=t.create("node","mpadded",[i],{height:"8.6pt",depth:"3pt",width:0});t.Push(i)},Phantom(t,e,i,s){let r=t.create("node","mphantom",[t.ParseArg(e)]);(i||s)&&(r=t.create("node","mpadded",[r]),s&&(d.setAttribute(r,"height",0),d.setAttribute(r,"depth",0)),i&&d.setAttribute(r,"width",0));e=t.create("node","TeXAtom",[r]);t.Push(e)},Smash(t,e){var i=m.trimSpaces(t.GetBrackets(e,"")),s=t.create("node","mpadded",[t.ParseArg(e)]);switch(i){case"b":d.setAttribute(s,"depth",0);break;case"t":d.setAttribute(s,"height",0);break;default:d.setAttribute(s,"height",0),d.setAttribute(s,"depth",0)}e=t.create("node","TeXAtom",[s]);t.Push(e)},Lap(t,e){var i=t.create("node","mpadded",[t.ParseArg(e)],{width:0}),e=("\\llap"===e&&d.setAttribute(i,"lspace","-1width"),t.create("node","TeXAtom",[i]));t.Push(e)},RaiseLower(t,e){let i=t.GetDimen(e);const s=t.itemFactory.create("position").setProperties({name:t.currentCS,move:"vertical"});"-"===i.charAt(0)&&(i=i.slice(1),e="raise"===e.substring(1)?"\\lower":"\\raise"),"\\lower"===e?(s.setProperty("dh","-"+i),s.setProperty("dd","+"+i)):(s.setProperty("dh","+"+i),s.setProperty("dd","-"+i)),t.Push(s)},MoveLeftRight(t,e){let i=t.GetDimen(e),s="-"===i.charAt(0)?i.slice(1):"-"+i;if("\\moveleft"===e){const t=i;i=s,s=t}t.Push(t.itemFactory.create("position").setProperties({name:t.currentCS,move:"horizontal",left:t.create("node","mspace",[],{width:i}),right:t.create("node","mspace",[],{width:s})}))},Hskip(t,e,i=!1){e=t.create("node","mspace",[],{width:t.GetDimen(e)});i&&d.setAttribute(e,"linebreak","nobreak"),t.Push(e)},Nonscript(t,e){t.Push(t.itemFactory.create("nonscript"))},Rule(t,e,i){const s={width:t.GetDimen(e),height:t.GetDimen(e),depth:t.GetDimen(e)};"blank"!==i&&(s.mathbackground=t.stack.env.color||"black");e=t.create("node","mspace",[],s);t.Push(e)},rule(t,e){const i=t.GetBrackets(e),s=t.GetDimen(e),r=t.GetDimen(e);let n=t.create("node","mspace",[],{width:s,height:r,mathbackground:t.stack.env.color||"black"});i&&(n=t.create("node","mpadded",[n],{voffset:i}),i.match(/^-/)?(d.setAttribute(n,"height",i),d.setAttribute(n,"depth","+"+i.substring(1))):d.setAttribute(n,"height","+"+i)),t.Push(n)},MakeBig(t,e,i,s){s=String(s*=1.2/.85).replace(/(\.\d\d\d).+/,"$1")+"em",e=t.GetDelimiter(e,!0),s=t.create("token","mo",{minsize:s,maxsize:s,fence:!0,stretchy:!0,symmetric:!0},e),e=t.create("node","TeXAtom",[s],{texClass:i});t.Push(e)},BuildRel(t,e){var i=t.ParseUpTo(e,"\\over"),e=t.ParseArg(e),s=t.create("node","munderover"),e=(d.setChild(s,0,e),d.setChild(s,1,null),d.setChild(s,2,i),t.create("node","TeXAtom",[s],{texClass:h.REL}));t.Push(e)},HBox(t,e,i,s){t.PushAll(f.internalMath(t,t.GetArgument(e),i,s))},FBox(t,e){e=f.internalMath(t,t.GetArgument(e)),e=t.create("node","menclose",e,{notation:"box"});t.Push(e)},FrameBox(t,e){var i=t.GetBrackets(e),s=t.GetBrackets(e)||"c";let r=f.internalMath(t,t.GetArgument(e));i&&(r=[t.create("node","mpadded",r,{width:i,"data-align":br(s,{l:"left",r:"right"},"center")})]);e=t.create("node","TeXAtom",[t.create("node","menclose",r,{notation:"box"})],{texClass:h.ORD});t.Push(e)},MakeBox(t,e){const i=t.GetBrackets(e),s=t.GetBrackets(e,"c"),r=t.create("node","mpadded",f.internalMath(t,t.GetArgument(e)));i&&d.setAttribute(r,"width",i);e=br(s.toLowerCase(),{c:"center",r:"right"},"");e&&d.setAttribute(r,"data-align",e),s.toLowerCase()!==s&&d.setAttribute(r,"data-overflow","linebreak"),t.Push(r)},Not(t,e){t.Push(t.itemFactory.create("not"))},Dots(t,e){var i=d.createEntity("2026"),s=d.createEntity("22EF"),i=t.create("token","mo",{stretchy:!1},i),s=t.create("token","mo",{stretchy:!1},s);t.Push(t.itemFactory.create("dots").setProperties({ldots:i,cdots:s}))},Matrix(t,e,i,s,r,n,a,o,l,c){var h=t.GetNext();if(""===h)throw new g("MissingArgFor","Missing argument for %1",t.currentCS);"{"===h?t.i++:(t.string=h+"}"+t.string.slice(t.i+1),t.i=0);const d=t.itemFactory.create("array").setProperty("requireClose",!0);!i&&r||d.setProperty("arrayPadding",".2em .125em"),d.arraydef={rowspacing:a||"4pt",columnspacing:n||"1em"},l&&d.setProperty("isCases",!0),c&&(d.setProperty("isNumbered",!0),d.arraydef.side=c),(i||s)&&(d.setProperty("open",i),d.setProperty("close",s)),"D"===o&&(d.arraydef.displaystyle=!0),null!=r&&(d.arraydef.columnalign=r),t.Push(d)},Entry(r,n){r.Push(r.itemFactory.create("cell").setProperties({isEntry:!0,name:n}));const t=r.stack.Top(),a=t.getProperty("casesEnv");if(t.getProperty("isCases")||a){const l=r.string;let t=0,e=-1,i=r.i,s=l.length;for(var o=a?new RegExp(`^\\\\end\\s*\\{${a.replace(/\*/,"\\*")}\\}`):null;i<s;){const n=l.charAt(i);if("{"===n)t++,i++;else if("}"===n)0===t?s=0:(0===--t&&e<0&&(e=i-r.i),i++);else{if("&"===n&&0===t)throw new g("ExtraAlignTab","Extra alignment tab in \\cases text");if("\\"===n){const r=l.substring(i);r.match(/^((\\cr)[^a-zA-Z]|\\\\)/)||o&&r.match(o)?s=0:i+=2}else i++}}const c=l.substring(r.i,i);if(!c.match(/^\s*\\text[^a-zA-Z]/)||e!==c.replace(/\s+$/,"").length-1){const n=f.internalMath(r,m.trimSpaces(c),0);r.PushAll(n),r.i=i}}},Cr(t,e){t.Push(t.itemFactory.create("cell").setProperties({isCR:!0,name:e}))},CrLaTeX(t,e,i=!1){let s;if(!i&&("*"===t.string.charAt(t.i)&&t.i++,"["===t.string.charAt(t.i))){const i=t.GetBrackets(e,""),[r,n]=m.matchDimen(i);if(i&&!r)throw new g("BracketMustBeDimension","Bracket argument to %1 must be a dimension",t.currentCS);s=r+n}t.Push(t.itemFactory.create("cell").setProperties({isCR:!0,name:e,linebreak:!0}));const r=t.stack.Top();let n;r instanceof vl?s&&r.addRowSpacing(s):(n=t.create("node","mspace",[],{linebreak:l.LineBreak.NEWLINE}),s&&d.setAttribute(n,"data-lineleading",s),t.Push(n))},HLine(t,e,i){null==i&&(i="solid");const s=t.stack.Top();if(!(s instanceof vl)||s.Size())throw new g("Misplaced","Misplaced %1",t.currentCS);if(s.table.length){const t=s.arraydef.rowlines?s.arraydef.rowlines.split(/ /):[];for(;t.length<s.table.length;)t.push("none");t[s.table.length-1]=i,s.arraydef.rowlines=t.join(" ")}else s.frame.push(["top",i])},HFill(t,e){const i=t.stack.Top();if(!(i instanceof vl))throw new g("UnsupportedHFill","Unsupported use of %1",t.currentCS);i.hfill.push(i.Size())},NewColumnType(t,e){const i=t.GetArgument(e),s=t.GetBrackets(e,"0"),r=t.GetArgument(e);if(1!==i.length)throw new g("BadColumnName","Column specifier must be exactly one character: %1",i);if(!s.match(/^\d+$/))throw new g("PositiveIntegerArg","Argument to %1 must be a positive integer",s);const n=t.configuration.columnParser;n.columnHandler[i]=t=>n.macroColumn(t,r,parseInt(s)),t.Push(t.itemFactory.create("null"))},BeginEnd(t,e){const i=t.GetArgument(e);if(i.match(/\\/))throw new g("InvalidEnv","Invalid environment name '%1'",i);var s=t.configuration.handlers.get(p.ENVIRONMENT).lookup(i);if(s&&"\\end"===e){if(!s.args[0]){const e=t.itemFactory.create("end").setProperty("name",i);return void t.Push(e)}t.stack.env.closing=i}f.checkMaxMacros(t,!1),t.parse(p.ENVIRONMENT,[t,i])},Array(t,e,i,s,r,n,a,o,l){r=r||t.GetArgument("\\begin{"+e.getName()+"}");const c=t.itemFactory.create("array");return"array"===e.getName()&&c.setProperty("arrayPadding",".5em .125em"),c.parser=t,c.arraydef={columnspacing:n||"1em",rowspacing:a||"4pt"},t.configuration.columnParser.process(t,r,c),i&&c.setProperty("open",t.convertDelimiter(i)),s&&c.setProperty("close",t.convertDelimiter(s)),"'"===(o||"").charAt(1)&&(c.arraydef["data-cramped"]=!0,o=o.charAt(0)),"D"===o?c.arraydef.displaystyle=!0:o&&(c.arraydef.displaystyle=!1),c.arraydef.scriptlevel="S"===o?1:0,l&&(c.arraydef.useHeight=!1),t.Push(e),c.StartEntry(),c},AlignedArray(t,e,i=""){var s=t.GetBrackets("\\begin{"+e.getName()+"}"),t=kl.Array(t,e,null,null,null,null,null,i);return f.setArrayAlign(t,s)},IndentAlign(t,e){var i=`\\begin{${e.getName()}}`,s=t.GetBrackets(i,""),r=t.GetBrackets(i,""),n=t.GetBrackets(i,"");if(s&&!m.matchDimen(s)[0]||r&&!m.matchDimen(r)[0]||n&&!m.matchDimen(n)[0])throw new g("BracketMustBeDimension","Bracket argument to %1 must be a dimension",i);const a=t.GetArgument(i);if(a&&!a.match(/^([lcr]{1,3})?$/))throw new g("BadAlignment","Alignment must be one to three copies of l, c, or r");const o=[...a].map(t=>({l:"left",c:"center",r:"right"})[t]),l=(1===o.length&&o.push(o[0]),{});for(const[t,e]of[["indentshiftfirst",s],["indentshift",r||s],["indentshiftlast",n],["indentalignfirst",o[0]],["indentalign",o[1]],["indentalignlast",o[2]]])e&&(l[t]=e);t.Push(t.itemFactory.create("mstyle",l,e.getName()))},Equation:(t,e,i,s=!0)=>(t.configuration.mathItem.display=s,t.stack.env.display=s,f.checkEqnEnv(t),t.Push(e),t.itemFactory.create("equation",i).setProperty("name",e.getName())),EqnArray(t,e,i,s,r,n,a){var o=e.getName(),l="gather"===o||"gather*"===o;s&&f.checkEqnEnv(t,!l),t.Push(e),r=(r=r.replace(/[^clr]/g,"").split("").join(" ")).replace(/l/g,"left").replace(/r/g,"right").replace(/c/g,"center"),n=Ll(n);const c=t.itemFactory.create("eqnarray",o,i,s,t.stack.global);return c.arraydef={displaystyle:!0,columnalign:r,columnspacing:a||"1em",rowspacing:"3pt","data-break-align":n,side:t.options.tagSide,minlabelspacing:t.options.tagIndent},l&&c.setProperty("nestable",!0),c},HandleNoTag(t,e){t.tags.notag()},HandleLabel(t,e){e=t.GetArgument(e);if(""!==e&&!t.tags.refUpdate){if(t.tags.label)throw new g("MultipleCommand","Multiple %1",t.currentCS);if(t.tags.label=e,(t.tags.allLabels[e]||t.tags.labels[e])&&!t.options.ignoreDuplicateLabels)throw new g("MultipleLabel","Label '%1' multiply defined",e);t.tags.labels[e]=new Io}},HandleRef(t,e,i){e=t.GetArgument(e);let s=t.tags.allLabels[e]||t.tags.labels[e],r=(s||(t.tags.refUpdate||(t.tags.redo=!0),s=new Io),s.tag);i&&(r=t.tags.formatRef(r));e=t.create("node","mrow",f.internalMath(t,r),{href:t.tags.formatUrl(s.id,t.options.baseURL),class:"MathJax_ref"});t.Push(e)},Macro(e,i,t,s,r){if(s){const n=[];if(null!=r){const t=e.GetBrackets(i);n.push(null==t?r:t)}for(let t=n.length;t<s;t++)n.push(e.GetArgument(i));t=f.substituteArgs(e,n,t)}e.string=f.addArgs(e,t,e.string.slice(e.i)),e.i=0,f.checkMaxMacros(e)},MathChoice(t,e){var i=t.ParseArg(e),s=t.ParseArg(e),r=t.ParseArg(e),e=t.ParseArg(e);t.Push(t.create("node","MathChoice",[i,s,r,e]))}},b=kl,Rl=l.Variant,Ol={variable(t,e){const i=f.getFontDef(t),s=t.stack.env;if(s.multiLetterIdentifiers&&""!==s.font&&(e=(null==(r=t.string.substring(t.i-1).match(s.multiLetterIdentifiers))?void 0:r[0])||e,t.i+=e.length-1,i.mathvariant===Rl.NORMAL&&s.noAutoOP&&1<e.length&&(i.autoOP=!1)),!i.mathvariant&&f.isLatinOrGreekChar(e)){const r=t.configuration.mathStyle(e);r&&(i.mathvariant=r)}var r=t.create("token","mi",i,e);t.Push(r)},digit(t,e){const i=t.configuration.options.numberPattern,s=t.string.slice(t.i-1).match(i),r=f.getFontDef(t);if(!s)return!1;var n=t.create("token","mn",r,s[0].replace(/[{}]/g,""));return t.i+=s[0].length-1,t.Push(n),!0},controlSequence(t,e){var i=t.GetCS();t.parse(p.MACRO,[t,i])},lcGreek(t,e){var i={mathvariant:t.configuration.mathStyle(e.char)||Rl.ITALIC},i=t.create("token","mi",i,e.char);t.Push(i)},ucGreek(t,e){var i={mathvariant:t.stack.env.font||t.configuration.mathStyle(e.char,!0)||Rl.NORMAL},i=t.create("token","mi",i,e.char);t.Push(i)},mathchar0mi(t,e){var i=e.attributes||{mathvariant:Rl.ITALIC},i=t.create("token","mi",i,e.char);t.Push(i)},mathchar0mo(t,e){const i=e.attributes||{};i.stretchy=!1;e=t.create("token","mo",i,e.char);d.setProperty(e,"fixStretchy",!0),t.configuration.addNode("fixStretchy",e),t.Push(e)},mathchar7(t,e){const i=e.attributes||{mathvariant:Rl.NORMAL};t.stack.env.font&&(i.mathvariant=t.stack.env.font);e=t.create("token","mi",i,e.char);t.Push(e)},delimiter(t,e){var i=e.attributes||{},i=Object.assign({fence:!1,stretchy:!1},i),i=t.create("token","mo",i,e.char);t.Push(i)},environment(t,e,i,s){e=t.itemFactory.create("begin").setProperty("name",e);t.Push(i(t,e,...s.slice(1)))}},Ml=Ol,Dl=Pa(Oa.thickmathspace),E=l.Variant,Pl=(new qo("letter",Ml.variable,/[a-z]/i),new qo("digit",Ml.digit,/[0-9.,]/),new qo("command",Ml.controlSequence,/^\\/),new Vo("special",{"{":b.Open,"}":b.Close,"~":b.Tilde,"^":b.Superscript,_:b.Subscript,"|":b.Bar," ":b.Space,"\t":b.Space,"\r":b.Space,"\n":b.Space,"'":b.Prime,"%":b.Comment,"&":b.Entry,"#":b.Hash,"Â ":b.Space,"â€™":b.Prime}),new Ho("lcGreek",Ml.lcGreek,{alpha:"Î±",beta:"Î²",gamma:"Î³",delta:"Î´",epsilon:"Ïµ",zeta:"Î¶",eta:"Î·",theta:"Î¸",iota:"Î¹",kappa:"Îº",lambda:"Î»",mu:"Î¼",nu:"Î½",xi:"Î¾",omicron:"Î¿",pi:"Ï€",rho:"Ï",sigma:"Ïƒ",tau:"Ï„",upsilon:"Ï…",phi:"Ï•",chi:"Ï‡",psi:"Ïˆ",omega:"Ï‰",varepsilon:"Îµ",vartheta:"Ï‘",varpi:"Ï–",varrho:"Ï±",varsigma:"Ï‚",varphi:"Ï†"}),new Ho("ucGreek",Ml.ucGreek,{Gamma:"Î“",Delta:"Î”",Theta:"Î˜",Lambda:"Î›",Xi:"Î",Pi:"Î ",Sigma:"Î£",Upsilon:"Î¥",Phi:"Î¦",Psi:"Î¨",Omega:"Î©"}),new Ho("mathchar0mi",Ml.mathchar0mi,{AA:"â„«",S:["Â§",{mathvariant:E.NORMAL}],aleph:["â„µ",{mathvariant:E.NORMAL}],hbar:["â„",{variantForm:!0}],imath:"Ä±",jmath:"È·",ell:"â„“",wp:["â„˜",{mathvariant:E.NORMAL}],Re:["â„œ",{mathvariant:E.NORMAL}],Im:["â„‘",{mathvariant:E.NORMAL}],partial:["âˆ‚",{mathvariant:E.ITALIC}],infty:["âˆ",{mathvariant:E.NORMAL}],prime:["â€²",{variantForm:!0}],emptyset:["âˆ…",{mathvariant:E.NORMAL}],nabla:["âˆ‡",{mathvariant:E.NORMAL}],top:["âŠ¤",{mathvariant:E.NORMAL}],bot:["âŠ¥",{mathvariant:E.NORMAL}],angle:["âˆ ",{mathvariant:E.NORMAL}],triangle:["â–³",{mathvariant:E.NORMAL}],backslash:["\\",{mathvariant:E.NORMAL}],forall:["âˆ€",{mathvariant:E.NORMAL}],exists:["âˆƒ",{mathvariant:E.NORMAL}],neg:["Â¬",{mathvariant:E.NORMAL}],lnot:["Â¬",{mathvariant:E.NORMAL}],flat:["â™­",{mathvariant:E.NORMAL}],natural:["â™®",{mathvariant:E.NORMAL}],sharp:["â™¯",{mathvariant:E.NORMAL}],clubsuit:["â™£",{mathvariant:E.NORMAL}],diamondsuit:["â™¢",{mathvariant:E.NORMAL}],heartsuit:["â™¡",{mathvariant:E.NORMAL}],spadesuit:["â™ ",{mathvariant:E.NORMAL}]}),new Ho("mathchar0mo",Ml.mathchar0mo,{surd:"âˆš",coprod:["âˆ",{movesupsub:!0}],bigvee:["â‹",{movesupsub:!0}],bigwedge:["â‹€",{movesupsub:!0}],biguplus:["â¨„",{movesupsub:!0}],bigcap:["â‹‚",{movesupsub:!0}],bigcup:["â‹ƒ",{movesupsub:!0}],int:"âˆ«",intop:["âˆ«",{movesupsub:!0,movablelimits:!0}],iint:"âˆ¬",iiint:"âˆ­",prod:["âˆ",{movesupsub:!0}],sum:["âˆ‘",{movesupsub:!0}],bigotimes:["â¨‚",{movesupsub:!0}],bigoplus:["â¨",{movesupsub:!0}],bigodot:["â¨€",{movesupsub:!0}],oint:"âˆ®",ointop:["âˆ®",{movesupsub:!0,movablelimits:!0}],oiint:"âˆ¯",oiiint:"âˆ°",bigsqcup:["â¨†",{movesupsub:!0}],smallint:["âˆ«",{largeop:!1}],triangleleft:"â—ƒ",triangleright:"â–¹",bigtriangleup:"â–³",bigtriangledown:"â–½",wedge:"âˆ§",land:"âˆ§",vee:"âˆ¨",lor:"âˆ¨",cap:"âˆ©",cup:"âˆª",ddagger:"â€¡",dagger:"â€ ",sqcap:"âŠ“",sqcup:"âŠ”",uplus:"âŠ",amalg:"â¨¿",diamond:"â‹„",bullet:"âˆ™",wr:"â‰€",div:"Ã·",odot:["âŠ™",{largeop:!1}],oslash:["âŠ˜",{largeop:!1}],otimes:["âŠ—",{largeop:!1}],ominus:["âŠ–",{largeop:!1}],oplus:["âŠ•",{largeop:!1}],mp:"âˆ“",pm:"Â±",circ:"âˆ˜",bigcirc:"â—¯",setminus:"âˆ–",cdot:"â‹…",ast:"âˆ—",times:"Ã—",star:"â‹†",propto:"âˆ",sqsubseteq:"âŠ‘",sqsupseteq:"âŠ’",parallel:"âˆ¥",mid:"âˆ£",dashv:"âŠ£",vdash:"âŠ¢",leq:"â‰¤",le:"â‰¤",geq:"â‰¥",ge:"â‰¥",lt:"<",gt:">",succ:"â‰»",prec:"â‰º",approx:"â‰ˆ",succeq:"âª°",preceq:"âª¯",supset:"âŠƒ",subset:"âŠ‚",supseteq:"âŠ‡",subseteq:"âŠ†",in:"âˆˆ",ni:"âˆ‹",notin:"âˆ‰",owns:"âˆ‹",gg:"â‰«",ll:"â‰ª",sim:"âˆ¼",simeq:"â‰ƒ",perp:"âŸ‚",equiv:"â‰¡",asymp:"â‰",smile:"âŒ£",frown:"âŒ¢",ne:"â‰ ",neq:"â‰ ",cong:"â‰…",doteq:"â‰",bowtie:"â‹ˆ",models:"âŠ§",notChar:"â§¸",Leftrightarrow:"â‡”",Leftarrow:"â‡",Rightarrow:"â‡’",leftrightarrow:"â†”",leftarrow:"â†",gets:"â†",rightarrow:"â†’",to:["â†’",{accent:!1}],mapsto:"â†¦",leftharpoonup:"â†¼",leftharpoondown:"â†½",rightharpoonup:"â‡€",rightharpoondown:"â‡",nearrow:"â†—",searrow:"â†˜",nwarrow:"â†–",swarrow:"â†™",rightleftharpoons:"â‡Œ",hookrightarrow:"â†ª",hookleftarrow:"â†©",longleftarrow:"âŸµ",Longleftarrow:"âŸ¸",longrightarrow:"âŸ¶",Longrightarrow:"âŸ¹",Longleftrightarrow:"âŸº",longleftrightarrow:"âŸ·",longmapsto:"âŸ¼",ldots:"â€¦",cdots:"â‹¯",vdots:"â‹®",ddots:"â‹±",iddots:"â‹°",dotsc:"â€¦",dotsb:"â‹¯",dotsm:"â‹¯",dotsi:"â‹¯",dotso:"â€¦",ldotp:[".",{texClass:h.PUNCT}],cdotp:["â‹…",{texClass:h.PUNCT}],colon:[":",{texClass:h.PUNCT}]}),new Ho("mathchar7",Ml.mathchar7,{_:"_","#":"#",$:"$","%":"%","&":"&",And:"&"}),new Go("delimiter",Ml.delimiter,{"(":"(",")":")","[":"[","]":"]","<":"âŸ¨",">":"âŸ©","\\lt":"âŸ¨","\\gt":"âŸ©","/":"/","|":["|",{texClass:h.ORD}],".":"","\\lmoustache":"â°","\\rmoustache":"â±","\\lgroup":"âŸ®","\\rgroup":"âŸ¯","\\arrowvert":"â","\\Arrowvert":"â€–","\\bracevert":"âª","\\Vert":["â€–",{texClass:h.ORD}],"\\|":["â€–",{texClass:h.ORD}],"\\vert":["|",{texClass:h.ORD}],"\\uparrow":"â†‘","\\downarrow":"â†“","\\updownarrow":"â†•","\\Uparrow":"â‡‘","\\Downarrow":"â‡“","\\Updownarrow":"â‡•","\\backslash":"\\","\\rangle":"âŸ©","\\langle":"âŸ¨","\\rbrace":"}","\\lbrace":"{","\\}":"}","\\{":"{","\\rceil":"âŒ‰","\\lceil":"âŒˆ","\\rfloor":"âŒ‹","\\lfloor":"âŒŠ","\\lbrack":"[","\\rbrack":"]"}),new Wo("macros",{displaystyle:[b.SetStyle,"D",!0,0],textstyle:[b.SetStyle,"T",!1,0],scriptstyle:[b.SetStyle,"S",!1,1],scriptscriptstyle:[b.SetStyle,"SS",!1,2],rm:[b.SetFont,E.NORMAL],mit:[b.SetFont,E.ITALIC],oldstyle:[b.SetFont,E.OLDSTYLE],cal:[b.SetFont,E.CALLIGRAPHIC],it:[b.SetFont,E.MATHITALIC],bf:[b.SetFont,E.BOLD],sf:[b.SetFont,E.SANSSERIF],tt:[b.SetFont,E.MONOSPACE],frak:[b.MathFont,E.FRAKTUR],Bbb:[b.MathFont,E.DOUBLESTRUCK],mathrm:[b.MathFont,E.NORMAL],mathup:[b.MathFont,E.NORMAL],mathnormal:[b.MathFont,""],mathbf:[b.MathFont,E.BOLD],mathbfup:[b.MathFont,E.BOLD],mathit:[b.MathFont,E.MATHITALIC],mathbfit:[b.MathFont,E.BOLDITALIC],mathbb:[b.MathFont,E.DOUBLESTRUCK],mathfrak:[b.MathFont,E.FRAKTUR],mathbffrak:[b.MathFont,E.BOLDFRAKTUR],mathscr:[b.MathFont,E.SCRIPT],mathbfscr:[b.MathFont,E.BOLDSCRIPT],mathsf:[b.MathFont,E.SANSSERIF],mathsfup:[b.MathFont,E.SANSSERIF],mathbfsf:[b.MathFont,E.BOLDSANSSERIF],mathbfsfup:[b.MathFont,E.BOLDSANSSERIF],mathsfit:[b.MathFont,E.SANSSERIFITALIC],mathbfsfit:[b.MathFont,E.SANSSERIFBOLDITALIC],mathtt:[b.MathFont,E.MONOSPACE],mathcal:[b.MathFont,E.CALLIGRAPHIC],mathbfcal:[b.MathFont,E.BOLDCALLIGRAPHIC],symrm:[b.MathFont,E.NORMAL],symup:[b.MathFont,E.NORMAL],symnormal:[b.MathFont,""],symbf:[b.MathFont,E.BOLD,E.BOLDITALIC],symbfup:[b.MathFont,E.BOLD],symit:[b.MathFont,E.ITALIC],symbfit:[b.MathFont,E.BOLDITALIC],symbb:[b.MathFont,E.DOUBLESTRUCK],symfrak:[b.MathFont,E.FRAKTUR],symbffrak:[b.MathFont,E.BOLDFRAKTUR],symscr:[b.MathFont,E.SCRIPT],symbfscr:[b.MathFont,E.BOLDSCRIPT],symsf:[b.MathFont,E.SANSSERIF,E.SANSSERIFITALIC],symsfup:[b.MathFont,E.SANSSERIF],symbfsf:[b.MathFont,E.BOLDSANSSERIF],symbfsfup:[b.MathFont,E.BOLDSANSSERIF],symsfit:[b.MathFont,E.SANSSERIFITALIC],symbfsfit:[b.MathFont,E.SANSSERIFBOLDITALIC],symtt:[b.MathFont,E.MONOSPACE],symcal:[b.MathFont,E.CALLIGRAPHIC],symbfcal:[b.MathFont,E.BOLDCALLIGRAPHIC],textrm:[b.HBox,null,E.NORMAL],textup:[b.HBox,null,E.NORMAL],textnormal:[b.HBox],textit:[b.HBox,null,E.ITALIC],textbf:[b.HBox,null,E.BOLD],textsf:[b.HBox,null,E.SANSSERIF],texttt:[b.HBox,null,E.MONOSPACE],tiny:[b.SetSize,.5],Tiny:[b.SetSize,.6],scriptsize:[b.SetSize,.7],small:[b.SetSize,.85],normalsize:[b.SetSize,1],large:[b.SetSize,1.2],Large:[b.SetSize,1.44],LARGE:[b.SetSize,1.73],huge:[b.SetSize,2.07],Huge:[b.SetSize,2.49],arcsin:b.NamedFn,arccos:b.NamedFn,arctan:b.NamedFn,arg:b.NamedFn,cos:b.NamedFn,cosh:b.NamedFn,cot:b.NamedFn,coth:b.NamedFn,csc:b.NamedFn,deg:b.NamedFn,det:b.NamedOp,dim:b.NamedFn,exp:b.NamedFn,gcd:b.NamedOp,hom:b.NamedFn,inf:b.NamedOp,ker:b.NamedFn,lg:b.NamedFn,lim:b.NamedOp,liminf:[b.NamedOp,"lim&thinsp;inf"],limsup:[b.NamedOp,"lim&thinsp;sup"],ln:b.NamedFn,log:b.NamedFn,max:b.NamedOp,min:b.NamedOp,Pr:b.NamedOp,sec:b.NamedFn,sin:b.NamedFn,sinh:b.NamedFn,sup:b.NamedOp,tan:b.NamedFn,tanh:b.NamedFn,limits:[b.Limits,!0],nolimits:[b.Limits,!1],overline:[b.UnderOver,"2015"],underline:[b.UnderOver,"2015"],overbrace:[b.UnderOver,"23DE",!0],underbrace:[b.UnderOver,"23DF",!0],overparen:[b.UnderOver,"23DC"],underparen:[b.UnderOver,"23DD"],overrightarrow:[b.UnderOver,"2192"],underrightarrow:[b.UnderOver,"2192"],overleftarrow:[b.UnderOver,"2190"],underleftarrow:[b.UnderOver,"2190"],overleftrightarrow:[b.UnderOver,"2194"],underleftrightarrow:[b.UnderOver,"2194"],overset:b.Overset,underset:b.Underset,overunderset:b.Overunderset,stackrel:[b.Macro,"\\mathrel{\\mathop{#2}\\limits^{#1}}",2],stackbin:[b.Macro,"\\mathbin{\\mathop{#2}\\limits^{#1}}",2],over:b.Over,overwithdelims:b.Over,atop:b.Over,atopwithdelims:b.Over,above:b.Over,abovewithdelims:b.Over,brace:[b.Over,"{","}"],brack:[b.Over,"[","]"],choose:[b.Over,"(",")"],frac:b.Frac,sqrt:b.Sqrt,root:b.Root,uproot:[b.MoveRoot,"upRoot"],leftroot:[b.MoveRoot,"leftRoot"],left:b.LeftRight,right:b.LeftRight,middle:b.LeftRight,llap:b.Lap,rlap:b.Lap,raise:b.RaiseLower,lower:b.RaiseLower,moveleft:b.MoveLeftRight,moveright:b.MoveLeftRight,",":[b.Spacer,Oa.thinmathspace],":":[b.Spacer,Oa.mediummathspace],">":[b.Spacer,Oa.mediummathspace],";":[b.Spacer,Oa.thickmathspace],"!":[b.Spacer,Oa.negativethinmathspace],enspace:[b.Spacer,.5],quad:[b.Spacer,1],qquad:[b.Spacer,2],thinspace:[b.Spacer,Oa.thinmathspace],negthinspace:[b.Spacer,Oa.negativethinmathspace],"*":b.DiscretionaryTimes,allowbreak:b.AllowBreak,goodbreak:[b.Linebreak,l.LineBreak.GOODBREAK],badbreak:[b.Linebreak,l.LineBreak.BADBREAK],nobreak:[b.Linebreak,l.LineBreak.NOBREAK],break:b.Break,hskip:b.Hskip,hspace:b.Hskip,kern:[b.Hskip,!0],mskip:b.Hskip,mspace:b.Hskip,mkern:[b.Hskip,!0],rule:b.rule,Rule:[b.Rule],Space:[b.Rule,"blank"],nonscript:b.Nonscript,big:[b.MakeBig,h.ORD,.85],Big:[b.MakeBig,h.ORD,1.15],bigg:[b.MakeBig,h.ORD,1.45],Bigg:[b.MakeBig,h.ORD,1.75],bigl:[b.MakeBig,h.OPEN,.85],Bigl:[b.MakeBig,h.OPEN,1.15],biggl:[b.MakeBig,h.OPEN,1.45],Biggl:[b.MakeBig,h.OPEN,1.75],bigr:[b.MakeBig,h.CLOSE,.85],Bigr:[b.MakeBig,h.CLOSE,1.15],biggr:[b.MakeBig,h.CLOSE,1.45],Biggr:[b.MakeBig,h.CLOSE,1.75],bigm:[b.MakeBig,h.REL,.85],Bigm:[b.MakeBig,h.REL,1.15],biggm:[b.MakeBig,h.REL,1.45],Biggm:[b.MakeBig,h.REL,1.75],mathord:[b.TeXAtom,h.ORD],mathop:[b.TeXAtom,h.OP],mathopen:[b.TeXAtom,h.OPEN],mathclose:[b.TeXAtom,h.CLOSE],mathbin:[b.TeXAtom,h.BIN],mathrel:[b.TeXAtom,h.REL],mathpunct:[b.TeXAtom,h.PUNCT],mathinner:[b.TeXAtom,h.INNER],vtop:[b.VBox,"top"],vcenter:[b.VBox,"center"],vbox:[b.VBox,"bottom"],hsize:b.Hsize,parbox:b.ParBox,breakAlign:b.BreakAlign,buildrel:b.BuildRel,hbox:[b.HBox,0],text:b.HBox,mbox:[b.HBox,0],fbox:b.FBox,boxed:[b.Macro,"\\fbox{$\\displaystyle{#1}$}",1],framebox:b.FrameBox,makebox:b.MakeBox,strut:b.Strut,mathstrut:[b.Macro,"\\vphantom{(}"],phantom:b.Phantom,vphantom:[b.Phantom,1,0],hphantom:[b.Phantom,0,1],smash:b.Smash,acute:[b.Accent,"00B4"],grave:[b.Accent,"0060"],ddot:[b.Accent,"00A8"],dddot:[b.Accent,"20DB"],ddddot:[b.Accent,"20DC"],tilde:[b.Accent,"007E"],bar:[b.Accent,"00AF"],breve:[b.Accent,"02D8"],check:[b.Accent,"02C7"],hat:[b.Accent,"005E"],vec:[b.Accent,"2192",!1],dot:[b.Accent,"02D9"],widetilde:[b.Accent,"007E",!0],widehat:[b.Accent,"005E",!0],matrix:b.Matrix,array:b.Matrix,pmatrix:[b.Matrix,"(",")"],cases:[b.Matrix,"{","","left left",null,".2em",null,!0],eqalign:[b.Matrix,null,null,"right left",Dl,".5em","D"],displaylines:[b.Matrix,null,null,"center",null,".5em","D"],cr:b.Cr,"\\":b.CrLaTeX,newline:[b.CrLaTeX,!0],hline:b.HLine,hdashline:[b.HLine,"dashed"],eqalignno:[b.Matrix,null,null,"right left",Dl,".5em","D",null,"right"],leqalignno:[b.Matrix,null,null,"right left",Dl,".5em","D",null,"left"],hfill:b.HFill,hfil:b.HFill,hfilll:b.HFill,bmod:[b.Macro,'\\mmlToken{mo}[lspace="'+Dl+'" rspace="'+Dl+'"]{mod}'],pmod:[b.Macro,"\\pod{\\mmlToken{mi}{mod}\\kern 6mu #1}",1],mod:[b.Macro,"\\mathchoice{\\kern18mu}{\\kern12mu}{\\kern12mu}{\\kern12mu}\\mmlToken{mi}{mod}\\,\\,#1",1],pod:[b.Macro,"\\mathchoice{\\kern18mu}{\\kern8mu}{\\kern8mu}{\\kern8mu}(#1)",1],iff:[b.Macro,"\\;\\Longleftrightarrow\\;"],skew:[b.Macro,"{{#2{#3\\mkern#1mu}\\mkern-#1mu}{}}",3],pmb:[b.Macro,"\\rlap{#1}\\kern1px{#1}",1],TeX:[b.Macro,"T\\kern-.14em\\lower.5ex{E}\\kern-.115em X"],LaTeX:[b.Macro,"L\\kern-.325em\\raise.21em{\\scriptstyle{A}}\\kern-.17em\\TeX"],not:b.Not,dots:b.Dots,space:b.Tilde,"Â ":b.Tilde," ":b.Tilde,begin:b.BeginEnd,end:b.BeginEnd,label:b.HandleLabel,ref:b.HandleRef,nonumber:b.HandleNoTag,newcolumntype:b.NewColumnType,mathchoice:b.MathChoice,mmlToken:b.MmlToken}),new Xo("environment",Ml.environment,{displaymath:[b.Equation,null,!1],math:[b.Equation,null,!1,!1],array:[b.AlignedArray],darray:[b.AlignedArray,null,"D"],equation:[b.Equation,null,!0],eqnarray:[b.EqnArray,null,!0,!0,"rcl","bmt",f.cols(0,Oa.thickmathspace),".5em"],indentalign:[b.IndentAlign]}),new Ho("not_remap",null,{"â†":"â†š","â†’":"â†›","â†”":"â†®","â‡":"â‡","â‡’":"â‡","â‡”":"â‡","âˆˆ":"âˆ‰","âˆ‹":"âˆŒ","âˆ£":"âˆ¤","âˆ¥":"âˆ¦","âˆ¼":"â‰","~":"â‰","â‰ƒ":"â‰„","â‰…":"â‰‡","â‰ˆ":"â‰‰","â‰":"â‰­","=":"â‰ ","â‰¡":"â‰¢","<":"â‰®",">":"â‰¯","â‰¤":"â‰°","â‰¥":"â‰±","â‰²":"â‰´","â‰³":"â‰µ","â‰¶":"â‰¸","â‰·":"â‰¹","â‰º":"âŠ€","â‰»":"âŠ","âŠ‚":"âŠ„","âŠƒ":"âŠ…","âŠ†":"âŠˆ","âŠ‡":"âŠ‰","âŠ¢":"âŠ¬","âŠ¨":"âŠ­","âŠ©":"âŠ®","âŠ«":"âŠ¯","â‰¼":"â‹ ","â‰½":"â‹¡","âŠ‘":"â‹¢","âŠ’":"â‹£","âŠ²":"â‹ª","âŠ³":"â‹«","âŠ´":"â‹¬","âŠµ":"â‹­","âˆƒ":"âˆ„"}),l.Variant);function Bl(t,e){const i=t.stack.env.font,s=t.stack.env.italicFont,r=i?{mathvariant:i}:{},n=Ko.getMap("remap").lookup(e),a=rn(e),o=a[3],l=t.create("token",o,r,n?n.char:e),c=f.isLatinOrGreekChar(e)?t.configuration.mathStyle(e,!0)||s:"",h=a[4]||(i&&c===Pl.NORMAL?"":c);h&&l.attributes.set("mathvariant",h),"mo"===o&&(d.setProperty(l,"fixStretchy",!0),t.configuration.addNode("fixStretchy",l)),t.Push(l)}new Ho("remap",null,{"-":"âˆ’","*":"âˆ—","`":"â€˜"});class Fl extends So{}const Ul=$o.create("base",{[c.CONFIG]:function(t,e){const i=e.parseOptions.options;i.digits&&(i.numberPattern=i.digits),new qo("digit",Ml.digit,i.initialDigit),new qo("letter",Ml.variable,i.initialLetter),t.handlers.get(p.CHARACTER).add(["letter","digit"],null,4)},[c.HANDLER]:{[p.CHARACTER]:["command","special"],[p.DELIMITER]:["delimiter"],[p.MACRO]:["delimiter","macros","lcGreek","ucGreek","mathchar0mi","mathchar0mo","mathchar7"],[p.ENVIRONMENT]:["environment"]},[c.FALLBACK]:{[p.CHARACTER]:Bl,[p.MACRO]:function(t,e){throw new g("UndefinedControlSequence","Undefined control sequence %1","\\"+e)},[p.ENVIRONMENT]:function(t,e){throw new g("UnknownEnv","Unknown environment '%1'",e)}},[c.ITEMS]:{[el.prototype.kind]:el,[il.prototype.kind]:il,[sl.prototype.kind]:sl,[rl.prototype.kind]:rl,[nl.prototype.kind]:nl,[al.prototype.kind]:al,[ol.prototype.kind]:ol,[ll.prototype.kind]:ll,[cl.prototype.kind]:cl,[hl.prototype.kind]:hl,[dl.prototype.kind]:dl,[ul.prototype.kind]:ul,[pl.prototype.kind]:pl,[ml.prototype.kind]:ml,[gl.prototype.kind]:gl,[fl.prototype.kind]:fl,[bl.prototype.kind]:bl,[El.prototype.kind]:El,[Nl.prototype.kind]:Nl,[yl.prototype.kind]:yl,[xl.prototype.kind]:xl,[Al.prototype.kind]:Al,[vl.prototype.kind]:vl,[_l.prototype.kind]:_l,[wl.prototype.kind]:wl,[Tl.prototype.kind]:Tl},[c.OPTIONS]:{maxMacros:1e3,digits:"",numberPattern:/^(?:[0-9]+(?:\{,\}[0-9]{3})*(?:\.[0-9]*)?|\.[0-9]+)/,initialDigit:/[0-9.,]/,identifierPattern:/^[a-zA-Z]+/,initialLetter:/[a-zA-Z]/,baseURL:Ws.document&&0!==Ws.document.getElementsByTagName("base").length?String(Ws.document.location).replace(/#.*$/,""):""},[c.TAGS]:{base:Fl},[c.POSTPROCESSORS]:[[function({data:t}){for(const i of t.getList("nonscript"))if(0<i.attributes.get("scriptlevel")){const s=i.parent;var e;s.childNodes.splice(s.childIndex(i),1),t.removeFromList(i.kind,[i]),i.isKind("mrow")&&(e=i.childNodes[0],t.removeFromList("mstyle",[e]),t.removeFromList("mspace",e.childNodes[0].childNodes))}else i.isKind("mrow")&&(i.parent.replaceChild(i.childNodes[0],i),t.removeFromList("mrow",[i]))},-4]]});class ql extends Cr{static configure(t){const e=new tl(t,["tex"]);return e.init(),e}static tags(t,e){Do.addTags(e.tags),Do.setDefault(t.options.tags),t.tags=Do.getDefault(),t.tags.configuration=t}constructor(t={}){var[t,e,i]=fr(t,ql.OPTIONS,ro.OPTIONS);super(e),this.findTeX=this.options.FindTeX||new ro(i);const s=this.options.packages,r=this.configuration=ql.configure(s),n=this._parseOptions=new Co(r,[this.options,Do.OPTIONS]);mr(n.options,t),r.config(this),ql.tags(n,r),this.postFilters.addList([[co.cleanSubSup,-7],[co.setInherited,-6],[co.checkScriptlevel,-5],[co.moveLimits,-4],[co.cleanStretchy,-3],[co.cleanAttributes,-2],[co.combineRelations,-1]])}setMmlFactory(t){super.setMmlFactory(t),this._parseOptions.nodeFactory.setMmlFactory(t)}get parseOptions(){return this._parseOptions}reset(t=0){this.parseOptions.tags.reset(t)}compile(t,e){let i,s;this.parseOptions.clear(),this.parseOptions.mathItem=t,this.executeFilters(this.preFilters,t,e,this.parseOptions),this.latex=t.math,this.parseOptions.tags.startEquation(t);try{s=new go(this.latex,{display:t.display,isInner:!1},this.parseOptions),i=s.mml()}catch(t){if(!(t instanceof g))throw t;this.parseOptions.error=!0,i=this.options.formatError(this,t)}return(i=this.parseOptions.nodeFactory.create("node","math",[i])).attributes.set(l.Attr.LATEX,this.latex),t.display&&d.setAttribute(i,"display","block"),this.parseOptions.tags.finishEquation(t),this.parseOptions.root=i,this.executeFilters(this.postFilters,t,e,this.parseOptions),s&&s.stack.env.hsize&&(d.setAttribute(i,"maxwidth",s.stack.env.hsize),d.setAttribute(i,"overflow","linebreak")),this.mathNode=this.parseOptions.root,this.mathNode}findMath(t){return this.findTeX.findMath(t)}formatError(t){var e=t.message.replace(/\n.*/,"");return this.parseOptions.nodeFactory.create("error",e,t.id,this.latex)}}ql.NAME="TeX",ql.OPTIONS=Object.assign(Object.assign({},Cr.OPTIONS),{FindTeX:null,packages:["base"],maxBuffer:5120,maxTemplateSubtitutions:1e4,mathStyle:"TeX",formatError:(t,e)=>t.formatError(e)});class jl extends vl{constructor(t,...e){super(t),this.factory.configuration.tags.start("multline",!0,e[0])}get kind(){return"multline"}EndEntry(){this.table.length&&f.fixInitialMO(this.factory.configuration,this.nodes);var t=this.getProperty("shove"),t=this.create("node","mtd",this.nodes,t?{columnalign:t}:{});this.setProperty("shove",null),this.row.push(t),this.Clear()}EndRow(){if(1!==this.row.length)throw new g("MultlineRowsOneCol","The rows within the %1 environment must have exactly one column","multline");var t=this.create("node","mtr",this.row);this.table.push(t),this.row=[]}EndTable(){if(super.EndTable(),this.table.length){var t,e=this.table.length-1,i=-1;d.getAttribute(d.getChildren(this.table[0])[0],"columnalign")||d.setAttribute(d.getChildren(this.table[0])[0],"columnalign",l.Align.LEFT),d.getAttribute(d.getChildren(this.table[e])[0],"columnalign")||d.setAttribute(d.getChildren(this.table[e])[0],"columnalign",l.Align.RIGHT);const s=this.factory.configuration.tags.getTag();s&&(i=this.arraydef.side===l.Align.LEFT?0:this.table.length-1,e=this.table[i],t=this.create("node","mlabeledtr",[s].concat(d.getChildren(e))),d.copyAttributes(e,t),this.table[i]=t)}this.factory.configuration.tags.end()}}class Hl extends _l{get kind(){return"flalign"}constructor(t,e,i,s,r){super(t),this.name=e,this.numbered=i,this.padded=s,this.center=r,this.factory.configuration.tags.start(e,i,i)}EndEntry(){super.EndEntry();var t=this.getProperty("xalignat");if(t&&this.row.length>t)throw new g("XalignOverflow","Extra %1 in row of %2","&",this.name)}EndRow(){let t;const e=this.row,i=this.getProperty("xalignat");for(;e.length<i;)e.push(this.create("node","mtd"));for(this.row=[],this.padded&&this.row.push(this.create("node","mtd"));t=e.shift();)this.row.push(t),(t=e.shift())&&this.row.push(t),(e.length||this.padded)&&this.row.push(this.create("node","mtd"));this.row.length>this.maxrow&&(this.maxrow=this.row.length),super.EndRow();const s=this.table[this.table.length-1];if(this.getProperty("zeroWidthLabel")&&s.isKind("mlabeledtr")){const t=d.getChildren(s)[0],e=this.factory.configuration.options.tagSide,i=Object.assign({width:0},"right"===e?{lspace:"-1width"}:{}),r=this.create("node","mpadded",d.getChildren(t),i);t.setChildren([r])}}EndTable(){super.EndTable(),this.center&&this.maxrow<=2&&(delete this.arraydef.width,delete this.global.indentalign)}}(G=ho=ho||{}).NEW_DELIMITER="new-Delimiter",G.NEW_COMMAND="new-Command",G.NEW_ENVIRONMENT="new-Environment";const Gl=-100,Vl={GetCSname(t,e){if("\\"!==t.GetNext())throw new g("MissingCS","%1 must be followed by a control sequence",e);e=m.trimSpaces(t.GetArgument(e)).substring(1);return this.checkProtectedMacros(t,e),e},GetCsNameArgument(t,e){let i=m.trimSpaces(t.GetArgument(e));if((i="\\"===i.charAt(0)?i.substring(1):i).match(/^(.|[a-z]+)$/i))return this.checkProtectedMacros(t,i),i;throw new g("IllegalControlSequenceName","Illegal control sequence name for %1",e)},GetArgCount(t,e){let i=t.GetBrackets(e);if(i&&!(i=m.trimSpaces(i)).match(/^[0-9]+$/))throw new g("IllegalParamNumber","Illegal number of parameters specified in %1",e);return i},GetTemplate(t,e,i){let s=t.GetNext();const r=[];let n=0,a=t.i;for(;t.i<t.string.length;){if("#"===(s=t.GetNext())){if(a!==t.i&&(r[n]=t.string.substring(a,t.i)),!(s=t.string.charAt(++t.i)).match(/^[1-9]$/))throw new g("CantUseHash2","Illegal use of # in template for %1",i);if(parseInt(s)!==++n)throw new g("SequentialParam","Parameters for %1 must be numbered sequentially",i);a=t.i+1}else if("{"===s)return a!==t.i&&(r[n]=t.string.substring(a,t.i)),0<r.length?[n.toString()].concat(r):n;t.i++}throw new g("MissingReplacementString","Missing replacement string for definition of %1",e)},GetParameter(t,e,i){if(null==i)return t.GetArgument(e);let s=t.i,r=0,n=!1;for(;t.i<t.string.length;){var a=t.string.charAt(t.i);if("{"===a)n=t.i===s,t.GetArgument(e),r=t.i-s;else{if(this.MatchParam(t,i))return n&&(s++,r-=2),t.string.substring(s,s+r);if("\\"===a){t.i++,r++,n=!1;const e=t.string.substring(t.i).match(/[a-z]+|./i);e&&(t.i+=e[0].length,r=t.i-s)}else t.i++,r++,n=!1}}throw new g("RunawayArgument","Runaway argument for %1?",e)},MatchParam:(t,e)=>t.string.substring(t.i,t.i+e.length)!==e||e.match(/\\[a-z]+$/i)&&t.string.charAt(t.i+e.length).match(/[a-z]/i)?0:(t.i+=e.length,1),checkGlobal:(e,t,i)=>e.stack.env.isGlobal?e.configuration.packageData.get("begingroup").stack.checkGlobal(t,i):i.map(t=>e.configuration.handlers.retrieve(t)),checkProtectedMacros(t,e){if(null!=(t=t.options.protectedMacros)&&t.includes(e))throw new g("ProtectedMacro","The control sequence %1 can't be redefined","\\"+e)},addDelimiter(t,e,i,s){var r=e.substring(1);this.checkProtectedMacros(t,r);const[n,a]=Vl.checkGlobal(t,[r,e],[ho.NEW_COMMAND,ho.NEW_DELIMITER]);r!==e&&n.remove(r),a.add(e,new Po(e,i,s)),delete t.stack.env.isGlobal},addMacro(t,e,i,s,r=""){this.checkProtectedMacros(t,e);const n=Vl.checkGlobal(t,[e],[ho.NEW_COMMAND])[0];this.undefineDelimiter(t,"\\"+e),n.add(e,new Bo(r||e,i,s)),delete t.stack.env.isGlobal},addEnvironment(t,e,i,s){Vl.checkGlobal(t,[e],[ho.NEW_ENVIRONMENT])[0].add(e,new Bo(e,i,s)),delete t.stack.env.isGlobal},undefineMacro(t,e){const i=Vl.checkGlobal(t,[e],[ho.NEW_COMMAND])[0];i.remove(e),t.configuration.handlers.get(p.MACRO).applicable(e)&&(i.add(e,new Bo(e,()=>Jo.FALLBACK,[])),this.undefineDelimiter(t,"\\"+e)),delete t.stack.env.isGlobal},undefineDelimiter(t,e){const i=Vl.checkGlobal(t,[e],[ho.NEW_DELIMITER])[0];i.remove(e),t.configuration.handlers.get(p.DELIMITER).applicable(e)&&i.add(e,new Po(e,null,{})),delete t.stack.env.isGlobal}};function Wl(t){if(!t||t.isInferred&&0===t.childNodes.length)return[null,null];if(t.isKind("msubsup")&&Xl(t))return[t,null];var e=d.getChildAt(t,0);return t.isInferred&&e&&Xl(e)?(t.childNodes.splice(0,1),[e,t]):[null,t]}function Xl(t){const e=t.childNodes[0];return e&&e.isKind("mi")&&""===e.getText()}const N={AmsEqnArray(t,e,i,s,r,n,a,o){var l=t.GetBrackets("\\begin{"+e.getName()+"}"),e=b.EqnArray(t,e,i,s,r,n,a,o);return f.setArrayAlign(e,l,t)},AlignAt(t,e,i,s){var r=e.getName();let n,a="",o="";const l=[],c=(s||(n=t.GetBrackets("\\begin{"+r+"}")),t.GetArgument("\\begin{"+r+"}"));if(c.match(/[^0-9]/))throw new g("PositiveIntegerArg","Argument to %1 must be a positive integer","\\begin{"+r+"}");let h=parseInt(c,10);for(;0<h;)a+="rl",o+="bt",l.push("0em 0em"),h--;r=l.join(" ");if(s)return N.EqnArray(t,e,i,s,a,o,r);e=N.EqnArray(t,e,i,s,a,o,r);return f.setArrayAlign(e,n,t)},Multline(t,e,i){f.checkEqnEnv(t),t.Push(e);const s=t.options.ams.multlineIndent,r=t.itemFactory.create("multline",i,t.stack);return r.arraydef={displaystyle:!0,rowspacing:".5em",columnspacing:"100%",width:t.options.ams.multlineWidth,side:t.options.tagSide,minlabelspacing:t.options.tagIndent,"data-array-padding":s+" "+s,"data-width-includes-label":!0},r},XalignAt(t,e,i,s){const r=t.GetArgument("\\begin{"+e.getName()+"}");if(r.match(/[^0-9]/))throw new g("PositiveIntegerArg","Argument to %1 must be a positive integer","\\begin{"+e.getName()+"}");const n=s?"crl":"rlc",a=s?"mbt":"btm",o=s?"fit auto auto":"auto auto fit",l=N.FlalignArray(t,e,i,s,!1,n,a,o,!0);return l.setProperty("xalignat",2*parseInt(r)),l},FlalignArray(t,e,i,s,r,n,a,o,l=!1){f.checkEqnEnv(t),t.Push(e),n=n.split("").join(" ").replace(/r/g,"right").replace(/l/g,"left").replace(/c/g,"center"),a=Ll(a);const c=t.itemFactory.create("flalign",e.getName(),i,s,r,t.stack);return c.arraydef={width:"100%",displaystyle:!0,columnalign:n,columnspacing:"0em",columnwidth:o,rowspacing:"3pt","data-break-align":a,side:t.options.tagSide,minlabelspacing:l?"0":t.options.tagIndent,"data-width-includes-label":!0},c.setProperty("zeroWidthLabel",l),c},HandleDeclareOp(t,e){var i=t.GetStar()?"*":"",s=Vl.GetCsNameArgument(t,e),e=t.GetArgument(e);Vl.addMacro(t,s,N.Macro,[`\\operatorname${i}{${e}}`]),t.Push(t.itemFactory.create("null"))},HandleOperatorName(t,e){const i=t.GetStar(),s=m.trimSpaces(t.GetArgument(e));let r=new go(s,Object.assign(Object.assign({},t.stack.env),{font:l.Variant.NORMAL,multiLetterIdentifiers:t.options.ams.operatornamePattern,operatorLetters:!0}),t.configuration).mml();if(r.isKind("mi")||(r=t.create("node","TeXAtom",[r])),d.setProperties(r,{movesupsub:i,movablelimits:!0,texClass:h.OP}),!i){const e=t.GetNext(),i=t.i;"\\"===e&&++t.i&&"limits"!==t.GetCS()&&(t.i=i)}t.Push(t.itemFactory.create("fn",r))},SideSet(t,e){const[i,s]=Wl(t.ParseArg(e)),[r,n]=Wl(t.ParseArg(e)),a=t.ParseArg(e);let o=a;i&&(s?i.replaceChild(t.create("node","mphantom",[t.create("node","mpadded",[f.copyNode(a,t)],{width:0})]),d.getChildAt(i,0)):(o=t.create("node","mmultiscripts",[a]),r&&d.appendChildren(o,[d.getChildAt(r,1)||t.create("node","none"),d.getChildAt(r,2)||t.create("node","none")]),d.setProperty(o,"scriptalign","left"),d.appendChildren(o,[t.create("node","mprescripts"),d.getChildAt(i,1)||t.create("node","none"),d.getChildAt(i,2)||t.create("node","none")]))),r&&o===a&&(r.replaceChild(a,d.getChildAt(r,0)),o=r);const l=t.create("node","TeXAtom",[],{texClass:h.OP,movesupsub:!0,movablelimits:!0});s&&(i&&l.appendChild(i),l.appendChild(s)),l.appendChild(o),n&&l.appendChild(n),t.Push(l)},operatorLetter:(t,e)=>!!t.stack.env.operatorLetters&&Ml.variable(t,e),MultiIntegral(t,e,i){var s,r=t.GetNext();"\\"===r&&(s=t.i,r=t.GetArgument(e),t.i=s,"\\limits"===r&&(i="\\!\\!\\mathop{\\,\\,"+i+"}")),t.string=i+" "+t.string.slice(t.i),t.i=0},xArrow(t,e,i,s,r,n=0){var r={width:"+"+m.em((s+r)/18),lspace:m.em(s/18)},s=t.GetBrackets(e),e=t.ParseArg(e),a=t.create("node","mspace",[],{depth:".2em"});let o=t.create("token","mo",{stretchy:!0,texClass:h.REL},String.fromCodePoint(i));n&&o.attributes.set("minsize",m.em(n)),o=t.create("node","mstyle",[o],{scriptlevel:0});n=t.create("node","munderover",[o]),a=t.create("node","mpadded",[e,a],r);if(d.setAttribute(a,"voffset","-.2em"),d.setAttribute(a,"height","-.2em"),d.setChild(n,n.over,a),s){const e=new go(s,t.stack.env,t.configuration).mml(),i=t.create("node","mspace",[],{height:".75em"});a=t.create("node","mpadded",[e,i],r),d.setAttribute(a,"voffset",".15em"),d.setAttribute(a,"depth","-.15em"),d.setChild(n,n.under,a)}d.setProperty(n,"subsupOK",!0),t.Push(n)},HandleShove(t,e,i){const s=t.stack.Top();if("multline"!==s.kind)throw new g("CommandOnlyAllowedInEnv","%1 only allowed in %2 environment",t.currentCS,"multline");if(s.Size())throw new g("CommandAtTheBeginingOfLine","%1 must come at the beginning of the line",t.currentCS);s.setProperty("shove",i)},CFrac(t,e){var i=m.trimSpaces(t.GetBrackets(e,"")),s=t.GetArgument(e),e=t.GetArgument(e),r={l:l.Align.LEFT,r:l.Align.RIGHT,"":""},s=new go("\\strut\\textstyle{"+s+"}",t.stack.env,t.configuration).mml(),e=new go("\\strut\\textstyle{"+e+"}",t.stack.env,t.configuration).mml(),s=t.create("node","mfrac",[s,e]);if(null==(i=r[i]))throw new g("IllegalAlign","Illegal alignment specified in %1",t.currentCS);i&&d.setProperties(s,{numalign:i,denomalign:i}),t.Push(s)},Genfrac(t,e,i,s,r,n){null==i&&(i=t.GetDelimiterArg(e)),null==s&&(s=t.GetDelimiterArg(e)),null==r&&(r=t.GetArgument(e)),null==n&&(n=m.trimSpaces(t.GetArgument(e)));var a=t.ParseArg(e),e=t.ParseArg(e);let o=t.create("node","mfrac",[a,e]);if(""!==r&&d.setAttribute(o,"linethickness",r),(i||s)&&(d.setProperty(o,"withDelims",!0),o=f.fixedFence(t.configuration,i,o,s)),""!==n){const e=parseInt(n,10),i=["D","T","S","SS"][e];if(null==i)throw new g("BadMathStyleFor","Bad math style for %1",t.currentCS);o=t.create("node","mstyle",[o]),"D"===i?d.setProperties(o,{displaystyle:!0,scriptlevel:0}):d.setProperties(o,{displaystyle:!1,scriptlevel:e-1})}t.Push(o)},HandleTag(t,e){if(!t.tags.currentTag.taggable&&t.tags.env)throw new g("CommandNotAllowedInEnv","%1 not allowed in %2 environment",t.currentCS,t.tags.env);if(t.tags.currentTag.tag)throw new g("MultipleCommand","Multiple %1",t.currentCS);var i=t.GetStar(),e=m.trimSpaces(t.GetArgument(e));t.tags.tag(e,i),t.Push(t.itemFactory.create("null"))},HandleNoTag:b.HandleNoTag,HandleRef:b.HandleRef,Macro:b.Macro,Accent:b.Accent,Tilde:b.Tilde,Array:b.Array,Spacer:b.Spacer,NamedOp:b.NamedOp,EqnArray:b.EqnArray,Equation:b.Equation};new Ho("AMSmath-mathchar0mo",Ml.mathchar0mo,{iiiint:["â¨Œ",{texClass:h.OP}]}),new qo("AMSmath-operatorLetter",N.operatorLetter,/[-*]/i),new Wo("AMSmath-macros",{mathring:[N.Accent,"02DA"],nobreakspace:N.Tilde,negmedspace:[N.Spacer,Oa.negativemediummathspace],negthickspace:[N.Spacer,Oa.negativethickmathspace],idotsint:[N.MultiIntegral,"\\int\\cdots\\int"],dddot:[N.Accent,"20DB"],ddddot:[N.Accent,"20DC"],sideset:N.SideSet,boxed:[N.Macro,"\\fbox{$\\displaystyle{#1}$}",1],tag:N.HandleTag,notag:N.HandleNoTag,eqref:[N.HandleRef,!0],substack:[N.Macro,"\\begin{subarray}{c}#1\\end{subarray}",1],injlim:[N.NamedOp,"inj&thinsp;lim"],projlim:[N.NamedOp,"proj&thinsp;lim"],varliminf:[N.Macro,"\\mathop{\\underline{\\mmlToken{mi}{lim}}}"],varlimsup:[N.Macro,"\\mathop{\\overline{\\mmlToken{mi}{lim}}}"],varinjlim:[N.Macro,"\\mathop{\\underrightarrow{\\mmlToken{mi}{lim}}}"],varprojlim:[N.Macro,"\\mathop{\\underleftarrow{\\mmlToken{mi}{lim}}}"],DeclareMathOperator:N.HandleDeclareOp,operatorname:N.HandleOperatorName,genfrac:N.Genfrac,frac:[N.Genfrac,"","","",""],tfrac:[N.Genfrac,"","","","1"],dfrac:[N.Genfrac,"","","","0"],binom:[N.Genfrac,"(",")","0",""],tbinom:[N.Genfrac,"(",")","0","1"],dbinom:[N.Genfrac,"(",")","0","0"],cfrac:N.CFrac,shoveleft:[N.HandleShove,l.Align.LEFT],shoveright:[N.HandleShove,l.Align.RIGHT],xrightarrow:[N.xArrow,8594,5,10],xleftarrow:[N.xArrow,8592,10,5]}),new Xo("AMSmath-environment",Ml.environment,{"equation*":[N.Equation,null,!1],"eqnarray*":[N.EqnArray,null,!1,!0,"rcl","bmt",f.cols(0,Oa.thickmathspace),".5em"],align:[N.EqnArray,null,!0,!0,"rl","bt",f.cols(0,2)],"align*":[N.EqnArray,null,!1,!0,"rl","bt",f.cols(0,2)],multline:[N.Multline,null,!0],"multline*":[N.Multline,null,!1],split:[N.EqnArray,null,!1,!1,"rl","bt",f.cols(0)],gather:[N.EqnArray,null,!0,!0,"c","m"],"gather*":[N.EqnArray,null,!1,!0,"c","m"],alignat:[N.AlignAt,null,!0,!0],"alignat*":[N.AlignAt,null,!1,!0],alignedat:[N.AlignAt,null,!1,!1],aligned:[N.AmsEqnArray,null,null,null,"rl","bt",f.cols(0,2),".5em","D"],gathered:[N.AmsEqnArray,null,null,null,"c","m",null,".5em","D"],xalignat:[N.XalignAt,null,!0,!0],"xalignat*":[N.XalignAt,null,!1,!0],xxalignat:[N.XalignAt,null,!1,!1],flalign:[N.FlalignArray,null,!0,!1,!0,"rlc","btm","auto auto fit"],"flalign*":[N.FlalignArray,null,!1,!1,!0,"rlc","btm","auto auto fit"],subarray:[N.Array,null,null,null,null,f.cols(0),"0.1em","S",!0],smallmatrix:[N.Array,null,null,null,"c",f.cols(1/3),".2em","S",!0],matrix:[N.Array,null,null,null,"c"],pmatrix:[N.Array,null,"(",")","c"],bmatrix:[N.Array,null,"[","]","c"],Bmatrix:[N.Array,null,"\\{","\\}","c"],vmatrix:[N.Array,null,"\\vert","\\vert","c"],Vmatrix:[N.Array,null,"\\Vert","\\Vert","c"],cases:[N.Array,null,"\\{",".","ll",null,".2em","T"]}),new Go("AMSmath-delimiter",Ml.delimiter,{"\\lvert":["|",{texClass:h.OPEN}],"\\rvert":["|",{texClass:h.CLOSE}],"\\lVert":["â€–",{texClass:h.OPEN}],"\\rVert":["â€–",{texClass:h.CLOSE}]}),new Ho("AMSsymbols-mathchar0mi",Ml.mathchar0mi,{digamma:"Ï",varkappa:"Ï°",varGamma:["Î“",{mathvariant:l.Variant.ITALIC}],varDelta:["Î”",{mathvariant:l.Variant.ITALIC}],varTheta:["Î˜",{mathvariant:l.Variant.ITALIC}],varLambda:["Î›",{mathvariant:l.Variant.ITALIC}],varXi:["Î",{mathvariant:l.Variant.ITALIC}],varPi:["Î ",{mathvariant:l.Variant.ITALIC}],varSigma:["Î£",{mathvariant:l.Variant.ITALIC}],varUpsilon:["Î¥",{mathvariant:l.Variant.ITALIC}],varPhi:["Î¦",{mathvariant:l.Variant.ITALIC}],varPsi:["Î¨",{mathvariant:l.Variant.ITALIC}],varOmega:["Î©",{mathvariant:l.Variant.ITALIC}],beth:"â„¶",gimel:"â„·",daleth:"â„¸",backprime:["â€µ",{variantForm:!0}],hslash:"â„",varnothing:["âˆ…",{variantForm:!0}],blacktriangle:"â–´",triangledown:["â–½",{variantForm:!0}],blacktriangledown:"â–¾",square:"â—»",Box:"â—»",blacksquare:"â—¼",lozenge:"â—Š",Diamond:"â—Š",blacklozenge:"â§«",circledS:["â“ˆ",{mathvariant:l.Variant.NORMAL}],bigstar:"â˜…",sphericalangle:"âˆ¢",measuredangle:"âˆ¡",nexists:"âˆ„",complement:"âˆ",mho:"â„§",eth:["Ã°",{mathvariant:l.Variant.NORMAL}],Finv:"â„²",diagup:"â•±",Game:"â…",diagdown:"â•²",Bbbk:["k",{mathvariant:l.Variant.DOUBLESTRUCK}],yen:"Â¥",circledR:"Â®",checkmark:"âœ“",maltese:"âœ "}),new Ho("AMSsymbols-mathchar0mo",Ml.mathchar0mo,{dotplus:"âˆ”",ltimes:"â‹‰",smallsetminus:["âˆ–",{variantForm:!0}],rtimes:"â‹Š",Cap:"â‹’",doublecap:"â‹’",leftthreetimes:"â‹‹",Cup:"â‹“",doublecup:"â‹“",rightthreetimes:"â‹Œ",barwedge:"âŠ¼",curlywedge:"â‹",veebar:"âŠ»",curlyvee:"â‹",doublebarwedge:"â©",boxminus:"âŠŸ",circleddash:"âŠ",boxtimes:"âŠ ",circledast:"âŠ›",boxdot:"âŠ¡",circledcirc:"âŠš",boxplus:"âŠ",centerdot:["â‹…",{variantForm:!0}],divideontimes:"â‹‡",intercal:"âŠº",leqq:"â‰¦",geqq:"â‰§",leqslant:"â©½",geqslant:"â©¾",eqslantless:"âª•",eqslantgtr:"âª–",lesssim:"â‰²",gtrsim:"â‰³",lessapprox:"âª…",gtrapprox:"âª†",approxeq:"â‰Š",lessdot:"â‹–",gtrdot:"â‹—",lll:"â‹˜",llless:"â‹˜",ggg:"â‹™",gggtr:"â‹™",lessgtr:"â‰¶",gtrless:"â‰·",lesseqgtr:"â‹š",gtreqless:"â‹›",lesseqqgtr:"âª‹",gtreqqless:"âªŒ",doteqdot:"â‰‘",Doteq:"â‰‘",eqcirc:"â‰–",risingdotseq:"â‰“",circeq:"â‰—",fallingdotseq:"â‰’",triangleq:"â‰œ",backsim:"âˆ½",thicksim:["âˆ¼",{variantForm:!0}],backsimeq:"â‹",thickapprox:["â‰ˆ",{variantForm:!0}],subseteqq:"â«…",supseteqq:"â«†",Subset:"â‹",Supset:"â‹‘",sqsubset:"âŠ",sqsupset:"âŠ",preccurlyeq:"â‰¼",succcurlyeq:"â‰½",curlyeqprec:"â‹",curlyeqsucc:"â‹Ÿ",precsim:"â‰¾",succsim:"â‰¿",precapprox:"âª·",succapprox:"âª¸",vartriangleleft:"âŠ²",lhd:"âŠ²",vartriangleright:"âŠ³",rhd:"âŠ³",trianglelefteq:"âŠ´",unlhd:"âŠ´",trianglerighteq:"âŠµ",unrhd:"âŠµ",vDash:"âŠ¨",Vdash:"âŠ©",Vvdash:"âŠª",smallsmile:["âŒ£",{variantForm:!0}],shortmid:["âˆ£",{variantForm:!0}],smallfrown:["âŒ¢",{variantForm:!0}],shortparallel:["âˆ¥",{variantForm:!0}],bumpeq:"â‰",between:"â‰¬",Bumpeq:"â‰",pitchfork:"â‹”",varpropto:["âˆ",{variantForm:!0}],backepsilon:"âˆ",blacktriangleleft:"â—‚",blacktriangleright:"â–¸",therefore:"âˆ´",because:"âˆµ",eqsim:"â‰‚",vartriangle:["â–³",{variantForm:!0}],Join:"â‹ˆ",nless:"â‰®",ngtr:"â‰¯",nleq:"â‰°",ngeq:"â‰±",nleqslant:["âª‡",{variantForm:!0}],ngeqslant:["âªˆ",{variantForm:!0}],nleqq:["â‰°",{variantForm:!0}],ngeqq:["â‰±",{variantForm:!0}],lneq:"âª‡",gneq:"âªˆ",lneqq:"â‰¨",gneqq:"â‰©",lvertneqq:["â‰¨",{variantForm:!0}],gvertneqq:["â‰©",{variantForm:!0}],lnsim:"â‹¦",gnsim:"â‹§",lnapprox:"âª‰",gnapprox:"âªŠ",nprec:"âŠ€",nsucc:"âŠ",npreceq:["â‹ ",{variantForm:!0}],nsucceq:["â‹¡",{variantForm:!0}],precneqq:"âªµ",succneqq:"âª¶",precnsim:"â‹¨",succnsim:"â‹©",precnapprox:"âª¹",succnapprox:"âªº",nsim:"â‰",ncong:"â‰‡",nshortmid:["âˆ¤",{variantForm:!0}],nshortparallel:["âˆ¦",{variantForm:!0}],nmid:"âˆ¤",nparallel:"âˆ¦",nvdash:"âŠ¬",nvDash:"âŠ­",nVdash:"âŠ®",nVDash:"âŠ¯",ntriangleleft:"â‹ª",ntriangleright:"â‹«",ntrianglelefteq:"â‹¬",ntrianglerighteq:"â‹­",nsubseteq:"âŠˆ",nsupseteq:"âŠ‰",nsubseteqq:["âŠˆ",{variantForm:!0}],nsupseteqq:["âŠ‰",{variantForm:!0}],subsetneq:"âŠŠ",supsetneq:"âŠ‹",varsubsetneq:["âŠŠ",{variantForm:!0}],varsupsetneq:["âŠ‹",{variantForm:!0}],subsetneqq:"â«‹",supsetneqq:"â«Œ",varsubsetneqq:["â«‹",{variantForm:!0}],varsupsetneqq:["â«Œ",{variantForm:!0}],leftleftarrows:"â‡‡",rightrightarrows:"â‡‰",leftrightarrows:"â‡†",rightleftarrows:"â‡„",Lleftarrow:"â‡š",Rrightarrow:"â‡›",twoheadleftarrow:"â†",twoheadrightarrow:"â† ",leftarrowtail:"â†¢",rightarrowtail:"â†£",looparrowleft:"â†«",looparrowright:"â†¬",leftrightharpoons:"â‡‹",rightleftharpoons:["â‡Œ",{variantForm:!0}],curvearrowleft:"â†¶",curvearrowright:"â†·",circlearrowleft:"â†º",circlearrowright:"â†»",Lsh:"â†°",Rsh:"â†±",upuparrows:"â‡ˆ",downdownarrows:"â‡Š",upharpoonleft:"â†¿",upharpoonright:"â†¾",downharpoonleft:"â‡ƒ",restriction:"â†¾",multimap:"âŠ¸",downharpoonright:"â‡‚",leftrightsquigarrow:"â†­",rightsquigarrow:"â‡",leadsto:"â‡",dashrightarrow:"â‡¢",dashleftarrow:"â‡ ",nleftarrow:"â†š",nrightarrow:"â†›",nLeftarrow:"â‡",nRightarrow:"â‡",nleftrightarrow:"â†®",nLeftrightarrow:"â‡"}),new Go("AMSsymbols-delimiter",Ml.delimiter,{"\\ulcorner":"âŒœ","\\urcorner":"âŒ","\\llcorner":"âŒ","\\lrcorner":"âŒŸ"}),new Wo("AMSsymbols-macros",{implies:[N.Macro,"\\;\\Longrightarrow\\;"],impliedby:[N.Macro,"\\;\\Longleftarrow\\;"]});class zl extends n{get kind(){return"beginEnv"}get isOpen(){return!0}checkItem(t){if(t.isKind("end")){if(t.getName()!==this.getName())throw new g("EnvBadEnd","\\begin{%1} ended with \\end{%2}",this.getName(),t.getName());return[[this.factory.create("mml",this.toMml())],!0]}if(t.isKind("stop"))throw new g("EnvMissingEnd","Missing \\end{%1}",this.getName());return super.checkItem(t)}}const Kl={NewCommand(t,e){var i=Vl.GetCsNameArgument(t,e),s=Vl.GetArgCount(t,e),r=t.GetBrackets(e),e=t.GetArgument(e);Vl.addMacro(t,i,Kl.Macro,[e,s,r]),t.Push(t.itemFactory.create("null"))},NewEnvironment(t,e){var i=m.trimSpaces(t.GetArgument(e)),s=Vl.GetArgCount(t,e),r=t.GetBrackets(e),n=t.GetArgument(e),e=t.GetArgument(e);Vl.addEnvironment(t,i,Kl.BeginEnv,[!0,n,e,s,r]),t.Push(t.itemFactory.create("null"))},MacroDef(t,e){const i=Vl.GetCSname(t,e),s=Vl.GetTemplate(t,e,"\\"+i),r=t.GetArgument(e);s instanceof Array?Vl.addMacro(t,i,Kl.MacroWithTemplate,[r].concat(s)):Vl.addMacro(t,i,Kl.Macro,[r,s]),t.Push(t.itemFactory.create("null"))},Let(t,e){var i=Vl.GetCSname(t,e);let s=t.GetNext();"="===s&&(t.i++,s=t.GetNext());const r=t.configuration.handlers;if(t.Push(t.itemFactory.create("null")),"\\"===s){if(i===(e=Vl.GetCSname(t,e)))return;const s=r.get(p.MACRO).applicable(e);if(s instanceof Vo){const r=s.lookup(e);return void Vl.addMacro(t,i,r.func,r.args,r.token)}if(s instanceof Ho&&!(s instanceof Go)){const r=s.lookup(e),n=t=>s.parser(t,r);return void Vl.addMacro(t,i,n,[i,r.char])}const n=r.get(p.DELIMITER).lookup("\\"+e);return n?void Vl.addDelimiter(t,"\\"+i,n.char,n.attributes):(Vl.checkProtectedMacros(t,i),Vl.undefineMacro(t,i),void Vl.undefineDelimiter(t,"\\"+i))}t.i++;const n=r.get(p.DELIMITER).lookup(s);n?Vl.addDelimiter(t,"\\"+i,n.char,n.attributes):Vl.addMacro(t,i,Kl.Macro,[s])},MacroWithTemplate(e,i,t,s,...r){var n=parseInt(s,10);if(r.length){const s=[];if(e.GetNext(),r[0]&&!Vl.MatchParam(e,r[0]))throw new g("MismatchUseDef","Use of %1 doesn't match its definition",i);if(n){for(let t=0;t<n;t++)s.push(Vl.GetParameter(e,i,r[t+1]));t=f.substituteArgs(e,s,t)}}e.string=f.addArgs(e,t,e.string.slice(e.i)),e.i=0,f.checkMaxMacros(e)},BeginEnv(e,i,t,s,r,n){var a=i.getName();if(e.stack.env.closing===a){if(delete e.stack.env.closing,e.stack.global.beginEnv&&(e.stack.global.beginEnv--,s)){const i=e.string.slice(e.i);e.string=f.addArgs(e,e.string.substring(0,e.i),s),e.Parse(),e.string=i,e.i=0}return e.itemFactory.create("end").setProperty("name",a)}if(r){const i=[];if(null!=n){const t=e.GetBrackets(`\\begin{${a}}`);i.push(null==t?n:t)}for(let t=i.length;t<r;t++)i.push(e.GetArgument(`\\begin{${a}}`));t=f.substituteArgs(e,i,t),s=f.substituteArgs(e,[],s)}return e.string=f.addArgs(e,t,e.string.slice(e.i)),e.i=0,e.stack.global.beginEnv=(e.stack.global.beginEnv||0)+1,e.itemFactory.create("beginEnv").setProperty("name",a)},Macro:b.Macro},Jl=Kl;function Yl(t,e){e.parseOptions.packageData.has("newcommand")||(e.parseOptions.packageData.set("newcommand",{}),new Go(ho.NEW_DELIMITER,Ml.delimiter,{}),new Wo(ho.NEW_COMMAND,{}),new Xo(ho.NEW_ENVIRONMENT,Ml.environment,{}),e.parseOptions.handlers.add({[p.CHARACTER]:[],[p.DELIMITER]:[ho.NEW_DELIMITER],[p.MACRO]:[ho.NEW_DELIMITER,ho.NEW_COMMAND],[p.ENVIRONMENT]:[ho.NEW_ENVIRONMENT]},{},Gl))}new Wo("Newcommand-macros",{newcommand:Jl.NewCommand,renewcommand:Jl.NewCommand,newenvironment:Jl.NewEnvironment,renewenvironment:Jl.NewEnvironment,def:Jl.MacroDef,let:Jl.Let});const $l=$o.create("newcommand",{[c.HANDLER]:{macro:["Newcommand-macros"]},[c.ITEMS]:{[zl.prototype.kind]:zl},[c.OPTIONS]:{maxMacros:1e3,protectedMacros:["begingroupSandbox"]},[c.CONFIG]:Yl});class Ql extends So{}const Zl=$o.create("ams",{[c.HANDLER]:{[p.CHARACTER]:["AMSmath-operatorLetter"],[p.DELIMITER]:["AMSsymbols-delimiter","AMSmath-delimiter"],[p.MACRO]:["AMSsymbols-mathchar0mi","AMSsymbols-mathchar0mo","AMSsymbols-delimiter","AMSsymbols-macros","AMSmath-mathchar0mo","AMSmath-macros","AMSmath-delimiter"],[p.ENVIRONMENT]:["AMSmath-environment"]},[c.ITEMS]:{[jl.prototype.kind]:jl,[Hl.prototype.kind]:Hl},[c.TAGS]:{ams:Ql},[c.OPTIONS]:{multlineWidth:"",ams:{operatornamePattern:/^[-*a-zA-Z]+/,multlineWidth:"100%",multlineIndent:"1em"}},[c.CONFIG]:Yl}),tc=Nr.config;function ec(e,i,s){var r=Zo.get(s);if(r){let t=tc[i]||{};r.options&&1===Object.keys(r.options).length&&r.options[s]&&(t={[s]:t}),e.configuration.add(s,e,t);const n=e.parseOptions.packageData.get("require").configured;r.preprocessors.length&&!n.has(s)&&(n.set(s,!0),va.retryAfter(Promise.resolve()))}}function ic(t,e){var i=t.options.require,s=i.allow,r=("["===e.substring(0,1)?"":i.prefix)+e;if(!(Object.hasOwn(s,r)?s[r]:Object.hasOwn(s,e)?s[e]:i.defaultAllow))throw new g("BadRequire",'Extension "%1" is not allowed to be loaded',r);var s=zs.packages.get(r);if(s||va.retryAfter(Zs.load(r).catch(t=>{})),s.hasFailed)throw new g("RequireFail",'Extension "%1" failed to load',e);const n=null==(i=er[r])?void 0:i.rendererExtensions,a=null==(s=Nr.startup.document)?void 0:s.menu;n&&a&&a.addRequiredExtensions(n),function n(t,e){const i=t.parseOptions.options.require,s=t.parseOptions.packageData.get("require").required,r=e.substring(i.prefix.length);if(!s.includes(r)){s.push(r);const i=function(t,e=[]){const i=t.parseOptions.options.require.prefix,s=[];for(const r of e)if(r.substring(0,i.length)===i)try{n(t,r)}catch(t){if(!t.retry)throw t;s.push(t.retry)}return s.length?Promise.all(s):null}(t,er.dependencies[e]);i?va.retryAfter(i.then(()=>ec(t,e,r))):ec(t,e,r)}}(t.configuration.packageData.get("require").jax,r)}const sc={Require(t,e){const i=t.GetArgument(e);if(i.match(/[^_a-zA-Z0-9]/)||""===i)throw new g("BadPackageName","Argument for %1 is not a valid package name",e);ic(t,i),t.Push(t.itemFactory.create("null"))}},rc={require:{allow:lr({base:!1,autoload:!1,configmacros:!1,tagformat:!1,setoptions:!1,texhtml:!1}),defaultAllow:!0,prefix:"tex"}},nc=(new Wo("require",{require:sc.Require}),$o.create("require",{[c.HANDLER]:{[p.MACRO]:["require"]},[c.CONFIG]:function(t,e){e.parseOptions.packageData.set("require",{jax:e,required:[...e.options.packages],configured:new Map});const i=e.parseOptions.options.require,s=i.prefix;if(s.match(/[^_a-zA-Z0-9]/))throw Error("Illegal characters used in \\require prefix");er.paths[s]||(er.paths[s]="[mathjax]/input/tex/extensions"),i.prefix="["+s+"]/"},[c.OPTIONS]:rc}));function ac(t,e,i,s){if(zs.packages.has(t.options.require.prefix+i)){var r=t.options.autoload[i],[r,n]=2===r.length&&Array.isArray(r[0])?r:[r,[]];for(const t of r)oc.remove(t);for(const t of n)lc.remove(t);t.string=(s?e+" ":"\\begin{"+e.slice(1)+"}")+t.string.slice(t.i),t.i=0}ic(t,i)}const oc=new Wo("autoload-macros",{}),lc=new Wo("autoload-environments",{}),cc=$o.create("autoload",{[c.HANDLER]:{[p.MACRO]:["autoload-macros"],[p.ENVIRONMENT]:["autoload-environments"]},[c.OPTIONS]:{autoload:lr({action:["toggle","mathtip","texttip"],amscd:[[],["CD"]],bbox:["bbox"],boldsymbol:["boldsymbol"],braket:["bra","ket","braket","set","Bra","Ket","Braket","Set","ketbra","Ketbra"],bussproofs:[[],["prooftree"]],cancel:["cancel","bcancel","xcancel","cancelto"],color:["color","definecolor","textcolor","colorbox","fcolorbox"],enclose:["enclose"],extpfeil:["xtwoheadrightarrow","xtwoheadleftarrow","xmapsto","xlongequal","xtofrom","Newextarrow"],html:["data","href","class","style","cssId"],mhchem:["ce","pu"],newcommand:["newcommand","renewcommand","newenvironment","renewenvironment","def","let"],unicode:["unicode","U","char"],verb:["verb"]})},[c.CONFIG]:function(t,e){const i=e.parseOptions,s=i.handlers.get(p.MACRO),r=i.handlers.get(p.ENVIRONMENT),n=i.options.autoload;i.packageData.set("autoload",{Autoload:ac});for(const t of Object.keys(n)){const e=n[t],[i,a]=2===e.length&&Array.isArray(e[0])?e:[e,[]];for(const e of i)s.lookup(e)&&"color"!==e||oc.add(e,new Bo(e,ac,[t,!0]));for(const e of a)r.lookup(e)||lc.add(e,new Bo(e,ac,[t,!1]))}i.packageData.get("require")||nc.config(t,e)},[c.INIT]:function(t){t.options.require||pr(t.options,nc.options)},[c.PRIORITY]:10}),hc="configmacros-map",dc="configmacros-active-map",uc="configmacros-env-map";function pc(t,e,i){const s=i.parseOptions.handlers.retrieve(e),r=i.parseOptions.options[t];for(const t of Object.keys(r)){const e="string"==typeof r[t]?[r[t]]:r[t],i=Array.isArray(e[2])?new Bo(t,Jl.MacroWithTemplate,e.slice(0,2).concat(e[2])):new Bo(t,Jl.Macro,e);s.add(t,i)}}const mc=$o.create("configmacros",{[c.INIT]:function(t){new Vo(dc,{}),new Wo(hc,{}),new Xo(uc,Ml.environment,{}),t.append($o.local({handler:{[p.CHARACTER]:[dc],[p.MACRO]:[hc],[p.ENVIRONMENT]:[uc]},priority:3}))},[c.CONFIG]:function(t,e){s=e,pc("active",dc,s),s=e,pc("macros",hc,s);{var i=e;const r=i.parseOptions.handlers.retrieve(uc),n=i.parseOptions.options.environments;for(const i of Object.keys(n))r.add(i,new Bo(i,Jl.BeginEnv,[!0].concat(n[i])))}var s},[c.ITEMS]:{[zl.prototype.kind]:zl},[c.OPTIONS]:{active:lr({}),macros:lr({}),environments:lr({})}}),gc=$o.create("noundefined",{[c.FALLBACK]:{[p.MACRO]:function(t,e){const i=t.create("text","\\"+e),s=t.options.noundefined,r={};for(const t of["color","background","size"])s[t]&&(r["math"+t]=s[t]);t.Push(t.create("node","mtext",[],r,i))}},[c.OPTIONS]:{noundefined:{color:"red",background:"",size:""}},[c.PRIORITY]:3});class fc extends go{get texParser(){return this.configuration.packageData.get("textmacros").texParser}get tags(){return this.texParser.tags}constructor(t,e,i,s){super(t,e,i),this.level=s}mml(){return this.copyLists(),this.configuration.popParser(),null!=this.level?this.create("node","mstyle",this.nodes,{displaystyle:!1,scriptlevel:this.level}):1===this.nodes.length?this.nodes[0]:this.create("node","mrow",this.nodes)}copyLists(){const t=this.texParser.configuration;for(var[e,i]of Object.entries(this.configuration.nodeLists))for(const s of i)t.addNode(e,s);this.configuration.nodeLists={}}Parse(){this.text="",this.nodes=[],this.envStack=[],super.Parse()}saveText(){var t;this.text&&(t=this.stack.env.mathvariant,t=f.internalText(this,this.text,t?{mathvariant:t}:{}),this.text="",this.Push(t))}Push(t){if(this.text&&this.saveText(),t instanceof il)return super.Push(t);t instanceof gl?this.stack.env.mathcolor=this.stack.env.color:t instanceof o&&(this.addAttributes(t),this.nodes.push(t))}PushMath(t){var e=this.stack.env;for(const i of["mathsize","mathcolor"])e[i]&&!t.attributes.hasExplicit(i)&&(t.isToken||t.isKind("mstyle")||(t=this.create("node","mstyle",[t])),d.setAttribute(t,i,e[i]));(t=t.isInferred?this.create("node","mrow",t.childNodes):t).isKind("TeXAtom")||(t=this.create("node","TeXAtom",[t])),this.nodes.push(t)}addAttributes(t){var e=this.stack.env;if(t.isToken)for(const i of["mathsize","mathcolor","mathvariant"])e[i]&&!t.attributes.hasExplicit(i)&&d.setAttribute(t,i,e[i])}ParseTextArg(t,e){t=this.GetArgument(t);return e=Object.assign(Object.assign({},this.stack.env),e),new fc(t,e,this.configuration).mml()}ParseArg(t){return new fc(this.GetArgument(t),this.stack.env,this.configuration).mml()}Error(t,e,...i){throw new g(t,e,...i)}}const y={Comment(t,e){for(;t.i<t.string.length&&"\n"!==t.string.charAt(t.i);)t.i++;t.i++},Math(t,e){t.saveText();var i=t.i;let s,r,n=0;for(;r=t.GetNext();)switch(s=t.i++,r){case"\\":")"===t.GetCS()&&(r="\\(");case"$":if(0!==n||e!==r)break;{const e=t.texParser.configuration,r=new go(t.string.substring(i,s),t.stack.env,e).mml();return void t.PushMath(r)}case"{":n++;break;case"}":0===n&&t.Error("ExtraCloseMissingOpen","Extra close brace or missing open brace"),n--}t.Error("MathNotTerminated","Math mode is not properly terminated")},MathModeOnly(t,e){t.Error("MathModeOnly","'%1' allowed only in math mode",e)},Misplaced(t,e){t.Error("Misplaced","Misplaced '%1'",e)},OpenBrace(t,e){var i=t.stack.env;t.envStack.push(i),t.stack.env=Object.assign({},i)},CloseBrace(t,e){t.envStack.length?(t.saveText(),t.stack.env=t.envStack.pop()):t.Error("ExtraCloseMissingOpen","Extra close brace or missing open brace")},OpenQuote(t,e){t.string.charAt(t.i)===e?(t.text+="â€œ",t.i++):t.text+="â€˜"},CloseQuote(t,e){t.string.charAt(t.i)===e?(t.text+="â€",t.i++):t.text+="â€™"},Tilde(t,e){t.text+="Â "},Space(t,e){t.text+=" ",t.GetNext()},SelfQuote(t,e){t.text+=e.substring(1)},Insert(t,e,i){t.text+=i},Accent(t,e,i){e=t.ParseArg(e),i=t.create("token","mo",{},i);t.addAttributes(i),t.Push(t.create("node","mover",[e,i]))},Emph(t,e){var i="-tex-mathit"===t.stack.env.mathvariant?"normal":"-tex-mathit";t.Push(t.ParseTextArg(e,{mathvariant:i}))},TextFont(t,e,i){t.saveText(),t.Push(t.ParseTextArg(e,{mathvariant:i}))},SetFont(t,e,i){t.saveText(),t.stack.env.mathvariant=i},SetSize(t,e,i){t.saveText(),t.stack.env.mathsize=i},CheckAutoload(t,e){const i=t.configuration.packageData.get("autoload"),s=t.texParser;e=e.slice(1);var r=s.lookup(p.MACRO,e);if(!r||i&&r._func===i.Autoload){if(s.parse(p.MACRO,[s,e]),!r)return;ra(Promise.resolve())}s.parse(p.MACRO,[t,e])},Macro:b.Macro,Spacer:b.Spacer,Hskip:b.Hskip,rule:b.rule,Rule:b.Rule,HandleRef:b.HandleRef,UnderOver:b.UnderOver,Lap:b.Lap,Phantom:b.Phantom,Smash:b.Smash,MmlToken:b.MmlToken},bc=l.Variant,Ec=(new Vo("text-special",{$:y.Math,"%":y.Comment,"^":y.MathModeOnly,_:y.MathModeOnly,"&":y.Misplaced,"#":y.Misplaced,"~":y.Tilde," ":y.Space,"\t":y.Space,"\r":y.Space,"\n":y.Space,"Â ":y.Tilde,"{":y.OpenBrace,"}":y.CloseBrace,"`":y.OpenQuote,"'":y.CloseQuote}),new Wo("text-macros",{"(":y.Math,$:y.SelfQuote,_:y.SelfQuote,"%":y.SelfQuote,"{":y.SelfQuote,"}":y.SelfQuote," ":y.SelfQuote,"&":y.SelfQuote,"#":y.SelfQuote,"\\":[y.Macro,"$\\\\$"],"'":[y.Accent,"Â´"],"â€™":[y.Accent,"Â´"],"`":[y.Accent,"`"],"â€˜":[y.Accent,"`"],"^":[y.Accent,"^"],'"':[y.Accent,"Â¨"],"~":[y.Accent,"~"],"=":[y.Accent,"Â¯"],".":[y.Accent,"Ë™"],u:[y.Accent,"Ë˜"],v:[y.Accent,"Ë‡"],emph:y.Emph,rm:[y.SetFont,bc.NORMAL],mit:[y.SetFont,bc.ITALIC],oldstyle:[y.SetFont,bc.OLDSTYLE],cal:[y.SetFont,bc.CALLIGRAPHIC],it:[y.SetFont,"-tex-mathit"],bf:[y.SetFont,bc.BOLD],sf:[y.SetFont,bc.SANSSERIF],tt:[y.SetFont,bc.MONOSPACE],frak:[y.TextFont,bc.FRAKTUR],Bbb:[y.TextFont,bc.DOUBLESTRUCK],tiny:[y.SetSize,.5],Tiny:[y.SetSize,.6],scriptsize:[y.SetSize,.7],small:[y.SetSize,.85],normalsize:[y.SetSize,1],large:[y.SetSize,1.2],Large:[y.SetSize,1.44],LARGE:[y.SetSize,1.73],huge:[y.SetSize,2.07],Huge:[y.SetSize,2.49],textnormal:[y.Macro,"{\\rm #1}",1],textup:[y.Macro,"{\\rm #1}",1],textrm:[y.Macro,"{\\rm #1}",1],textit:[y.Macro,"{\\it #1}",1],textbf:[y.Macro,"{\\bf #1}",1],textsf:[y.Macro,"{\\sf #1}",1],texttt:[y.Macro,"{\\tt #1}",1],dagger:[y.Insert,"â€ "],ddagger:[y.Insert,"â€¡"],S:[y.Insert,"Â§"],AA:[y.Insert,"â„«"],ldots:[y.Insert,"â€¦"],vdots:[y.Insert,"â‹®"],",":[y.Spacer,Oa.thinmathspace],":":[y.Spacer,Oa.mediummathspace],">":[y.Spacer,Oa.mediummathspace],";":[y.Spacer,Oa.thickmathspace],"!":[y.Spacer,Oa.negativethinmathspace],enspace:[y.Spacer,.5],quad:[y.Spacer,1],qquad:[y.Spacer,2],thinspace:[y.Spacer,Oa.thinmathspace],negthinspace:[y.Spacer,Oa.negativethinmathspace],hskip:y.Hskip,hspace:y.Hskip,kern:y.Hskip,mskip:y.Hskip,mspace:y.Hskip,mkern:y.Hskip,rule:y.rule,Rule:[y.Rule],Space:[y.Rule,"blank"],color:y.CheckAutoload,textcolor:y.CheckAutoload,colorbox:y.CheckAutoload,fcolorbox:y.CheckAutoload,href:y.CheckAutoload,style:y.CheckAutoload,class:y.CheckAutoload,data:y.CheckAutoload,cssId:y.CheckAutoload,unicode:y.CheckAutoload,U:y.CheckAutoload,char:y.CheckAutoload,ref:[y.HandleRef,!1],eqref:[y.HandleRef,!0],underline:[y.UnderOver,"2015"],llap:y.Lap,rlap:y.Lap,phantom:y.Phantom,vphantom:[y.Phantom,1,0],hphantom:[y.Phantom,0,1],smash:y.Smash,mmlToken:y.MmlToken}),$o.create("text-base",{[c.PARSER]:"text",[c.PRIORITY]:1,[c.HANDLER]:{[p.CHARACTER]:["command","text-special"],[p.MACRO]:["text-macros"]},[c.FALLBACK]:{[p.CHARACTER]:(t,e)=>{t.text+=e},[p.MACRO]:(t,e)=>{const i=t.texParser,s=i.lookup(p.MACRO,e);s&&s._func!==y.Macro&&t.Error("MathMacro","%1 is only supported in math mode","\\"+e),i.parse(p.MACRO,[t,e])}},[c.ITEMS]:{[el.prototype.kind]:el,[il.prototype.kind]:il,[El.prototype.kind]:El,[gl.prototype.kind]:gl}}));function Nc(t,e,i,s){const r=t.configuration.packageData.get("textmacros");return t instanceof fc||(r.texParser=t),r.parseOptions.clear(),[new fc(e,s?{mathvariant:s}:{},r.parseOptions,i).mml()]}const yc=$o.create("textmacros",{[c.PRIORITY]:1,[c.CONFIG]:(t,e)=>{const i=new tl(e.parseOptions.options.textmacros.packages,["tex","text"]),s=(i.init(),new Co(i,[]));s.options=e.parseOptions.options,i.config(e),Do.addTags(i.tags),s.tags=Do.getDefault(),(s.tags.configuration=s).packageData=e.parseOptions.packageData,s.packageData.set("textmacros",{textConf:i,parseOptions:s,jax:e,texParser:null}),s.options.internalMath=Nc},[c.PREPROCESSORS]:[t=>{const e=t.data.packageData.get("textmacros");e.parseOptions.nodeFactory.setMmlFactory(e.jax.mmlFactory)}],[c.OPTIONS]:{textmacros:{packages:["text-base"]}}});MathJax.loader&&MathJax.loader.checkVersion("input/tex",Bs,"input"),Hs({_:{input:{tex_ts:ke,tex:{ColumnParser:ye,Configuration:we,FilterUtil:ce,FindTeX:oe,HandlerTypes:he,MapHandler:Te,NodeFactory:Ee,NodeUtil:le,ParseMethods:Le,ParseOptions:xe,ParseUtil:Ne,Stack:ue,StackItem:me,StackItemFactory:be,Tags:Ae,TexConstants:ge,TexError:pe,TexParser:fe,Token:ve,TokenMap:_e,UnitUtil:de,ams:{AmsConfiguration:Fe,AmsItems:Re,AmsMethods:Me},autoload:{AutoloadConfiguration:qe},base:{BaseConfiguration:Se,BaseItems:Ce,BaseMethods:Ie},configmacros:{ConfigMacrosConfiguration:je},newcommand:{NewcommandConfiguration:Be,NewcommandItems:De,NewcommandMethods:Pe,NewcommandUtil:Oe},noundefined:{NoUndefinedConfiguration:He},require:{RequireConfiguration:Ue},textmacros:{TextMacrosConfiguration:We,TextMacrosMethods:Ve,TextParser:Ge}}}}}),Zs.preLoaded("input/tex-base","[tex]/ams","[tex]/newcommand","[tex]/textmacros","[tex]/noundefined","[tex]/require","[tex]/autoload","[tex]/configmacros");var xc=["base","ams","newcommand","textmacros","noundefined","require","autoload","configmacros"];if(MathJax.startup){MathJax.startup.registerConstructor("tex",MathJax._.input.tex_ts.TeX),MathJax.startup.useInput("tex"),MathJax.config.tex||(MathJax.config.tex={});let t=MathJax.config.tex.packages;MathJax.config.tex.packages=xc,t&&(Array.isArray(t)&&(t={"[+]":t.filter(t=>!xc.includes(t))}),ur(MathJax.config.tex,{packages:t}))}const Ac={None:"",Vertical:"v",Horizontal:"h"},vc=Ac.Vertical,_c=Ac.Horizontal;var Tc;const wc={dir:Ac.None};function Cc(t,e,i){return(i?pr(t,{[e]:i}):t)[e]}class Ic{get CLASS(){return this.constructor}static charOptions(t,e){const i=t[e];if(Array.isArray(i))return 3===i.length&&(i[3]={}),i[3];throw Error("Character data hasn't been loaded for 0x"+e.toString(16).toUpperCase())}static defineDynamicFiles(t,s=""){const r={};return(t||[]).forEach(([e,t,i])=>{r[e]={extension:s,file:e,variants:t,delimiters:i||[],promise:null,failed:!1,setup:t=>{r[e].failed=!0}}}),r}static dynamicSetup(t,e,i,s={},r=null){const n=t?this.dynamicExtensions.get(t):null;(t?n.files:this.dynamicFiles)[e].setup=e=>{Object.keys(i).forEach(t=>e.defineChars(t,i[t])),e.defineDelimiters(s),t&&this.adjustDelimiters(e.delimiters,Object.keys(s),n.sizeN,n.stretchN),r&&e.addDynamicFontCss(r)}}static adjustDelimiters(i,t,s,r){t.forEach(t=>{const e=i[parseInt(t)];"dir"in e&&(e.variants&&(e.variants=this.adjustArrayIndices(e.variants,s)),e.stretchv&&(e.stretchv=this.adjustArrayIndices(e.stretchv,r)))})}static adjustArrayIndices(t,e){return t.map(t=>t<0?e-1-t:t)}static addExtension(t,e=""){const i={name:t.name,prefix:e||`[${t.name}-extension]/${this.JAX.toLowerCase()}/dynamic`,files:this.defineDynamicFiles(t.ranges,t.name),sizeN:this.defaultSizeVariants.length,stretchN:this.defaultStretchVariants.length};this.dynamicExtensions.set(t.name,i);for(const[e,i]of[["options","OPTIONS"],["variants","defaultVariants"],["variantSmp","VariantSmp"],["cssFonts","defaultCssFonts"],["accentMap","defaultAccentMap"],["moMap","defaultMoMap"],["mnMap","defaultMnMap"],["parameters","defaultParams"],["chars","defaultChars"],["sizeVariants","defaultSizeVariants"],["stretchVariants","defaultStretchVariants"]])Cc(this,i,t[e]);t.delimiters&&(Object.assign(this.defaultDelimiters,t.delimiters),this.adjustDelimiters(this.defaultDelimiters,Object.keys(t.delimiters),i.sizeN,i.stretchN))}constructor(t=null){this.variant={},this.delimiters={},this.cssFontMap={},this.cssFontPrefix="",this.remapChars={},this.skewIcFactor=.75;const e=this.CLASS;this.options=mr(pr({},e.OPTIONS),t),this.params=Object.assign({},e.defaultParams),this.sizeVariants=[...e.defaultSizeVariants],this.stretchVariants=[...e.defaultStretchVariants],this.defineCssFonts(e.defaultCssFonts),this.cssFamilyPrefix=e.defaultCssFamilyPrefix,this.createVariants(e.defaultVariants),this.defineDelimiters(e.defaultDelimiters),Object.keys(e.defaultChars).forEach(t=>this.defineChars(t,e.defaultChars[t])),this.defineRemap("accent",e.defaultAccentMap),this.defineRemap("mo",e.defaultMoMap),this.defineRemap("mn",e.defaultMnMap),this.defineDynamicCharacters(e.dynamicFiles),e.dynamicExtensions.forEach(t=>this.defineDynamicCharacters(t.files))}setOptions(t){pr(this.options,t)}addExtension(t,e=""){var i=this.constructor.JAX.toLowerCase(),i={name:t.name,prefix:e||`[${t.name}-extension]/${i}/dynamic`,files:this.CLASS.defineDynamicFiles(t.ranges,e),sizeN:this.sizeVariants.length,stretchN:this.stretchVariants.length};this.CLASS.dynamicExtensions.set(t.name,i),pr(this.options,t.options||{}),pr(this.params,t.parameters||{}),Cc(this,"sizeVariants",t.sizeVariants),Cc(this,"stretchVariants",t.stretchVariants),Cc(this.constructor,"VariantSmp",t.variantSmp),this.defineCssFonts(Cc({cssFonts:{}},"cssFonts",t.cssFonts)),this.createVariants(Cc({variants:[]},"variants",t.variants)),t.delimiters&&(this.defineDelimiters(Cc({delimiters:{}},"delimiters",t.delimiters)),this.CLASS.adjustDelimiters(this.delimiters,Object.keys(t.delimiters),i.sizeN,i.stretchN));for(const e of Object.keys(t.chars||{}))this.defineChars(e,t.chars[e]);return this.defineRemap("accent",t.accentMap),this.defineRemap("mo",t.moMap),this.defineRemap("mn",t.mnMap),t.ranges&&this.defineDynamicCharacters(i.files),[]}get styles(){return this._styles}set styles(t){this._styles=t}createVariant(t,e=null,i=null){const s={linked:[],chars:Object.create(e?this.variant[e].chars:{})};this.variant[i]&&(Object.assign(s.chars,this.variant[i].chars),this.variant[i].linked.push(s.chars),s.chars=Object.create(s.chars)),this.remapSmpChars(s.chars,t),this.variant[t]=s}remapSmpChars(e,t){const i=this.CLASS;let s=i.VariantSmp[t];if(s="string"==typeof s?i.VariantSmp[s]:s){var r=i.SmpRemap,n=[null,null,i.SmpRemapGreekU,i.SmpRemapGreekL];for(const[t,a,o]of i.SmpRanges){const i=s[t];if(i){for(let t=a;t<=o;t++)if(930!==t){const s=i+t-a;e[t]=this.smpChar(r[s]||s)}if(n[t])for(const s of Object.keys(n[t]).map(t=>parseInt(t)))e[s]=this.smpChar(i+n[t][s])}}const a=s[5]||{};for(const t of Object.keys(a))e[t]=this.smpChar(s[5][t])}}smpChar(t){return[,,,{smp:t}]}createVariants(t){for(const e of t)this.createVariant(e[0],e[1],e[2])}defineChars(t,e){var i=this.variant[t];Object.assign(i.chars,e);for(const t of i.linked)Object.assign(t,e)}defineCssFonts(t){Object.assign(this.cssFontMap,t);for(const e of Object.keys(t))"unknown"===this.cssFontMap[e][0]&&(this.cssFontMap[e][0]=this.options.unknownFamily)}defineDelimiters(t){Object.assign(this.delimiters,t)}defineRemap(t,e){e&&(Object.hasOwn(this.remapChars,t)||(this.remapChars[t]={}),Object.assign(this.remapChars[t],e))}defineDynamicCharacters(t){for(const i of Object.keys(t)){var e=t[i];for(const t of Object.keys(e.variants))this.defineChars(t,this.flattenRanges(e.variants[t],e));this.defineDelimiters(this.flattenRanges(e.delimiters,e))}}flattenRanges(t,e){const i={};for(const s of t)if(Array.isArray(s))for(let t=s[0];t<=s[1];t++)i[t]=e;else i[s]=e;return i}dynamicFileName(t){var e=t.extension?this.CLASS.dynamicExtensions.get(t.extension).prefix:this.options.dynamicPrefix;return t.file.match(/^(?:[/[]|[a-z]+:\/\/|[a-z]:)/i)?t.file:e+"/"+t.file.replace(/(\.js)?$/,".js")}loadDynamicFile(e){return t=this,l=function*(){return e.failed?Promise.reject(new Error(`dynamic file '${e.file}' failed to load`)):(e.promise||(e.promise=La(this.dynamicFileName(e)).catch(t=>{e.failed=!0,console.warn(t)})),e.promise.then(()=>e.setup(this)))},new(o=(o=a=void 0)||Promise)(function(i,e){function s(t){try{n(l.next(t))}catch(t){e(t)}}function r(t){try{n(l.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(s,r)}n((l=l.apply(t,a||[])).next())});var t,a,o,l}loadDynamicFiles(){const e=this.CLASS.dynamicFiles,t=Object.keys(e).map(t=>this.loadDynamicFile(e[t]));for(const e of this.CLASS.dynamicExtensions.values())t.push(...Object.keys(e.files).map(t=>this.loadDynamicFile(e.files[t])));return Promise.all(t)}loadDynamicFilesSync(){if(!va.asyncIsSynchronous)throw Error("MathJax(loadDynamicFilesSync): mathjax.asyncLoad must be specified and synchronous\n    Try importing #js/../components/require.mjs and #js/util/asyncLoad/node.js");const e=this.CLASS.dynamicFiles;Object.keys(e).forEach(t=>this.loadDynamicFileSync(e[t]));for(const e of this.CLASS.dynamicExtensions.values())Object.keys(e.files).forEach(t=>this.loadDynamicFileSync(e.files[t]))}loadDynamicFileSync(e){if(!e.promise){e.promise=Promise.resolve();try{va.asyncLoad(this.dynamicFileName(e))}catch(t){e.failed=!0,console.warn(t)}e.setup(this)}}addDynamicFontCss(t,e){}getDelimiter(t){var e=this.delimiters[t];return!e||"dir"in e?e:(this.delimiters[t]=null,ra(this.loadDynamicFile(e)),null)}getSizeVariant(t,e){t=this.getDelimiter(t);return t&&t.variants&&(e=t.variants[e]),this.sizeVariants[e]}getStretchVariant(t,e){t=this.getDelimiter(t);return this.stretchVariants[t.stretchv?t.stretchv[e]:0]}getStretchVariants(e){return[0,1,2,3].map(t=>this.getStretchVariant(e,t))}getChar(t,e){var i=this.variant[t].chars[e];if(!i||Array.isArray(i))return i;{const s=this.variant[t];return delete s.chars[e],s.linked.forEach(t=>delete t[e]),ra(this.loadDynamicFile(i)),null}}getVariant(t){return this.variant[t]}getCssFont(t){return this.cssFontMap[t]||["serif",!1,!1]}getFamily(t){return this.cssFamilyPrefix?this.cssFamilyPrefix+", "+t:t}getRemappedChar(t,e){return(this.remapChars[t]||{})[e]}}Ic.OPTIONS={unknownFamily:"serif",dynamicPrefix:"."},Ic.JAX="common",Ic.NAME="",Ic.defaultVariants=[["normal"],["bold","normal"],["italic","normal"],["bold-italic","italic","bold"],["double-struck","bold"],["fraktur","normal"],["bold-fraktur","bold","fraktur"],["script","italic"],["bold-script","bold-italic","script"],["sans-serif","normal"],["bold-sans-serif","bold","sans-serif"],["sans-serif-italic","italic","sans-serif"],["sans-serif-bold-italic","bold-italic","bold-sans-serif"],["monospace","normal"],["-smallop","normal"],["-largeop","normal"],["-tex-calligraphic","italic"],["-tex-bold-calligraphic","bold-italic"],["-tex-oldstyle","normal"],["-tex-bold-oldstyle","bold"],["-tex-mathit","italic"],["-tex-variant","normal"]],Ic.defaultCssFonts={normal:["unknown",!1,!1],bold:["unknown",!1,!0],italic:["unknown",!0,!1],"bold-italic":["unknown",!0,!0],"double-struck":["unknown",!1,!0],fraktur:["unknown",!1,!1],"bold-fraktur":["unknown",!1,!0],script:["cursive",!1,!1],"bold-script":["cursive",!1,!0],"sans-serif":["sans-serif",!1,!1],"bold-sans-serif":["sans-serif",!1,!0],"sans-serif-italic":["sans-serif",!0,!1],"sans-serif-bold-italic":["sans-serif",!0,!0],monospace:["monospace",!1,!1],"-smallop":["unknown",!1,!1],"-largeop":["unknown",!1,!1],"-tex-calligraphic":["cursive",!0,!1],"-tex-bold-calligraphic":["cursive",!0,!0],"-tex-oldstyle":["unknown",!1,!1],"-tex-bold-oldstyle":["unknown",!1,!0],"-tex-mathit":["unknown",!0,!1],"-tex-variant":["unknown",!1,!1]},Ic.defaultCssFamilyPrefix="",Ic.VariantSmp={bold:[119808,119834,120488,120514,120782,{988:120778,989:120779}],italic:[119860,119886,120546,120572],"bold-italic":[119912,119938,120604,120630],script:[119964,119990],"bold-script":[120016,120042],fraktur:[120068,120094],"double-struck":[120120,120146,,,120792],"bold-fraktur":[120172,120198],"sans-serif":[120224,120250,,,120802],"bold-sans-serif":[120276,120302,120662,120688,120812],"sans-serif-italic":[120328,120354],"sans-serif-bold-italic":[120380,120406,120720,120746],monospace:[120432,120458,,,120822]},Ic.SmpRanges=[[0,65,90],[1,97,122],[2,913,937],[3,945,969],[4,48,57]],Ic.SmpRemap={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},Ic.SmpRemapGreekU={8711:25,1012:17},Ic.SmpRemapGreekL={977:27,981:29,982:31,1008:28,1009:30,1013:26,8706:25},Ic.defaultAccentMap={94:"Ë†",126:"Ëœ",768:"Ë‹",769:"ËŠ",770:"Ë†",771:"Ëœ",772:"Ë‰",774:"Ë˜",775:"Ë™",776:"Â¨",778:"Ëš",780:"Ë‡",8594:"âƒ—"},Ic.defaultMoMap={45:"âˆ’"},Ic.defaultMnMap={45:"âˆ’"},Ic.defaultParams={x_height:.442,quad:1,num1:.676,num2:.394,num3:.444,denom1:.686,denom2:.345,sup1:.413,sup2:.363,sup3:.289,sub1:.15,sub2:.247,sup_drop:.386,sub_drop:.05,delim1:2.39,delim2:1,axis_height:.25,rule_thickness:.06,big_op_spacing1:.111,big_op_spacing2:.167,big_op_spacing3:.2,big_op_spacing4:.6,big_op_spacing5:.1,surd_height:.06,scriptspace:.05,nulldelimiterspace:.12,delimiterfactor:901,delimitershortfall:.3,rule_factor:1.25,min_rule_thickness:1.25,separation_factor:1.75,extra_ic:.033,extender_factor:.333},Ic.defaultDelimiters={},Ic.defaultChars={},Ic.defaultSizeVariants=[],Ic.defaultStretchVariants=[],Ic.dynamicFiles={},Ic.dynamicExtensions=new Map;class Lc extends Fa{static from(t,e,i=null){const s=new this;return Object.assign(s,t),s.lineLeading=e,i&&(s.indentData=i),s}constructor(t,e=null){super(t),this.indentData=null,this.isFirst=!1,this.originalL=this.L,e&&(this.start=e)}append(t){this.isFirst&&(t.originalL+=t.L,t.L=0),t.indentData&&(this.indentData=t.indentData),this.lineLeading=t.lineLeading,super.append(t),this.isFirst=t.isFirst}copy(){const t=Lc.from(this,this.lineLeading);return t.indentData=this.indentData,t.lineLeading=this.lineLeading,t}getIndentData(t){let{indentalign:e,indentshift:i,indentalignfirst:s,indentshiftfirst:r,indentalignlast:n,indentshiftlast:a}=t.attributes.getAllAttributes();"indentalign"===s&&(s=t.attributes.getInherited("indentalign")),"indentshift"===r&&(r=t.attributes.getInherited("indentshift")),"indentalign"===n&&(n=e),"indentshift"===a&&(a=i),this.indentData=[[s,r],[e,i],[n,a]]}copyIndentData(t){return t.indentData.map(([t,e])=>[t,e])}}const Sc=1e6;class kc extends fa{breakToWidth(t,e){}}class Rc extends kc{constructor(){super(...arguments),this.PENALTY={newline:t=>0,nobreak:t=>Sc,goodbreak:t=>t-200*this.state.depth,badbreak:t=>t+200*this.state.depth,auto:t=>t},this.FACTORS={depth:t=>t+800*this.state.depth,width:t=>t+Math.floor((this.state.width-this.state.w)/this.state.width*2500),tail:t=>t+Math.floor(this.state.width/Math.max(1e-4,this.state.mathLeft-this.state.w)*500),open:(t,e)=>{var i=e.node.prevClass;if(i===h.BIN||i===h.REL||i===h.OP)return t+5e3;const s=this.getPrevious(e);if(s&&("postfix"!==s.attributes.get("form")||"nobreak"===s.attributes.get("linebreak")))return t+5e3;const r=e.node.Parent;return null!=r&&r.isKind("mmultiscripts")&&e.node===this.getFirstToken(r)&&r.childNodes.filter(t=>t.isKind("mprescripts")).length?Sc:t-500},close:(t,e)=>{var i;const s=e.node.Parent;return null==s||!s.isKind("msubsup")||s.isKind("mmultiscripts")&&null!=(i=s.childNodes[1])&&i.isKind("mprescripts")||e.node!==this.getLastToken(s.childNodes[0])?t+500:Sc},space:(t,e)=>{const i=e;if(!i.canBreak)return Sc;e=i.getBBox().w;return e<0?Sc:e<1?t:t-100*(e+4)},separator:t=>t+500,fuzz:t=>.99*t},this.TEXCLASS={[h.BIN]:t=>t-250,[h.REL]:t=>t-500}}breakToWidth(e,i){var t=this.state,s=(this.state=this.createState(e),this.state.width=i,e.breakCount);for(let t=0;t<=s;t++)(e.lineBBox[t]||e.getLineBBox(t)).w>i&&this.breakLineToWidth(e,t);for(const[e,i]of this.state.breaks){if(null===i){const i=e.coreMO();i.setBreakStyle(i.node.attributes.get("linebreakstyle")||"before")}else e.setBreakAt(i);e.invalidateBBox()}this.state=t}createState(t){t=t.getBBox().w;return{breaks:new Set,potential:[],width:0,w:0,prevWidth:0,prevBreak:null,depth:0,mathWidth:t,mathLeft:t}}breakLineToWidth(t,e){const i=this.state;i.potential=[],i.w=0,i.prevWidth=0,i.prevBreak=null,i.depth=0,this.visitNode(t,e)}addWidth(t,e=null){(e=null===e?t.L+t.w+t.R:e)&&(e*=t.rscale,this.state.w+=e,this.state.potential.length&&(this.state.potential[0][4]+=e),this.processBreak())}processBreak(){const t=this.state;for(;t.potential.length&&t.w>this.state.width;){const e=t.potential.pop(),[i,,s,r,n]=e;t.breaks.add(i),t.w=t.potential.reduce((t,e)=>t+e[4],r+n),t.prevBreak&&t.prevWidth+s<=t.width?(t.breaks.delete(t.prevBreak[0]),t.prevWidth+=s):t.prevWidth=s+r,t.potential.forEach(t=>t[2]-=s),t.prevBreak=e,t.mathLeft-=s}}pushBreak(t,e,i,s){const r=this.state;if(!(e>=Sc||0===r.w&&0===r.prevWidth)){for(;r.potential.length&&r.potential[0][1]>this.FACTORS.fuzz(e);){const t=r.potential.shift();r.potential.length&&(r.potential[0][4]+=t[4])}r.potential.unshift([[t,s],e,r.w-((null==(t=r.prevBreak)?void 0:t[3])||0),i,0])}}getBorderLR(t){t=t.styleData;if(!t)return[0,0];var e=(null==(e=null==t?void 0:t.border)?void 0:e.width)||[0,0,0,0],t=(null==t?void 0:t.padding)||[0,0,0,0];return[e[3]+t[3],e[1]+t[1]]}getFirstToken(t){return t.isToken?t:this.getFirstToken(t.childNodes[0])}getLastToken(t){return t.isToken?t:this.getLastToken(t.childNodes[t.childNodes.length-1])}visitNode(t,e){t&&(this.state.depth++,t.node.isEmbellished&&!t.node.isKind("mo")?this.visitEmbellishedOperator(t,e):super.visitNode(t,e),this.state.depth--)}visitDefault(t,e){var i,s=t.getLineBBox(e);if(t.node.isToken||t.node.linebreakContainer||null==(i=t.childNodes)||!i[0])this.addWidth(s);else{const[i,r]=this.getBorderLR(t);0===e&&this.addWidth(s,s.L+i),this.visitNode(t.childNodes[0],e),e===t.breakCount&&this.addWidth(s,s.R+r)}}visitEmbellishedOperator(t,e){const i=t.coreMO(),s=Lc.from(t.getOuterBBox(),t.linebreakOptions.lineleading);s.getIndentData(i.node);var r=i.getBreakStyle(i.node.attributes.get("linebreakstyle")),n=i.processIndent("",s.indentData[1][1],"",s.indentData[0][1],this.state.width)[1],a=this.moPenalty(i);if("before"===r)this.pushBreak(t,a,n-s.L,null),this.addWidth(s);else{this.addWidth(s);const e=("after"===r?0:(i.multChar?i.multChar.getBBox():s).w)+n;this.pushBreak(t,a,e,null)}}visitMoNode(t,e){const i=t,s=Lc.from(i.getOuterBBox(),i.linebreakOptions.lineleading);s.getIndentData(i.node);var r=i.getBreakStyle(i.node.attributes.get("linebreakstyle")),n=i.processIndent("",s.indentData[1][1],"",s.indentData[0][1],this.state.width)[1],a=this.moPenalty(i);if("before"===r)this.pushBreak(t,a,n-s.L,null),this.addWidth(s);else{this.addWidth(s);const e=("after"===r?0:(i.multChar?i.multChar.getBBox():s).w)+n;this.pushBreak(t,a,e,null)}}moPenalty(t){const{linebreak:e,fence:i,form:s}=t.node.attributes.getList("linebreak","fence","form"),r=this.FACTORS;let n=r.tail(r.width(0));var a=i&&"prefix"===s||t.node.texClass===h.OPEN,o=i&&"postfix"===s||t.node.texClass===h.CLOSE;return a&&(n=r.open(n,t),this.state.depth++),o&&(n=r.close(n,t),this.state.depth--),n=(this.TEXCLASS[t.node.texClass]||(t=>t))(n),(this.PENALTY[e]||(t=>t))(r.depth(n))}getPrevious(t){let e=t.node,i=e.parent,s=i.childIndex(e);for(;i&&(i.notParent||i.isKind("mrow"))&&0===s;)i=(e=i).parent,s=i.childIndex(e);if(!i||!s)return null;const r=i.childNodes[s-1];return r.isEmbellished?r.coreMO():null}visitMspaceNode(t,e){const i=t.getLineBBox(e),s=t;if(s.canBreak){const e=this.mspacePenalty(s);i.getIndentData(t.node);var r=t.processIndent("",i.indentData[1][1],"",i.indentData[0][1],this.state.width)[1];this.pushBreak(t,e,r-i.w,null)}this.addWidth(i)}mspacePenalty(t){const e=t.node.attributes.get("linebreak"),i=this.FACTORS,s=i.space(i.tail(i.width(0)),t);return(this.PENALTY[e]||(t=>t))(i.depth(s))}visitMtextNode(t,e){if(t.getText().match(/ /)){const i=t,s=(i.clearBreakPoints(),i.textWidth(" ")),r=t.getBBox(),[n,a]=this.getBorderLR(t),o=(this.addWidth(r,r.L+n),i.childNodes);for(const e of o.keys()){const n=o[e];if(n.node.isKind("text")){const a=n.node.getText().split(/ /),o=a.pop();for(const n of a.keys())this.addWidth(r,i.textWidth(a[n])),this.pushBreak(t,this.mtextPenalty(),-s,[e,n+1]),this.addWidth(r,s);this.addWidth(r,i.textWidth(o))}else this.addWidth(n.getBBox())}this.addWidth(r,r.R+a)}else this.visitDefault(t,e)}mtextPenalty(){const t=this.FACTORS;return t.depth(t.tail(t.width(0)))}visitMrowNode(e,t){var t=e.lineBBox[t]||e.getLineBBox(t),[i,s]=t.start||[0,0],[r,n]=t.end||[e.childNodes.length-1,0],[a,o]=this.getBorderLR(e);this.addWidth(t,t.L+a);for(let t=i;t<=r;t++)this.visitNode(e.childNodes[t],t===i?s:t===r?n:0);this.addWidth(t,t.R+o)}visitInferredMrowNode(t,e){this.state.depth--,this.visitMrowNode(t,e),this.state.depth++}visitMfracNode(t,e){const i=t;!i.node.attributes.get("bevelled")&&i.getOuterBBox().w>this.state.width&&(this.breakToWidth(i.childNodes[0],this.state.width),this.breakToWidth(i.childNodes[1],this.state.width)),this.visitDefault(t,e)}visitMsqrtNode(t,e){if(t.getOuterBBox().w>this.state.width){const e=t,i=e.childNodes[e.base];this.breakToWidth(i,this.state.width-e.rootWidth()),e.getStretchedSurd()}this.visitDefault(t,e)}visitMrootNode(t,e){this.visitMsqrtNode(t,e)}visitMsubNode(t,e){this.visitDefault(t,e);const i=t,s=i.getOffset()[0],r=i.scriptChild.getOuterBBox(),[n,a]=this.getBorderLR(t);this.addWidth(i.getLineBBox(e),s+n+r.rscale*r.w+i.font.params.scriptspace+a)}visitMsupNode(t,e){this.visitDefault(t,e);const i=t,s=i.getOffset()[0],r=i.scriptChild.getOuterBBox(),[n,a]=this.getBorderLR(t);this.addWidth(i.getLineBBox(e),s+n+r.rscale*r.w+i.font.params.scriptspace+a)}visitMsubsupNode(t,e){this.visitDefault(t,e);const i=t,s=i.subChild.getOuterBBox(),r=i.supChild.getOuterBBox(),n=i.getAdjustedIc(),a=Math.max(s.rscale*s.w,n+r.rscale*r.w)+i.font.params.scriptspace,[o,l]=this.getBorderLR(t);this.addWidth(t.getLineBBox(e),o+a+l)}visitMmultiscriptsNode(t,e){var i,s=t,r=s.scriptData;r.numPrescripts&&(i=Math.max(r.psup.rscale*r.psup.w,r.psub.rscale*r.psub.w),this.addWidth(t.getLineBBox(e),i+s.font.params.scriptspace)),this.visitDefault(t,e),r.numScripts&&(i=Math.max(r.sup.rscale*r.sup.w,r.sub.rscale*r.sub.w),this.addWidth(t.getLineBBox(e),i+s.font.params.scriptspace))}visitMfencedNode(t,e){var i=t,s=t.getLineBBox(e),[r,n]=this.getBorderLR(t);0===e&&this.addWidth(s,s.L+r),this.visitNode(i.mrow,e),e===t.breakCount&&this.addWidth(s,s.R+n)}visitMactionNode(t,e){var i=t,s=t.getLineBBox(e),[r,n]=this.getBorderLR(t);0===e&&this.addWidth(s,s.L+r),this.visitNode(i.selected,e),e===t.breakCount&&this.addWidth(s,s.R+n)}}for(const Jb of Object.keys(an.postfix)){const Yb=an.postfix[Jb][3];Yb&&Yb.fence&&(Yb.linebreakstyle="after")}an.infix["â¡"]=[...an.infix["â¡"]],an.infix["â¡"][3]={linebreak:"nobreak"};const Oc="@mathjax/%%FONT%%-font";class Mc extends Ir{get forceInlineBreaks(){return!1}constructor(t={},e=null,i=null){const[s,r]=t.fontData instanceof Ic?[t.fontData.constructor,t.fontData]:[t.fontData||i,null],[n,a]=fr(t,s.OPTIONS),o=(super(n),this.factory=this.options.wrapperFactory||new e,(this.factory.jax=this).styleJson=this.options.styleJson||new Wa,this.font=r||new s(a),this.font.setOptions({mathmlSpacing:this.options.mathmlSpacing}),this.unknownCache=new Map,this.options.linebreaks.LinebreakVisitor||Rc);this.linebreaks=new o(this.factory)}setAdaptor(t){super.setAdaptor(t),"auto"===this.options.htmlHDW&&(this.options.htmlHDW=t.canMeasureNodes?"ignore":"force")}addExtension(t,e=""){return this.font.addExtension(t,e)}typeset(t,e){this.setDocument(e);var i=this.createNode();return this.toDOM(t,i,e),i}createNode(){var t=this.constructor.NAME;return this.html("mjx-container",{class:"MathJax",jax:t})}setScale(t,e){let i=this.getInitialScale()*this.options.scale;if("scale"===e.node.attributes.get("overflow")&&this.math.display){const t=e.getOuterBBox().w,s=this.math.metrics.containerWidth/this.pxPerEm;t>s&&t&&(i*=s/t)}1!==i&&this.adaptor.setStyle(t,"fontSize",Da(i))}getInitialScale(){return this.math.metrics.scale}toDOM(t,e,i=null){this.setDocument(i),this.math=t,this.container=e,this.pxPerEm=t.metrics.ex/this.font.params.x_height,this.executeFilters(this.preFilters,t,i,e),this.nodeMap=new Map,t.root.attributes.getAllInherited().overflow=this.options.displayOverflow;var s=t.root.attributes.get("overflow"),s=(this.adaptor.setAttribute(e,"overflow",s),"linebreak"===s&&this.getLinebreakWidth(),this.options.linebreaks.inline&&!t.display);let r=!!t.root.getProperty("inlineMarked");!r||s&&this.forceInlineBreaks===t.root.getProperty("inlineForced")||(this.unmarkInlineBreaks(t.root),t.root.removeProperty("inlineMarked"),t.root.removeProperty("inlineForced"),r=!1),s&&!r&&(this.markInlineBreaks(null==(s=t.root.childNodes)?void 0:s[0]),t.root.setProperty("inlineMarked",!0),t.root.setProperty("inlineForced",this.forceInlineBreaks)),t.root.setTeXclass(null);s=this.factory.wrap(t.root);this.setScale(e,s),this.processMath(s,e),this.nodeMap=null,this.executeFilters(this.postFilters,t,i,e)}getBBox(t,e){this.setDocument(e),(this.math=t).root.setTeXclass(null),this.nodeMap=new Map;e=this.factory.wrap(t.root).getOuterBBox();return this.nodeMap=null,e}getLinebreakWidth(){var t=this.math.metrics.containerWidth/this.pxPerEm,e=this.math.root.attributes.get("maxwidth")||this.options.linebreaks.width;this.containerWidth=Ma(e,t,1,this.pxPerEm)}markInlineBreaks(s){if(s){var r=this.forceInlineBreaks;let e=!1,i=!1,t="";for(const n of s.childNodes)if(t)i=this.markInlineBreak(i,r,t,s,n),t="",e=!1;else if(n.isEmbellished){if(n===s.childNodes[0])continue;const a=n.coreMO(),o=a.texClass,l=a.attributes.get("linebreak"),c=a.attributes.get("linebreakstyle");(o===h.BIN||o===h.REL||o===h.ORD&&a.hasSpacingAttributes()||"auto"!==l)&&"nobreak"!==l&&("before"===c?e&&"auto"===l||(i=this.markInlineBreak(i,r,l,s,n,a)):t=l),e="newline"===l&&"after"===c}else if(n.isKind("mspace")){const t=n.attributes.get("linebreak");"nobreak"!==t&&n.canBreak&&(i=this.markInlineBreak(i,r,t,s,n)),e="newline"===t}else e=!1,n.isKind("mstyle")&&!n.attributes.get("style")&&!n.attributes.hasExplicit("mathbackground")||n.isKind("semantics")?(this.markInlineBreaks(n.childNodes[0]),n.getProperty("process-breaks")&&(n.setProperty("inline-breaks",!0),n.childNodes[0].setProperty("inline-breaks",!0),s.parent.setProperty("process-breaks","true"))):n.isKind("mrow")&&n.attributes.get("data-semantic-added")&&(this.markInlineBreaks(n),n.getProperty("process-breaks")&&(n.setProperty("inline-breaks",!0),s.parent.setProperty("process-breaks","true")))}}markInlineBreak(t,e,i,s,r,n=null){return r.setProperty("breakable",!0),e&&"newline"!==i?(r.setProperty("forcebreak",!0),null!=n&&n.setProperty("forcebreak",!0)):(r.removeProperty("forcebreak"),null!=n&&n.removeProperty("forcebreak"),"newline"===i&&r.setProperty("newline",!0)),t||(s.setProperty("process-breaks",!0),s.parent.setProperty("process-breaks",!0),t=!0),t}unmarkInlineBreaks(t){if(t&&(t.removeProperty("forcebreak"),t.removeProperty("breakable"),t.getProperty("process-breaks"))){t.removeProperty("process-breaks");for(const e of t.childNodes)this.unmarkInlineBreaks(e)}}getMetrics(t){this.setDocument(t);const e=this.adaptor,i=this.getMetricMaps(t);for(const s of t.math){const t=e.parent(s.start.node);if(s.state()<u.METRICS&&t){const e=i[s.display?1:0],{em:r,ex:n,containerWidth:a,scale:o,family:l}=e.get(t);s.setMetrics(r,n,a,o),this.options.mtextInheritFont&&(s.outputData.mtextFamily=l),this.options.merrorInheritFont&&(s.outputData.merrorFamily=l),s.state(u.METRICS)}}}getMetricsFor(t,e){var i=this.options.mtextInheritFont||this.options.merrorInheritFont,t=this.getTestElement(t,e),i=Object.assign(Object.assign({},this.measureMetrics(t,i)),{display:e});return this.adaptor.remove(t),i}getMetricMaps(t){const e=this.adaptor,i=[new Map,new Map];for(const s of t.math){const t=e.parent(s.start.node);if(t&&s.state()<u.METRICS){const e=i[s.display?1:0];e.has(t)||e.set(t,this.getTestElement(t,s.display))}}const s=this.options.mtextInheritFont||this.options.merrorInheritFont,r=[new Map,new Map];for(const t of r.keys())for(const e of i[t].keys())r[t].set(e,this.measureMetrics(i[t].get(e),s));for(const t of r.keys())for(const s of i[t].values())e.remove(s);return r}getTestElement(t,e){const i=this.adaptor;if(!this.testInline){this.testInline=this.html("mjx-test",{style:{display:"inline-block",width:"100%","font-style":"normal","font-weight":"normal","font-size":"100%","font-size-adjust":"none","text-indent":0,"text-transform":"none","letter-spacing":"normal","word-spacing":"normal",overflow:"hidden",height:"1px","margin-right":"-1px"}},[this.html("mjx-left-box",{style:{display:"inline-block",width:0,float:"left"}}),this.html("mjx-ex-box",{style:{position:"absolute",overflow:"hidden",width:"1px",height:"60ex"}}),this.html("mjx-right-box",{style:{display:"inline-block",width:0,float:"right"}})]),this.testDisplay=i.clone(this.testInline),i.setStyle(this.testDisplay,"display","table"),i.setStyle(this.testDisplay,"margin-right",""),i.setStyle(i.firstChild(this.testDisplay),"display","none");const t=i.lastChild(this.testDisplay);i.setStyle(t,"display","table-cell"),i.setStyle(t,"width","10000em"),i.setStyle(t,"float","")}return i.append(t,i.clone(e?this.testDisplay:this.testInline))}measureMetrics(t,e){const i=this.adaptor,s=e?i.fontFamily(t):"",r=i.fontSize(t),[n,a]=i.nodeSize(i.childNode(t,1)),o=n?a/60:r*this.options.exFactor;return{em:r,ex:o,containerWidth:n?"table"===i.getStyle(t,"display")?i.nodeSize(i.lastChild(t))[0]-1:i.nodeBBox(i.lastChild(t)).left-i.nodeBBox(i.firstChild(t)).left-2:1e6,scale:Math.max(this.options.minScale,this.options.matchFontHeight?o/this.font.params.x_height/r:1),family:s}}styleSheet(t){if(this.setDocument(t),this.styleJson.clear(),this.styleJson.addStyles(this.constructor.commonStyles),"getStyles"in t)for(const e of t.getStyles())this.styleJson.addStyles(e);return this.addWrapperStyles(this.styleJson),this.addFontStyles(this.styleJson),this.html("style",{id:"MJX-styles"},[this.text("\n"+this.styleJson.cssText+"\n")])}addFontStyles(t){t.addStyles(this.font.styles)}addWrapperStyles(t){for(const e of this.factory.getKinds())this.addClassStyles(this.factory.getNodeClass(e),t)}addClassStyles(t,e){t.addStyles(e,this)}insertStyles(t){}setDocument(t){t&&(this.document=t,this.adaptor.document=t.document)}html(t,e={},i=[],s){return this.adaptor.node(t,e,i,s)}text(t){return this.adaptor.text(t)}fixed(t,e=3){return Math.abs(t)<6e-4?"0":t.toFixed(e).replace(/\.?0+$/,"")}measureText(t,e,i=["",!1,!1]){var s=this.unknownText(t,e);if("-explicitFont"===e){const t=this.cssFontStyles(i);this.adaptor.setAttributes(s,{style:t})}return this.measureTextNodeWithCache(s,t,e,i)}measureTextNodeWithCache(t,e,i,s=["",!1,!1]){"-explicitFont"===i&&(i=[s[0],s[1]?"T":"F",s[2]?"T":"F",""].join("-")),this.unknownCache.has(i)||this.unknownCache.set(i,new Map);const r=this.unknownCache.get(i),n=r.get(e);if(n)return n;s=this.measureTextNode(t);return r.set(e,s),s}cssFontStyles(t,e={}){var[t,i,s]=t;return e["font-family"]=this.font.getFamily(t),i&&(e["font-style"]="italic"),s&&(e["font-weight"]="bold"),e}getFontData(t){return t=t||new eo,[this.font.getFamily(t.get("font-family")),"italic"===t.get("font-style"),"bold"===t.get("font-weight")]}}Mc.NAME="Common",Mc.OPTIONS=Object.assign(Object.assign({},Ir.OPTIONS),{scale:1,minScale:.5,mtextInheritFont:!1,merrorInheritFont:!1,mtextFont:"",merrorFont:"serif",mathmlSpacing:!1,skipAttributes:{},exFactor:.5,displayAlign:"center",displayIndent:"0",displayOverflow:"overflow",linebreaks:{inline:!0,width:"100%",lineleading:.2,LinebreakVisitor:null},font:"",htmlHDW:"auto",wrapperFactory:null,fontData:null,fontPath:Oc,styleJson:null}),Mc.commonStyles={'mjx-container[overflow="scroll"][display]':{overflow:"auto clip","min-width":"initial !important"},'mjx-container[overflow="truncate"][display]':{overflow:"hidden clip","min-width":"initial !important"},"mjx-container[display]":{display:"block","text-align":"center","justify-content":"center",margin:"calc(1em - 2px) 0",padding:"2px 0"},'mjx-container[display][width="full"]':{display:"flex"},'mjx-container[justify="left"]':{"text-align":"left","justify-content":"left"},'mjx-container[justify="right"]':{"text-align":"right","justify-content":"right"}};const Dc=4,Pc=1,Bc=2,Fc=.067,Uc=.2,qc=Fc+"em solid",jc={top:0,right:1,bottom:2,left:3},Hc=Object.keys(jc),Gc=t=>new Array(4).fill(t.thickness+t.padding),Vc=t=>new Array(4).fill(t.padding),Wc=t=>new Array(4).fill(t.thickness),Xc=t=>Math.max(t.padding,t.thickness*(t.arrowhead.x+t.arrowhead.dx+1)),zc=(t,e)=>{var i,s;return t.childNodes[0]&&({h:i,d:s}=t.childNodes[0].getBBox(),e[0]=e[2]=Math.max(0,t.thickness*t.arrowhead.y-(i+s)/2)),e},Kc=(t,e)=>{var i;return t.childNodes[0]&&(i=t.childNodes[0].getBBox()["w"],e[1]=e[3]=Math.max(0,t.thickness*t.arrowhead.y-i/2)),e},Jc={up:[-Math.PI/2,!1,!0,"verticalstrike"],down:[Math.PI/2,!1,!0,"verticakstrike"],right:[0,!1,!1,"horizontalstrike"],left:[Math.PI,!1,!1,"horizontalstrike"],updown:[Math.PI/2,!0,!0,"verticalstrike uparrow downarrow"],leftright:[0,!0,!1,"horizontalstrike leftarrow rightarrow"]},Yc={updiagonal:[-1,0,!1,"updiagonalstrike northeastarrow"],northeast:[-1,0,!1,"updiagonalstrike updiagonalarrow"],southeast:[1,0,!1,"downdiagonalstrike"],northwest:[1,Math.PI,!1,"downdiagonalstrike"],southwest:[-1,Math.PI,!1,"updiagonalstrike"],northeastsouthwest:[-1,0,!0,"updiagonalstrike northeastarrow updiagonalarrow southwestarrow"],northwestsoutheast:[1,0,!0,"downdiagonalstrike northwestarrow southeastarrow"]},$c={up:t=>Kc(t,[Xc(t),0,t.padding,0]),down:t=>Kc(t,[t.padding,0,Xc(t),0]),right:t=>zc(t,[0,Xc(t),0,t.padding]),left:t=>zc(t,[0,t.padding,0,Xc(t)]),updown:t=>Kc(t,[Xc(t),0,Xc(t),0]),leftright:t=>zc(t,[0,Xc(t),0,Xc(t)])},Qc=function(e){return t=>{const i=jc[t];return[t,{renderer:e,bbox:t=>{const e=[0,0,0,0];return e[i]=t.thickness+t.padding,e},border:t=>{const e=[0,0,0,0];return e[i]=t.thickness,e}}]}},Zc=function(n){return(t,e,i)=>{const s=jc[e],r=jc[i];return[t,{renderer:n,bbox:t=>{const e=t.thickness+t.padding,i=[0,0,0,0];return i[s]=i[r]=e,i},border:t=>{const e=[0,0,0,0];return e[s]=e[r]=t.thickness,e},remove:e+" "+i}]}},th=function(i){return t=>{var e="mjx-"+t.charAt(0)+"strike";return[t+"diagonalstrike",{renderer:i(e),bbox:Gc}]}},eh=function(o){return t=>{const[r,n,a,e]=Yc[t];return[t+"arrow",{renderer:(t,e)=>{var[i,s]=t.arrowAW(),s=t.arrow(s,r*(i-n),a);o(t,s)},bbox:t=>{var{a:e,x:i,y:s}=t.arrowData(),[r,n,a]=[t.arrowhead.x,t.arrowhead.y,t.arrowhead.dx],[r,a]=t.getArgMod(r+a,n),n=s+(e<r?t.thickness*a*Math.sin(r-e):0),s=i+(r>Math.PI/2-e?t.thickness*a*Math.sin(r+e-Math.PI/2):0);return[n,s,n,s]},remove:e}]}},ih=function(l){return t=>{const[n,a,o,e]=Jc[t];return[t+"arrow",{renderer:(t,e)=>{var{w:i,h:s,d:r}=t.getBBox(),[s,r]=o?[s+r,"X"]:[i,"Y"],i=t.getOffset(r),s=t.arrow(s,n,a,r,i);l(t,s)},bbox:$c[t],remove:e}]}};function sh(t,e,i){return e?t?2/18:5/18:t?i<2/18?0:2/18:i}const rh={[Pa(0)]:"0",[Pa(2/18)]:"1",[Pa(3/18)]:"2",[Pa(4/18)]:"3",[Pa(5/18)]:"4",[Pa(6/18)]:"5"};class nh extends xa{static addStyles(t,e){t.addStyles(this.styles)}get jax(){return this.factory.jax}get adaptor(){return this.factory.jax.adaptor}get metrics(){return this.factory.jax.math.metrics}get containerWidth(){return this.jax.containerWidth}get linebreaks(){return this.jax.linebreaks}get linebreakOptions(){return this.jax.options.linebreaks}get fixesPWidth(){return!this.node.notParent&&!this.node.isToken}get breakCount(){var t;return this._breakCount<0&&(t=this.node,this._breakCount=t.isEmbellished?this.coreMO().embellishedBreakCount:t.arity<0&&!t.linebreakContainer&&this.childNodes[0].isStack?this.childNodes[0].breakCount:0),this._breakCount}breakTop(t,e){return this.node.linebreakContainer||!this.parent?t:this.parent.breakTop(t,this)}constructor(t,e,i=null){super(t,e),this.parent=null,this.dom=null,this.removedStyles=null,this.styles=null,this.styleData=null,this.variant="",this.bboxComputed=!1,this._breakCount=-1,this.lineBBox=[],this.stretch=wc,this.font=null,this.parent=i,this.font=t.jax.font,this.bbox=Fa.zero(),this.getStyles(),this.getStyleData(),this.getVariant(),this.getScale(),this.getSpace(),this.childNodes=e.childNodes.map(t=>{t=this.wrap(t);return t.bbox.pwidth&&(e.notParent||e.isKind("math"))&&(this.bbox.pwidth=Fa.fullWidth),t})}wrap(t,e=null){var i=this.factory.wrap(t,e||this);return e&&e.childNodes.push(i),this.jax.nodeMap.set(t,i),i}getBBox(t=!0){if(this.bboxComputed)return this.bbox;var e=t?this.bbox:Fa.zero();return this.computeBBox(e),this.bboxComputed=t,e}getOuterBBox(t=!0){var e;const i=this.getBBox(t);if(!this.styleData)return i;const s=this.styleData.padding,r=(null==(e=this.styleData.border)?void 0:e.width)||[0,0,0,0],n=i.copy();for(const[,t,e]of Fa.boxSides)n[e]+=s[t]+r[t];return n}getUnbrokenHD(){const e=this.breakCount+1;let i=0,s=0;for(let t=0;t<e;t++){const{h:e,d:r}=this.getLineBBox(t);e>i&&(i=e),r>s&&(s=r)}return[i,s]}computeBBox(t,e=!1){t.empty();for(const e of this.childNodes)t.append(e.getOuterBBox());t.clean(),this.fixesPWidth&&this.setChildPWidths(e)&&this.computeBBox(t,!0)}getLineBBox(t){if(!this.lineBBox[t]){var e=this.breakCount;if(e){const i=this.embellishedBBox(t)||this.computeLineBBox(t);this.lineBBox[t]=i,0===t&&(!this.node.isKind("mo")&&this.node.isEmbellished?i.originalL=this.getBBox().L:i.L=this.getBBox().L),t===e&&(i.R=this.getBBox().R)}else{e=this.getOuterBBox();this.lineBBox[t]=Lc.from(e,this.linebreakOptions.lineleading)}}return this.lineBBox[t]}embellishedBBox(t){if(!this.node.isEmbellished||this.node.isKind("mo"))return null;const e=this.coreMO();return e.moLineBBox(t,e.embellishedBreakStyle,this.getOuterBBox())}computeLineBBox(t){return this.getChildLineBBox(this.childNodes[0],t)}getBreakNode(t){var e;if(!t.start)return[this,null];var[t,i]=t.start;if(this.node.isEmbellished)return[this,this.coreMO()];const s=(null!=(e=null==(e=this.childNodes[0])?void 0:e.node)&&e.isInferred?this.childNodes[0]:this).childNodes;return this.node.isToken||!s[t]?[this,null]:s[t].getBreakNode(s[t].getLineBBox(i))}getChildLineBBox(t,e){var i=this.breakCount;let s=t.getLineBBox(e);return(this.styleData||this.bbox.L||this.bbox.R)&&(s=s.copy()),this.addMiddleBorders(s),0===e?(s.L+=this.bbox.L,this.addLeftBorders(s)):e===i&&(s.R+=this.bbox.R,this.addRightBorders(s)),s}addLeftBorders(t){var e,i;this.styleData&&(e=this.styleData.border,i=this.styleData.padding,t.w+=((null==(t=null==e?void 0:e.width)?void 0:t[3])||0)+((null==i?void 0:i[3])||0))}addMiddleBorders(t){var e,i,s;this.styleData&&(i=this.styleData.border,s=this.styleData.padding,t.h+=((null==(e=null==i?void 0:i.width)?void 0:e[0])||0)+((null==s?void 0:s[0])||0),t.d+=((null==(e=null==i?void 0:i.width)?void 0:e[2])||0)+((null==s?void 0:s[2])||0))}addRightBorders(t){var e,i;this.styleData&&(e=this.styleData.border,i=this.styleData.padding,t.w+=((null==(t=null==e?void 0:e.width)?void 0:t[1])||0)+((null==i?void 0:i[1])||0))}setChildPWidths(t,e=null,i=!0){if(t)return!1;i&&(this.bbox.pwidth="");let s=!1;for(const n of this.childNodes){var r=n.getBBox();r.pwidth&&n.setChildPWidths(t,null===e?r.w:e,i)&&(s=!0)}return s}breakToWidth(t){}invalidateBBox(t=!0){(this.bboxComputed||0<=this._breakCount)&&(this.bboxComputed=!1,this.lineBBox=[],this._breakCount=-1,this.parent&&t&&this.parent.invalidateBBox())}copySkewIC(t){var e=this.childNodes[0],i=(null!=(i=null==e?void 0:e.bbox)&&i.sk&&(t.sk=e.bbox.sk),null!=(i=null==e?void 0:e.bbox)&&i.dx&&(t.dx=e.bbox.dx),this.childNodes[this.childNodes.length-1]);null!=(e=null==i?void 0:i.bbox)&&e.ic&&(t.ic=i.bbox.ic,t.w+=t.ic)}getStyles(){var t=this.node.attributes.getExplicit("style");if(t){const s=this.styles=new eo(t);for(let t=0,e=nh.removeStyles.length;t<e;t++){var i=nh.removeStyles[t];s.get(i)&&(this.removedStyles||(this.removedStyles={}),this.removedStyles[i]=s.get(i),s.set(i,""))}}}getStyleData(){if(this.styles){const a=Array(4).fill(0),o=Array(4).fill(0),l=Array(4),c=Array(4);let t=!1,e=!1;for(var[i,s]of Fa.boxSides){var r="border"+i,n=this.styles.get(r+"Width"),n=(n&&(e=!0,o[s]=Math.max(0,this.length2em(n,1)),l[s]=this.styles.get(r+"Style")||"solid",c[s]=this.styles.get(r+"Color")),this.styles.get("padding"+i));n&&(t=!0,a[s]=Math.max(0,this.length2em(n,1)))}this.styleData=t||e?{padding:a,border:e?{width:o,style:l,color:c}:null}:null}}getVariant(){if(this.node.isToken){const e=this.node.attributes;let t=e.get("mathvariant");if(e.hasExplicit("mathvariant"))this.font.getVariant(t)||(console.warn("Invalid variant: "+t),t="normal");else{const i=e.getList("fontfamily","fontweight","fontstyle");if(this.removedStyles){const e=this.removedStyles;e.fontFamily&&(i.family=e.fontFamily),e.fontWeight&&(i.weight=e.fontWeight),e.fontStyle&&(i.style=e.fontStyle)}i.fontfamily&&(i.family=i.fontfamily),i.fontweight&&(i.weight=i.fontweight),i.fontstyle&&(i.style=i.fontstyle),i.weight&&i.weight.match(/^\d+$/)&&(i.weight=600<parseInt(i.weight)?"bold":"normal"),t=i.family?this.explicitVariant(i.family,i.weight,i.style):(this.node.getProperty("variantForm")&&(t="-tex-variant"),t=(nh.BOLDVARIANTS[i.weight]||{})[t]||t,(nh.ITALICVARIANTS[i.style]||{})[t]||t)}this.variant=t}}explicitVariant(t,e,i){let s=this.styles;return(s=s||(this.styles=new eo)).set("fontFamily",t),e&&s.set("fontWeight",e),i&&s.set("fontStyle",i),"-explicitFont"}getScale(){let t=1;const e=this.parent,i=e?e.bbox.scale:1,s=this.node.attributes,r=Math.min(s.get("scriptlevel"),2);let n=s.get("fontsize"),a=this.node.isToken||this.node.isKind("mstyle")?s.get("mathsize"):s.getInherited("mathsize");if(0!==r&&(t=Math.pow(s.get("scriptsizemultiplier"),r)),this.removedStyles&&this.removedStyles.fontSize&&!n&&(n=this.removedStyles.fontSize),"1"!==(a=n&&!s.hasExplicit("mathsize")?n:a)&&(t*=this.length2em(a,1,1)),0!==r){const e=this.length2em(s.get("scriptminsize"),.4,1);t<e&&(t=e)}this.bbox.scale=t,this.bbox.rscale=t/i}getSpace(){var t=this.isTopEmbellished(),e=this.node.hasSpacingAttributes();this.jax.options.mathmlSpacing||e?t&&this.getMathMLSpacing():this.getTeXSpacing(t,e)}getMathMLSpacing(){const t=this.node.coreMO(),e=t.coreParent(),i=e.parent;if(i&&i.isKind("mrow")&&1!==i.childNodes.length){var s=i.childIndex(e);if(null!==s){const r=t.getProperty("noDictDef"),n=t.attributes,a=0<n.get("scriptlevel");this.bbox.L=n.isSet("lspace")?Math.max(0,this.length2em(n.get("lspace"))):sh(a,r,t.lspace),this.bbox.R=n.isSet("rspace")?Math.max(0,this.length2em(n.get("rspace"))):sh(a,r,t.rspace),s&&(s=i.childNodes[s-1]).isEmbellished&&(s=this.jax.nodeMap.get(s).getBBox()).R&&(this.bbox.L=Math.max(0,this.bbox.L-s.R))}}}getTeXSpacing(t,e){if(!e){const t=this.node.texSpacing();t&&(this.bbox.L=this.length2em(t))}if(t||e){const t=this.node.coreMO().attributes;t.isSet("lspace")&&(this.bbox.L=Math.max(0,this.length2em(t.get("lspace")))),t.isSet("rspace")&&(this.bbox.R=Math.max(0,this.length2em(t.get("rspace"))))}}isTopEmbellished(){return this.node.isEmbellished&&!(this.node.parent&&this.node.parent.isEmbellished)}core(){return this.jax.nodeMap.get(this.node.core())}coreMO(){return this.jax.nodeMap.get(this.node.coreMO())}coreRScale(){let t=this.bbox.rscale,e=this.coreMO();for(;e!==this&&e;)t*=e.bbox.rscale,e=e.parent;return t}getRScale(){let t=1,e=this;for(;e;)t*=e.bbox.rscale,e=e.parent;return t}getText(){let t="";if(this.node.isToken)for(const e of this.node.childNodes)e instanceof $r&&(t+=e.getText());return t}canStretch(t){if(this.stretch=wc,this.node.isEmbellished){const e=this.core();e&&e.node!==this.node&&e.canStretch(t)&&(this.stretch=e.stretch)}return this.stretch.dir!==Ac.None}getAlignShift(){let{indentalign:t,indentshift:e,indentalignfirst:i,indentshiftfirst:s}=this.node.attributes.getAllAttributes();return"indentalign"!==i&&(t=i),"indentshift"!==s&&(e=s),this.processIndent(t,e)}processIndent(t,e,i="",s="",r=this.metrics.containerWidth){return this.jax.math.display?(i&&"auto"!==i||(i=this.jax.math.root.getProperty("inlineMarked")?"left":this.jax.options.displayAlign),s&&"auto"!==s||(s=this.jax.math.root.getProperty("inlineMarked")?"0":this.jax.options.displayIndent),"auto"===t&&(t=i),"auto"===e&&(e=s,"right"!==t||e.match(/^\s*0[a-z]*\s*$/)||(e=("-"+e.trim()).replace(/^--/,""))),[t,this.length2em(e,r)]):["left",0]}getAlignX(t,e,i){return"right"===i?t-(e.w+e.R)*e.rscale:"left"===i?e.L*e.rscale:(t-e.w*e.rscale)/2}getAlignY(t,e,i,s,r){return"top"===r?t-i:"bottom"===r?s-e:"center"===r?(t-i-(e-s))/2:0}getWrapWidth(t){return this.childNodes[t].getBBox().w}getChildAlign(t){return"left"}percent(t){return Da(t)}em(t){return Pa(t)}px(t,e=-Sa){return Ba(t,e,this.metrics.em)}length2em(t,e=1,i=null){null===i&&(i=this.bbox.scale);var s=this.font.params.rule_thickness,r=br(t,{medium:1,thin:2/3,thick:5/3},0);return r?r*s:Ma(t,e,i,this.jax.pxPerEm)}unicodeChars(i,t=this.variant){let e=cn(i);t=this.font.getVariant(t);if(t&&t.chars){const i=t.chars;e=e.map(t=>{var e;return(null==(e=null==(e=i[t])?void 0:e[3])?void 0:e.smp)||t})}return e}remapChars(t){return t}mmlText(t){return this.node.factory.create("text").setText(t)}mmlNode(t,e={},i=[]){return this.node.factory.create(t,e,i)}createMo(t){const e=this.node.factory,i=e.create("text").setText(t),s=e.create("mo",{stretchy:!0},[i]),r=(s.inheritAttributesFrom(this.node),s.parent=this.node.parent,this.wrap(s));return r.parent=this,r}getVariantChar(t,e){const i=this.font.getChar(t,e)||[0,0,0,{unknown:!0}];return 3===i.length&&(i[3]={}),i}html(t,e={},i=[]){return this.jax.html(t,e,i)}}nh.kind="unknown",nh.styles={},nh.removeStyles=["fontSize","fontFamily","fontWeight","fontStyle","fontVariant","font"],nh.skipAttributes={fontfamily:!0,fontsize:!0,fontweight:!0,fontstyle:!0,color:!0,background:!0,class:!0,href:!0,style:!0,xmlns:!0},nh.BOLDVARIANTS={bold:{normal:"bold",italic:"bold-italic",fraktur:"bold-fraktur",script:"bold-script","sans-serif":"bold-sans-serif","sans-serif-italic":"sans-serif-bold-italic"},normal:{bold:"normal","bold-italic":"italic","bold-fraktur":"fraktur","bold-script":"script","bold-sans-serif":"sans-serif","sans-serif-bold-italic":"sans-serif-italic"}},nh.ITALICVARIANTS={italic:{normal:"italic",bold:"bold-italic","sans-serif":"sans-serif-italic","bold-sans-serif":"sans-serif-bold-italic"},normal:{italic:"normal","bold-italic":"bold","sans-serif-italic":"sans-serif","sans-serif-bold-italic":"bold-sans-serif"}};class ah extends Aa{constructor(){super(...arguments),this.jax=null}get Wrappers(){return this.node}}function oh(t){return class extends t{computeBBox(t,e=!1){super.computeBBox(t,e),this.childNodes[0]&&this.childNodes[0].bbox.ic&&(t.ic=this.childNodes[0].bbox.ic)}}}function lh(t){return class extends t{remappedText(t,e){var i=this.parent.stretch.c;return i?[i]:this.parent.remapChars(this.unicodeChars(t,e))}computeBBox(i,s=0){var r=this.parent.variant,t=this.node.getText();if("-explicitFont"===r){const s=this.jax.getFontData(this.parent.styles),{w:e,h:c,d:h}=this.jax.measureText(t,r,s);i.h=c,i.d=h,i.w=e}else{const s=this.remappedText(t,r);let e="";i.empty();for(let t=0;t<s.length;t++){var[n,a,o,l]=this.getVariantChar(r,s[t]);if(l.unknown)e+=String.fromCodePoint(s[t]);else if(e=this.addUtextBBox(i,e,r),this.updateBBox(i,n,a,o),i.ic=l.ic||0,i.sk=l.sk||0,i.dx=l.dx||0,l.oc&&!(t<s.length-1)){n=this.parent.childNodes;if(this.node===n[n.length-1].node){const d=this.parent.parent.node;let t=d.isKind("mrow")||d.isInferred?d.childNodes[d.childIndex(this.parent.node)+1]:null;(t=null!=t&&t.isKind("mo")&&"â¢"===t.getText()?d.childNodes[d.childIndex(t)+1]:t)&&t.attributes.get("mathvariant")===r?i.oc=l.oc:i.ic=l.oc}}}this.addUtextBBox(i,e,r),1<s.length&&(i.sk=0),i.clean()}}addUtextBBox(t,e,i){var s;return e&&({h:e,d:i,w:s}=this.jax.measureText(e,i),this.updateBBox(t,e,i,s)),""}updateBBox(t,e,i,s){t.w+=s,e>t.h&&(t.h=e),i>t.d&&(t.d=i)}getStyles(){}getVariant(){}getScale(){}getSpace(){}}}function ch(t){class e extends t{constructor(t,e,i=null){super(t,e,i),this.rscale=this.getRScale()}computeBBox(t,e=0){var i=this.node.getXML(),s=this.getHDW(i,"use","force"),{h:s,d:i,w:r}=s?this.splitHDW(s):this.measureXmlNode(i);t.w=r,t.h=s,t.d=i}getHTML(){let t=this.adaptor.clone(this.node.getXML());var e=this.getFontStyles();return!this.getHDW(t,"force")&&1===this.jax.options.scale||(t=this.addHDW(t,e)),this.html("mjx-html",{variant:this.parent.variant,style:e},[t])}getHDW(t,e,i=e){var s=this.jax.options.htmlHDW,t=this.adaptor.getAttribute(t,"data-mjx-hdw");return!t||s!==e&&s!==i?null:t}splitHDW(t){const e=1/this.metrics.scale,[i,s,r]=un(t).map(t=>this.length2em(t||"0")*e);return{h:i,d:s,w:r}}getFontStyles(){var t;const e=this.adaptor,i=this.metrics;return{"font-family":(null==(t=this.parent.styles)?void 0:t.get("font-family"))||i.family||e.fontFamily(e.parent(this.jax.math.start.node))||"initial","font-size":this.jax.fixed(i.em*this.rscale)+"px"}}measureXmlNode(t){const e=this.adaptor,i=this.html("mjx-xml-block",{style:{display:"inline-block"}},[e.clone(t)]),s=this.html("mjx-baseline",{style:{display:"inline-block",width:0,height:0}}),r=this.getFontStyles(),n=this.html("mjx-measure-xml",{style:r},[s,i]),a=this.jax.container;e.append(e.parent(this.jax.math.start.node),a),e.append(a,n);var t=this.metrics,t=t.em*t.scale*this.rscale,{left:o,right:l,bottom:c,top:h}=e.nodeBBox(i),l=(l-o)/t,o=(e.nodeBBox(s).top-h)/t,c=(c-h)/t-o;return e.remove(a),e.remove(n),{w:l,h:o,d:c}}getStyles(){}getScale(){}getVariant(){}}return e.autoStyle=!1,e.styles={"mjx-measure-xml":{position:"absolute",left:0,top:0,display:"inline-block","line-height":"normal","white-space":"normal"},"mjx-html":{display:"inline-block","line-height":"normal","text-align":"initial","white-space":"initial"},"mjx-html-holder":{display:"block",position:"absolute",top:0,left:0,bottom:0,right:0}},e}ah.defaultNodes={};const hh={dx:".2em",dy:".1em",postDelay:600,clearDelay:100,hoverTimer:new Map,clearTimer:new Map,stopTimers:(t,e)=>{e.clearTimer.has(t)&&(clearTimeout(e.clearTimer.get(t)),e.clearTimer.delete(t)),e.hoverTimer.has(t)&&(clearTimeout(e.hoverTimer.get(t)),e.hoverTimer.delete(t))}};function dh(t){return class extends t{get selected(){var t=this.node.attributes.get("selection"),t=Math.max(1,Math.min(this.childNodes.length,t))-1;return this.childNodes[t]||this.wrap(this.node.selected)}getParameters(){var[t,e]=un(this.node.attributes.get("data-offsets")||"");this.tipDx=this.length2em(t||hh.dx),this.tipDy=this.length2em(e||hh.dy)}constructor(t,e,i=null){super(t,e,i);const s=this.constructor.actions,r=this.node.attributes.get("actiontype"),[n,a]=s.get(r)||[(t,e)=>{},{}];this.action=n,this.data=a,this.getParameters()}computeBBox(t,e=!1){t.updateFrom(this.selected.getOuterBBox()),this.selected.setChildPWidths(e)}get breakCount(){return this.node.isEmbellished?this.selected.coreMO().embellishedBreakCount:this.selected.breakCount}computeLineBBox(t){return this.getChildLineBBox(this.selected,t)}}}function uh(t){return class extends t{getWrapWidth(t){return this.parent?this.getBBox().w:this.metrics.containerWidth/this.jax.pxPerEm}computeBBox(t,e=!1){super.computeBBox(t,e);const i=this.node.attributes;if(!this.parent&&this.jax.math.display&&"linebreak"===i.get("overflow")){const e=this.containerWidth;t.w>e&&this.childNodes[0].breakToWidth(e),t.updateFrom(this.childNodes[0].getBBox())}}}}function ph(t){return class extends t{getParameters(){const t=this.node.attributes,e=t.get("data-padding"),i=(void 0!==e&&(this.padding=this.length2em(e,Uc)),t.get("data-thickness"));void 0!==i&&(this.thickness=this.length2em(i,Fc));var s=t.get("data-arrowhead");if(void 0!==s){const[t,e,i]=un(s);this.arrowhead={x:t?parseFloat(t):Dc,y:e?parseFloat(e):Bc,dx:i?parseFloat(i):Pc}}}getNotations(){const t=this.constructor.notations;for(const i of un(this.node.attributes.get("notation"))){var e=t.get(i);e&&((this.notations[i]=e).renderChild&&(this.renderChild=e.renderer))}}removeRedundantNotations(){for(const t of Object.keys(this.notations))if(this.notations[t]){const e=this.notations[t].remove||"";for(const i of e.split(/ /))delete this.notations[i]}}initializeNotations(){for(const t of Object.keys(this.notations)){const e=this.notations[t].init;e&&e(this)}}getBBoxExtenders(){var t=[0,0,0,0];for(const e of Object.keys(this.notations))this.maximizeEntries(t,this.notations[e].bbox(this));return t}getPadding(){const e=[0,0,0,0];for(const t of Object.keys(this.notations)){const i=this.notations[t].border;i&&this.maximizeEntries(e,i(this))}return[0,1,2,3].map(t=>this.TRBL[t]-e[t])}maximizeEntries(e,i){for(let t=0;t<e.length;t++)e[t]<i[t]&&(e[t]=i[t])}getOffset(t){var[e,i,s,r]=this.TRBL,t=("X"===t?i-r:s-e)/2;return.001<Math.abs(t)?t:0}getArgMod(t,e){return[Math.atan2(e,t),Math.sqrt(t*t+e*e)]}arrow(t,e,i,s=0,r){return null}arrowData(){var[t,e]=[this.padding,this.thickness],e=e*(this.arrowhead.x+Math.max(1,this.arrowhead.dx)),{h:i,d:s,w:r}=this.childNodes[0].getBBox(),i=i+s,s=Math.sqrt(i*i+r*r),n=Math.max(t,e*r/s),t=Math.max(t,e*i/s),[e,s]=this.getArgMod(r+2*n,i+2*t);return{a:e,W:s,x:n,y:t}}arrowAW(){var{h:t,d:e,w:i}=this.childNodes[0].getBBox(),[s,r,n,a]=this.TRBL;return this.getArgMod(a+i+r,s+t+e+n)}createMsqrt(t){const e=this.node.factory.create("msqrt"),i=(e.inheritAttributesFrom(this.node),e.childNodes[0]=t.node,this.wrap(e));return i.parent=this,i}sqrtTRBL(){var t=this.msqrt.getBBox(),e=this.msqrt.childNodes[0].getBBox();return[t.h-e.h,0,t.d-e.d,t.w-e.w]}constructor(t,e,i=null){super(t,e,i),this.notations={},this.renderChild=null,this.msqrt=null,this.padding=Uc,this.thickness=Fc,this.arrowhead={x:Dc,y:Bc,dx:Pc},this.TRBL=[0,0,0,0],this.getParameters(),this.getNotations(),this.removeRedundantNotations(),this.initializeNotations(),this.TRBL=this.getBBoxExtenders()}computeBBox(t,e=!1){var[i,s,r,n]=this.TRBL,a=this.childNodes[0].getBBox();t.combine(a,n,0),t.h+=i,t.d+=r,t.w+=s,this.setChildPWidths(e)}}}function mh(t){return class extends t{createMrow(){const t=this.node.factory.create("inferredMrow");t.inheritAttributesFrom(this.node),this.mrow=this.wrap(t),this.mrow.parent=this}addMrowChildren(){const t=this.node,e=this.mrow;this.addMo(t.open),this.childNodes.length&&e.childNodes.push(this.childNodes[0]);let i=0;for(const s of this.childNodes.slice(1))this.addMo(t.separators[i++]),e.childNodes.push(s);this.addMo(t.close),e.stretchChildren()}addMo(t){if(t){const e=this.wrap(t);this.mrow.childNodes.push(e),e.parent=this.mrow}}constructor(t,e,i=null){super(t,e,i),this.mrow=null,this.createMrow(),this.addMrowChildren()}computeBBox(t,e=!1){t.updateFrom(this.mrow.getOuterBBox()),this.setChildPWidths(e)}get breakCount(){return this.mrow.breakCount}computeLineBBox(t){return this.mrow.getLineBBox(t)}}}function gh(t){return class extends t{getFractionBBox(t,e,i){var s=this.childNodes[0].getOuterBBox(),r=this.childNodes[1].getOuterBBox(),n=this.font.params.axis_height,{T:e,u:i,v:a}=this.getTUV(e,i);t.combine(s,0,n+e+Math.max(s.d*s.rscale,i)),t.combine(r,0,n-e-Math.max(r.h*r.rscale,a)),t.w+=2*this.pad+.2}getTUV(t,e){var i=this.font.params,s=i.axis_height,r=(t?3.5:1.5)*e;return{T:(t?3.5:1.5)*e,u:(t?i.num1:i.num2)-s-r,v:(t?i.denom1:i.denom2)+s-r}}getAtopBBox(t,e){var{u:e,v:i,nbox:s,dbox:r}=this.getUVQ(e);t.combine(s,0,e),t.combine(r,0,-i),t.w+=2*this.pad}getUVQ(t){var e=this.childNodes[0].getOuterBBox(),i=this.childNodes[1].getOuterBBox(),s=this.font.params;let[r,n]=t?[s.num1,s.denom1]:[s.num3,s.denom2];t=(t?7:3)*s.rule_thickness;let a=r-e.d*e.scale-(i.h*i.scale-n);return a<t&&(r+=(t-a)/2,n+=(t-a)/2,a=t),{u:r,v:n,q:a,nbox:e,dbox:i}}getBevelledBBox(t,e){var{u:e,v:i,delta:s,nbox:r,dbox:n}=this.getBevelData(e),a=this.bevel.getOuterBBox();t.combine(r,0,e),t.combine(a,t.w-s/2,0),t.combine(n,t.w-s/2,i)}getBevelData(t){var e=this.childNodes[0].getOuterBBox(),i=this.childNodes[1].getOuterBBox(),t=t?.4:.15,s=Math.max(e.scale*(e.h+e.d),i.scale*(i.h+i.d))+2*t,r=this.font.params.axis_height;return{H:s,delta:t,u:e.scale*(e.d-e.h)/2+r+t,v:i.scale*(i.d-i.h)/2+r-t,nbox:e,dbox:i}}isDisplay(){var{displaystyle:t,scriptlevel:e}=this.node.attributes.getList("displaystyle","scriptlevel");return t&&0===e}constructor(t,e,i=null){if(super(t,e,i),this.bevel=null,this.pad=this.node.getProperty("withDelims")?0:this.font.params.nulldelimiterspace,this.node.attributes.get("bevelled")){const t=this.getBevelData(this.isDisplay())["H"],e=this.bevel=this.createMo("/");e.node.attributes.set("symmetric",!0),e.canStretch(Ac.Vertical),e.getStretchedVariant([t],!0)}}computeBBox(t,e=!1){t.empty();var{linethickness:i,bevelled:s}=this.node.attributes.getList("linethickness","bevelled"),r=this.isDisplay();let n=null;if(s)this.getBevelledBBox(t,r);else{const e=this.length2em(String(i),.06);n=-2*this.pad,0===e?this.getAtopBBox(t,r):(this.getFractionBBox(t,r,e),n-=.2),n+=t.w}t.clean(),this.setChildPWidths(e,n)}canStretch(t){return!1}getChildAlign(t){const e=this.node.attributes;return e.get("bevelled")?"left":e.get(["numalign","denomalign"][t])}getWrapWidth(t){const e=this.node.attributes;return e.get("bevelled")?this.childNodes[t].getOuterBBox().w:this.getBBox().w-(this.length2em(e.get("linethickness"))?.2:0)-2*this.pad}}}function fh(t){return class extends t{constructor(t,e,i=null){super(t,e,i),this.getParameters()}getParameters(){const{width:t,height:e,valign:i,src:s,index:r}=this.node.attributes.getList("width","height","valign","src","index");if(s)this.width="auto"===t?1:this.length2em(t),this.height="auto"===e?1:this.length2em(e),this.valign=this.length2em(i||"0");else{const t=String.fromCodePoint(parseInt(r)),e=this.node.factory;this.charWrapper=this.wrap(e.create("text").setText(t)),this.charWrapper.parent=this}}computeBBox(t,e=0){this.charWrapper?t.updateFrom(this.charWrapper.getBBox()):(t.w=this.width,t.h=this.height+this.valign,t.d=-this.valign)}}}function bh(t){return class extends t{computeBBox(t,e=0){super.computeBBox(t),this.copySkewIC(t)}}}const Eh={base:"subList",subList:"supList",supList:"subList",psubList:"psupList",psupList:"psubList"},Nh=["sup","sup","psup","psub"];function yh(t){return class extends t{combinePrePost(t,e){const i=new Fa(t);return i.combine(e,0,0),i}getScriptData(){const t=this.scriptData={base:null,sub:Fa.empty(),sup:Fa.empty(),psub:Fa.empty(),psup:Fa.empty(),numPrescripts:0,numScripts:0},e=this.getScriptBBoxLists();this.combineBBoxLists(t.sub,t.sup,e.subList,e.supList),this.combineBBoxLists(t.psub,t.psup,e.psubList,e.psupList),t.base=e.base[0],t.numPrescripts=e.psubList.length,t.numScripts=e.subList.length}getScriptBBoxLists(){const t={base:[],subList:[],supList:[],psubList:[],psupList:[]};let e="base";for(const i of this.childNodes)e=i.node.isKind("mprescripts")?"psubList":(t[e].push(i.getOuterBBox()),Eh[e]);return this.firstPrescript=t.subList.length+t.supList.length+2,this.padLists(t.subList,t.supList),this.padLists(t.psubList,t.psupList),t}padLists(t,e){t.length>e.length&&e.push(Fa.empty())}combineBBoxLists(e,i,s,r){for(let t=0;t<s.length;t++){var[n,a,o]=this.getScaledWHD(s[t]),[l,c,h]=this.getScaledWHD(r[t]),n=Math.max(n,l);e.w+=n,i.w+=n,a>e.h&&(e.h=a),o>e.d&&(e.d=o),c>i.h&&(i.h=c),h>i.d&&(i.d=h)}}getScaledWHD(t){var{w:t,h:e,d:i,rscale:s}=t;return[t*s,e*s,i*s]}getCombinedUV(){var t=this.scriptData,e=this.combinePrePost(t.sub,t.psub),t=this.combinePrePost(t.sup,t.psup);return this.getUVQ(e,t)}addPrescripts(t,e,i){var s,r=this.scriptData;return r.numPrescripts&&(s=this.font.params.scriptspace,t.combine(r.psup,s,e),t.combine(r.psub,s,i)),t}addPostscripts(t,e,i){var s,r=this.scriptData;return r.numScripts&&(s=t.w,t.combine(r.sup,s,e),t.combine(r.sub,s,i),t.w+=this.font.params.scriptspace),t}constructor(...t){super(...t),this.scriptData=null,this.firstPrescript=0,this.getScriptData()}appendScripts(t){t.empty();var[e,i]=this.getCombinedUV();return this.addPrescripts(t,e,i),t.append(this.scriptData.base),this.addPostscripts(t,e,i),t.clean(),t}computeLineBBox(t){var e=this.baseChild.breakCount,i=this.baseChild.getLineBBox(t).copy();let s=i;var[r,n]=this.getCombinedUV();return 0===t?((s=Lc.from(this.addPrescripts(Fa.zero(),r,n),this.linebreakOptions.lineleading)).append(i),this.addLeftBorders(s),s.L=this.bbox.L):t===e&&(s=this.addPostscripts(s,r,n),this.addRightBorders(s),s.R=this.bbox.R),this.addMiddleBorders(s),s}getUVQ(s,r){if(!this.UVQ){let[t,e,i]=[0,0,0];0===s.w?t=this.getU():0===r.w?t=-this.getV():[t,e,i]=super.getUVQ(s,r),this.UVQ=[t,e,i]}return this.UVQ}}}function xh(t){return class extends t{remapChars(t){if(t.length){var e=this.font.getRemappedChar("mn",t[0]);if(e){const i=this.unicodeChars(e,this.variant);1===i.length?t[0]=i[0]:t=i.concat(t.slice(1))}}return t}}}function Ah(t){return class extends t{get breakCount(){return this.breakStyle?1:0}get embellishedBreakCount(){return this.embellishedBreakStyle?1:0}get embellishedBreakStyle(){return this.breakStyle||this.getBreakStyle()}protoBBox(t){var e=this.stretch.dir!==Ac.None;e&&null===this.size&&this.getStretchedVariant([0]),e&&this.size<0||(super.computeBBox(t),0!==t.w||!this.node.attributes.hasExplicit("fence")||""!==this.node.getText()||this.node.texClass!==h.OPEN&&this.node.texClass!==h.CLOSE||this.jax.options.mathmlSpacing||(t.R=this.font.params.nulldelimiterspace),this.copySkewIC(t))}getAccentOffset(){var t=Fa.empty();return this.protoBBox(t),-t.w/2}getCenterOffset(t=null){return t||(t=Fa.empty(),super.computeBBox(t)),(t.h+t.d)/2+this.font.params.axis_height-t.h}getStretchedVariant(e,i=!1){if(this.stretch.dir!==Ac.None){var s=this.getWH(e),r=this.getSize("minsize",0),n=this.getSize("maxsize",1/0),a=this.node.getProperty("mathaccent"),s=Math.max(r,Math.min(n,s)),n=this.font.params.delimiterfactor/1e3,o=this.font.params.delimitershortfall,l=r||i?s:a?Math.min(s/n,s+o):Math.max(s*n,s-o),r=this.stretch,c=r.c||this.getText().codePointAt(0);let t=0;if(r.sizes)for(const e of r.sizes){if(e>=l)return a&&t&&t--,void this.setDelimSize(c,t);t++}r.stretch?(this.size=-1,this.invalidateBBox(),this.getStretchBBox(e,this.checkExtendedHeight(s,r),r)):this.setDelimSize(c,t-1)}}setDelimSize(t,e){var i=this.stretch,e=(this.variant=this.font.getSizeVariant(t,e),this.size=e,i.schar&&i.schar[Math.min(e,i.schar.length-1)]||t);this.stretch=Object.assign(Object.assign({},i),{c:e}),this.childNodes[0].invalidateBBox()}getSize(t,e){const i=this.node.attributes;return e=i.isSet(t)?this.length2em(i.get(t),1,1):e}getWH(t){if(0===t.length)return 0;if(1===t.length)return t[0];var[t,e]=t,i=this.font.params.axis_height;return this.node.attributes.get("symmetric")?2*Math.max(t-i,e+i):t+e}getStretchBBox(t,e,i){Object.hasOwn(i,"min")&&i.min>e&&(e=i.min);let[s,r,n]=i.HDW;if(this.stretch.dir===Ac.Vertical)[s,r]=this.getBaseline(t,e,i);else if(n=e,this.stretch.hd&&!this.jax.options.mathmlSpacing){const t=this.font.params.extender_factor;s=s*(1-t)+this.stretch.hd[0]*t,r=r*(1-t)+this.stretch.hd[1]*t}this.bbox.h=s,this.bbox.d=r,this.bbox.w=n}getBaseline(t,e,i){var s=2===t.length&&t[0]+t[1]===e,[e,r]=s?t:[e,0];let[n,a]=[e+r,0];if(this.node.attributes.get("symmetric")){const t=this.font.params.axis_height;s&&(n=2*Math.max(e-t,r+t)),a=n/2-t}else if(s)a=r;else{const[t,e]=i.HDW||[.75,.25];a=e*(n/(t+e))}return[n-a,a]}checkExtendedHeight(t,e){var i;return e.fullExt&&([e,i]=e.fullExt,t=i+Math.ceil(Math.max(0,t-i)/e)*e),t}setBreakStyle(t=""){if(this.breakStyle=this.node.parent.isEmbellished&&!t?"":this.getBreakStyle(t),this.breakCount&&this.multChar){const t=this.parent.node.childIndex(this.node),e=this.parent.node.childNodes[t+1];e&&e.setTeXclass(this.multChar.node)}}getBreakStyle(t=""){const e=this.node.attributes;let i=t||("newline"===e.get("linebreak")||this.node.getProperty("forcebreak")?e.get("linebreakstyle"):"");return i="infixlinebreakstyle"===i?e.get(i):i}getMultChar(){var t=this.node.attributes.get("linebreakmultchar");t&&"â¢"===this.getText()&&"â¢"!==t&&(this.multChar=this.createMo(t))}constructor(t,e,i=null){super(t,e,i),this.size=null,this.isAccent=this.node.isAccent,this.getMultChar(),this.setBreakStyle()}computeBBox(t,e=0){if(this.protoBBox(t),this.node.attributes.get("symmetric")&&this.stretch.dir!==Ac.Horizontal){const e=this.getCenterOffset(t);t.h+=e,t.d-=e}this.node.getProperty("mathaccent")&&(this.stretch.dir===Ac.None||0<=this.size)&&(t.w=0)}computeLineBBox(t){return this.moLineBBox(t,this.breakStyle)}moLineBBox(t,e,i=null){var s=this.node.attributes.get("lineleading"),s=this.length2em(s,this.linebreakOptions.lineleading);if(0===t&&"before"===e){const t=Lc.from(Fa.zero(),s);return t.originalL=this.bbox.L,this.bbox.L=0,t}let r=Lc.from(i||this.getOuterBBox(),s);return 1===t&&("after"===e?(r.w=r.h=r.d=0,r.isFirst=!0,this.bbox.R=0):"duplicate"===e?r.L=0:this.multChar&&(r=Lc.from(this.multChar.getOuterBBox(),s)),r.getIndentData(this.node)),r}canStretch(t){if(this.stretch.dir!==Ac.None)return this.stretch.dir===t;if(!this.node.attributes.get("stretchy"))return!1;const e=this.getText();if(1!==Array.from(e).length)return!1;var i=this.font.getDelimiter(e.codePointAt(0));return this.stretch=i&&i.dir===t?i:wc,this.stretch.dir!==Ac.None}getVariant(){this.node.attributes.get("largeop")?this.variant=this.node.attributes.get("displaystyle")?"-largeop":"-smallop":this.node.attributes.hasExplicit("mathvariant")||!1!==this.node.getProperty("pseudoscript")?super.getVariant():this.variant="-tex-variant"}remapChars(t){const e=this.node.getProperty("primes");if(e)return cn(e);if(1===t.length){const e=this.node.coreParent().parent,i=this.isAccent&&!e.isKind("mrow")?"accent":"mo",s=this.font.getRemappedChar(i,t[0]);s&&(t=this.unicodeChars(s,this.variant))}return t}}}function vh(t){return class extends t{getDimens(){var t=this.node.attributes.getList("width","height","depth","lspace","voffset"),e=this.childNodes[0].getOuterBBox();let{w:i,h:s,d:r}=e;var n=i,a=s,o=r;let l=0,c=0,h=0;""!==t.width&&(i=this.dimen(t.width,e,"w",0)),""!==t.height&&(s=this.dimen(t.height,e,"h",0)),""!==t.depth&&(r=this.dimen(t.depth,e,"d",0)),""!==t.voffset&&(c=this.dimen(t.voffset,e)),""!==t.lspace&&(l=this.dimen(t.lspace,e));t=this.node.attributes.get("data-align");return t&&(h=this.getAlignX(i,e,t)),[a,o,n,s-a,r-o,i-n,l,c,h]}dimen(t,e,i="",s=null){const r=(t=String(t)).match(/width|height|depth/),n=r?e[r[0].charAt(0)]:i?e[i]:0;let a=this.length2em(t,n)||0;return t.match(/^[-+]/)&&i&&(a+=n),a=null!=s?Math.max(s,a):a}setBBoxDimens(t){var[e,i,s,r,n,a]=this.getDimens();t.w=s+a,t.h=e+r,t.d=i+n}computeBBox(t,e=!1){if(this.setBBoxDimens(t),this.childNodes[0].getOuterBBox().w>t.w){const e=this.node.attributes.get("data-overflow");("linebreak"===e||"auto"===e&&"linebreak"===this.jax.math.root.attributes.get("overflow"))&&(this.childNodes[0].breakToWidth(t.w),this.setBBoxDimens(t))}this.setChildPWidths(e,t.w)}getWrapWidth(t){return this.getBBox().w}getChildAlign(t){return this.node.attributes.get("data-align")||"left"}}}function _h(t){return class extends t{get root(){return 1}combineRootBBox(t,e,i){var s=this.childNodes[this.root].getOuterBBox(),e=this.getRootDimens(e,i)[1];t.combine(s,0,e)}getRootDimens(t,e){var i=this.surd,s=this.childNodes[this.root].getOuterBBox(),r=(i.size<0?.5:.6)*t.w,{w:n,rscale:a}=s,o=Math.max(n,r/a),n=Math.max(0,o-n);return[o*a-r,this.rootHeight(s,t,i.size,e),n]}rootHeight(t,e,i,s){e=e.h+e.d;return(i<0?1.9:.55*e)-(e-s)+Math.max(0,t.d*t.rscale)}rootWidth(){var t=this.childNodes[this.root].getOuterBBox();return.4+t.w*t.rscale}}}function Th(t){return class extends t{stretchChildren(){const i=[];for(const s of this.childNodes)s.canStretch(Ac.Vertical)&&i.push(s);const s=i.length,r=this.childNodes.length;if(s&&1<r){let t=0,e=0;var n=1<s&&s===r;for(const i of this.childNodes){const s=i.stretch.dir===Ac.None;if(n||s){const s=i.getBBox().rscale;var[a,o]=i.getUnbrokenHD();o*=s,(a*=s)>t&&(t=a),o>e&&(e=o)}}for(const s of i){const i=s.coreRScale();s.coreMO().getStretchedVariant([t/i,e/i])}}}get fixesPWidth(){return!1}get breakCount(){return this._breakCount<0&&(this._breakCount=this.childNodes.length?this.childNodes.reduce((t,e)=>t+e.breakCount,0):0),this._breakCount}breakTop(t,e){return this.isStack?this.parent.breakTop(this,this):this}constructor(t,e,i=null){super(t,e,i),this.dh=0;this.isStack=!this.parent||this.parent.node.isInferred||this.parent.breakTop(this,this)!==this,this.stretchChildren();for(const t of this.childNodes)if(t.bbox.pwidth){this.bbox.pwidth=Fa.fullWidth;break}}computeBBox(t,e=!1){var i=this.breakCount;this.lineBBox=i?[new Lc({h:.75,d:.25,w:0},[0,0])]:[],t.empty();for(const e of this.childNodes.keys()){const s=this.childNodes[e];t.append(s.getOuterBBox()),i&&this.computeChildLineBBox(s,e)}t.clean(),i&&!this.coreMO().node.isEmbellished&&this.computeLinebreakBBox(t),this.fixesPWidth&&this.setChildPWidths(e)&&this.computeBBox(t,!0),this.vboxAdjust(t)}computeLinebreakBBox(t){var e;t.empty();const i=this.isStack,s=this.lineBBox,r=s.length-1;if(i)for(const t of s.keys()){const e=s[t];this.addMiddleBorders(e),0===t&&this.addLeftBorders(e),t===r&&this.addRightBorders(e)}let n=0;for(const i of s.keys()){const r=s[i];t.combine(r,0,n),n-=Math.max(.25,r.d)+r.lineLeading+Math.max(.75,(null==(e=s[i+1])?void 0:e.h)||0)}i?(s[0].L=this.bbox.L,s[r].R=this.bbox.R):(t.w=Math.max(...this.lineBBox.map(t=>t.w)),this.shiftLines(t.w),this.jax.math.display||this.linebreakOptions.inline||(t.pwidth=Fa.fullWidth,this.node.isInferred&&(this.parent.bbox.pwidth=Fa.fullWidth))),t.clean()}vboxAdjust(t){if(this.parent){const e=this.breakCount,i=this.parent.node.attributes.get("data-vertical-align");if(e&&"bottom"===i)this.dh=e?t.d-this.lineBBox[e-1].d:0;else{if(!("center"===i||e&&"middle"===i))return void(this.dh=0);{const{h:e,d:i}=t,s=this.font.params.axis_height;this.dh=(e+i)/2+s-e}}t.h+=this.dh,t.d-=this.dh}}computeChildLineBBox(e,i){const t=this.lineBBox[this.lineBBox.length-1],s=(t.end=[i,0],t.append(e.getLineBBox(0)),e.breakCount+1);if(1!==s)for(let t=1;t<s;t++){const s=new Lc({h:.75,d:.25,w:0});s.start=s.end=[i,t],s.isFirst=!0,s.append(e.getLineBBox(t)),this.lineBBox.push(s)}}getLineBBox(t){return this.getBBox(),this.isStack?super.getLineBBox(t):Lc.from(this.getOuterBBox(),this.linebreakOptions.lineleading)}shiftLines(t){var e,i;const s=this.lineBBox,r=s.length-1,[n,a]=(null==(e=s[1].indentData)?void 0:e[0])||["left","0"];for(const e of s.keys()){const o=s[e],[l,c]=0===e?[n,a]:(null==(i=o.indentData)?void 0:i[e===r?2:1])||["left","0"],[h,d]=this.processIndent(l,c,n,a,t);o.L=0,o.L=this.getAlignX(t,o,h)+d}}setChildPWidths(t,e=null,i=!0){return this.breakCount?!t&&(null!==e&&this.bbox.w!==e&&(this.bbox.w=e,this.shiftLines(e)),!0):super.setChildPWidths(t,e,i)}breakToWidth(t){this.linebreaks.breakToWidth(this,t)}}}function wh(t){return class extends t{getScale(){this.bbox.scale=this.parent.bbox.scale,this.bbox.rscale=1}}}function Ch(t){return class extends t{createText(t){const e=this.wrap(this.mmlText(t));return e.parent=this,e}constructor(t,e,i=null){super(t,e,i);const s=this.node.attributes,r=s.getList("lquote","rquote");"monospace"!==this.variant&&(s.isSet("lquote")||'"'!==r.lquote||(r.lquote="â€œ"),s.isSet("rquote")||'"'!==r.rquote||(r.rquote="â€")),this.childNodes.unshift(this.createText(r.lquote)),this.childNodes.push(this.createText(r.rquote))}}}function Ih(t){return class extends t{get canBreak(){return this.node.canBreak}get breakCount(){return this.breakStyle?1:0}setBreakStyle(t=""){this.breakStyle=t||(this.node.hasNewline||this.node.getProperty("forcebreak")?"before":"")}constructor(t,e,i=null){super(t,e,i),this.setBreakStyle()}computeBBox(t,e=0){const i=this.node.attributes;t.w=this.length2em(i.get("width"),0),t.h=this.length2em(i.get("height"),0),t.d=this.length2em(i.get("depth"),0)}computeLineBBox(t){const e=this.node.attributes.get("data-lineleading"),i=this.length2em(e,this.linebreakOptions.lineleading),s=Lc.from(Fa.zero(),i);return 1===t&&(s.getIndentData(this.node),s.w=this.getBBox().w,s.isFirst=0===s.w),s}}}function Lh(t){return class extends t{get base(){return 0}get root(){return null}combineRootBBox(t,e,i){}getPQ(t){var e=this.font.params.rule_thickness,i=this.font.params.surd_height,s=this.node.attributes.get("displaystyle")?this.font.params.x_height:e;return[s,t.h+t.d>this.surdH?(t.h+t.d-(this.surdH-e-i-s/2))/2:i+s/4]}getRootDimens(t,e){return[0,0,0,0]}rootWidth(){return 1.25}getStretchedSurd(){var t=this.font.params.rule_thickness,e=this.font.params.surd_height,i=this.node.attributes.get("displaystyle")?this.font.params.x_height:t,{h:s,d:r}=this.childNodes[this.base].getOuterBBox();this.surdH=s+r+t+e+i/4,this.surd.getStretchedVariant([this.surdH-r,r],!0)}constructor(t,e,i=null){super(t,e,i),this.surd=this.createMo("âˆš"),this.surd.canStretch(Ac.Vertical),this.getStretchedSurd()}computeBBox(t,e=!1){t.empty();var i=this.surd.getBBox(),s=new Fa(this.childNodes[this.base].getOuterBBox()),r=this.getPQ(i)[1],n=this.font.params.rule_thickness,a=this.font.params.surd_height,r=s.h+r+n,[n]=this.getRootDimens(i,r);t.h=r+a,this.combineRootBBox(t,i,r),t.combine(i,n,r-i.h),t.combine(s,n+i.w,0),t.clean(),this.setChildPWidths(e)}invalidateBBox(){super.invalidateBBox(),this.surd.childNodes[0].invalidateBBox()}}}function Sh(t){return(t=class extends t{get scriptChild(){return this.childNodes[this.node.sub]}getOffset(){return[this.baseIsChar?0:this.getAdjustedIc(),-this.getV()]}}).useIC=!1,t}function kh(t){return class extends t{get scriptChild(){return this.childNodes[this.node.sup]}getOffset(){return[this.getAdjustedIc()-(this.baseRemoveIc?0:this.baseIc),this.getU()]}}}function Rh(t){t=class extends t{constructor(){super(...arguments),this.UVQ=null}get subChild(){return this.childNodes[this.node.sub]}get supChild(){return this.childNodes[this.node.sup]}get scriptChild(){return this.supChild}getUVQ(t=this.subChild.getOuterBBox(),e=this.supChild.getOuterBBox()){const i=this.baseCore,s=i.getLineBBox(i.breakCount);if(this.UVQ)return this.UVQ;var r=this.font.params,n=3*r.rule_thickness,a=this.length2em(this.node.attributes.get("subscriptshift"),r.sub2),o=this.baseCharZero(s.d*this.baseScale+r.sub_drop*t.rscale),e=e.d*e.rscale,t=t.h*t.rscale;let[l,c]=[this.getU(),Math.max(o,a)],h=l-e-(t-c);if(h<n){c+=n-h;const t=.8*r.x_height-(l-e);0<t&&(l+=t,c-=t)}return l=Math.max(this.length2em(this.node.attributes.get("superscriptshift"),l),l),c=Math.max(this.length2em(this.node.attributes.get("subscriptshift"),c),c),h=l-e-(t-c),this.UVQ=[l,-c,h],this.UVQ}appendScripts(t){var[e,i]=[this.subChild.getOuterBBox(),this.supChild.getOuterBBox()],s=this.getBaseWidth(),r=this.getAdjustedIc(),[n,a]=this.getUVQ(),o=t.d-this.baseChild.getLineBBox(this.baseChild.breakCount).d;return t.combine(e,s+(this.baseIsChar?0:r),a-o),t.combine(i,s+r,n-o),t.w+=this.font.params.scriptspace,t}};return t.useIC=!1,t}const Oh=.333;function Mh(t){return class extends t{get tableRows(){return this.childNodes}findContainer(){let t=this,e=t.parent;for(;e&&(e.node.notParent||e.node.isKind("mrow"));)e=(t=e).parent;this.container=e,this.containerI=t.node.childPosition()}getPercentageWidth(){var t;this.hasLabels?this.bbox.pwidth=Fa.fullWidth:dn(t=this.node.attributes.get("width"))&&(this.bbox.pwidth=t)}stretchRows(){const e=this.node.attributes.get("equalrows"),i=e?this.getEqualRowHeight():0,{H:s,D:r}=e?this.getTableData():{H:[0],D:[0]},n=this.tableRows;for(let t=0;t<this.numRows;t++){var a=e?[(i+s[t]-r[t])/2,(i-s[t]+r[t])/2]:null;n[t].stretchChildren(a)}}stretchColumns(){var e=this.getColumnAttributes("columnwidth",0);for(let t=0;t<this.numCols;t++){var i="number"==typeof this.cWidths[t]?this.cWidths[t]:null;this.stretchColumn(t,i),null!==i&&this.breakColumn(t,i,e[t])}}stretchColumn(t,e){const i=[];for(const e of this.tableRows){const s=e.getChild(t);if(s){const t=s.childNodes[0];t.stretch.dir===Ac.None&&t.canStretch(Ac.Horizontal)&&i.push(t)}}const s=i.length,r=this.childNodes.length;if(s&&1<r&&null===e){e=0;const i=1<s&&s===r;for(const s of this.tableRows){const r=s.getChild(t);if(r){const t=r.childNodes[0],s=t.stretch.dir===Ac.None;if(i||s){const i=t.getBBox(s)["w"];i>e&&(e=i)}}}}if(null!==e)for(const t of i)t.coreMO().getStretchedVariant([Math.max(e,t.getBBox().w)/t.coreRScale()])}breakColumn(i,s,r){if("linebreak"===this.jax.math.root.attributes.get("overflow")&&this.jax.math.display){const n=this.getTableData()["D"];let t=0,e=0;for(const r of this.tableRows){const a=r.getChild(i);if(a&&a.getBBox().w>s){a.childNodes[0].breakToWidth(s);const i=a.getBBox();n[t]=Math.max(n[t],i.d),i.w>e&&(e=i.w)}t++}("fit"===r||"auto"===r||dn(r)||e>this.cWidths[i])&&(this.cWidths[i]=e)}}getTableData(){if(this.data)return this.data;const s=new Array(this.numRows).fill(0),r=new Array(this.numRows).fill(0),n=new Array(this.numCols).fill(0),t=new Array(this.numRows),a=new Array(this.numRows),o=[0],l=this.tableRows;for(let i=0;i<l.length;i++){let e=0;const c=l[i],h=c.node.attributes.get("rowalign");for(let t=0;t<c.numCells;t++){const a=c.getChild(t);e=this.updateHDW(a,t,i,h,s,r,n,e),this.recordPWidthCell(a,t)}t[i]=s[i],a[i]=r[i],c.labeled&&(e=this.updateHDW(c.childNodes[0],0,i,h,s,r,o,e)),this.extendHD(i,s,r,e),this.extendHD(i,t,a,e)}return this.data={H:s,D:r,W:n,NH:t,ND:a,L:o[0]},this.data}updateHDW(t,e,i,s,r,n,a,o){let{h:l,d:c,w:h}=t.getBBox();var d=t.parent.bbox.rscale;1!==t.parent.bbox.rscale&&(l*=d,c*=d,h*=d),this.node.getProperty("useHeight")&&(l<.75&&(l=.75),c<.25&&(c=.25));let u=0;return"baseline"!==(s=t.node.attributes.get("rowalign")||s)&&"axis"!==s&&(u=l+c,l=c=0),l>r[i]&&(r[i]=l),c>n[i]&&(n[i]=c),u>o&&(o=u),a&&h>a[e]&&(a[e]=h),o}extendHD(t,e,i,s){s=(s-(e[t]+i[t]))/2;s<1e-5||(e[t]+=s,i[t]+=s)}recordPWidthCell(t,e){t.childNodes[0]&&t.childNodes[0].getBBox().pwidth&&this.pwidthCells.push([t,e])}setColumnPWidths(){var t,e,i=this.cWidths;for([t,e]of this.pwidthCells)t.setChildPWidths(!1,i[e])&&(t.invalidateBBox(),t.getBBox())}getBBoxHD(t){const[e,i]=this.getAlignmentRow();if(null===i){const i=this.font.params.axis_height,r=t/2;return{top:[0,t],center:[r,r],bottom:[t,0],baseline:[r,r],axis:[r+i,r-i]}[e]||[r,r]}var s=this.getVerticalPosition(i,e);return[s,t-s]}getBBoxLR(){var i;if(this.hasLabels){const i=this.node.attributes,r=i.get("side");let[t,e]=this.getPadAlignShift(r);var s=this.hasLabels&&!!i.get("data-width-includes-label");return s&&this.frame&&this.fSpace[0]&&(t-=this.fSpace[0]),"center"!==e||s?"left"===r?[t,0]:[0,t]:[t,t]}return[(null==(i=this.bbox)?void 0:i.L)||0,0]}getPadAlignShift(t){var e=this.getTableData()["L"];let i=e+this.length2em(this.node.attributes.get("minlabelspacing"));var[e,s]=null==this.styles?["",""]:[this.styles.get("padding-left"),this.styles.get("padding-right")];(e||s)&&(i=Math.max(i,this.length2em(e||"0"),this.length2em(s||"0")));let[r,n]=this.getAlignShift();return r===t&&(n="left"===t?Math.max(i,n)-i:Math.min(-i,n)+i),[i,r,n]}getWidth(){return this.pWidth||this.getBBox().w}adjustWideTable(){const t=this.node.attributes;var e,i;"auto"===t.get("width")&&([e,i]=this.getPadAlignShift(t.get("side")),i=Math.max(this.containerWidth/10,this.containerWidth-e-("center"===i?e:0)),this.naturalWidth()>i&&this.adjustColumnWidths(i))}naturalWidth(){return io(this.getComputedWidths().concat(this.cLines,this.cSpace))+2*this.fLine+this.fSpace[0]+this.fSpace[2]}getEqualRowHeight(){const{H:e,D:i}=this.getTableData(),t=Array.from(e.keys()).map(t=>e[t]+i[t]);return Math.max(...t)}getComputedWidths(){const e=this.getTableData().W;let t=Array.from(e.keys()).map(t=>("number"==typeof this.cWidths[t]?this.cWidths:e)[t]);return t=this.node.attributes.get("equalcolumns")?Array(t.length).fill(so(t)):t}getColumnWidths(){var t=this.node.attributes.get("width");if(this.node.attributes.get("equalcolumns"))return this.getEqualColumns(t);var e=this.getColumnAttributes("columnwidth",0);return"auto"===t?this.getColumnWidthsAuto(e):dn(t)?this.getColumnWidthsPercent(e):this.getColumnWidthsFixed(e,this.length2em(t))}getEqualColumns(t){var e,i=Math.max(1,this.numCols);let s;if("auto"===t){const t=this.getTableData()["W"];s=so(t)}else s=dn(t)?this.percent(1/i):(e=io([].concat(this.cLines,this.cSpace))+this.fSpace[0]+this.fSpace[2],Math.max(0,this.length2em(t)-e)/i);return Array(this.numCols).fill(s)}getColumnWidthsAuto(t){return t.map(t=>"auto"===t||"fit"===t?null:dn(t)?t:this.length2em(t))}getColumnWidthsPercent(i){const s=i.includes("fit"),r=(s?this.getTableData():{W:null})["W"];return Array.from(i.keys()).map(t=>{var e=i[t];return"fit"===e?null:"auto"===e?s?r[t]:null:dn(e)?e:this.length2em(e)})}getColumnWidthsFixed(i,t){const e=Array.from(i.keys()),s=e.filter(t=>"fit"===i[t]),r=e.filter(t=>"auto"===i[t]),n=s.length||r.length,a=(n?this.getTableData():{W:null})["W"],o=t-io([].concat(this.cLines,this.cSpace))-this.fSpace[0]-this.fSpace[2];let l=o;e.forEach(t=>{var e=i[t];l-="fit"===e||"auto"===e?a[t]:this.length2em(e,o)});const c=n&&0<l?l/n:0;return e.map(t=>{var e=i[t];return"fit"===e?a[t]+c:"auto"===e?a[t]+(0===s.length?c:0):this.length2em(e,o)})}adjustColumnWidths(s){const r=this.getTableData()["W"],e=this.getColumnAttributes("columnwidth",0),n=Array.from(e.keys()),a=[...n.filter(t=>"fit"===e[t]).sort((t,e)=>r[e]-r[t]),...n.filter(t=>"auto"===e[t]).sort((t,e)=>r[e]-r[t]),...n.filter(t=>dn(e[t])).sort((t,e)=>r[e]-r[t]),...n.filter(t=>"fit"!==e[t]&&"auto"!==e[t]&&!dn(e[t])).sort((t,e)=>r[e]-r[t])];if(a.length){this.cWidths=n.map(t=>("number"==typeof this.cWidths[t]?this.cWidths:r)[t]);s=s-io([].concat(this.cLines,this.cSpace))-this.fSpace[0]-this.fSpace[2];let e=io(this.cWidths)-s,t=0,i=0;for(;i<a.length&&!((t+=r[a[i++]])&&e/t<Oh););e=1-e/t,a.slice(0,i).forEach(t=>this.cWidths[t]*=e)}}getVerticalPosition(e,t){var i=this.node.attributes.get("equalrows"),{H:s,D:r}=this.getTableData(),n=i?this.getEqualRowHeight():0,a=this.getRowHalfSpacing();let o=this.fLine;for(let t=0;t<e;t++)o+=a[t]+(i?n:s[t]+r[t])+a[t+1]+this.rLines[t];var[l,c]=i?[(n+s[e]-r[e])/2,(n-s[e]+r[e])/2]:[s[e],r[e]];return o+={top:0,center:a[e]+(l+c)/2,bottom:a[e]+l+c+a[e+1],baseline:a[e]+l,axis:a[e]+l-.25}[t]||0}getFrameSpacing(){const t=this.fframe?this.convertLengths(this.getAttributeArray("framespacing")):[0,0];t[2]=t[0];var e,i=this.node.attributes.get("data-array-padding");return i&&([i,e]=this.convertLengths(un(i)),t[0]=i,t[2]=e),t}getEmHalfSpacing(t,e,i=1){const s=this.addEm(e,2/i);return s.unshift(this.em(t[0]*i)),s.push(this.em(t[1]*i)),s}getRowHalfSpacing(){const t=this.rSpace.map(t=>t/2);return t.unshift(this.fSpace[1]),t.push(this.fSpace[1]),t}getColumnHalfSpacing(){const t=this.cSpace.map(t=>t/2);return t.unshift(this.fSpace[0]),t.push(this.fSpace[2]),t}getAlignmentRow(){var[t,e]=un(this.node.attributes.get("align"));if(null==e)return[t,null];let i=parseInt(e);return i<0&&(i+=this.numRows+1),[t,i<1||i>this.numRows?null:i-1]}getColumnAttributes(t,e=1){const i=this.numCols-e,s=this.getAttributeArray(t);if(0===s.length)return null;for(;s.length<i;)s.push(s[s.length-1]);return s.length>i&&s.splice(i),s}getRowAttributes(t,e=1){const i=this.numRows-e,s=this.getAttributeArray(t);if(0===s.length)return null;for(;s.length<i;)s.push(s[s.length-1]);return s.length>i&&s.splice(i),s}getAttributeArray(t){var e=this.node.attributes.get(t);return e?un(e):[this.node.attributes.getDefault(t)]}addEm(t,e=1){return t?t.map(t=>this.em(t/e)):null}convertLengths(t){return t?t.map(t=>this.length2em(t)):null}constructor(t,e,i=null){super(t,e,i),this.numCols=0,this.numRows=0,this.data=null,this.pwidthCells=[],this.pWidth=0,this.numCols=so(this.tableRows.map(t=>t.numCells)),this.numRows=this.childNodes.length,this.hasLabels=this.childNodes.reduce((t,e)=>t||e.node.isKind("mlabeledtr"),!1),this.findContainer(),this.isTop=!this.container||this.container.node.isKind("math")&&!this.container.parent,this.isTop&&(this.jax.table=this),this.getPercentageWidth();const s=this.node.attributes,r=s.get("frame");this.frame="none"!==r,this.fframe=this.frame||void 0!==s.get("data-frame-styles"),this.fLine=this.frame?.07:0,this.fSpace=this.getFrameSpacing(),this.cSpace=this.convertLengths(this.getColumnAttributes("columnspacing")),this.rSpace=this.convertLengths(this.getRowAttributes("rowspacing")),this.cLines=this.getColumnAttributes("columnlines").map(t=>"none"===t?0:.07),this.rLines=this.getRowAttributes("rowlines").map(t=>"none"===t?0:.07),this.cWidths=this.getColumnWidths(),this.adjustWideTable(),this.stretchColumns(),this.stretchRows()}getStyles(){super.getStyles();const t=this.node.attributes.get("data-frame-styles");if(t){this.styles||(this.styles=new eo(""));var e=t.split(/ /);for(const t of Xa.keys()){var i=e[t];"none"!==i&&this.styles.set("border-"+Xa[t],".07em "+i)}}}computeBBox(t,e=0){const{H:i,D:s}=this.getTableData();let r,n;if(this.node.attributes.get("equalrows")){const t=this.getEqualRowHeight();r=io([].concat(this.rLines,this.rSpace))+t*this.numRows}else r=io(i.concat(s,this.rLines,this.rSpace));r+=2*(this.fLine+this.fSpace[1]),n=this.naturalWidth();var a=this.node.attributes.get("width"),[o,l]=("auto"!==a&&(n=Math.max(this.length2em(a,0)+2*this.fLine,n)),this.getBBoxHD(r)),[o,l]=(t.h=o,t.d=l,t.w=n,this.getBBoxLR());t.L=o,t.R=l,dn(a)||this.setColumnPWidths()}setChildPWidths(t,e,i){var s=this.node.attributes.get("width");if(!dn(s))return!1;this.hasLabels||(this.bbox.pwidth="",this.container.bbox.pwidth="");var{w:r,L:n,R:a}=this.bbox,o=this.node.attributes.get("data-width-includes-label"),s=Math.max(r,this.length2em(s,Math.max(e,n+r+a)))-(o?n+a:0),e=this.node.attributes.get("equalcolumns")?Array(this.numCols).fill(this.percent(1/Math.max(1,this.numCols))):this.getColumnAttributes("columnwidth",0);return this.cWidths=this.getColumnWidthsFixed(e,s),this.pWidth=this.naturalWidth(),this.isTop&&(this.bbox.w=this.pWidth),this.setColumnPWidths(),this.pWidth!==r&&this.parent.invalidateBBox(),this.pWidth!==r}getAlignShift(){return this.isTop?super.getAlignShift():[this.container.getChildAlign(this.containerI),0]}}}function Dh(t){return class extends t{get fixesPWidth(){return!1}invalidateBBox(){this.bboxComputed=!1,this.lineBBox=[]}getWrapWidth(t){const e=this.parent.parent,i=this.parent,s=this.node.childPosition()-(i.labeled?1:0);return("number"==typeof e.cWidths[s]?e.cWidths:e.getTableData().W)[s]}getChildAlign(t){return this.node.attributes.get("columnalign")}}}function Ph(t){t=class extends t{constructor(){super(...arguments),this.breakPoints=[]}textWidth(t){let e=this.textNode;if(!e){const t=this.node.factory.create("text");t.parent=this.node,(e=this.textNode=this.factory.wrap(t)).parent=this}return e.node.setText(t),e.invalidateBBox(!1),e.getBBox().w}get breakCount(){return this.breakPoints.length}getVariant(){var t,e=this.jax.options,i=this.jax.math.outputData,s=(!!i.merrorFamily||!!e.merrorFont)&&this.node.Parent.isKind("merror");i.mtextFamily||e.mtextFont||s?(t=this.node.attributes.get("mathvariant"),s=(t=this.constructor.INHERITFONTS[t]||this.jax.font.getCssFont(t))[0]||(s?i.merrorFamily||e.merrorFont:i.mtextFamily||e.mtextFont),this.variant=this.explicitVariant(s,t[2]?"bold":"",t[1]?"italic":"")):super.getVariant()}setBreakAt(t){this.breakPoints.push(t)}clearBreakPoints(){this.breakPoints=[]}computeLineBBox(t){const e=Lc.from(this.getOuterBBox(),this.linebreakOptions.lineleading);return this.breakCount&&(e.w=this.getBreakWidth(t),0===t?(e.R=0,this.addLeftBorders(e)):(e.L=0,e.indentData=[["left","0"],["left","0"],["left","0"]],t===this.breakCount&&this.addRightBorders(e))),e}getBreakWidth(t){const e=this.childNodes;let[i,s]=this.breakPoints[t-1]||[0,0];var[r,t]=this.breakPoints[t]||[e.length,0];let n=e[i].node.getText().split(/ /);if(i===r)return this.textWidth(n.slice(s,t).join(" "));let a=this.textWidth(n.slice(s).join(" "));for(;++i<r&&i<e.length;)a+=e[i].getBBox().w;return i<e.length&&(n=e[i].node.getText().split(/ /),a+=this.textWidth(n.slice(0,t).join(" "))),a}};return t.INHERITFONTS={normal:["",!1,!1],bold:["",!1,!0],italic:["",!0,!1],"bold-italic":["",!0,!0]},t}function Bh(t){return class extends t{get numCells(){return this.childNodes.length}get labeled(){return!1}get tableCells(){return this.childNodes}getChild(t){return this.childNodes[t]}getChildBBoxes(){return this.childNodes.map(t=>t.getBBox())}stretchChildren(i=null){const e=[],s=this.labeled?this.childNodes.slice(1):this.childNodes;for(const i of s){const s=i.childNodes[0];s.canStretch(Ac.Vertical)&&e.push(s)}const r=e.length,n=this.childNodes.length;if(r&&1<n&&!i){let t=0,e=0;var a=1<r&&r===n;for(const i of s){const s=i.childNodes[0],r=s.stretch.dir===Ac.None;if(a||r){const{h:i,d:n}=s.getBBox(r);i>t&&(t=i),n>e&&(e=n)}}i=[t,e]}if(i)for(const s of e){const e=s.coreRScale();s.coreMO().getStretchedVariant(i.map(t=>t*e))}}get fixesPWidth(){return!1}}}function Fh(t){return class extends t{get numCells(){return Math.max(0,this.childNodes.length-1)}get labeled(){return!0}get tableCells(){return this.childNodes.slice(1)}getChild(t){return this.childNodes[t+1]}getChildBBoxes(){return this.childNodes.slice(1).map(t=>t.getBBox())}}}function Uh(t){return class extends t{get scriptChild(){return this.childNodes[this.node.under]}constructor(...t){super(...t),this.stretchChildren()}computeBBox(t,e=!1){var i,s,r,n,a;this.hasMovableLimits()?super.computeBBox(t,e):(t.empty(),i=this.baseChild.getOuterBBox(),s=this.scriptChild.getOuterBBox(),r=this.getUnderKV(i,s)[1],n=this.isLineBelow?0:this.getDelta(this.scriptChild,!0),[n,a]=this.getDeltaW([i,s],[0,-n]),t.combine(i,n,0),t.combine(s,a,r),t.d+=this.font.params.big_op_spacing5,t.clean(),this.setChildPWidths(e))}}}function qh(t){return class extends t{get scriptChild(){return this.childNodes[this.node.over]}constructor(...t){super(...t),this.stretchChildren()}computeBBox(t){if(this.hasMovableLimits())super.computeBBox(t);else{t.empty();const r=this.baseChild.getOuterBBox(),n=this.scriptChild.getOuterBBox();this.node.attributes.get("accent")&&(r.h=Math.max(r.h,this.font.params.x_height*this.baseScale));var e=this.getOverKU(r,n)[1],i=this.isLineAbove?0:this.getDelta(this.scriptChild),[i,s]=this.getDeltaW([r,n],[0,i]);t.combine(r,i,0),t.combine(n,s,e),t.h+=this.font.params.big_op_spacing5,t.clean()}}}}function jh(t){return class extends t{get underChild(){return this.childNodes[this.node.under]}get overChild(){return this.childNodes[this.node.over]}get subChild(){return this.underChild}get supChild(){return this.overChild}constructor(...t){super(...t),this.stretchChildren()}computeBBox(t){if(this.hasMovableLimits())super.computeBBox(t);else{t.empty();const a=this.overChild.getOuterBBox(),o=this.baseChild.getOuterBBox(),l=this.underChild.getOuterBBox();this.node.attributes.get("accent")&&(o.h=Math.max(o.h,this.font.params.x_height*this.baseScale));var e=this.getOverKU(o,a)[1],i=this.getUnderKV(o,l)[1],s=this.getDelta(this.overChild),r=this.getDelta(this.underChild,!0),[r,s,n]=this.getDeltaW([o,l,a],[0,this.isLineBelow?0:-r,this.isLineAbove?0:s]),r=(t.combine(o,r,0),t.combine(a,n,e),t.combine(l,s,i),this.font.params.big_op_spacing5);t.h+=r,t.d+=r,t.clean()}}}}function Hh(t){t=class extends t{get baseChild(){return this.childNodes[this.node.base]}get scriptChild(){return this.childNodes[1]}getBaseCore(){let t=this.getSemanticBase()||this.childNodes[0],e=null==t?void 0:t.node;for(;t&&(1===t.childNodes.length&&(e.isKind("mrow")||e.isKind("TeXAtom")||e.isKind("mstyle")||e.isKind("mpadded")&&!e.getProperty("vbox")||e.isKind("mphantom")||e.isKind("semantics"))||e.isKind("munderover")&&t.isMathAccent);)this.setBaseAccentsFor(t),t=t.childNodes[0],e=null==t?void 0:t.node;return t||(this.baseHasAccentOver=this.baseHasAccentUnder=!1),t||this.childNodes[0]}setBaseAccentsFor(t){t.node.isKind("munderover")&&(null===this.baseHasAccentOver&&(this.baseHasAccentOver=!!t.node.attributes.get("accent")),null===this.baseHasAccentUnder&&(this.baseHasAccentUnder=!!t.node.attributes.get("accentunder")))}getSemanticBase(){var t=this.node.attributes.getExplicit("data-semantic-fencepointer");return this.getBaseFence(this.baseChild,t)}getBaseFence(t,e){if(!t||!t.node.attributes||!e)return null;if(t.node.attributes.getExplicit("data-semantic-id")===e)return t;for(const i of t.childNodes){const t=this.getBaseFence(i,e);if(t)return t}return null}getBaseScale(){let t=this.baseCore,e=1;for(;t&&t!==this;)e*=t.getOuterBBox().rscale,t=t.parent;return e}getBaseIc(){return this.baseCore.getOuterBBox().ic*this.baseScale}getAdjustedIc(){return this.baseIc?1.05*this.baseIc+.05:0}isCharBase(){const t=this.baseCore;return(t.node.isKind("mo")&&null===t.size||t.node.isKind("mi")||t.node.isKind("mn"))&&1===t.bbox.rscale&&1===Array.from(t.getText()).length}checkLineAccents(){this.node.isKind("munderover")&&(this.node.isKind("mover")?this.isLineAbove=this.isLineAccent(this.scriptChild):this.node.isKind("munder")?this.isLineBelow=this.isLineAccent(this.scriptChild):(this.isLineAbove=this.isLineAccent(this.overChild),this.isLineBelow=this.isLineAccent(this.underChild)))}isLineAccent(t){const e=t.coreMO().node;return e.isToken&&"â€•"===e.getText()}getBaseWidth(){var t=this.baseChild.getLineBBox(this.baseChild.breakCount);return t.w*t.rscale-(this.baseRemoveIc?this.baseIc:0)+this.font.params.extra_ic}getOffset(){return[0,0]}baseCharZero(t){var e=!!this.baseCore.node.attributes.get("largeop"),i=!(!this.baseCore.node.isKind("mo")||!this.baseCore.size),s=this.baseScale;return!this.baseIsChar||e||i||1!==s?t:0}getV(){const t=this.baseCore,e=t.getLineBBox(t.breakCount),i=this.scriptChild.getOuterBBox(),s=this.font.params,r=this.length2em(this.node.attributes.get("subscriptshift"),s.sub1);return Math.max(this.baseCharZero(e.d*this.baseScale+s.sub_drop*i.rscale),r,i.h*i.rscale-.8*s.x_height)}getU(){const t=this.baseCore,e=t.getLineBBox(t.breakCount),i=this.scriptChild.getOuterBBox(),s=this.font.params,r=this.node.attributes.getList("displaystyle","superscriptshift"),n=this.node.getProperty("texprimestyle")?s.sup3:r.displaystyle?s.sup1:s.sup2,a=this.length2em(r.superscriptshift,n);return Math.max(this.baseCharZero(e.h*this.baseScale-s.sup_drop*i.rscale),a,i.d*i.rscale+.25*s.x_height)}hasMovableLimits(){const t=this.node.attributes.get("displaystyle"),e=this.baseChild.coreMO().node;return!t&&!!e.attributes.get("movablelimits")}getOverKU(t,e){var i=this.node.attributes.get("accent"),s=this.font.params,e=e.d*e.rscale,r=s.rule_thickness*s.separation_factor,n=this.baseHasAccentOver?r:0,r=this.isLineAbove?3*s.rule_thickness:r,i=(i?r:Math.max(s.big_op_spacing1,s.big_op_spacing3-Math.max(0,e)))-n;return[i,t.h*t.rscale+i+e]}getUnderKV(t,e){var i=this.node.attributes.get("accentunder"),s=this.font.params,e=e.h*e.rscale,r=s.rule_thickness*s.separation_factor,n=this.baseHasAccentUnder?r:0,r=this.isLineBelow?3*s.rule_thickness:r,i=(i?r:Math.max(s.big_op_spacing2,s.big_op_spacing4-e))-n;return[i,-(t.d*t.rscale+i+e)]}getDeltaW(e,t=[0,0,0]){const i=this.node.attributes.get("align"),s=e.map(t=>t.w*t.rscale),r=(s[0]-=this.baseRemoveIc&&!this.baseCore.node.attributes.get("largeop")?this.baseIc:0,Math.max(...s)),n=[];let a=0;for(const e of s.keys())n[e]=("center"===i?(r-s[e])/2:"right"===i?r-s[e]:0)+t[e],n[e]<a&&(a=-n[e]);if(a)for(const e of n.keys())n[e]+=a;return[1,2].map(t=>n[t]+=e[t]?e[t].dx*e[0].rscale:0),n}getDelta(t,e=!1){var i=this.node.attributes.get("accent");let{sk:s,ic:r}=this.baseCore.getOuterBBox();return i&&(s-=t.getOuterBBox().sk),((i&&!e?s:0)+this.font.skewIcFactor*r)*this.baseScale}stretchChildren(){const e=[];for(const i of this.childNodes)i.canStretch(Ac.Horizontal)&&e.push(i);const i=e.length,s=this.childNodes.length;if(i&&1<s){let t=0;var r=1<i&&i===s;for(const e of this.childNodes){const i=e.stretch.dir===Ac.None;if(r||i){const{w:s,rscale:n}=e.getOuterBBox(i);s*n>t&&(t=s*n)}}for(const i of e){const e=i.coreMO();null===e.size&&e.getStretchedVariant([t/i.coreRScale()])}}}constructor(t,e,i=null){super(t,e,i),this.baseScale=1,this.baseIc=0,this.baseRemoveIc=!1,this.baseIsChar=!1,this.baseHasAccentOver=null,this.baseHasAccentUnder=null,this.isLineAbove=!1,this.isLineBelow=!1,this.isMathAccent=!1;t=this.baseCore=this.getBaseCore();t&&(this.setBaseAccentsFor(t),this.baseScale=this.getBaseScale(),this.baseIc=this.getBaseIc(),this.baseIsChar=this.isCharBase(),this.isMathAccent=this.baseIsChar&&this.scriptChild&&void 0!==this.scriptChild.coreMO().node.getProperty("mathaccent"),this.checkLineAccents(),this.baseRemoveIc=!this.isLineAbove&&!this.isLineBelow&&(!this.constructor.useIC||this.isMathAccent))}computeBBox(t,e=!1){t.empty(),t.append(this.baseChild.getOuterBBox()),this.appendScripts(t),t.clean(),this.setChildPWidths(e)}appendScripts(t){var e=this.getBaseWidth(),[i,s]=this.getOffset();return t.combine(this.scriptChild.getOuterBBox(),e+i,s),t.w+=this.font.params.scriptspace,t}get breakCount(){return this._breakCount<0&&(this._breakCount=this.node.isEmbellished?this.coreMO().embellishedBreakCount:this.node.linebreakContainer?0:this.childNodes[0].breakCount),this._breakCount}breakTop(t,e){return this.node.linebreakContainer||!this.parent||this.node.childIndex(e.node)?t:this.parent.breakTop(t,this)}computeLineBBox(t){var e=this.breakCount;if(!e)return Lc.from(this.getOuterBBox(),this.linebreakOptions.lineleading);var i=this.baseChild.getLineBBox(t).copy();return t<e?(0===t&&this.addLeftBorders(i),this.addMiddleBorders(i)):(this.appendScripts(i),this.addMiddleBorders(i),this.addRightBorders(i)),i}};return t.useIC=!0,t}function Gh(t){return class extends t{computeBBox(t,e=0){if(this.childNodes.length){const{w:e,h:i,d:s}=this.childNodes[0].getBBox();t.w=e,t.h=i,t.d=s}}get breakCount(){return this.node.isEmbellished?this.coreMO().embellishedBreakCount:this.childNodes[0].breakCount}}}class x extends nh{constructor(){super(...arguments),this.dx=0,this.utext=""}toSVG(t){this.toEmbellishedSVG(t)||this.addChildren(this.standardSvgNodes(t))}toEmbellishedSVG(t){if(t.length<=1||!this.node.isEmbellished)return!1;const e=this.coreMO().embellishedBreakStyle,i=[];for(var[s,r]of[[t[0],"before"],[t[1],"after"]])e!==r?(this.toSVG([s]),i.push(this.dom[0]),this.place(0,0)):i.push(this.createSvgNodes([s])[0]);return this.dom=i,!0}addChildren(t){let e=0;for(const s of this.childNodes){s.toSVG(t);var i=s.getOuterBBox();s.dom&&s.place(e+i.L*i.rscale,0),e+=(i.L+i.w+i.R)*i.rscale}}standardSvgNodes(t){t=this.createSvgNodes(t);return this.handleStyles(),this.handleScale(),this.handleBorder(),this.handleColor(),this.handleAttributes(),t}createSvgNodes(t){this.dom=t.map(t=>this.svg("g",{"data-mml-node":this.node.kind}));for(const e of(t=this.handleHref(t)).keys())this.adaptor.append(t[e],this.dom[e]);return this.dom}handleHref(t){const r=this.node.attributes.get("href");if(!r)return t;let n=0;const a=this.node.isEmbellished&&!this.node.isKind("mo");return t.map(t=>{t=this.adaptor.append(t,this.svg("a",{href:r}));var{h:e,d:i,w:s}=a?this.getOuterBBox():this.getLineBBox(n);return this.adaptor.append(this.dom[n++],this.svg("rect",{"data-hitbox":!0,fill:"none",stroke:"none","pointer-events":"all",width:this.fixed(s),height:this.fixed(e+i),x:1===n||a?this.fixed(-this.dx):0,y:this.fixed(-i)})),t})}handleStyles(){if(this.styles){const i=this.styles.cssText;i&&this.dom.forEach(t=>this.adaptor.setAttribute(t,"style",i));var t=((null==(t=this.styleData)?void 0:t.padding)||[0,0,0,0])[3],e=((null==(e=null==(e=this.styleData)?void 0:e.border)?void 0:e.width)||[0,0,0,0])[3];(t||e)&&(this.dx=t+e)}}handleScale(){if(1!==this.bbox.rscale){const e="scale("+this.fixed(this.bbox.rscale/1e3,3)+")";this.dom.forEach(t=>this.adaptor.setAttribute(t,"transform",e))}}handleColor(){var t;const n=this.adaptor,a=this.node.attributes,e=a.getExplicit("mathcolor")||a.getExplicit("color"),o=a.getExplicit("mathbackground")||a.getExplicit("background")||(null==(t=this.styles)?void 0:t.get("background-color"));if(e&&this.dom.forEach(t=>{n.setAttribute(t,"fill",e),n.setAttribute(t,"stroke",e)}),o){let r=0;const a=this.node.isEmbellished&&!this.node.isKind("mo");this.dom.forEach(t=>{var{h:e,d:i,w:s}=a?this.getOuterBBox():this.getLineBBox(r++),s=this.svg("rect",{fill:o,x:1===r||a?this.fixed(-this.dx):0,y:this.fixed(-i),width:this.fixed(s),height:this.fixed(e+i),"data-bgcolor":!0}),e=n.firstChild(t);e?n.insert(s,e):n.append(t,s)})}}handleBorder(){var e,i=null==(e=this.styleData)?void 0:e.border;if(i){const E=x.borderFuzz,N=this.adaptor;let t=0;var s=this.dom.length-1,r=this.node.isEmbellished&&!this.node.isKind("mo");for(const e of this.dom){var n=s&&t?0:1,a=s&&t!==s?0:1,o=r?this.getOuterBBox():this.getLineBBox(t++),[o,l,c]=[o.h+E,o.d+E,o.w+E],h=[c,o],d=[-E,o],u=[c,-l],p=[-E,-l],m=[c-a*i.width[1],o-i.width[0]],o=[-E+n*i.width[3],o-i.width[0]],c=[c-a*i.width[1],-l+i.width[2]],l=[-E+n*i.width[3],-l+i.width[2]],g=[[d,h,m,o],[u,h,m,c],[p,u,c,l],[p,d,o,l]],f=N.firstChild(e),b=n*this.dx;for(const E of[0,1,2,3])if(i.width[E]&&(3!==E||n)&&(1!==E||a)){const N=g[E];"dashed"===i.style[E]||"dotted"===i.style[E]?this.addBorderBroken(N,i.color[E],i.style[E],i.width[E],E,e,b):this.addBorderSolid(N,i.color[E],f,e,b)}}}}addBorderSolid(t,e,i,s,r){t=this.svg("polygon",{points:t.map(([t,e])=>this.fixed(t-r)+","+this.fixed(e)).join(" "),stroke:"none"});e&&this.adaptor.setAttribute(t,"fill",e),i?this.adaptor.insert(t,i):this.adaptor.append(s,t)}addBorderBroken(t,e,i,s,r,n,a){const o="dotted"===i,l=s/2,[c,h,d,u]=[[l,-l,-l,-l],[-l,l,-l,-l],[l,l,-l,l],[l,l,l,-l]][r],[p,m]=t,g=p[0]+c-a,f=p[1]+h,b=m[0]+d-a,E=m[1]+u,N=Math.abs(r%2?E-f:b-g),y=o?Math.ceil(N/(2*s)):Math.ceil((N-s)/(4*s)),x=N/(4*y+1),A=this.svg("line",{x1:this.fixed(g),y1:this.fixed(f),x2:this.fixed(b),y2:this.fixed(E),"stroke-width":this.fixed(s),stroke:e,"stroke-linecap":o?"round":"square","stroke-dasharray":(o?[1,this.fixed(N/y-.002)]:[this.fixed(x),this.fixed(3*x)]).join(" ")}),v=this.adaptor,_=v.firstChild(n);_?v.insert(A,_):v.append(n,A)}handleAttributes(){const e=this.adaptor,i=this.node.attributes,s=i.getAllDefaults(),t=x.skipAttributes;for(const r of i.getExplicitNames())!1!==t[r]&&(r in s||t[r]||e.hasAttribute(this.dom[0],r))||this.dom.forEach(t=>e.setAttribute(t,r,i.getExplicit(r)));if(i.get("class"))for(const s of un(i.get("class")))this.dom.forEach(t=>e.addClass(t,s))}place(t,e,i=null){i||(t+=this.dx*this.bbox.rscale),(t||e)&&(i||(i=this.dom[0],e=this.handleId(e)),t=`translate(${this.fixed(t)},${this.fixed(e)})`,e=this.adaptor.getAttribute(i,"transform")||"",this.adaptor.setAttribute(i,"transform",t+(e?" "+e:"")))}handleId(t){if(!this.node.attributes||!this.node.attributes.get("id"))return t;const e=this.adaptor,{h:i,rscale:s}=this.getBBox(),r=e.childNodes(this.dom[0]);r.forEach(t=>e.remove(t));var n=this.svg("g",{"data-idbox":!0,transform:`translate(0,${this.fixed(-i)})`},r);return e.append(this.dom[0],this.svg("text",{"data-id-align":!0},[this.text("")])),e.append(this.dom[0],n),t+i*s}firstChild(t=this.dom[0]){const e=this.adaptor;let i=e.firstChild(t);return i=(i=i&&"text"===e.kind(i)&&e.getAttribute(i,"data-id-align")?e.firstChild(e.next(i)):i)&&"rect"===e.kind(i)&&e.getAttribute(i,"data-hitbox")?e.next(i):i}placeChar(t,e,i,s,r=null,n=!1){null===r&&(r=this.variant);var a=t.toString(16).toUpperCase(),[,,o,l]=this.getVariantChar(r,t);if(l.unknown)return this.utext+=String.fromCodePoint(t),n?0:this.addUtext(e,i,s,r);n=this.addUtext(e,i,s,r);if("p"in l){const t=l.p?"M"+l.p+"Z":"";return this.place(e+=n,i,this.adaptor.append(s,this.charNode(r,a,t))),o+n}if("c"in l){const t=this.adaptor.append(s,this.svg("g",{"data-c":a}));this.place(e+n,i,t),e=0;for(const s of this.unicodeChars(l.c,r))e+=this.placeChar(s,e,i,t,r);return e+n}return o}addUtext(t,e,i,s){var r=this.utext;if(!r)return 0;this.utext="";i=this.adaptor.append(i,this.jax.unknownText(r,s));return this.place(t,e,i),this.jax.measureTextNodeWithCache(i,r,s).w}charNode(t,e,i){return"none"!==this.jax.options.fontCache?this.useNode(t,e,i):this.pathNode(e,i)}pathNode(t,e){return this.svg("path",{"data-c":t,d:e})}useNode(t,e,i){var s=this.svg("use",{"data-c":e}),t="#"+this.jax.fontCache.cachePath(t,e,i);return this.adaptor.setAttribute(s,"href",t,this.jax.options.useXlink?Xd:null),s}drawBBox(){const{w:t,h:e,d:i}=this.getOuterBBox(),s=((null==(n=null==(n=this.styleData)?void 0:n.border)?void 0:n.width)||[0,0,0,0])[3],r={style:{opacity:.25}};s&&(r.transform=`translate(${this.fixed(-s)}, 0)`);var n=this.svg("g",r,[this.svg("rect",{fill:"red",height:this.fixed(e),width:this.fixed(t)}),this.svg("rect",{fill:"green",height:this.fixed(i),width:this.fixed(t),y:this.fixed(-i)})]),a=this.dom[0]||this.parent.dom[0];this.adaptor.append(a,n)}html(t,e={},i=[]){return this.jax.html(t,e,i)}svg(t,e={},i=[]){return this.jax.svg(t,e,i)}text(t){return this.jax.text(t)}fixed(t,e=1){return this.jax.fixed(1e3*t,e)}}x.kind="unknown",x.borderFuzz=.005;const Vh=["url(data:application/x-font-woff;charset=utf-8;base64,","T1RUTwAJAIAAAwAQQ0ZGIGnFMZkAAARQAAAAlE9TLzJpUWOBAAABAAAAAGBjbWFwAAwAUwAABAQAAAAs","aGVhZCFRvpAAAACcAAAANmhoZWEC8AD9AAAA1AAAACRobXR4A+gAAAAABOQAAAAIbWF4cAACUAAAAAD4","AAAABm5hbWVNb8+2AAABYAAAAqNwb3N0AAMAAAAABDAAAAAgAAEAAAABAABVWOu4Xw889QADA+gAAAAA","3ym+2AAAAADfKb7YAAAAAAPoAAAAAAADAAIAAAAAAAAAAQAAAu79EgAAA+gAAAAAAAAAAQAAAAAAAAAA","AAAAAAAAAAIAAFAAAAIAAAADA+gB9AAFAAACigK7AAAAjAKKArsAAAHfADEBAgAAAAAAAAAAAAAAAAAA","AAEAAAAAAAAAAAAAAABYWFhYAEAAIAAgAu79EgAAAu4C7gAAAAEAAAAAAXcAAAAgACAAAAAAACIBngAB","AAAAAAAAAAEAQQABAAAAAAABAAsAAAABAAAAAAACAAcAIQABAAAAAAADABUAxgABAAAAAAAEABMANgAB","AAAAAAAFAAsApQABAAAAAAAGABIAbwABAAAAAAAHAAEAQQABAAAAAAAIAAEAQQABAAAAAAAJAAEAQQAB","AAAAAAAKAAEAQQABAAAAAAALAAEAQQABAAAAAAAMAAEAQQABAAAAAAANAAEAQQABAAAAAAAOAAEAQQAB","AAAAAAAQAAsAAAABAAAAAAARAAcAIQADAAEECQAAAAIAXwADAAEECQABABYACwADAAEECQACAA4AKAAD","AAEECQADACoA2wADAAEECQAEACYASQADAAEECQAFABYAsAADAAEECQAGACQAgQADAAEECQAHAAIAXwAD","AAEECQAIAAIAXwADAAEECQAJAAIAXwADAAEECQAKAAIAXwADAAEECQALAAIAXwADAAEECQAMAAIAXwAD","AAEECQANAAIAXwADAAEECQAOAAIAXwADAAEECQAQABYACwADAAEECQARAA4AKG1qeC1sbS16ZXJvAG0A","agB4AC0AbABtAC0AegBlAHIAb1JlZ3VsYXIAUgBlAGcAdQBsAGEAcm1qeC1sbS16ZXJvIFJlZ3VsYXIA","bQBqAHgALQBsAG0ALQB6AGUAcgBvACAAUgBlAGcAdQBsAGEAcm1qeC1sbS16ZXJvUmVndWxhcgBtAGoA","eAAtAGwAbQAtAHoAZQByAG8AUgBlAGcAdQBsAGEAclZlcnNpb24gMC4xAFYAZQByAHMAaQBvAG4AIAAw","AC4AMSA6bWp4LWxtLXplcm8gUmVndWxhcgAgADoAbQBqAHgALQBsAG0ALQB6AGUAcgBvACAAUgBlAGcA","dQBsAGEAcgAAAAABAAMAAQAAAAwABAAgAAAABAAEAAEAAAAg//8AAAAg////4QABAAAAAAADAAAAAAAA","AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAEAQABAQETbWp4LWxtLXplcm9SZWd1bGFyAAEBASf4GwD4","HAL4HQP4HgSLi/mC+nwFHQAAAIYPHQAAAIkRix0AAACUEgAFAQEMHyoxNlZlcnNpb24gMC4xbWp4LWxt","LXplcm8gUmVndWxhcm1qeC1sbS16ZXJvUmVndWxhcnNwYWNlAAAAAYsAAgEBAwaLDvp8DgAAAAAD6AAA",') format("woff")'].join(""),Wh=((W=class extends uh(x){handleDisplay(){var[s,r]=this.getAlignShift();if("center"!==s&&this.adaptor.setAttribute(this.jax.container,"justify",s),this.bbox.pwidth===Fa.fullWidth){if(this.adaptor.setAttribute(this.jax.container,"width","full"),this.jax.table){let{L:t,w:e,R:i}=this.jax.table.getOuterBBox();"right"===s?i=Math.max(i||-r,-r):"left"===s?t=Math.max(t||r,r):"center"===s&&(e+=2*Math.abs(r)),this.jax.minwidth=Math.max(0,t+e+i)}}else this.jax.shift=r}toSVG(t){super.toSVG(t);const e=this.adaptor;"block"===this.node.attributes.get("display")&&(e.setAttribute(this.jax.container,"display","true"),this.handleDisplay())}setChildPWidths(t,e=null,i){return super.setChildPWidths(t,this.parent?e:this.metrics.containerWidth/this.jax.pxPerEm,!1)}}).kind=Zr.prototype.kind,W.styles={'mjx-container[jax="SVG"] mjx-break':{"white-space":"normal","line-height":"0","clip-path":"rect(0 0 0 0)","font-family":"MJX-ZERO ! important"},'mjx-break[size="0"]':{"letter-spacing":"-0.999em"},'mjx-break[size="1"]':{"letter-spacing":"-0.889em"},'mjx-break[size="2"]':{"letter-spacing":"-0.833em"},'mjx-break[size="3"]':{"letter-spacing":"-0.778em"},'mjx-break[size="4"]':{"letter-spacing":"-0.722em"},'mjx-break[size="5"]':{"letter-spacing":"-0.667em"},'mjx-container[jax="SVG"] mjx-break[newline]::before':{"white-space":"pre",content:'"\\A"'},'mjx-break[newline] + svg[width="0.054ex"]':{"margin-right":"-1px"},"mjx-break[prebreak]":{"letter-spacing":"-.999em"},"@font-face /* zero */":{"font-family":"MJX-ZERO",src:Vh}},W),Xh=((X=class extends Th(x){constructor(){super(...arguments),this.linebreakCount=0}toSVG(t){this.getBBox();var e=this.linebreakCount=this.isStack?0:this.breakCount;t=e||!this.node.isInferred?this.standardSvgNodes(t):this.getSvgNodes(t),this.addChildren(t),e&&this.placeLines(t)}getSvgNodes(t){var e;return this.dh&&(e=this.svg("g",{transform:`translate(0 ${this.fixed(this.dh)})`}),t=[this.adaptor.append(t[0],e)]),this.dom=t}placeLines(t){var e=this.lineBBox,i=this.jax.math.display;let s=this.dh;for(const n of t.keys()){var r=e[n];this.place(r.L||0,s,t[n]),s-=Math.max(.25,r.d)+(i?r.lineLeading:0)+Math.max(.75,(null==(r=e[n+1])?void 0:r.h)||0)}}createSvgNodes(t){var e=this.linebreakCount;if(!e)return super.createSvgNodes(t);const i=this.adaptor,s=this.node.isInferred?{"data-mjx-linestack":!0}:{"data-mml-node":this.node.kind},r=(this.dom=[i.append(t[0],this.svg("g",s))],this.dom=[i.append(this.handleHref(t)[0],this.dom[0])],Array(e));for(let t=0;t<=e;t++)r[t]=i.append(this.dom[0],this.svg("g",{"data-mjx-linebox":!0,"data-mjx-lineno":t}));return r}addChildren(e){let i=0,s=0;for(const o of this.childNodes){var r,n,a=o.breakCount;if(o.toSVG(e.slice(s,s+a+1)),o.dom){let t=0;for(const s of o.dom)s&&(r=t?0:o.dx,n=o.getLineBBox(t++),i+=(n.L+r)*n.rscale,this.place(i,0,s),i+=(n.w+n.R-r)*n.rscale),a&&(i=0);if(a){const e=o.getLineBBox(a);i+=(e.w+e.R)*e.rscale}}s+=a}}}).kind=Nn.prototype.kind,X),zh=((P=class extends wh(Xh){}).kind=yn.prototype.kind,P),Kh=((V=class extends bh(x){}).kind=tn.prototype.kind,V);class Jh extends Ic{static charOptions(t,e){return super.charOptions(t,e)}static addExtension(t,e=""){super.addExtension(t,e),Cc(this,"variantCacheIds",t.cacheIds)}}Jh.OPTIONS=Object.assign(Object.assign({},Ic.OPTIONS),{dynamicPrefix:"./svg/dynamic"}),Jh.JAX="SVG";(z=class extends Ah(x){toSVG(t){const e=this.node.attributes,i=e.get("symmetric")&&this.stretch.dir!==Ac.Horizontal,s=this.stretch.dir!==Ac.None,r=(s&&null===this.size&&this.getStretchedVariant([]),this.standardSvgNodes(t));if(1<r.length&&"duplicate"!==this.breakStyle){const t="after"===this.breakStyle?1:0;this.adaptor.remove(r[t]),r[t]=null}if(s&&this.size<0)this.stretchSvg();else{const t=i||e.get("largeop")?this.fixed(this.getCenterOffset()):"0",s=this.node.getProperty("mathaccent")?this.fixed(this.getAccentOffset()):"0";"0"===t&&"0"===s||(r[0]&&this.adaptor.setAttribute(r[0],"transform",`translate(${s} ${t})`),r[1]&&this.adaptor.setAttribute(r[1],"transform",`translate(${s} ${t})`)),r[0]&&this.addChildren([r[0]]),r[1]&&(this.multChar||this).addChildren([r[1]])}}stretchSvg(){var t=this.stretch.stretch,e=this.getStretchVariants(),i=this.getBBox();this.stretch.dir===Ac.Vertical?this.stretchVertical(t,e,i):this.stretchHorizontal(t,e,i)}getStretchVariants(){const t=this.stretch.c||this.getText().codePointAt(0),e=[];for(const i of this.stretch.stretch.keys())e[i]=this.font.getStretchVariant(t,i);return e}stretchVertical(t,e,i){var{h:s,d:r,w:n}=i,a=this.addTop(t[0],e[0],s,n),o=this.addBot(t[2],e[2],r,n);if(4===t.length){const[i,l]=this.addMidV(t[3],e[3],n);this.addExtV(t[1],e[1],s,-i,a,0,n),this.addExtV(t[1],e[1],-l,r,0,o,n)}else this.addExtV(t[1],e[1],s,r,a,o,n)}stretchHorizontal(t,e,i){var s=i.w,r=this.addLeft(t[0],e[0]),n=this.addRight(t[2],e[2],s);if(4===t.length){const[i,a]=this.addMidH(t[3],e[3],s),o=s/2;this.addExtH(t[1],e[1],o,r,o-i),this.addExtH(t[1],e[1],o,a-o,n,o)}else this.addExtH(t[1],e[1],s,r,n)}getChar(t,e){e=this.font.getChar(e,t)||[0,0,0,null];return[e[0],e[1],e[2],e[3]||{}]}addGlyph(t,e,i,s,r=null){if(r)return this.placeChar(t,i,s,r,e);if(this.dom[0]){const r=this.placeChar(t,i,s,this.dom[0],e);if(!this.dom[1])return r}return this.placeChar(t,i,s,this.dom[1],e)}addTop(t,e,i,s){if(!t)return 0;var[r,n,a]=this.getChar(t,e);return this.addGlyph(t,e,(s-a)/2,i-r),r+n}addExtV(t,e,i,s,r,n,a){if(t){r=Math.max(0,r-.1),n=Math.max(0,n-.1);const o=this.adaptor,[l,c,h]=this.getChar(t,e),d=i+s-r-n,u=1.5*d/(l+c),p=(u*(l-c)-d)/2;d<=0||(i=this.svg("svg",{width:this.fixed(h),height:this.fixed(d),y:this.fixed(n-s),x:this.fixed((a-h)/2),viewBox:[0,p,h,d].map(t=>this.fixed(t)).join(" ")}),this.addGlyph(t,e,0,0,i),r=o.lastChild(i),o.setAttribute(r,"transform",`scale(1,${this.jax.fixed(u)})`),this.dom[0]&&o.append(this.dom[0],i),this.dom[1]&&o.append(this.dom[1],this.dom[0]?o.clone(i):i))}}addBot(t,e,i,s){if(!t)return 0;var[r,n,a]=this.getChar(t,e);return this.addGlyph(t,e,(s-a)/2,n-i),r+n}addMidV(t,e,i){if(!t)return[0,0];var[s,r,n]=this.getChar(t,e),a=(r-s)/2+this.font.params.axis_height;return this.addGlyph(t,e,(i-n)/2,a),[s+a,r-a]}addLeft(t,e){return t?this.addGlyph(t,e,0,0):0}addExtH(t,e,i,s,r,n=0){if(t){r=Math.max(0,r-.1),s=Math.max(0,s-.1);const a=this.adaptor,[o,l,c]=this.getChar(t,e),h=i-s-r,d=o+l+.2,u=h/c*1.5,p=-(l+.1);h<=0||(i=this.svg("svg",{width:this.fixed(h),height:this.fixed(d),x:this.fixed(n+s),y:this.fixed(p),viewBox:[(u*c-h)/2,p,h,d].map(t=>this.fixed(t)).join(" ")}),this.addGlyph(t,e,0,0,i),r=a.lastChild(i),a.setAttribute(r,"transform",`scale(${this.jax.fixed(u)},1)`),this.dom[0]&&a.append(this.dom[0],i),this.dom[1]&&a.append(this.dom[1],this.dom[0]?a.clone(i):i))}}addRight(t,e,i){if(!t)return 0;var s=this.getChar(t,e)[2];return this.addGlyph(t,e,i-s,0)}addMidH(t,e,i){if(!t)return[0,0];var s=this.getChar(t,e)[2];return this.addGlyph(t,e,(i-s)/2,0),[(i-s)/2,(i+s)/2]}}).kind=gn.prototype.kind;const Yh=z,$h=((jt=class extends xh(x){}).kind=en.prototype.kind,jt),Qh=((Ht=class extends Ch(x){}).kind=En.prototype.kind,Ht),Zh=((K=class extends Ph(x){toSVG(r){if(this.breakCount){const t=this.standardSvgNodes(r),l=this.textNode.node,c=this.childNodes;for(const r of t.keys()){var n=[t[r]];let[e,i]=this.breakPoints[r-1]||[0,0];var[a,o]=this.breakPoints[r]||[c.length,0];let s=c[e].node.getText().split(/ /);if(e===a)l.setText(s.slice(i,o).join(" ")),this.textNode.toSVG(n);else{l.setText(s.slice(i).join(" ")),this.textNode.toSVG(n);let t=this.textNode.getBBox().w;for(;++e<a&&e<c.length;){const r=c[e];r.toSVG(n),r.dom&&r.place(t,0),t+=r.getBBox().w}e<c.length&&(s=c[e].node.getText().split(/ /),l.setText(s.slice(0,o).join(" ")),this.textNode.toSVG(n),this.textNode.place(t,0))}}}else super.toSVG(r)}}).kind=fn.prototype.kind,K),td=((qt=class extends x{toSVG(t){var t=this.standardSvgNodes(t),{h:e,d:i,w:s}=this.getBBox(),s=(this.adaptor.append(this.dom[0],this.svg("rect",{"data-background":!0,width:this.fixed(s),height:this.fixed(e+i),y:this.fixed(-i)})),this.node.attributes.get("title"));s&&this.adaptor.append(this.dom[0],this.svg("title",{},[this.adaptor.text(s)])),this.addChildren(t)}}).kind=Tn.prototype.kind,qt.styles={'g[data-mml-node="merror"] > g':{fill:"red",stroke:"red"},'g[data-mml-node="merror"] > rect[data-background]':{fill:"yellow",stroke:"none"}},qt),ed=(($=class extends Ih(x){}).kind=bn.prototype.kind,$),id=((Y=class extends vh(x){toSVG(e){if(!this.toEmbellishedSVG(e)){let t=this.standardSvgNodes(e);var[,,,,,e,i,s,r]=this.getDimens(),n=this.node.attributes.get("data-align")||"left",i=i+r-(e<0&&"left"!==n?"center"===n?e/2:e:0);(i||s)&&(t=[this.adaptor.append(t[0],this.svg("g"))],this.place(i,s,t[0])),this.addChildren(t)}}}).kind=wn.prototype.kind,Y),sd=((tt=class extends x{toSVG(t){this.standardSvgNodes(t)}}).kind=Cn.prototype.kind,tt),rd=((Pt=class extends gh(x){toSVG(t){if(!this.toEmbellishedSVG(t)){this.standardSvgNodes(t);var{linethickness:e,bevelled:t}=this.node.attributes.getList("linethickness","bevelled"),i=this.isDisplay();if(t)this.makeBevelled(i);else{const t=this.length2em(String(e),.06);0===t?this.makeAtop(i):this.makeFraction(i,t)}}}makeFraction(t,e){const i=this.dom,{numalign:s,denomalign:r}=this.node.attributes.getList("numalign","denomalign"),[n,a]=this.childNodes,o=n.getOuterBBox(),l=a.getOuterBBox(),c=this.font.params,h=c.axis_height,d=this.node.getProperty("withDelims")?0:c.nulldelimiterspace,u=Math.max((o.L+o.w+o.R)*o.rscale,(l.L+l.w+l.R)*l.rscale),p=this.getAlignX(u,o,s)+.1+d,m=this.getAlignX(u,l,r)+.1+d,{T:g,u:f,v:b}=this.getTUV(t,e);n.toSVG(i),n.place(p,h+g+Math.max(o.d*o.rscale,f)),a.toSVG(i),a.place(m,h-g-Math.max(l.h*l.rscale,b)),this.adaptor.append(i[0],this.svg("rect",{width:this.fixed(u+.2),height:this.fixed(e),x:this.fixed(d),y:this.fixed(h-e/2)}))}makeAtop(t){const e=this.dom,{numalign:i,denomalign:s}=this.node.attributes.getList("numalign","denomalign"),[r,n]=this.childNodes,a=r.getOuterBBox(),o=n.getOuterBBox(),l=this.font.params,c=this.node.getProperty("withDelims")?0:l.nulldelimiterspace,h=Math.max((a.L+a.w+a.R)*a.rscale,(o.L+o.w+o.R)*o.rscale),d=this.getAlignX(h,a,i)+c,u=this.getAlignX(h,o,s)+c,{u:p,v:m}=this.getUVQ(t);r.toSVG(e),r.place(d,p),n.toSVG(e),n.place(u,-m)}makeBevelled(t){const e=this.dom,[i,s]=this.childNodes,{u:r,v:n,delta:a,nbox:o,dbox:l}=this.getBevelData(t),c=(o.L+o.w+o.R)*o.rscale;i.toSVG(e),this.bevel.toSVG(e),s.toSVG(e),i.place(o.L*o.rscale,r),this.bevel.place(c-a/2,0),s.place(c+this.bevel.getOuterBBox().w+l.L*l.rscale-a,n)}}).kind=xn.prototype.kind,Pt),nd=((Vt=class extends Lh(x){constructor(){super(...arguments),this.dx=0}addRoot(t,e,i,s){return 0}toSVG(t){const e=this.surd,i=this.childNodes[this.base],s=this.root?this.childNodes[this.root]:null,r=e.getBBox(),n=i.getOuterBBox(),a=this.getPQ(r)[1],o=this.font.params.surd_height*this.bbox.scale,l=n.h+a+o,c=this.standardSvgNodes(t);e.toSVG(c);var t=this.addRoot(c,s,r,l),h=this.adaptor.append(c[0],this.svg("g"));i.toSVG([h]),e.place(t,l-r.h),i.place(t+r.w,0),this.adaptor.append(c[c.length-1],this.svg("rect",{width:this.fixed(n.w),height:this.fixed(o),x:this.fixed(t+r.w),y:this.fixed(l-o)}))}}).kind=An.prototype.kind,Vt),ad=((Bt=class extends _h(nd){addRoot(t,e,i,s){e.toSVG(t);var[t,i,s]=this.getRootDimens(i,s),r=e.getOuterBBox();return e.place(s*r.rscale,i),t}}).kind=vn.prototype.kind,Bt),od=((it=class extends mh(x){toSVG(t){t=this.standardSvgNodes(t);this.setChildrenParent(this.mrow),this.mrow.toSVG(t),this.setChildrenParent(this)}setChildrenParent(t){for(const e of this.childNodes)e.parent=t}}).kind=In.prototype.kind,it),ld=((Dt=class extends Hh(x){toSVG(t){var e,i,s;this.toEmbellishedSVG(t)||(t=this.standardSvgNodes(t),e=this.getBaseWidth(),[i,s]=this.getOffset(),this.baseChild.toSVG(t),this.baseChild.place(0,0),this.scriptChild.toSVG([t[t.length-1]]),this.scriptChild.place(e+i,s))}}).kind="scriptbase",Dt),cd=((Ot=class extends Sh(ld){}).kind=Rn.prototype.kind,Ot),hd=((At=class extends kh(ld){}).kind=On.prototype.kind,At),dd=((Lt=class extends Rh(ld){toSVG(t){if(!this.toEmbellishedSVG(t)){const e=this.standardSvgNodes(t),[i,s,r]=[this.baseChild,this.supChild,this.subChild],n=this.getBaseWidth(),a=this.getAdjustedIc(),[o,l]=this.getUVQ();i.toSVG(e);t=[e[e.length-1]];s.toSVG(t),r.toSVG(t),i.place(0,0),r.place(n+(this.baseIsChar?0:a),l),s.place(n+a,o)}}}).kind=kn.prototype.kind,Lt),ud=((St=class extends Uh(cd){toSVG(t){if(!this.toEmbellishedSVG(t))if(this.hasMovableLimits())super.toSVG(t);else{const s=this.standardSvgNodes(t),[r,n]=[this.baseChild,this.scriptChild],[a,o]=[r.getOuterBBox(),n.getOuterBBox()];r.toSVG(s),n.toSVG(s);var t=this.isLineBelow?0:this.getDelta(this.scriptChild,!0),e=this.getUnderKV(a,o)[1],[t,i]=this.getDeltaW([a,o],[0,-t]);r.place(t,0),n.place(i,e)}}}).kind=Dn.prototype.kind,St),pd=((st=class extends qh(hd){toSVG(t){if(!this.toEmbellishedSVG(t))if(this.hasMovableLimits())super.toSVG(t);else{const s=this.standardSvgNodes(t),[r,n]=[this.baseChild,this.scriptChild],[a,o]=[r.getOuterBBox(),n.getOuterBBox()];r.toSVG(s),n.toSVG(s);var t=this.isLineAbove?0:this.getDelta(this.scriptChild),e=this.getOverKU(a,o)[1],[t,i]=this.getDeltaW([a,o],[0,t]);r.place(t,0),n.place(i,e)}}}).kind=Pn.prototype.kind,st),md=((Mt=class extends jh(dd){toSVG(t){if(!this.toEmbellishedSVG(t))if(this.hasMovableLimits())super.toSVG(t);else{const n=this.standardSvgNodes(t),[a,o,l]=[this.baseChild,this.overChild,this.underChild],[c,h,d]=[a.getOuterBBox(),o.getOuterBBox(),l.getOuterBBox()];a.toSVG(n),l.toSVG(n),o.toSVG(n);var t=this.getDelta(this.overChild),e=this.getDelta(this.underChild,!0),i=this.getOverKU(c,h)[1],s=this.getUnderKV(c,d)[1],[e,t,r]=this.getDeltaW([c,d,h],[0,this.isLineBelow?0:-e,this.isLineAbove?0:t]);a.place(e,0),l.place(t,s),o.place(r,i)}}}).kind=Mn.prototype.kind,Mt);function gd(t){return{left:(t,e)=>0,center:(t,e)=>(e-t)/2,right:(t,e)=>e-t}[t]||((t,e)=>0)}(xt=class extends yh(dd){toSVG(e){if(!this.toEmbellishedSVG(e)){var e=this.standardSvgNodes(e),i=this.scriptData,s=this.node.getProperty("scriptalign")||"right left",[s,r]=un(s+" "+s),[n,a]=this.getCombinedUV();let t=0;i.numPrescripts&&(t=this.addScripts(this.dom[0],this.font.params.scriptspace,n,a,this.firstPrescript,i.numPrescripts,s));const o=this.baseChild;o.toSVG(e),o.place(t,0),this.breakCount&&(t=0),t+=o.getLineBBox(o.breakCount).w,i.numScripts&&this.addScripts(this.dom[this.dom.length-1],t,n,a,1,i.numScripts,r)}}addScripts(t,e,i,s,r,n,a){const o=this.adaptor,l=gd(a),c=o.append(t,this.svg("g")),h=o.append(t,this.svg("g"));this.place(e,i,c),this.place(e,s,h);var d=r+2*n;let u=0;for(;r<d;){const[t,e]=[this.childNodes[r++],this.childNodes[r++]],[i,s]=[t.getOuterBBox(),e.getOuterBBox()],[n,a]=[i.rscale,s.rscale],o=Math.max(i.w*n,s.w*a);t.toSVG([h]),e.toSVG([c]),t.place(u+l(i.w*n,o),0),e.place(u+l(s.w*a,o),0),u+=o}return e+u}}).kind=Bn.prototype.kind;const fd=xt,bd=((bt=class extends Mh(x){placeRows(e){var i=this.node.attributes.get("equalrows"),{H:s,D:r}=this.getTableData(),n=this.getEqualRowHeight(),a=this.getRowHalfSpacing(),o=[this.fLine,...this.rLines,this.fLine];let l=this.getBBox().h-o[0];for(let t=0;t<this.numRows;t++){const c=this.childNodes[t];[c.H,c.D]=this.getRowHD(i,n,s[t],r[t]),[c.tSpace,c.bSpace]=[a[t],a[t+1]],[c.tLine,c.bLine]=[o[t],o[t+1]],c.toSVG([e]),c.place(0,l-a[t]-c.H),l-=a[t]+c.H+c.D+a[t+1]+o[t+1]}}getRowHD(t,e,i,s){return t?[(e+i-s)/2,(e-i+s)/2]:[i,s]}handleColor(){super.handleColor();var t=this.firstChild();t&&this.adaptor.setAttribute(t,"width",this.fixed(this.getWidth()))}handleColumnLines(i){if("none"!==this.node.attributes.get("columnlines")){var s=this.getColumnAttributes("columnlines");if(s){var r=this.getColumnHalfSpacing(),n=this.cLines,a=this.getComputedWidths();let e=this.fLine;for(let t=0;t<s.length;t++)e+=r[t]+a[t]+r[t+1],"none"!==s[t]&&this.adaptor.append(i,this.makeVLine(e,s[t],n[t])),e+=n[t]}}}handleRowLines(i){if("none"!==this.node.attributes.get("rowlines")){var s=this.getRowAttributes("rowlines");if(s){var r=this.node.attributes.get("equalrows"),{H:n,D:a}=this.getTableData(),o=this.getEqualRowHeight(),l=this.getRowHalfSpacing(),c=this.rLines;let e=this.getBBox().h-this.fLine;for(let t=0;t<s.length;t++){var[h,d]=this.getRowHD(r,o,n[t],a[t]);e-=l[t]+h+d+l[t+1],"none"!==s[t]&&this.adaptor.append(i,this.makeHLine(e,s[t],c[t])),e-=c[t]}}}}handleFrame(t){var e,i,s,r;this.frame&&this.fLine&&({h:e,d:i,w:s}=this.getBBox(),r=this.node.attributes.get("frame"),this.adaptor.append(t,this.makeFrame(s,e,i,r)))}handlePWidth(t){if(!this.pWidth)return 0;const{w:e,L:i,R:s}=this.getBBox(),r=i+this.pWidth+s,n=this.getAlignShift()[0],a=Math.max(this.isTop?r:0,this.container.getWrapWidth(this.containerI))-i-s,o=e-(this.pWidth>a?a:this.pWidth),l="left"===n?0:"right"===n?o:o/2;if(l){const e=this.svg("g",{},this.adaptor.childNodes(t));this.place(l,0,e),this.adaptor.append(t,e)}return l}lineClass(t){return"mjx-"+t}makeFrame(t,e,i,s){var r=this.fLine;return this.svg("rect",this.setLineThickness(r,s,{"data-frame":!0,class:this.lineClass(s),width:this.fixed(t-r),height:this.fixed(e+i-r),x:this.fixed(r/2),y:this.fixed(r/2-i)}))}makeVLine(t,e,i){var{h:s,d:r}=this.getBBox(),n="dotted"===e?i/2:0,t=this.fixed(t+i/2);return this.svg("line",this.setLineThickness(i,e,{"data-line":"v",class:this.lineClass(e),x1:t,y1:this.fixed(n-r),x2:t,y2:this.fixed(s-n)}))}makeHLine(t,e,i){var s=this.getBBox().w,r="dotted"===e?i/2:0,t=this.fixed(t-i/2);return this.svg("line",this.setLineThickness(i,e,{"data-line":"h",class:this.lineClass(e),x1:this.fixed(r),y1:t,x2:this.fixed(s-r),y2:t}))}setLineThickness(t,e,i){return.07!==t&&(i["stroke-thickness"]=this.fixed(t),"solid"!==e&&(i["stroke-dasharray"]=("dotted"===e?"0,":"")+this.fixed(2*t))),i}handleLabels(t,e,i){var s,r;this.hasLabels&&(s=this.labels,r=this.node.attributes.get("side"),this.spaceLabels(),this.isTop?this.topTable(t,s,r):this.subTable(t,s,r,i))}spaceLabels(){const e=this.adaptor,t=this.getBBox().h,i=this.getTableData().L,s=this.getRowHalfSpacing();let r=t-this.fLine,n=e.firstChild(this.labels);for(let t=0;t<this.numRows;t++){const o=this.childNodes[t];var a;o.node.isKind("mlabeledtr")?(a=o.childNodes[0],r-=s[t]+o.H,o.placeCell(a,{x:0,y:r,w:i,lSpace:0,rSpace:0,lLine:0,rLine:0}),r-=o.D+s[t+1]+this.rLines[t],n=e.next(n)):r-=s[t]+o.H+o.D+s[t+1]+this.rLines[t]}}topTable(t,e,i){const s=this.adaptor,{h:r,d:n,w:a,L:o,R:l}=this.getBBox(),c=o+(this.pWidth||a)+l,h=this.getTableData().L,[,d,u]=this.getPadAlignShift(i),p=u+("right"===d?-c:"center"===d?-c/2:0)+o,m="matrix(1 0 0 -1 0 0)",g=`scale(${this.jax.fixed(1e3*this.font.params.x_height/this.metrics.ex,2)})`,f=`translate(0 ${this.fixed(r)}) ${m} `+g,b=this.svg("svg",{"data-table":!0,preserveAspectRatio:"left"===d?"xMinYMid":"right"===d?"xMaxYMid":"xMidYMid",viewBox:`${this.fixed(-p)} ${this.fixed(-r)} 1 `+this.fixed(r+n)},[this.svg("g",{transform:m},s.childNodes(t))]);e=this.svg("svg",{"data-labels":!0,preserveAspectRatio:"left"===i?"xMinYMid":"xMaxYMid",viewBox:["left"===i?0:this.fixed(h),this.fixed(-r),1,this.fixed(r+n)].join(" ")},[e]),s.append(t,this.svg("g",{transform:f},[b,e])),this.place(-o,0,t)}subTable(t,e,i,s){const r=this.adaptor,{w:n,L:a,R:o}=this.getBBox(),l=a+(this.pWidth||n)+o,c=this.getTableData().L,h=this.getAlignShift()[0],d=Math.max(l,this.container.getWrapWidth(this.containerI));this.place("left"===i?("left"===h?0:"right"===h?l-d+s:(l-d)/2+s)-a:("left"===h?d:"right"===h?l+s:(d+l)/2+s)-a-c,0,e),r.append(t,e)}constructor(t,e,i=null){super(t,e,i);const s={"data-labels":!0};this.isTop&&(s.transform="matrix(1 0 0 -1 0 0)"),this.labels=this.svg("g",s)}toSVG(t){var e=this.standardSvgNodes(t)[0],i=(this.placeRows(e),this.handleColumnLines(e),this.handleRowLines(e),this.handleFrame(e),this.handlePWidth(e));this.handleLabels(e,t[0],i)}}).kind=qn.prototype.kind,bt.styles={'g[data-mml-node="mtable"] > line[data-line], svg[data-table] > g > line[data-line]':{"stroke-width":"70px",fill:"none"},'g[data-mml-node="mtable"] > rect[data-frame], svg[data-table] > g > rect[data-frame]':{"stroke-width":"70px",fill:"none"},'g[data-mml-node="mtable"] > .mjx-dashed, svg[data-table] > g > .mjx-dashed':{"stroke-dasharray":"140"},'g[data-mml-node="mtable"] > .mjx-dotted, svg[data-table] > g > .mjx-dotted':{"stroke-linecap":"round","stroke-dasharray":"0,140"},'g[data-mml-node="mtable"] > g > svg':{overflow:"visible"}},bt),Ed=((yt=class extends Bh(x){placeCell(t,e){var{x:e,y:i,lSpace:s,w:r,rSpace:n,lLine:a,rLine:o}=e,l=1/this.getBBox().rscale,[c,h]=[this.H*l,this.D*l],[l,d]=[this.tSpace*l,this.bSpace*l],[e,i]=t.placeCell(e+s,i,r,c,h),r=s+r+n;return t.placeColor(-(e+s+a/2),-(h+d+i),r+(a+o)/2,c+h+l+d),r+o}placeCells(e){const t=this.parent,i=t.getColumnHalfSpacing(),s=[t.fLine,...t.cLines,t.fLine],r=t.getComputedWidths(),n=1/this.getBBox().rscale;let a=s[0];for(let t=0;t<this.numCells;t++){const o=this.getChild(t);o.toSVG(e),a+=this.placeCell(o,{x:a,y:0,lSpace:i[t]*n,rSpace:i[t+1]*n,w:r[t]*n,lLine:s[t]*n,rLine:s[t+1]*n})}}placeColor(){const t=1/this.getBBox().rscale,e=this.adaptor,i=this.firstChild();var s,r,n,a,o,l;i&&"rect"===e.kind(i)&&e.getAttribute(i,"data-bgcolor")&&([s,r]=[this.tLine/2*t,this.bLine/2*t],[n,a]=[this.tSpace*t,this.bSpace*t],[o,l]=[this.H*t,this.D*t],e.setAttribute(i,"y",this.fixed(-(l+a+r))),e.setAttribute(i,"width",this.fixed(this.parent.getWidth()*t)),e.setAttribute(i,"height",this.fixed(s+n+o+l+a+r)))}toSVG(t){t=this.standardSvgNodes(t);this.placeCells(t),this.placeColor()}}).kind=jn.prototype.kind,yt),Nd=((pt=class extends Fh(Ed){toSVG(t){super.toSVG(t);const e=this.childNodes[0];e&&e.toSVG([this.parent.labels])}}).kind=Hn.prototype.kind,pt),yd=((kt=class extends Dh(x){placeCell(t,e,i,s,r){var n=this.getBBox(),a=Math.max(n.h,.75),o=Math.max(n.d,.25),l=this.node.attributes.get("columnalign"),c=this.node.attributes.get("rowalign"),i=this.getAlignX(i,n,l),n=this.getAlignY(s,r,a,o,c);return this.place(t+i,e+n),[i,n]}placeColor(t,e,i,s){const r=this.adaptor,n=this.firstChild();n&&"rect"===r.kind(n)&&r.getAttribute(n,"data-bgcolor")&&(r.setAttribute(n,"x",this.fixed(t)),r.setAttribute(n,"y",this.fixed(e)),r.setAttribute(n,"width",this.fixed(i)),r.setAttribute(n,"height",this.fixed(s)))}}).kind=Gn.prototype.kind,kt),xd=((rt=class extends dh(x){setEventHandler(e,i,t=null){(t?[t]:this.dom).forEach(t=>t.addEventListener(e,i))}Px(t){return this.px(t)}toSVG(t){if(!this.toEmbellishedSVG(t)){const e=this.standardSvgNodes(t),n=this.selected;let r=0;this.dom.forEach(t=>{var{h:e,d:i,w:s}=n.getLineBBox(r++);this.adaptor.append(t,this.svg("rect",{width:this.fixed(s),height:this.fixed(e+i),x:1===r?this.fixed(-this.dx):0,y:this.fixed(-i),fill:"none","pointer-events":"all"}))}),n.toSVG(e);t=n.getOuterBBox();n.dom&&n.place(t.L*t.rscale,0),this.action(this,this.data)}}}).kind=Sn.prototype.kind,rt.styles={'[jax="SVG"] mjx-tool':{display:"inline-block",position:"relative",width:0,height:0},'[jax="SVG"] mjx-tool > mjx-tip':{position:"absolute",top:0,left:0},"mjx-tool > mjx-tip":{display:"inline-block","line-height":0,padding:".2em",border:"1px solid #888","background-color":"#F8F8F8",color:"black","box-shadow":"2px 2px 5px #AAAAAA"},'g[data-mml-node="maction"][data-toggle]':{cursor:"pointer"},"mjx-status":{display:"block",position:"fixed",left:"1em",bottom:"1em","min-width":"25%",padding:".2em .4em",border:"1px solid #888","font-size":"90%","background-color":"#F8F8F8",color:"black"}},rt.actions=new Map([["toggle",[(e,t)=>{e.dom.forEach(t=>{e.adaptor.setAttribute(t,"data-toggle",e.node.attributes.get("selection"))});const i=e.factory.jax.math,s=e.factory.jax.document,r=e.node;e.setEventHandler("click",t=>{i.end.node||(i.start.node=i.end.node=i.typesetRoot,i.start.n=i.end.n=0),r.nextToggleSelection(),i.rerender(s,r.attributes.get("data-maction-id")?u.ENRICHED:u.RERENDER),t.stopPropagation()})},{}]],["tooltip",[(s,i)=>{const r=s.childNodes[1];if(r)for(const n of s.dom){var t=s.firstChild(n);if(r.node.isKind("mtext")){const i=r.node.getText();s.adaptor.insert(s.svg("title",{},[s.text(i)]),t)}else{const r=s.adaptor,a=s.jax.container,e=s.node.factory.create("math",{},[s.childNodes[1].node]),o=s.html("mjx-tool",{},[s.html("mjx-tip")]),l=r.append(t,s.svg("foreignObject",{style:{display:"none"}},[o]));s.jax.processMath(s.jax.factory.wrap(e),r.firstChild(o)),s.childNodes[1].node.parent=s.node,s.setEventHandler("mouseover",t=>{i.stopTimers(n,i),i.hoverTimer.set(n,setTimeout(()=>{r.setStyle(o,"left","0"),r.setStyle(o,"top","0"),r.append(a,o);var t=r.nodeBBox(o),e=r.nodeBBox(n),i=(e.right-t.left)/s.metrics.em+s.tipDx,e=(e.bottom-t.bottom)/s.metrics.em+s.tipDy;r.setStyle(o,"left",s.Px(i)),r.setStyle(o,"top",s.Px(e))},i.postDelay)),t.stopPropagation()},n),s.setEventHandler("mouseout",t=>{i.stopTimers(n,i);var e=setTimeout(()=>r.append(l,o),i.clearDelay);i.clearTimer.set(n,e),t.stopPropagation()},n)}}},hh]],["statusline",[(e,i)=>{const t=e.childNodes[1];if(t&&t.node.isKind("mtext")){const s=e.adaptor,r=t.node.getText();e.dom.forEach(t=>s.setAttribute(t,"data-statusline",r)),e.setEventHandler("mouseover",t=>{if(null===i.status){const t=s.body(s.document);i.status=s.append(t,e.html("mjx-status",{},[e.text(r)]))}t.stopPropagation()}),e.setEventHandler("mouseout",t=>{i.status&&(s.remove(i.status),i.status=null),t.stopPropagation()})}},{status:null}]]]),rt),Ad={top:(t,e,i,s)=>[0,t-s,i,t-s],right:(t,e,i,s)=>[i-s,-e,i-s,t],bottom:(t,e,i,s)=>[0,s-e,i,s-e],left:(t,e,i,s)=>[s,-e,s,t],vertical:(t,e,i,s)=>[i/2,t,i/2,-e],horizontal:(t,e,i,s)=>[0,(t-e)/2,i,(t-e)/2],up:(t,e,i,s)=>[s,s-e,i-s,t-s],down:(t,e,i,s)=>[s,t-s,i-s,s-e]},vd=function(t,e,i=""){var{h:s,d:r,w:n}=t.getBBox(),a=t.thickness/2;return _d(Ad[e](s,r,n,a),t,i)},_d=function(t,e,i){return i&&(e=e.getOffset(i))&&("X"===i?(t[0]-=e,t[2]-=e):(t[1]-=e,t[3]-=e)),t},Td=function(s,r=""){return(t,e)=>{var i=t.line(vd(t,s,r));t.adaptor.append(t.dom[0],i)}},wd=function(i){return Qc((t,e)=>{t.adaptor.append(t.dom[0],t.line(vd(t,i)))})(i)},Cd=function(t,i,s){return Zc((t,e)=>{t.adaptor.append(t.dom[0],t.line(vd(t,i))),t.adaptor.append(t.dom[0],t.line(vd(t,s)))})(t,i,s)},Id=function(i){return th(t=>(t,e)=>{t.adaptor.append(t.dom[0],t.line(vd(t,i)))})(i)},Ld=function(t){return eh((t,e)=>{t.adaptor.append(t.dom[0],e)})(t)},Sd=function(t){return ih((t,e)=>{t.adaptor.append(t.dom[0],e)})(t)},kd=((Tt=class extends ph(x){line(t){var[t,e,i,s]=t;return this.svg("line",{x1:this.fixed(t),y1:this.fixed(e),x2:this.fixed(i),y2:this.fixed(s),"stroke-width":this.fixed(this.thickness)})}box(t,e,i,s=0){const r=this.thickness,n={x:this.fixed(r/2),y:this.fixed(r/2-i),width:this.fixed(t-r),height:this.fixed(e+i-r),fill:"none","stroke-width":this.fixed(r)};return s&&(n.rx=this.fixed(s)),this.svg("rect",n)}ellipse(t,e,i){var s=this.thickness;return this.svg("ellipse",{rx:this.fixed((t-s)/2),ry:this.fixed((e+i-s)/2),cx:this.fixed(t/2),cy:this.fixed((e-i)/2),fill:"none","stroke-width":this.fixed(s)})}path(t,...e){return this.svg("path",{d:e.map(t=>"string"==typeof t?t:this.fixed(t)).join(" "),style:{"stroke-width":this.fixed(this.thickness)},"stroke-linecap":"round","stroke-linejoin":t,fill:"none"})}fill(...t){return this.svg("path",{d:t.map(t=>"string"==typeof t?t:this.fixed(t)).join(" ")})}arrow(t,e,i,s="",r=0){const{w:n,h:a,d:o}=this.getBBox(),l=(t-n)/2,c=(a-o)/2,h=this.thickness,d=h/2,[u,p,m]=[h*this.arrowhead.x,h*this.arrowhead.y,h*this.arrowhead.dx],g=i?this.fill("M",n+l,c,"l",-(u+m),p,"l",m,d-p,"L",u-l,c+d,"l",m,p-d,"l",-(u+m),-p,"l",u+m,-p,"l",-m,p-d,"L",n+l-u,c-d,"l",-m,d-p,"Z"):this.fill("M",n+l,c,"l",-(u+m),p,"l",m,d-p,"L",-l,c+d,"l",0,-h,"L",n+l-u,c-d,"l",-m,d-p,"Z"),f=[];if(r&&f.push("X"===s?`translate(${this.fixed(-r)} 0)`:`translate(0 ${this.fixed(r)})`),e){const t=this.jax.fixed(180*-e/Math.PI);f.push(`rotate(${t} ${this.fixed(n/2)} ${this.fixed(c)})`)}return f.length&&this.adaptor.setAttribute(g,"transform",f.join(" ")),g}toSVG(t){const e=this.standardSvgNodes(t),i=this.getBBoxExtenders()[3],s={};0<i&&(s.transform="translate("+this.fixed(i)+", 0)");t=this.adaptor.append(e[0],this.svg("g",s));this.renderChild?this.renderChild(this,t):(this.childNodes[0].toSVG([t]),this.childNodes[0].place(0,0));for(const t of Object.keys(this.notations)){const i=this.notations[t];i.renderChild||i.renderer(this,e[0])}}}).kind=Ln.prototype.kind,Tt.notations=new Map([wd("top"),wd("right"),wd("bottom"),wd("left"),Cd("actuarial","top","right"),Cd("madruwb","bottom","right"),Id("up"),Id("down"),["horizontalstrike",{renderer:Td("horizontal","Y"),bbox:t=>[0,t.padding,0,t.padding]}],["verticalstrike",{renderer:Td("vertical","X"),bbox:t=>[t.padding,0,t.padding,0]}],["box",{renderer:(t,e)=>{var{w:i,h:s,d:r}=t.getBBox();t.adaptor.append(t.dom[0],t.box(i,s,r))},bbox:Gc,border:Wc,remove:"left right top bottom"}],["roundedbox",{renderer:(t,e)=>{var{w:i,h:s,d:r}=t.getBBox(),n=t.thickness+t.padding;t.adaptor.append(t.dom[0],t.box(i,s,r,n))},bbox:Gc}],["circle",{renderer:(t,e)=>{var{w:i,h:s,d:r}=t.getBBox();t.adaptor.append(t.dom[0],t.ellipse(i,s,r))},bbox:Gc}],["phasorangle",{renderer:(t,e)=>{var{w:i,h:s,d:r}=t.getBBox(),n=t.getArgMod(1.75*t.padding,s+r)[0],a=t.thickness/2,s=s+r,n=Math.cos(n);t.adaptor.append(t.dom[0],t.path("mitre","M",i,a-r,"L",a+n*a,a-r,"L",n*s+a,s-r-a))},bbox:t=>{var e=t.padding/2,t=t.thickness;return[2*e,e,e+t,3*e+t]},border:t=>[0,0,t.thickness,0],remove:"bottom"}],Sd("up"),Sd("down"),Sd("left"),Sd("right"),Sd("updown"),Sd("leftright"),Ld("updiagonal"),Ld("northeast"),Ld("southeast"),Ld("northwest"),Ld("southwest"),Ld("northeastsouthwest"),Ld("northwestsoutheast"),["longdiv",{renderer:(t,e)=>{var{w:i,h:s,d:r}=t.getBBox(),n=t.thickness/2,a=t.padding;t.adaptor.append(t.dom[0],t.path("round","M",n,n-r,"a",a-n/2,(s+r)/2-4*n,0,"0,1",0,s+r-2*n,"L",i-n,s-n))},bbox:t=>{var e=t.padding,t=t.thickness;return[e+t,e,e,2*e+t/2]}}],["radical",{renderer:(t,e)=>{t.msqrt.toSVG([e]);var i=t.sqrtTRBL()[3];t.place(-i,0,e)},init:t=>{t.msqrt=t.createMsqrt(t.childNodes[0])},bbox:t=>t.sqrtTRBL(),renderChild:!0}]]),Tt),Rd=((nt=class extends Gh(x){toSVG(t){this.toEmbellishedSVG(t)||(t=this.standardSvgNodes(t),this.childNodes.length&&this.childNodes[0].toSVG(t))}}).kind=zn.prototype.kind,nt),Od=((lt=class extends x{toSVG(t){super.toSVG(t)}computeBBox(){return this.bbox}}).kind=Jn.prototype.kind,lt),Md=((Et=class extends x{}).kind=Kn.prototype.kind,Et.styles={"foreignObject[data-mjx-xml]":{"font-family":"initial","line-height":"normal",overflow:"visible"}},Et),Dd=(Nt=ch(x),(gt=class extends Nt{toSVG(t){var e=this.jax.math.metrics,e=e.em*e.scale*this.rscale,i=this.fixed(1/e,3),{w:s,h:r,d:n}=this.getBBox();this.dom=[this.adaptor.append(t[0],this.svg("foreignObject",{"data-mjx-xml":!0,y:this.jax.fixed(-r*e)+"px",width:this.jax.fixed(s*e)+"px",height:this.jax.fixed((r+n)*e)+"px",transform:`scale(${i}) matrix(1 0 0 -1 0 0)`},[this.getHTML()]))]}addHDW(t,e){t=this.html("mjx-html-holder",{style:e},[t]);var{h:i,d:s,w:r}=this.getBBox(),n=this.metrics.scale;return e.height=this.em((i+s)*n),e.width=this.em(r*n),e["vertical-align"]=this.em(-s*n),delete e["font-size"],delete e["font-family"],t}}).kind=Qr.prototype.kind,gt.styles=Object.assign({"foreignObject[data-mjx-html]":{overflow:"visible"}},Nt.styles),gt),Pd=((ut=class extends fh(x){toSVG(t){var e,i,s,t=this.standardSvgNodes(t);this.charWrapper?this.charWrapper.toSVG(t):({src:e,alt:s}=this.node.attributes.getList("src","alt"),i=this.fixed(this.height),i={width:this.fixed(this.width),height:i,transform:"translate(0 "+this.fixed(this.height+(this.valign||0))+") matrix(1 0 0 -1 0 0)",preserveAspectRatio:"none","aria-label":s,href:e},s=this.svg("image",i),this.adaptor.append(t[0],s))}}).kind=Xn.prototype.kind,ut),Bd=((dt=class extends oh(x){toSVG(t){super.toSVG(t),this.adaptor.setAttribute(this.dom[0],"data-mjx-texclass",Hr[this.node.texClass])}}).kind=Yn.prototype.kind,dt),Fd=((ht=class extends lh(x){static addStyles(t,e){t.addStyles({'mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c]':{"stroke-width":e.options.blacker}})}toSVG(e){const i=this.adaptor,s=this.parent.variant,r=this.node.getText();if(0!==r.length)if("-explicitFont"===s)this.dom=[i.append(e[0],this.jax.unknownText(r,s))];else{var n=this.remappedText(r,s);1<this.parent.childNodes.length?e=this.dom=[i.append(e[0],this.svg("g",{"data-mml-node":"text"}))]:this.dom=e;let t=0;for(const i of n)t+=this.placeChar(i,t,0,e[0],s,!0);this.addUtext(t,0,e[0],s)}}}).kind=$r.prototype.kind,ht),Ud=((mt=class extends Dd{}).kind=Qn.prototype.kind,mt),qd={[Wh.kind]:Wh,[Xh.kind]:Xh,[zh.kind]:zh,[Kh.kind]:Kh,[Yh.kind]:Yh,[$h.kind]:$h,[Qh.kind]:Qh,[Zh.kind]:Zh,[td.kind]:td,[ed.kind]:ed,[id.kind]:id,[sd.kind]:sd,[rd.kind]:rd,[nd.kind]:nd,[ad.kind]:ad,[od.kind]:od,[cd.kind]:cd,[hd.kind]:hd,[dd.kind]:dd,[ud.kind]:ud,[pd.kind]:pd,[md.kind]:md,[fd.kind]:fd,[bd.kind]:bd,[Ed.kind]:Ed,[Nd.kind]:Nd,[yd.kind]:yd,[xd.kind]:xd,[kd.kind]:kd,[Rd.kind]:Rd,[Od.kind]:Od,[Md.kind]:Md,[Dd.kind]:Dd,[Pd.kind]:Pd,[Bd.kind]:Bd,[Fd.kind]:Fd,[Ud.kind]:Ud,[x.kind]:x};class jd extends ah{}jd.defaultNodes=qd;class Hd{constructor(t){this.cache=new Map,this.defs=null,this.localID="",this.nextID=0,this.jax=t}cachePath(t,e,i){t="MJX-"+this.localID+(this.jax.font.getVariant(t).cacheID||"")+"-"+e;return this.cache.has(t)||(this.cache.set(t,i),this.jax.adaptor.append(this.defs,this.jax.svg("path",{id:t,d:i}))),t}clearLocalID(){this.localID=""}useLocalID(t=null){this.localID=(null==t?++this.nextID:t)+(""===t?"":"-")}clearCache(){this.cache=new Map,this.defs=this.jax.svg("defs")}getCache(){return this.defs}}const Gd="mathjax-newcm",Vd=null,Wd="http://www.w3.org/2000/svg",Xd="http://www.w3.org/1999/xlink";class zd extends Mc{get forceInlineBreaks(){return!0}constructor(t={}){super(t,jd,Vd),this.minwidth=0,this.shift=0,this.svgStyles=null,this.fontCache=new Hd(this),this.options.matchFontHeight=!0}initialize(){"global"===this.options.fontCache&&this.fontCache.clearCache()}clearFontCache(){this.fontCache.clearCache()}reset(){this.clearFontCache()}escaped(t,e){return this.setDocument(e),this.html("span",{},[this.text(t.math)])}styleSheet(t){if(this.svgStyles)return this.svgStyles;t=this.svgStyles=super.styleSheet(t);return this.adaptor.setAttribute(t,"id",zd.STYLESHEETID),t}insertStyles(t){this.svgStyles&&this.adaptor.insertRules(this.svgStyles,new Wa(t).getStyleRules())}pageElements(t){return"global"!==this.options.fontCache||this.findCache(t)?null:this.svg("svg",{xmlns:Wd,id:zd.FONTCACHEID,style:{display:"none"}},[this.fontCache.getCache()])}findCache(t){const e=this.adaptor,i=e.tags(e.body(t.document),"svg");for(let t=i.length-1;0<=t;t--)if(this.adaptor.getAttribute(i[t],"id")===zd.FONTCACHEID)return!0;return!1}getInitialScale(){return 1}processMath(t,e){var i=this.container,[e,s]=(this.container=e,this.createRoot(t));this.typesetSvg(t,e,s),t.node.getProperty("process-breaks")&&this.handleInlineBreaks(t,e,s),this.container=i}createRoot(t){const{w:e,h:i,d:s,pwidth:r}=t.getOuterBBox(),[n,a]=this.createSVG(i,s,e);if(r){const e=this.adaptor,s=(e.setStyle(n,"min-width",e.getStyle(n,"width")),e.setAttribute(n,"width",r),e.removeAttribute(n,"viewBox"),this.fixed(t.metrics.ex/(1e3*this.font.params.x_height),6));e.setAttribute(a,"transform",`scale(${s},-${s}) translate(0, ${this.fixed(1e3*-i,1)})`)}return[n,a]}createSVG(t,e,i){const s=this.math.metrics.em/1e3,r=Math.max(i,s),n=Math.max(t+e,s),a=this.svg("g",{stroke:"currentColor",fill:"currentColor","stroke-width":0,transform:"scale(1,-1)"}),o=this.adaptor,l=o.append(this.container,this.svg("svg",{xmlns:Wd,width:this.ex(r),height:this.ex(n),role:"img",focusable:!1,style:{"vertical-align":this.ex(-e)},viewBox:[0,this.fixed(1e3*-t,1),this.fixed(1e3*r,1),this.fixed(1e3*n,1)].join(" ")},[a]));return.001===r&&(o.setAttribute(l,"preserveAspectRatio","xMidYMid slice"),i<0&&o.setStyle(this.container,"margin-right",this.ex(i))),"none"!==this.options.fontCache&&this.options.useXlink&&o.setAttribute(l,"xmlns:xlink",Xd),[l,a]}typesetSvg(t,e,i){const s=this.adaptor;if(this.minwidth=this.shift=0,"local"===this.options.fontCache&&(this.fontCache.clearCache(),this.fontCache.useLocalID(this.options.localID),s.insert(this.fontCache.getCache(),i)),t.toSVG([i]),this.fontCache.clearLocalID(),this.minwidth)s.setStyle(e,"minWidth",this.ex(this.minwidth)),s.setStyle(this.container,"minWidth",this.ex(this.minwidth));else if(this.shift){const t=s.getAttribute(this.container,"justify")||"center";this.setIndent(e,t,this.shift)}}setIndent(t,e,i){"center"!==e&&"left"!==e||this.adaptor.setStyle(t,"margin-left",this.ex(i)),"center"!==e&&"right"!==e||this.adaptor.setStyle(t,"margin-right",this.ex(-i))}handleInlineBreaks(e,i,s){const r=e.childNodes[0].breakCount;if(r){const a=this.adaptor,o=a.firstChild(s),l=a.childNodes(a.firstChild(o)),c=e.childNodes[0].lineBBox;a.remove(s);for(let t=0;t<=r;t++){const r=c[t]||e.childNodes[0].getLineBBox(t),{h,d,w:u}=r,[p,m]=e.childNodes[0].getBreakNode(r),g=p.getBBox()["scale"],[f,b]=this.createSVG(h*g,d*g,u*g),E=a.append(b,a.clone(o,!1));for(const e of a.childNodes(l[t]))a.append(E,e);a.insert(f,i);var n=!(!m||!m.node.getProperty("forcebreak"));if(n&&"after"===m.node.attributes.get("linebreakstyle")){const e=p.parent.node.childIndex(p.node)+1,i=p.parent.childNodes[e],s=i?i.getLineBBox(0).originalL*g:0;s&&this.addInlineBreak(f,s,n)}else if(n||t){const e=p&&t?p.getLineBBox(0).originalL*g:0;!e&&n||this.addInlineBreak(f,e,n||!!p.node.getProperty("forcebreak"))}}a.childNodes(i).length&&a.append(a.firstChild(a.parent(i)),a.firstChild(i)),a.remove(i)}}addInlineBreak(t,e,i){const s=this.adaptor,r=Pa(e);i||s.insert(s.node("mjx-break",{prebreak:!0},[s.text(" ")]),t),s.insert(s.node("mjx-break",i?rh[r]?{size:rh[r]}:{style:"letter-spacing: "+Pa(e-1)}:{newline:!0},[s.text(" ")]),t)}ex(t){return t/=this.font.params.x_height,Math.abs(t)<.001?"0":t.toFixed(3).replace(/\.?0+$/,"")+"ex"}svg(t,e={},i=[]){return this.html(t,e,i,Wd)}unknownText(t,e){const i=this.math.metrics,s=this.font.params.x_height/i.ex*i.em*1e3,r=this.svg("text",{"data-variant":e,transform:"scale(1,-1)","font-size":this.fixed(s,1)+"px"},[this.text(t)]),n=this.adaptor;if("-explicitFont"!==e){const i=cn(t);if(1!==i.length||i[0]<119808||120831<i[0]){const[t,i,s]=this.font.getCssFont(e);n.setAttribute(r,"font-family",t),i&&n.setAttribute(r,"font-style","italic"),s&&n.setAttribute(r,"font-weight","bold")}}return r}measureTextNode(t){const e=this.adaptor,i=(t=e.clone(t),e.removeAttribute(t,"transform"),this.fixed(1e3*this.font.params.x_height,1)),s=this.svg("svg",{position:"absolute",visibility:"hidden",width:"1ex",height:"1ex",top:0,left:0,viewBox:[0,0,i,i].join(" ")},[t]);e.append(e.body(e.document),s);t=e.nodeSize(t,1e3,!0)[0];return e.remove(s),{w:t,h:.75,d:.2}}}zd.NAME="SVG",zd.OPTIONS=Object.assign(Object.assign({},Mc.OPTIONS),{blacker:3,fontCache:"local",localID:null,useXlink:!0}),zd.commonStyles=Object.assign(Object.assign({},Mc.commonStyles),{'mjx-container[jax="SVG"]':{direction:"ltr","white-space":"nowrap"},'mjx-container[jax="SVG"] > svg':{overflow:"visible","min-height":"1px","min-width":"1px"},'mjx-container[jax="SVG"] > svg a':{fill:"blue",stroke:"blue"},"rect[sre-highlighter-added]:has(+ .mjx-selected)":{stroke:"black","stroke-width":"80px"}}),zd.FONTCACHEID="MJX-SVG-global-cache",zd.STYLESHEETID="MJX-SVG-styles",MathJax.loader&&MathJax.loader.checkVersion("output/svg",Bs,"output"),Hs({_:{output:{common_ts:Ye,common:{Direction:Xe,FontData:ze,LineBBox:Ke,LinebreakVisitor:Je,Notation:$e,Wrapper:Qe,WrapperFactory:Ze,Wrappers:{TeXAtom:ti,TextNode:ei,XmlNode:ii,maction:si,math:ri,menclose:ni,mfenced:ai,mfrac:oi,mglyph:li,mi:ci,mmultiscripts:hi,mn:di,mo:ui,mpadded:pi,mroot:mi,mrow:gi,ms:fi,mspace:bi,msqrt:Ei,msubsup:Ni,mtable:yi,mtd:xi,mtext:Ai,mtr:vi,munderover:_i,scriptbase:Ti,semantics:wi}},svg_ts:hs,svg:{DefaultFont:cs,FontCache:ls,FontData:Ri,Notation:Zi,Wrapper:Ci,WrapperFactory:os,Wrappers_ts:as,Wrappers:{HtmlNode:ns,TeXAtom:ss,TextNode:rs,maction:Qi,math:Li,menclose:ts,merror:Bi,mfenced:Vi,mfrac:ji,mglyph:is,mi:ki,mmultiscripts:Ki,mn:Mi,mo:Oi,mpadded:Ui,mphantom:qi,mroot:Gi,mrow:Si,ms:Di,mspace:Fi,msqrt:Hi,msubsup:Xi,mtable:Ji,mtd:$i,mtext:Pi,mtr:Yi,munderover:zi,scriptbase:Wi,semantics:es,zero:Ii}}}}});const Kd=Vs?"https://cdn.jsdelivr.net/npm/@mathjax/%%FONT%%-font":"@mathjax/%%FONT%%-font",Jd={config(i,s,r,n){if(MathJax.loader){js(MathJax.config,i,MathJax.config.output||{});let t=MathJax.config[i],e=t.font||t.fontData||r;if("string"!=typeof e&&(t.fontData=e,t.font=e=e.NAME),"["!==e.charAt(0)){const r=t.fontPath||Kd,n=e.match(/^[a-z]+:/)?(e.match(/[^/:\\]*$/)||[i])[0]:e;js(MathJax.config.loader,"paths",{[n]:n===e?r.replace(/%%FONT%%/g,e):e}),e=`[${n}]`}var a=e.substring(1,e.length-1);if(a===r&&n){const s=MathJax.config.loader[e+"/"+i]?.extraLoads;s&&MathJax.loader.addPackageData("output/"+i,{extraLoads:s}),Hs({_:{output:{fonts:{[a]:{[i+"_ts"]:{[n.NAME+"Font"]:n}}}}}}),js(MathJax,"config",{output:{font:e},[i]:{fontData:n,dynamicPrefix:e+`/${i}/dynamic`}}),"chtml"===i&&js(MathJax.config,i,{fontURL:zs.resolvePath(e+`/${i}/woff2`,!1)})}else MathJax.loader.addPackageData("output/"+i,{extraLoads:[e+"/"+i]})}MathJax.startup&&(MathJax.startup.registerConstructor(i,s),MathJax.startup.useOutput(i))},loadFont:(t,e,i,s)=>MathJax.loader?(s&&MathJax.loader.preLoaded(`[${i}]/`+e),zs.loadPromise("output/"+e).then(t)):t};Jd.config("svg",zd,Gd,Vd),(ft=Tc=Tc||{})[ft.RETURN=13]="RETURN",ft[ft.ESCAPE=27]="ESCAPE",ft[ft.SPACE=32]="SPACE",ft[ft.LEFT=37]="LEFT",ft[ft.UP=38]="UP",ft[ft.RIGHT=39]="RIGHT",ft[ft.DOWN=40]="DOWN";class Yd extends class{constructor(){this.bubble=!1}bubbleKey(){this.bubble=!0}keydown(t){switch(t.keyCode){case Tc.ESCAPE:this.escape(t);break;case Tc.RIGHT:this.right(t);break;case Tc.LEFT:this.left(t);break;case Tc.UP:this.up(t);break;case Tc.DOWN:this.down(t);break;case Tc.RETURN:case Tc.SPACE:this.space(t);break;default:return}this.bubble?this.bubble=!1:this.stop(t)}escape(t){}space(t){}left(t){}right(t){}up(t){}down(t){}stop(t){t&&(t.stopPropagation(),t.preventDefault(),t.cancelBubble=!0)}mousedown(t){return this.stop(t)}mouseup(t){return this.stop(t)}mouseover(t){return this.stop(t)}mouseout(t){return this.stop(t)}click(t){return this.stop(t)}addEvents(t){t.addEventListener("mousedown",this.mousedown.bind(this)),t.addEventListener("mouseup",this.mouseup.bind(this)),t.addEventListener("mouseover",this.mouseover.bind(this)),t.addEventListener("mouseout",this.mouseout.bind(this)),t.addEventListener("click",this.click.bind(this)),t.addEventListener("keydown",this.keydown.bind(this)),t.addEventListener("dragstart",this.stop.bind(this)),t.addEventListener("selectstart",this.stop.bind(this)),t.addEventListener("contextmenu",this.stop.bind(this)),t.addEventListener("dblclick",this.stop.bind(this))}}{addAttributes(t){for(const e in t)this.html.setAttribute(e,t[e])}get html(){return this._html||this.generateHtml(),this._html}set html(t){this._html=t,this.addEvents(t)}generateHtml(){const t=document.createElement("div");t.classList.add(this.className),t.setAttribute("role",this.role),this.html=t}focus(){const t=this.html;t.setAttribute("tabindex","0"),t.focus()}unfocus(){const t=this.html;t.hasAttribute("tabindex")&&t.setAttribute("tabindex","-1");try{t.blur()}catch(t){}t.blur()}}class $d extends Yd{constructor(){super(...arguments),this.posted=!1}isPosted(){return this.posted}post(t,e){this.posted||(void 0!==t&&void 0!==e&&this.html.setAttribute("style","left: "+t+"px; top: "+e+"px;"),this.display(),this.posted=!0)}unpost(){if(this.posted){const t=this.html;t.parentNode&&t.parentNode.removeChild(t),this.posted=!1}}}function A(t){return"CtxtMenu_"+t}const v={ATTACHED:A("Attached"),CONTEXTMENU:A("ContextMenu"),MENU:A("Menu"),MENUARROW:A("MenuArrow"),MENUACTIVE:A("MenuActive"),MENUCHECK:A("MenuCheck"),MENUCLOSE:A("MenuClose"),MENUCOMBOBOX:A("MenuComboBox"),MENUDISABLED:A("MenuDisabled"),MENUFRAME:A("MenuFrame"),MENUITEM:A("MenuItem"),MENULABEL:A("MenuLabel"),MENURADIOCHECK:A("MenuRadioCheck"),MENUINPUTBOX:A("MenuInputBox"),MENURULE:A("MenuRule"),MENUSLIDER:A("MenuSlider"),MOUSEPOST:A("MousePost"),RTL:A("RTL"),INFO:A("Info"),INFOCLOSE:A("InfoClose"),INFOCONTENT:A("InfoContent"),INFOSIGNATURE:A("InfoSignature"),INFOTITLE:A("InfoTitle"),SLIDERVALUE:A("SliderValue"),SLIDERBAR:A("SliderBar"),SELECTION:A("Selection"),SELECTIONBOX:A("SelectionBox"),SELECTIONMENU:A("SelectionMenu"),SELECTIONDIVIDER:A("SelectionDivider"),SELECTIONITEM:A("SelectionItem")},Qd={COUNTER:A("Counter"),KEYDOWNFUNC:A("keydownFunc"),CONTEXTMENUFUNC:A("contextmenuFunc"),OLDTAB:A("Oldtabindex"),TOUCHFUNC:A("TouchFunc")};class Zd extends Yd{constructor(t,e){super(),this._menu=t,this._type=e,this.className=v.MENUITEM,this.role="menuitem",this.hidden=!1}get menu(){return this._menu}set menu(t){this._menu=t}get type(){return this._type}hide(){this.hidden=!0,this.menu.generateMenu()}show(){this.hidden=!1,this.menu.generateMenu()}isHidden(){return this.hidden}}function tu(t){const e=t.menu;(e.baseMenu||e).unpost()}function eu(t){t=t.menu;return(t.baseMenu||t).store.active}function iu(t,e){console.error("ContextMenu Error: "+e)}let su=0;class ru extends Zd{constructor(t,e,i,s){super(t,e),this._content=i,this.disabled=!1,this.callbacks=[],this._id=s||i}get content(){return this._content}set content(t){this._content=t,this.generateHtml(),this.menu&&this.menu.generateHtml()}get id(){return this._id}press(){this.disabled||(this.executeAction(),this.executeCallbacks_())}executeAction(){}registerCallback(t){-1===this.callbacks.indexOf(t)&&this.callbacks.push(t)}unregisterCallback(t){t=this.callbacks.indexOf(t);-1!==t&&this.callbacks.splice(t,1)}mousedown(t){this.press(),this.stop(t)}mouseover(t){this.focus(),this.stop(t)}mouseout(t){this.deactivate(),this.stop(t)}generateHtml(){super.generateHtml();const t=this.html;t.setAttribute("aria-disabled","false"),t.textContent=this.content}activate(){this.disabled||this.html.classList.add(v.MENUACTIVE)}deactivate(){this.html.classList.remove(v.MENUACTIVE)}focus(){this.menu.focused=this,super.focus(),this.activate()}unfocus(){this.deactivate(),super.unfocus()}escape(t){tu(this)}up(t){this.menu.up(t)}down(t){this.menu.down(t)}left(t){this.menu.left(t)}right(t){this.menu.right(t)}space(t){this.press()}disable(){this.disabled=!0;const t=this.html;t.classList.add(v.MENUDISABLED),t.setAttribute("aria-disabled","true")}enable(){this.disabled=!1;const t=this.html;t.classList.remove(v.MENUDISABLED),t.removeAttribute("aria-disabled")}executeCallbacks_(){for(const t of this.callbacks)try{t(this)}catch(t){iu(0,"Callback for menu entry "+this.id+" failed.")}}}class nu extends ru{static fromJson(t,{content:e,menu:i,id:s},r){const n=new this(r,e,s),a=t.get("subMenu")(t,i,n);return n.submenu=a,n}constructor(t,e,i){super(t,"submenu",e,i),this._submenu=null}set submenu(t){this._submenu=t}get submenu(){return this._submenu}mouseover(t){this.focus(),this.stop(t)}mouseout(t){this.stop(t)}unfocus(){if(this.submenu.isPosted()){if(this.menu.focused!==this)return super.unfocus(),void this.menu.unpostSubmenus();this.html.setAttribute("tabindex","-1"),this.html.blur()}else super.unfocus()}focus(){super.focus(),this.submenu.isPosted()||this.disabled||this.submenu.post()}executeAction(){this.submenu.isPosted()?this.submenu.unpost():this.submenu.post()}generateHtml(){super.generateHtml();const t=this.html;this.span=document.createElement("span"),this.span.textContent="â–º",this.span.classList.add(v.MENUARROW),t.appendChild(this.span),t.setAttribute("aria-haspopup","true")}left(t){this.submenu.isPosted()?this.submenu.unpost():super.left(t)}right(t){this.submenu.isPosted()?this.submenu.down(t):this.submenu.post()}toJson(){return{type:""}}}class au extends $d{constructor(){super(...arguments),this.className=v.CONTEXTMENU,this.role="menu",this._items=[],this._baseMenu=null}set baseMenu(t){this._baseMenu=t}get baseMenu(){return this._baseMenu}get items(){return this._items}set items(t){this._items=t}get pool(){return this.variablePool}get focused(){return this._focused}set focused(t){if(this._focused!==t){this._focused||this.unfocus();const e=this._focused;this._focused=t,e&&e.unfocus()}}up(t){const e=this.items.filter(t=>t instanceof ru&&!t.isHidden());if(0!==e.length)if(this.focused){let t=e.indexOf(this.focused);-1!==t&&(t=t?--t:e.length-1,e[t].focus())}else e[e.length-1].focus()}down(t){const e=this.items.filter(t=>t instanceof ru&&!t.isHidden());if(0!==e.length)if(this.focused){let t=e.indexOf(this.focused);-1!==t&&(t=++t===e.length?0:t,e[t].focus())}else e[0].focus()}generateHtml(){super.generateHtml(),this.generateMenu()}generateMenu(){const t=this.html;t.classList.add(v.MENU);for(const e of this.items)if(e.isHidden()){const i=e.html;i.parentNode&&i.parentNode.removeChild(i)}else t.appendChild(e.html)}post(t,e){this.variablePool.update(),super.post(t,e)}unpostSubmenus(){for(const t of this.items.filter(t=>t instanceof nu))t.submenu.unpost(),t!==this.focused&&t.unfocus()}unpost(){super.unpost(),this.unpostSubmenus(),this.focused=null}find(t){for(const i of this.items)if("rule"!==i.type){if(i.id===t)return i;if("submenu"===i.type){var e=i.submenu.find(t);if(e)return e}}return null}}class ou{constructor(t){this.menu=t,this.store=[],this._active=null,this.counter=0,this.attachedClass=v.ATTACHED+"_"+su++,this.taborder=!0,this.attrMap={}}set active(t){do{if(-1!==this.store.indexOf(t)){this._active=t;break}}while(t=t.parentNode)}get active(){return this._active}next(){var t=this.store.length;if(0===t)return this.active=null;let e=this.store.indexOf(this.active);return e=-1!==e&&e<t-1?e+1:0,this.active=this.store[e],this.active}previous(){var t=this.store.length;if(0===t)return this.active=null;t-=1;let e=this.store.indexOf(this.active);return e=-1===e||0===e?t:e-1,this.active=this.store[e],this.active}clear(){this.remove(this.store)}insert(t){var e=t instanceof HTMLElement?[t]:t;for(const t of e)this.insertElement(t);this.sort()}remove(t){var e=t instanceof HTMLElement?[t]:t;for(const t of e)this.removeElement(t);this.sort()}inTaborder(t){this.taborder&&!t&&this.removeTaborder(),!this.taborder&&t&&this.insertTaborder(),this.taborder=t}insertTaborder(){this.taborder&&this.insertTaborder_()}removeTaborder(){this.taborder&&this.removeTaborder_()}insertElement(t){t.classList.contains(this.attachedClass)||(t.classList.add(this.attachedClass),this.taborder&&this.addTabindex(t),this.addEvents(t))}removeElement(t){t.classList.contains(this.attachedClass)&&(t.classList.remove(this.attachedClass),this.taborder&&this.removeTabindex(t),this.removeEvents(t))}sort(){var t=document.getElementsByClassName(this.attachedClass);this.store=[].slice.call(t)}insertTaborder_(){this.store.forEach(t=>t.setAttribute("tabindex","0"))}removeTaborder_(){this.store.forEach(t=>t.setAttribute("tabindex","-1"))}addTabindex(t){t.hasAttribute("tabindex")&&t.setAttribute(Qd.OLDTAB,t.getAttribute("tabindex")),t.setAttribute("tabindex","0")}removeTabindex(t){t.hasAttribute(Qd.OLDTAB)?(t.setAttribute("tabindex",t.getAttribute(Qd.OLDTAB)),t.removeAttribute(Qd.OLDTAB)):t.removeAttribute("tabindex")}addEvents(t){t.hasAttribute(Qd.COUNTER)||(this.addEvent(t,"contextmenu",this.menu.post.bind(this.menu)),this.addEvent(t,"keydown",this.keydown.bind(this)),t.setAttribute(Qd.COUNTER,this.counter.toString()),this.counter++)}addEvent(t,e,i){var s=Qd[e.toUpperCase()+"FUNC"];this.attrMap[s+this.counter]=i,t.addEventListener(e,i)}removeEvents(t){var e;t.hasAttribute(Qd.COUNTER)&&(e=t.getAttribute(Qd.COUNTER),this.removeEvent(t,"contextmenu",e),this.removeEvent(t,"keydown",e),t.removeAttribute(Qd.COUNTER))}removeEvent(t,e,i){var s=Qd[e.toUpperCase()+"FUNC"],s=this.attrMap[s+i];t.removeEventListener(e,s)}keydown(t){t.keyCode===Tc.SPACE&&(this.menu.post(t),t.preventDefault(),t.stopImmediatePropagation())}}class lu{constructor(){this.pool={}}insert(t){this.pool[t.name]=t}lookup(t){return this.pool[t]}remove(t){delete this.pool[t]}update(){for(const t in this.pool)this.pool[t].update()}}class cu extends au{static fromJson(e,{pool:t,items:i,id:s=""}){const r=new this(e),n=(r.id=s,e.get("variable"));t.forEach(t=>n(e,t,r.pool));s=e.get("items")(e,i,r);return r.items=s,r}constructor(t){super(),this.factory=t,this.id="",this.moving=!1,this._store=new ou(this),this.widgets=[],this.variablePool=new lu}generateHtml(){this.isPosted()&&this.unpost(),super.generateHtml(),this._frame=document.createElement("div"),this._frame.classList.add(v.MENUFRAME);var t="left: 0px; top: 0px; z-index: 200; width: 100%; height: 100%; border: 0px; padding: 0px; margin: 0px;";this._frame.setAttribute("style","position: absolute; "+t);const e=document.createElement("div");e.setAttribute("style","position: fixed; "+t),this._frame.appendChild(e),e.addEventListener("mousedown",function(t){this.unpost(),this.unpostWidgets(),this.stop(t)}.bind(this))}display(){document.body.appendChild(this.frame),this.frame.appendChild(this.html),this.focus()}escape(t){this.unpost(),this.unpostWidgets()}unpost(){if(super.unpost(),!(0<this.widgets.length)){this.frame.parentNode.removeChild(this.frame);const t=this.store;this.moving||t.insertTaborder(),t.active.focus()}}left(t){this.move_(this.store.previous())}right(t){this.move_(this.store.next())}get frame(){return this._frame}get store(){return this._store}post(t,e){if(void 0!==e)return this.moving||this.store.removeTaborder(),void super.post(t,e);const i=t;let s,r,n;if(i instanceof Event?(s=i.target,this.stop(i)):s=i,i instanceof MouseEvent&&(r=i.pageX,n=i.pageY,r||n||!i.clientX||(r=i.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=i.clientY+document.body.scrollTop+document.documentElement.scrollTop)),!r&&!n&&s){const t=window.pageXOffset||document.documentElement.scrollLeft,e=window.pageYOffset||document.documentElement.scrollTop,i=s.getBoundingClientRect();r=(i.right+i.left)/2+t,n=(i.bottom+i.top)/2+e}this.store.active=s,this.anchor=this.store.active;e=this.html;r+e.offsetWidth>document.body.offsetWidth-5&&(r=document.body.offsetWidth-e.offsetWidth-5),this.post(r,n)}registerWidget(t){this.widgets.push(t)}unregisterWidget(t){t=this.widgets.indexOf(t);-1<t&&this.widgets.splice(t,1),0===this.widgets.length&&this.unpost()}unpostWidgets(){this.widgets.forEach(t=>t.unpost())}toJson(){return{type:""}}move_(t){this.anchor&&t!==this.anchor&&(this.moving=!0,this.unpost(),this.post(t),this.moving=!1)}}class hu extends au{static fromJson(t,{items:e},i){const s=new this(i),r=t.get("items")(t,e,s);return s.items=r,s}constructor(t){super(),this._anchor=t,this.variablePool=this.anchor.menu.pool,this.setBaseMenu()}get anchor(){return this._anchor}post(){if(this.anchor.menu.isPosted()){let t=this.anchor.html;var s=this.html,r=this.baseMenu.frame,n=t.offsetWidth;let e=n-2,i=0;for(;t&&t!==r;)e+=t.offsetLeft,i+=t.offsetTop,t=t.parentNode;e+s.offsetWidth>document.body.offsetWidth-5&&(e=Math.max(5,e-n-s.offsetWidth+6)),super.post(e,i)}}display(){this.baseMenu.frame.appendChild(this.html)}setBaseMenu(){let t=this;for(;(t=t.anchor.menu)instanceof hu;);this.baseMenu=t}left(t){this.focused=null,this.anchor.focus()}toJson(){return{type:""}}}class du extends $d{constructor(t){super(),this.element=t,this.className=v.MENUCLOSE,this.role="button"}generateHtml(){const t=document.createElement("span"),e=(t.classList.add(this.className),t.setAttribute("role",this.role),t.setAttribute("tabindex","0"),document.createElement("span"));e.textContent="Ã—",t.appendChild(e),this.html=t}display(){}unpost(){super.unpost(),this.element.unpost()}keydown(t){this.bubbleKey(),super.keydown(t)}space(t){this.unpost(),this.stop(t)}mousedown(t){this.unpost(),this.stop(t)}}class uu extends $d{constructor(t,e,i){super(),this.title=t,this.signature=i,this.className=v.INFO,this.role="dialog",this.contentDiv=this.generateContent(),this.close=this.generateClose(),this.content=e||function(){return""}}attachMenu(t){this.menu=t}generateHtml(){super.generateHtml();const t=this.html;t.appendChild(this.generateTitle()),t.appendChild(this.contentDiv),t.appendChild(this.generateSignature()),t.appendChild(this.close.html),t.setAttribute("tabindex","0")}post(){super.post();const t=document.documentElement,e=this.html,i=window.innerHeight||t.clientHeight||t.scrollHeight||0,s=Math.floor(-e.offsetWidth/2),r=Math.floor((i-e.offsetHeight)/3);e.setAttribute("style","margin-left: "+s+"px; top: "+r+"px;"),window.event instanceof MouseEvent&&e.classList.add(v.MOUSEPOST),e.focus()}display(){this.menu.registerWidget(this),this.contentDiv.innerHTML=this.content();const t=this.menu.html;t.parentNode&&t.parentNode.removeChild(t),this.menu.frame.appendChild(this.html)}click(t){}keydown(t){this.bubbleKey(),super.keydown(t)}escape(t){this.unpost()}unpost(){super.unpost(),this.html.classList.remove(v.MOUSEPOST),this.menu.unregisterWidget(this)}generateClose(){const t=new du(this),e=t.html;return e.classList.add(v.INFOCLOSE),e.setAttribute("aria-label","Close Dialog Box"),t}generateTitle(){const t=document.createElement("span");return t.innerHTML=this.title,t.classList.add(v.INFOTITLE),t}generateContent(){const t=document.createElement("div");return t.classList.add(v.INFOCONTENT),t.setAttribute("tabindex","0"),t}generateSignature(){const t=document.createElement("span");return t.innerHTML=this.signature,t.classList.add(v.INFOSIGNATURE),t}toJson(){return{type:""}}}class pu extends ru{generateHtml(){super.generateHtml();const t=this.html;this.span||this.generateSpan(),t.appendChild(this.span),this.update()}register(){this.variable.register(this)}unregister(){this.variable.unregister(this)}update(){this.updateAria(),this.span&&this.updateSpan()}}class mu extends pu{static fromJson(t,{content:e,variable:i,id:s},r){return new this(r,e,i,s)}constructor(t,e,i,s){super(t,"radio",e,s),this.role="menuitemradio",this.variable=t.pool.lookup(i),this.register()}executeAction(){this.variable.setValue(this.id),tu(this)}generateSpan(){this.span=document.createElement("span"),this.span.textContent="âœ“",this.span.classList.add(v.MENURADIOCHECK)}updateAria(){this.html.setAttribute("aria-checked",this.variable.getValue()===this.id?"true":"false")}updateSpan(){this.span.style.display=this.variable.getValue()===this.id?"":"none"}toJson(){return{type:""}}}class gu extends Zd{static fromJson(t,e,i){return new this(i)}constructor(t){super(t,"rule"),this.className=v.MENUITEM,this.role="separator"}generateHtml(){super.generateHtml();const t=this.html;t.classList.add(v.MENURULE),t.setAttribute("aria-orientation","vertical")}addEvents(t){}toJson(){return{type:"rule"}}}class fu extends ru{static fromJson(t,{content:e,action:i,id:s},r){return new this(r,e,i,s)}constructor(t,e,i,s){super(t,"command",e,s),this.command=i}executeAction(){try{this.command(eu(this))}catch(t){iu(0,"Illegal command callback.")}tu(this)}toJson(){return{type:""}}}class bu{static fromJson(t,{name:e,getter:i,setter:s},r){e=new this(e,i,s);r.insert(e)}constructor(t,e,i){this._name=t,this.getter=e,this.setter=i,this.items=[]}get name(){return this._name}getValue(t){try{return this.getter(t)}catch(t){return iu(0,"Command of variable "+this.name+" failed."),null}}setValue(t,e){try{this.setter(t,e)}catch(t){iu(0,"Command of variable "+this.name+" failed.")}this.update()}register(t){-1===this.items.indexOf(t)&&this.items.push(t)}unregister(t){t=this.items.indexOf(t);-1!==t&&this.items.splice(t,1)}update(){this.items.forEach(t=>t.update())}registerCallback(e){this.items.forEach(t=>t.registerCallback(e))}unregisterCallback(e){this.items.forEach(t=>t.unregisterCallback(e))}toJson(){return{type:"variable",name:this.name,getter:this.getter.toString(),setter:this.setter.toString()}}}class Eu extends pu{static fromJson(t,{content:e,variable:i,id:s},r){return new this(r,e,i,s)}constructor(t,e,i,s){super(t,"checkbox",e,s),this.role="menuitemcheckbox",this.variable=t.pool.lookup(i),this.register()}executeAction(){this.variable.setValue(!this.variable.getValue()),tu(this)}generateSpan(){this.span=document.createElement("span"),this.span.textContent="âœ“",this.span.classList.add(v.MENUCHECK)}updateAria(){this.html.setAttribute("aria-checked",this.variable.getValue()?"true":"false")}updateSpan(){this.span.style.display=this.variable.getValue()?"":"none"}toJson(){return{type:""}}}class Nu extends pu{static fromJson(t,{content:e,variable:i,id:s},r){return new this(r,e,i,s)}constructor(t,e,i,s){super(t,"combobox",e,s),this.role="combobox",this.inputEvent=!1,this.variable=t.pool.lookup(i),this.register()}executeAction(){this.variable.setValue(this.input.value,eu(this))}space(t){super.space(t),tu(this)}focus(){super.focus(),this.input.focus()}unfocus(){super.unfocus(),this.updateSpan()}generateHtml(){super.generateHtml(),this.html.classList.add(v.MENUCOMBOBOX)}generateSpan(){this.span=document.createElement("span"),this.span.classList.add(v.MENUINPUTBOX),this.input=document.createElement("input"),this.input.addEventListener("keydown",this.inputKey.bind(this)),this.input.setAttribute("size","10em"),this.input.setAttribute("type","text"),this.input.setAttribute("tabindex","-1"),this.span.appendChild(this.input)}inputKey(t){this.bubbleKey(),this.inputEvent=!0}keydown(t){if(this.inputEvent&&t.keyCode!==Tc.ESCAPE&&t.keyCode!==Tc.RETURN)return this.inputEvent=!1,void t.stopPropagation();super.keydown(t),t.stopPropagation()}updateAria(){}updateSpan(){let e;try{e=this.variable.getValue(eu(this))}catch(t){e=""}this.input.value=e}toJson(){return{type:""}}}class yu extends ru{static fromJson(t,{content:e,id:i},s){return new this(s,e,i)}constructor(t,e,i){super(t,"label",e,i)}generateHtml(){super.generateHtml(),this.html.classList.add(v.MENULABEL)}toJson(){return{type:""}}}class xu extends pu{static fromJson(t,{content:e,variable:i,id:s},r){return new this(r,e,i,s)}constructor(t,e,i,s){super(t,"slider",e,s),this.role="slider",this.labelId="ctx_slideLabel"+su++,this.valueId="ctx_slideValue"+su++,this.inputEvent=!1,this.variable=t.pool.lookup(i),this.register()}executeAction(){this.variable.setValue(this.input.value,eu(this)),this.update()}space(t){super.space(t),tu(this)}focus(){super.focus(),this.input.focus()}unfocus(){super.unfocus(),this.updateSpan()}generateHtml(){super.generateHtml(),this.html.classList.add(v.MENUSLIDER),this.valueSpan=document.createElement("span"),this.valueSpan.setAttribute("id",this.valueId),this.valueSpan.classList.add(v.SLIDERVALUE),this.html.appendChild(this.valueSpan)}generateSpan(){this.span=document.createElement("span"),this.labelSpan=document.createElement("span"),this.labelSpan.setAttribute("id",this.labelId),this.labelSpan.appendChild(this.html.childNodes[0]),this.html.appendChild(this.labelSpan),this.input=document.createElement("input"),this.input.setAttribute("type","range"),this.input.setAttribute("min","0"),this.input.setAttribute("max","100"),this.input.setAttribute("aria-valuemin","0"),this.input.setAttribute("aria-valuemax","100"),this.input.setAttribute("aria-labelledby",this.labelId),this.input.addEventListener("keydown",this.inputKey.bind(this)),this.input.addEventListener("input",this.executeAction.bind(this)),this.input.classList.add(v.SLIDERBAR),this.span.appendChild(this.input)}inputKey(t){this.inputEvent=!0}mousedown(t){t.stopPropagation()}mouseup(t){event.stopPropagation()}keydown(t){var e=t.keyCode;return e===Tc.UP||e===Tc.DOWN?(t.preventDefault(),void super.keydown(t)):(this.inputEvent&&e!==Tc.ESCAPE&&e!==Tc.RETURN?this.inputEvent=!1:super.keydown(t),void t.stopPropagation())}updateAria(){var t=this.variable.getValue();t&&this.input&&(this.input.setAttribute("aria-valuenow",t),this.input.setAttribute("aria-valuetext",t+"%"))}updateSpan(){let e;try{e=this.variable.getValue(eu(this)),this.valueSpan.innerHTML=e+"%"}catch(t){e=""}this.input.value=e}toJson(){return{type:""}}}class Au extends au{static fromJson(e,{title:t,values:i,variable:s},r){const n=new this(r),a=e.get("label")(e,{content:t||"",id:t||"id"},n),o=e.get("rule")(e,{},n),l=i.map(t=>e.get("radio")(e,{content:t,variable:s,id:t},n)),c=[a,o].concat(l);return n.items=c,n}constructor(t){super(),this.anchor=t,this.className=v.SELECTIONMENU,this.variablePool=this.anchor.menu.pool,this.baseMenu=this.anchor.menu}generateHtml(){super.generateHtml(),this.items.forEach(t=>t.html.classList.add(v.SELECTIONITEM))}display(){}right(t){this.anchor.right(t)}left(t){this.anchor.left(t)}}class vu extends uu{static fromJson(e,{title:t,signature:i,selections:s,order:r,grid:n},a){const o=new this(t,i,r,n);o.attachMenu(a);t=s.map(t=>e.get("selectionMenu")(e,t,o));return o.selections=t,o}constructor(t,e,i="none",s="vertical"){super(t,null,e),this.style=i,this.grid=s,this._selections=[],this.prefix="ctxt-selection",this._balanced=!0}attachMenu(t){this.menu=t}get selections(){return this._selections}set selections(t){this._selections=[],t.forEach(t=>this.addSelection(t))}addSelection(t){(t.anchor=this)._selections.push(t)}rowDiv(t){const e=document.createElement("div"),i=(this.contentDiv.appendChild(e),t.map(t=>(e.appendChild(t.html),t.html.id||(t.html.id=this.prefix+su++),t.html.getBoundingClientRect()))),s=i.map(t=>t.width),r=s.reduce((t,e)=>t+e,0),n=i.reduce((t,e)=>Math.max(t,e.height),0);return e.classList.add(v.SELECTIONDIVIDER),e.setAttribute("style","height: "+n+"px;"),[e,r,n,s]}display(){if(super.display(),this.order(),this.selections.length){const r=[];let e=0,i=[];var s=this.getChunkSize(this.selections.length);for(let t=0;t<this.selections.length;t+=s){const n=this.selections.slice(t,t+s),[a,o,l,c]=this.rowDiv(n);r.push(a),e=Math.max(e,o),n.forEach(t=>t.html.style.height=l+"px"),i=this.combineColumn(i,c)}this._balanced&&(this.balanceColumn(r,i),e=i.reduce((t,e)=>t+e,20)),r.forEach(t=>t.style.width=e+"px")}}getChunkSize(t){switch(this.grid){case"square":return Math.floor(Math.sqrt(t));case"horizontal":return Math.floor(t/vu.chunkSize);default:return vu.chunkSize}}balanceColumn(t,s){t.forEach(t=>{var i=Array.from(t.children);for(let t,e=0;t=i[e];e++)t.style.width=s[e]+"px"})}combineColumn(t,e){let i=[],s=0;for(;t[s]||e[s];){if(!t[s]){i=i.concat(e.slice(s));break}if(!e[s]){i=i.concat(t.slice(s));break}i.push(Math.max(t[s],e[s])),s++}return i}left(t){this.move(t,t=>(0===t?this.selections.length:t)-1)}right(t){this.move(t,t=>t===this.selections.length-1?0:t+1)}generateHtml(){super.generateHtml(),this.html.classList.add(v.SELECTION)}generateContent(){const t=super.generateContent();return t.classList.add(v.SELECTIONBOX),t.removeAttribute("tabindex"),t}findSelection(e){const i=e.target;let t=null;if(!(t=i.id?this.selections.find(t=>t.html.id===i.id):t)){const e=i.parentElement.id;t=this.selections.find(t=>t.html.id===e)}return t}move(t,e){const i=this.findSelection(t);i.focused&&i.focused.unfocus();t=e(this.selections.indexOf(i));this.selections[t].focus()}order(){this.selections.sort(vu.orderMethod.get(this.style))}toJson(){return{type:""}}}vu.chunkSize=4,vu.orderMethod=new Map([["alphabetical",(t,e)=>t.items[0].content.localeCompare(e.items[0].content)],["none",(t,e)=>1],["decreasing",(t,e)=>{t=t.items.length,e=e.items.length;return t<e?1:e<t?-1:0}],["increasing",(t,e)=>{t=t.items.length,e=e.items.length;return t<e?-1:e<t?1:0}]]);class _u{constructor(t){this._parser=new Map(t)}get(t){return this._parser.get(t)}add(t,e){this._parser.set(t,e)}}var Tu,wu,Cu,Iu,Lu;class Su{constructor(t=[]){this._initList=[["command",fu.fromJson.bind(fu)],["checkbox",Eu.fromJson.bind(Eu)],["combo",Nu.fromJson.bind(Nu)],["slider",xu.fromJson.bind(xu)],["label",yu.fromJson.bind(yu)],["radio",mu.fromJson.bind(mu)],["rule",gu.fromJson.bind(gu)],["submenu",nu.fromJson.bind(nu)],["contextMenu",cu.fromJson.bind(cu)],["subMenu",hu.fromJson.bind(hu)],["variable",bu.fromJson.bind(bu)],["items",this.items.bind(this)],["selectionMenu",Au.fromJson.bind(Au)],["selectionBox",vu.fromJson.bind(vu)]],this._factory=new _u(this._initList),t.forEach(([t,e])=>this.factory.add(t,e))}get factory(){return this._factory}items(t,e,i){const s=[];for(const t of e){const e=this.parse(t,i);e&&(i.items.push(e),t.disabled&&e.disable(),t.hidden&&s.push(e))}return s.forEach(t=>t.hide()),i.items}parse(t,...e){var i=t["type"],t=function(t,e){var i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]]);return i}(t,["type"]);const s=this.factory.get(i);return s?s(this.factory,t,...e):null}}function _(t){return"."+(v[t]||t)}const ku={},Ru=(ku[_("INFOCLOSE")]="{  top:.2em; right:.2em;}",ku[_("INFOCONTENT")]="{  overflow:auto; text-align:left; font-size:80%;  padding:.4em .6em; border:1px inset; margin:1em 0px;  max-height:20em; max-width:30em; background-color:#EEEEEE;  white-space:normal;}",ku[_("INFO")+_("MOUSEPOST")]="{outline:none;}",ku[_("INFO")]='{  position:fixed; left:50%; width:auto; text-align:center;  border:3px outset; padding:1em 2em; background-color:#DDDDDD;  color:black;  cursor:default; font-family:message-box; font-size:120%;  font-style:normal; text-indent:0; text-transform:none;  line-height:normal; letter-spacing:normal; word-spacing:normal;  word-wrap:normal; white-space:nowrap; float:none; z-index:201;  border-radius: 15px;                     /* Opera 10.5 and IE9 */  -webkit-border-radius:15px;               /* Safari and Chrome */  -moz-border-radius:15px;                  /* Firefox */  -khtml-border-radius:15px;                /* Konqueror */  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 & Chrome */  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */  filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color="gray", Positive="true"); /* IE */}',{}),Ou=(Ru[_("MENU")]="{  position:absolute;  background-color:white;  color:black;  width:auto; padding:5px 0px;  border:1px solid #CCCCCC; margin:0; cursor:default;  font: menu; text-align:left; text-indent:0; text-transform:none;  line-height:normal; letter-spacing:normal; word-spacing:normal;  word-wrap:normal; white-space:nowrap; float:none; z-index:201;  border-radius: 5px;                     /* Opera 10.5 and IE9 */  -webkit-border-radius: 5px;             /* Safari and Chrome */  -moz-border-radius: 5px;                /* Firefox */  -khtml-border-radius: 5px;              /* Konqueror */  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 & Chrome */  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */}",Ru[_("MENUITEM")]="{  padding: 1px 2em;  background:transparent;}",Ru[_("MENUARROW")]="{  position:absolute; right:.5em; padding-top:.25em; color:#666666;  font-family: null; font-size: .75em}",Ru[_("MENUACTIVE")+" "+_("MENUARROW")]="{color:white}",Ru[_("MENUARROW")+_("RTL")]="{left:.5em; right:auto}",Ru[_("MENUCHECK")]="{  position:absolute; left:.7em;  font-family: null}",Ru[_("MENUCHECK")+_("RTL")]="{ right:.7em; left:auto }",Ru[_("MENURADIOCHECK")]="{  position:absolute; left: .7em;}",Ru[_("MENURADIOCHECK")+_("RTL")]="{  right: .7em; left:auto}",Ru[_("MENUINPUTBOX")]="{  padding-left: 1em; right:.5em; color:#666666;  font-family: null;}",Ru[_("MENUINPUTBOX")+_("RTL")]="{  left: .1em;}",Ru[_("MENUCOMBOBOX")]="{  left:.1em; padding-bottom:.5em;}",Ru[_("MENUSLIDER")]="{  left: .1em;}",Ru[_("SLIDERVALUE")]="{  position:absolute; right:.1em; padding-top:.25em; color:#333333;  font-size: .75em}",Ru[_("SLIDERBAR")]="{  outline: none; background: #d3d3d3}",Ru[_("MENULABEL")]="{  padding: 1px 2em 3px 1.33em;  font-style:italic}",Ru[_("MENURULE")]="{  border-top: 1px solid #DDDDDD;  margin: 4px 3px;}",Ru[_("MENUDISABLED")]="{  color:GrayText}",Ru[_("MENUACTIVE")]="{  background-color: #606872;  color: white;}",Ru[_("MENUDISABLED")+":focus"]="{  background-color: #E8E8E8}",Ru[_("MENULABEL")+":focus"]="{  background-color: #E8E8E8}",Ru[_("CONTEXTMENU")+":focus"]="{  outline:none}",Ru[_("CONTEXTMENU")+" "+_("MENUITEM")+":focus"]="{  outline:none}",Ru[_("SELECTIONMENU")]="{  position:relative; float:left;  border-bottom: none; -webkit-box-shadow:none; -webkit-border-radius:0px; }",Ru[_("SELECTIONITEM")]="{  padding-right: 1em;}",Ru[_("SELECTION")]="{  right: 40%; width:50%; }",Ru[_("SELECTIONBOX")]="{  padding: 0em; max-height:20em; max-width: none;  background-color:#FFFFFF;}",Ru[_("SELECTIONDIVIDER")]="{  clear: both; border-top: 2px solid #000000;}",Ru[_("MENU")+" "+_("MENUCLOSE")]="{  top:-10px; left:-10px}",{});Ou[_("MENUCLOSE")]='{  position:absolute;  cursor:pointer;  display:inline-block;  border:2px solid #AAA;  border-radius:18px;  -webkit-border-radius: 18px;             /* Safari and Chrome */  -moz-border-radius: 18px;                /* Firefox */  -khtml-border-radius: 18px;              /* Konqueror */  font-family: "Courier New", Courier;  font-size:24px;  color:#F0F0F0}',Ou[_("MENUCLOSE")+" span"]="{  display:block; background-color:#AAA; border:1.5px solid;  border-radius:18px;  -webkit-border-radius: 18px;             /* Safari and Chrome */  -moz-border-radius: 18px;                /* Firefox */  -khtml-border-radius: 18px;              /* Konqueror */  line-height:0;  padding:8px 0 6px     /* may need to be browser-specific */}",Ou[_("MENUCLOSE")+":hover"]="{  color:white!important;  border:2px solid #CCC!important}",Ou[_("MENUCLOSE")+":hover span"]="{  background-color:#CCC!important}";let Mu=!(Ou[_("MENUCLOSE")+":hover:focus"]="{  outline:none}"),Du=!1,Pu=!1;function Bu(t){Pu||(Fu(Ou,t),Pu=!0)}function Fu(t,e){const i=e||document,s=i.createElement("style");s.type="text/css";let r="";for(const e in t)r+=e,r+=" ",r+=t[e],r+="\n";s.innerHTML=r,i.head.appendChild(s)}class Uu extends cu{constructor(){super(...arguments),this.mathItem=null,this.nofocus=!1,this.errorMsg=""}post(t,e){var i;if(this.mathItem){const s=null==(i=null==(i=this.mathItem)?void 0:i.explorers)?void 0:i.speech;null!=s&&s.active&&(s.restarted=s.semanticFocus()),void 0!==e&&(this.getOriginalMenu(),this.getSemanticsMenu(),this.getSpeechMenu(),this.getBrailleMenu(),this.getSvgMenu(),this.getErrorMessage(),this.dynamicSubmenus()),super.post(t,e)}}unpost(){super.unpost(),this.mathItem&&(this.mathItem.outputData.nofocus=this.nofocus),this.mathItem=null,this.nofocus=!1}findID(...t){let e=this,i=null;for(const s of t){if(!e)return null;for(i of e.items){if(i.id===s){e=i instanceof nu?i.submenu:null;break}e=i=null}}return i}setJax(t){this.jax=t}getOriginalMenu(){const t=this.mathItem.inputJax.name,e=this.findID("Show","Original");e.content="MathML"===t?"Original MathML":t+" Commands",this.findID("Copy","Original").content=e.content}getSemanticsMenu(){const t=this.findID("Settings","MathmlIncludes","semantics");"MathML"===this.mathItem.inputJax.name?t.disable():t.enable()}getSpeechMenu(){var t=this.mathItem.outputData.speech;this.findID("Show","Speech")[t?"enable":"disable"](),this.findID("Copy","Speech")[t?"enable":"disable"]()}getBrailleMenu(){var t=this.mathItem.outputData.braille;this.findID("Show","Braille")[t?"enable":"disable"](),this.findID("Copy","Braille")[t?"enable":"disable"]()}getSvgMenu(){var t=this.jax.SVG;this.findID("Show","SVG")[t?"enable":"disable"](),this.findID("Copy","SVG")[t?"enable":"disable"]()}getErrorMessage(){const t=this.mathItem.root.childNodes[0].childNodes;let e=!0;if(this.errorMsg="",1===t.length&&t[0].isKind("merror")){const i=t[0].attributes;this.errorMsg=i.get("data-mjx-error")||i.get("data-mjx-message")||"",e=!this.errorMsg}this.findID("Show","Error")[e?"disable":"enable"](),this.findID("Copy","Error")[e?"disable":"enable"]()}dynamicSubmenus(){for(const[t,[e,i]]of Uu.DynamicSubmenus){const s=this.find(t);s&&e(this,s,t=>{null==(t=null==(s.submenu=t)?void 0:t.items)||!t.length||i&&!this.settings[i]?s.disable():s.enable()})}}}Uu.DynamicSubmenus=new Map,(vt=Tu=Tu||{}).DOMAIN="domain",vt.STYLE="style",vt.LOCALE="locale",vt.TOPIC="topic",vt.MODALITY="modality";class qu{static createProp(...s){const r=ju.DEFAULT_ORDER,n={};for(let t=0,e=s.length,i=r.length;t<e&&t<i;t++)n[r[t]]=s[t];return new qu(n)}constructor(t,e=Object.keys(t)){this.properties=t,this.order=e}getProperties(){return this.properties}getOrder(){return this.order}getAxes(){return this.order}getProperty(t){return this.properties[t]}updateProperties(t){this.properties=t}allProperties(){const e=[];return this.order.forEach(t=>e.push(this.getProperty(t).slice())),e}toString(){const e=[];return this.order.forEach(t=>e.push(t+": "+this.getProperty(t).toString())),e.join("\n")}}class ju extends qu{static createCstr(...s){const r=ju.DEFAULT_ORDER,n={};for(let t=0,e=s.length,i=r.length;t<e&&t<i;t++)n[r[t]]=s[t];return new ju(n)}static defaultCstr(){return ju.createCstr.apply(null,ju.DEFAULT_ORDER.map(function(t){return ju.DEFAULT_VALUES[t]}))}static validOrder(t){const e=ju.DEFAULT_ORDER.slice();return t.every(t=>{t=e.indexOf(t);return-1!==t&&e.splice(t,1)})}constructor(t,e){const i={};for(const[e,s]of Object.entries(t))i[e]=[s];super(i,e),this.components=t}getComponents(){return this.components}getValue(t){return this.components[t]}getValues(){return this.order.map(t=>this.getValue(t))}allProperties(){const s=super.allProperties();for(let t,e,i=0;t=s[i],e=this.order[i];i++){const s=this.getValue(e);-1===t.indexOf(s)&&t.unshift(s)}return s}toString(){return this.getValues().join(".")}equal(i){const s=i.getAxes();if(this.order.length!==s.length)return!1;for(let t,e=0;t=s[e];e++){const s=this.getValue(t);if(!s||i.getValue(t)!==s)return!1}return!0}}ju.DEFAULT_ORDER=[Tu.LOCALE,Tu.MODALITY,Tu.DOMAIN,Tu.STYLE,Tu.TOPIC],ju.BASE_LOCALE="base",ju.DEFAULT_VALUE="default",ju.DEFAULT_VALUES={[Tu.LOCALE]:"en",[Tu.DOMAIN]:ju.DEFAULT_VALUE,[Tu.STYLE]:ju.DEFAULT_VALUE,[Tu.TOPIC]:ju.DEFAULT_VALUE,[Tu.MODALITY]:"speech"};class Hu{constructor(t){this.order=t}parse(t){const i=t.split("."),s={};if(i.length>this.order.length)throw new Error("Invalid dynamic constraint: "+s);let r=0;for(let t,e=0;t=this.order[e],i.length;e++,r++){const r=i.shift();s[t]=r}return new ju(s,this.order.slice(0,r))}}class Gu{constructor(t,e=new qu(t.getProperties(),t.getOrder())){this.reference=t,this.fallback=e,this.order=this.reference.getOrder()}getReference(){return this.reference}setReference(t,e){this.reference=t,this.fallback=e||new qu(t.getProperties(),t.getOrder()),this.order=this.reference.getOrder()}match(i){const t=i.getAxes();return t.length===this.reference.getAxes().length&&t.every(t=>{var e=i.getValue(t);return e===this.reference.getValue(t)||-1!==this.fallback.getProperty(t).indexOf(e)})}compare(i,s){let r=!1;for(let t,e=0;t=this.order[e];e++){var n=i.getValue(t),a=s.getValue(t);if(!r){const i=this.reference.getValue(t);if(i===n&&i!==a)return-1;if(i===a&&i!==n)return 1;if(i===n&&i===a)continue;i!==n&&i!==a&&(r=!0)}const o=this.fallback.getProperty(t),l=o.indexOf(n),c=o.indexOf(a);if(l<c)return-1;if(c<l)return 1}return 0}toString(){return this.reference.toString()+"\n"+this.fallback.toString()}}(wt=wu=wu||{}).SYNC="sync",wt.ASYNC="async",wt.HTTP="http",(It=Cu=Cu||{}).PITCH="pitch",It.RATE="rate",It.VOLUME="volume",It.PAUSE="pause",It.JOIN="join",It.LAYOUT="layout",Cu.PITCH,Cu.RATE,Cu.VOLUME,Cu.PAUSE,Cu.JOIN,(ct=Iu=Iu||{}).NONE="none",ct.SHALLOW="shallow",ct.DEEP="deep",(Ct=Lu=Lu||{}).NONE="none",Ct.LAYOUT="layout",Ct.COUNTING="counting",Ct.PUNCTUATION="punctuation",Ct.SSML="ssml",Ct.ACSS="acss",Ct.SABLE="sable",Ct.VOICEXML="voicexml";var Vu=__webpack_require__(74);class Wu{static getInstance(){return Wu.instance=Wu.instance||new Wu,Wu.instance}init(t){return t&&this.startDebugFile_(t),this.isActive_=!0,this.fileHandle}output(...t){this.isActive_&&this.output_(t)}generate(t){this.isActive_&&this.output_(t.apply(t,[]))}exit(t=()=>{}){this.fileHandle.then(()=>{this.isActive_&&this.stream_&&this.stream_.end("","",t)})}constructor(){this.isActive_=!1,this.fileHandle=Promise.resolve(),this.stream_=null}startDebugFile_(e){this.fileHandle=Vu.f.fs.promises.open(e,"w"),this.fileHandle=this.fileHandle.then(t=>{this.stream_=t.createWriteStream(e),this.outputFunction=function(...t){this.stream_.write(t.join(" ")),this.stream_.write("\n")}.bind(this),this.stream_.on("error",function(t){console.info("Invalid log file. Debug information sent to console."),this.outputFunction=console.info}.bind(this)),this.stream_.on("finish",function(){console.info("Finalizing debug file.")})})}output_(t){this.stream_?this.fileHandle.then(()=>this.outputFunction.apply(this.outputFunction,["Speech Rule Engine Debugger:"].concat(t))):console.info.apply(console,["Speech Rule Engine Debugger:"].concat(t))}}var Xu,T,zu,w,Ku,Ju,Yu,$u,Qu=__webpack_require__(714);class Zu{constructor(t={}){this.delay=!1,this.domain="clearspeak",this.style=ju.DEFAULT_VALUES[Tu.STYLE],this.locale=ju.DEFAULT_VALUES[Tu.LOCALE],this.subiso="",this.modality=ju.DEFAULT_VALUES[Tu.MODALITY],this.speech=Iu.NONE,this.markup=Lu.NONE,this.mark=!0,this.automark=!1,this.character=!0,this.cleanpause=!0,this.cayleyshort=!0,this.linebreaks=!1,this.rate="100",this.walker="Table",this.structure=!1,this.aria=!1,this.tree=!1,this.strict=!1,this.pprint=!1,this.rules="",this.prune="",this.set(t)}set(t){this.ensureDomain(t);for(var[e,i]of Object.entries(t))(Zu.BINARY_FEATURES.includes(e)||Zu.STRING_FEATURES.includes(e))&&(this[e]=i)}json(){const e={};return[].concat(Zu.STRING_FEATURES,Zu.BINARY_FEATURES).forEach(t=>e[t]=this[t]),e}ensureDomain(t){var e,i;t.modality&&"speech"!==t.modality||!t.modality&&"speech"!==this.modality||(t.domain||t.locale)&&("default"===t.domain?t.domain="mathspeak":(e=t.locale||this.locale,i=t.domain||this.domain,-1===tp.indexOf(e)||"mathspeak"===i?"en"!==e?"mathspeak"!==i&&"clearspeak"!==i&&(t.domain="mathspeak"):-1===ep.indexOf(i)&&(t.domain="mathspeak"):t.domain="mathspeak"))}}Zu.BINARY_FEATURES=["automark","mark","character","cleanpause","strict","structure","aria","pprint","cayleyshort","linebreaks","tree"],Zu.STRING_FEATURES=["markup","style","domain","speech","walker","locale","delay","modality","rate","rules","subiso","prune"];const tp=["ca","da","es"],ep=["chromevox","clearspeak","mathspeak","emacspeak","html"];class ip extends Error{constructor(t=""){super(),this.message=t,this.name="SRE Error"}}class sp{set defaultLocale(t){this._defaultLocale=Qu.u.ensureLocale(t,this._defaultLocale)}get defaultLocale(){return this._defaultLocale}static getInstance(){return sp.instance=sp.instance||new sp,sp.instance}static defaultEvaluator(t,e){return t}static evaluateNode(t){return sp.nodeEvaluator(t)}getRate(){var t=parseInt(this.options.rate,10);return isNaN(t)?100:t}setDynamicCstr(e){if(this.defaultLocale&&(ju.DEFAULT_VALUES[Tu.LOCALE]=this.defaultLocale),e){const i=Object.keys(e);for(let t=0;t<i.length;t++){const s=i[t];if(-1!==ju.DEFAULT_ORDER.indexOf(s)){const i=e[s];this.options[s]=i}}}const i=[this.options.locale,this.options.modality,this.options.domain,this.options.style].join("."),t=qu.createProp([ju.DEFAULT_VALUES[Tu.LOCALE]],[ju.DEFAULT_VALUES[Tu.MODALITY]],[ju.DEFAULT_VALUES[Tu.DOMAIN]],[ju.DEFAULT_VALUES[Tu.STYLE]]),s=this.comparators[this.options.domain],r=this.parsers[this.options.domain];this.parser=r||this.defaultParser,this.dynamicCstr=this.parser.parse(i),this.dynamicCstr.updateProperties(t.getProperties()),this.comparator=s?s():new Gu(this.dynamicCstr)}constructor(){this.options=new Zu,this.config=!1,this.customLoader=null,this.parsers={},this.comparator=null,this.mode=wu.SYNC,this.init=!0,this.comparators={},this._defaultLocale=ju.DEFAULT_VALUES[Tu.LOCALE],this.options.locale=this.defaultLocale,this.evaluator=sp.defaultEvaluator,this.defaultParser=new Hu(ju.DEFAULT_ORDER),this.parser=this.defaultParser,this.dynamicCstr=ju.defaultCstr()}configurate(t){if(this.mode===wu.HTTP&&!Vu.f.webworker&&!this.config){{var i=t;const a=document.documentElement.querySelectorAll('script[type="text/x-sre-config"]');for(let e=0,t=a.length;e<t;e++){let t;try{t=a[e].innerHTML;var s=JSON.parse(t);for(const[a,o]of Object.entries(s))i[a]=o}catch(i){Wu.getInstance().output("Illegal configuration ",t)}}}this.config=!0}var e=t;if("undefined"!=typeof SREfeature)for(var[r,n]of Object.entries(SREfeature))e[r]=n}setCustomLoader(t){t&&(this.customLoader=t)}setup(t){var e;void 0!==t.mode&&(this.mode=t.mode),this.configurate(t),this.options.set(t),t.json&&(Vu.f.jsonPath=(e=t.json).match("/$")?e:e+"/"),this.setCustomLoader(t.custom)}json(){return Object.assign({mode:this.mode},this.options.json())}reset(){this.options=new Zu}}sp.nodeEvaluator=function(t){return[]};class rp{static get(t=sp.getInstance().options.locale){return rp.promises[t]||Promise.resolve("")}static getall(){return Promise.all(Object.values(rp.promises))}}rp.loaded={},rp.promises={};const np=Vu.f.xpath,ap={xhtml:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",mml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function op(t){return ap[t]||null}class lp{constructor(){this.lookupNamespaceURI=op}}function cp(i){const s=[];for(let t=0,e=i.length;t<e;t++)s.push(i[t]);return s}function hp(t){const e=new Vu.f.xmldom.DOMParser,i=t.replace(/&nbsp;/g,"Â ").replace(/>[ \f\n\r\t\v\u200b]+</g,"><").trim(),s=!!i.match(/&(?!lt|gt|amp|quot|apos)\w+;/g);if(!i)throw new Error("Empty input!");try{const t=e.parseFromString(i,s?"text/html":"text/xml");return sp.getInstance().mode===wu.HTTP?(np.currentDocument=t,s?t.body.childNodes[0]:t.documentElement):t.documentElement}catch(t){throw new ip("Illegal input: "+t.message)}}function dp(t,e){t.parentNode&&(t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t))}function up(t){return Vu.f.document.createElement(t)}function pp(t){let i="",s=/(>)(<)(\/*)/g,r=0,n=(t=t.replace(s,"$1\r\n$2$3")).split("\r\n");for(s=/(\.)*(<)(\/*)/g,n=n.map(t=>t.replace(s,"$1\r\n$2$3").split("\r\n")).reduce((t,e)=>t.concat(e),[]);n.length;){let e=n.shift();if(e){let t=0;if(e.match(/^<\w[^>/]*>[^>]+$/)){const i=function(t,e){if(!e)return[!1,""];t=t.match(/^<([^> ]+).*>/),e=e.match(/^<\/([^>]+)>(.*)/);return t&&e&&t[1]===e[1]?[!0,e[2]]:[!1,""]}(e,n[0]);i[0]?i[1]?(e+=n.shift().slice(0,-i[1].length),i[1].trim()&&n.unshift(i[1])):e+=n.shift():t=1}else if(e.match(/^<\/\w/))0!==r&&--r;else if(e.match(/^<\w[^>]*[^/]>.*$/))t=1;else if(e.match(/^<\w[^>]*\/>.+$/)){const i=e.indexOf(">")+1,s=e.slice(i);s.trim()&&n.unshift(),e=e.slice(0,i)+s}else t=0;i+=new Array(r+1).join("  ")+e+"\r\n",r+=t}}return i}function mp(t){return t.tagName.toUpperCase()}function gp(t){return(new Vu.f.xmldom.XMLSerializer).serializeToString(t)}(_t=Xu=Xu||{})[_t.ELEMENT_NODE=1]="ELEMENT_NODE",_t[_t.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",_t[_t.TEXT_NODE=3]="TEXT_NODE",_t[_t.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",_t[_t.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",_t[_t.ENTITY_NODE=6]="ENTITY_NODE",_t[_t.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",_t[_t.COMMENT_NODE=8]="COMMENT_NODE",_t[_t.DOCUMENT_NODE=9]="DOCUMENT_NODE",_t[_t.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",_t[_t.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",_t[_t.NOTATION_NODE=12]="NOTATION_NODE";class fp{constructor(t,e,i){this.domain=t,this.name=e,this.func=i,this.active=!1}annotate(t){t.childNodes.forEach(this.annotate.bind(this)),t.contentNodes.forEach(this.annotate.bind(this)),t.addAnnotation(this.domain,this.func(t))}}class bp{constructor(t,e,i,s={}){this.domain=t,this.name=e,this.func=i,this.def=s,this.active=!1}visit(i,t){let s=this.func(i,t);i.addAnnotation(this.domain,s[0]);for(let t,e=0;t=i.childNodes[e];e++)s=this.visit(t,s[1]);for(let t,e=0;t=i.contentNodes[e];e++)s=this.visit(t,s[1]);return s}}const Ep=new Map,Np=new Map;function yp(t){var e=t.domain+":"+t.name;(t instanceof fp?Ep:Np).set(e,t)}function xp(t,e){const i=t+":"+e,s=Ep.get(i)||Np.get(i);s&&(s.active=!0)}function Ap([t,e],i){const s=parseInt(t,16),r=parseInt(e,16),n=[];for(let e=s;e<=r;e++){let t=3<(a=(a=e).toString(16).toUpperCase()).length?a:("000"+a).slice(-4);!1!==i[t]&&(t=i[t]||t,n.push(t))}var a;return n}function vp(t,e={}){return Ap(t,e).map(t=>String.fromCodePoint(parseInt(t,16)))}(Rt=T=T||{}).BOLD="bold",Rt.BOLDFRAKTUR="bold-fraktur",Rt.BOLDITALIC="bold-italic",Rt.BOLDSCRIPT="bold-script",Rt.DOUBLESTRUCK="double-struck",Rt.DOUBLESTRUCKITALIC="double-struck-italic",Rt.FULLWIDTH="fullwidth",Rt.FRAKTUR="fraktur",Rt.ITALIC="italic",Rt.MONOSPACE="monospace",Rt.NORMAL="normal",Rt.SCRIPT="script",Rt.SANSSERIF="sans-serif",Rt.SANSSERIFITALIC="sans-serif-italic",Rt.SANSSERIFBOLD="sans-serif-bold",Rt.SANSSERIFBOLDITALIC="sans-serif-bold-italic",(Gt=zu=zu||{}).SUPER="super",Gt.SUB="sub",Gt.CIRCLED="circled",Gt.PARENTHESIZED="parenthesized",Gt.PERIOD="period",Gt.NEGATIVECIRCLED="negative-circled",Gt.DOUBLECIRCLED="double-circled",Gt.CIRCLEDSANSSERIF="circled-sans-serif",Gt.NEGATIVECIRCLEDSANSSERIF="negative-circled-sans-serif",Gt.COMMA="comma",Gt.SQUARED="squared",Gt.NEGATIVESQUARED="negative-squared",(at=w=w||{}).LATINCAP="latinCap",at.LATINSMALL="latinSmall",at.GREEKCAP="greekCap",at.GREEKSMALL="greekSmall",at.DIGIT="digit";const _p=[{interval:["1D400","1D419"],base:w.LATINCAP,subst:{},capital:!0,category:"Lu",font:T.BOLD},{interval:["1D41A","1D433"],base:w.LATINSMALL,subst:{},capital:!1,category:"Ll",font:T.BOLD},{interval:["1D56C","1D585"],base:w.LATINCAP,subst:{},capital:!0,category:"Lu",font:T.BOLDFRAKTUR},{interval:["1D586","1D59F"],base:w.LATINSMALL,subst:{},capital:!1,category:"Ll",font:T.BOLDFRAKTUR},{interval:["1D468","1D481"],base:w.LATINCAP,subst:{},capital:!0,category:"Lu",font:T.BOLDITALIC},{interval:["1D482","1D49B"],base:w.LATINSMALL,subst:{},capital:!1,category:"Ll",font:T.BOLDITALIC},{interval:["1D4D0","1D4E9"],base:w.LATINCAP,subst:{},capital:!0,category:"Lu",font:T.BOLDSCRIPT},{interval:["1D4EA","1D503"],base:w.LATINSMALL,subst:{},capital:!1,category:"Ll",font:T.BOLDSCRIPT},{interval:["1D538","1D551"],base:w.LATINCAP,subst:{"1D53A":"2102","1D53F":"210D","1D545":"2115","1D547":"2119","1D548":"211A","1D549":"211D","1D551":"2124"},capital:!0,category:"Lu",font:T.DOUBLESTRUCK},{interval:["1D552","1D56B"],base:w.LATINSMALL,subst:{},capital:!1,category:"Ll",font:T.DOUBLESTRUCK},{interval:["1D504","1D51D"],base:w.LATINCAP,subst:{"1D506":"212D","1D50B":"210C","1D50C":"2111","1D515":"211C","1D51D":"2128"},capital:!0,category:"Lu",font:T.FRAKTUR},{interval:["1D51E","1D537"],base:w.LATINSMALL,subst:{},capital:!1,category:"Ll",font:T.FRAKTUR},{interval:["FF21","FF3A"],base:w.LATINCAP,subst:{},capital:!0,category:"Lu",font:T.FULLWIDTH},{interval:["FF41","FF5A"],base:w.LATINSMALL,subst:{},capital:!1,category:"Ll",font:T.FULLWIDTH},{interval:["1D434","1D44D"],base:w.LATINCAP,subst:{},capital:!0,category:"Lu",font:T.ITALIC},{interval:["1D44E","1D467"],base:w.LATINSMALL,subst:{"1D455":"210E"},capital:!1,category:"Ll",font:T.ITALIC},{interval:["1D670","1D689"],base:w.LATINCAP,subst:{},capital:!0,category:"Lu",font:T.MONOSPACE},{interval:["1D68A","1D6A3"],base:w.LATINSMALL,subst:{},capital:!1,category:"Ll",font:T.MONOSPACE},{interval:["0041","005A"],base:w.LATINCAP,subst:{},capital:!0,category:"Lu",font:T.NORMAL},{interval:["0061","007A"],base:w.LATINSMALL,subst:{},capital:!1,category:"Ll",font:T.NORMAL},{interval:["1D49C","1D4B5"],base:w.LATINCAP,subst:{"1D49D":"212C","1D4A0":"2130","1D4A1":"2131","1D4A3":"210B","1D4A4":"2110","1D4A7":"2112","1D4A8":"2133","1D4AD":"211B"},capital:!0,category:"Lu",font:T.SCRIPT},{interval:["1D4B6","1D4CF"],base:w.LATINSMALL,subst:{"1D4BA":"212F","1D4BC":"210A","1D4C4":"2134"},capital:!1,category:"Ll",font:T.SCRIPT},{interval:["1D5A0","1D5B9"],base:w.LATINCAP,subst:{},capital:!0,category:"Lu",font:T.SANSSERIF},{interval:["1D5BA","1D5D3"],base:w.LATINSMALL,subst:{},capital:!1,category:"Ll",font:T.SANSSERIF},{interval:["1D608","1D621"],base:w.LATINCAP,subst:{},capital:!0,category:"Lu",font:T.SANSSERIFITALIC},{interval:["1D622","1D63B"],base:w.LATINSMALL,subst:{},capital:!1,category:"Ll",font:T.SANSSERIFITALIC},{interval:["1D5D4","1D5ED"],base:w.LATINCAP,subst:{},capital:!0,category:"Lu",font:T.SANSSERIFBOLD},{interval:["1D5EE","1D607"],base:w.LATINSMALL,subst:{},capital:!1,category:"Ll",font:T.SANSSERIFBOLD},{interval:["1D63C","1D655"],base:w.LATINCAP,subst:{},capital:!0,category:"Lu",font:T.SANSSERIFBOLDITALIC},{interval:["1D656","1D66F"],base:w.LATINSMALL,subst:{},capital:!1,category:"Ll",font:T.SANSSERIFBOLDITALIC},{interval:["0391","03A9"],base:w.GREEKCAP,subst:{"03A2":"03F4"},capital:!0,category:"Lu",font:T.NORMAL},{interval:["03B0","03D0"],base:w.GREEKSMALL,subst:{"03B0":"2207","03CA":"2202","03CB":"03F5","03CC":"03D1","03CD":"03F0","03CE":"03D5","03CF":"03F1","03D0":"03D6"},capital:!1,category:"Ll",font:T.NORMAL},{interval:["1D6A8","1D6C0"],base:w.GREEKCAP,subst:{},capital:!0,category:"Lu",font:T.BOLD},{interval:["1D6C1","1D6E1"],base:w.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:T.BOLD},{interval:["1D6E2","1D6FA"],base:w.GREEKCAP,subst:{},capital:!0,category:"Lu",font:T.ITALIC},{interval:["1D6FB","1D71B"],base:w.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:T.ITALIC},{interval:["1D71C","1D734"],base:w.GREEKCAP,subst:{},capital:!0,category:"Lu",font:T.BOLDITALIC},{interval:["1D735","1D755"],base:w.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:T.BOLDITALIC},{interval:["1D756","1D76E"],base:w.GREEKCAP,subst:{},capital:!0,category:"Lu",font:T.SANSSERIFBOLD},{interval:["1D76F","1D78F"],base:w.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:T.SANSSERIFBOLD},{interval:["1D790","1D7A8"],base:w.GREEKCAP,subst:{},capital:!0,category:"Lu",font:T.SANSSERIFBOLDITALIC},{interval:["1D7A9","1D7C9"],base:w.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:T.SANSSERIFBOLDITALIC},{interval:["0030","0039"],base:w.DIGIT,subst:{},offset:0,category:"Nd",font:T.NORMAL},{interval:["2070","2079"],base:w.DIGIT,subst:{2071:"00B9",2072:"00B2",2073:"00B3"},offset:0,category:"No",font:zu.SUPER},{interval:["2080","2089"],base:w.DIGIT,subst:{},offset:0,category:"No",font:zu.SUB},{interval:["245F","2473"],base:w.DIGIT,subst:{"245F":"24EA"},offset:0,category:"No",font:zu.CIRCLED},{interval:["3251","325F"],base:w.DIGIT,subst:{},offset:21,category:"No",font:zu.CIRCLED},{interval:["32B1","32BF"],base:w.DIGIT,subst:{},offset:36,category:"No",font:zu.CIRCLED},{interval:["2474","2487"],base:w.DIGIT,subst:{},offset:1,category:"No",font:zu.PARENTHESIZED},{interval:["2487","249B"],base:w.DIGIT,subst:{2487:"1F100"},offset:0,category:"No",font:zu.PERIOD},{interval:["2775","277F"],base:w.DIGIT,subst:{2775:"24FF"},offset:0,category:"No",font:zu.NEGATIVECIRCLED},{interval:["24EB","24F4"],base:w.DIGIT,subst:{},offset:11,category:"No",font:zu.NEGATIVECIRCLED},{interval:["24F5","24FE"],base:w.DIGIT,subst:{},offset:1,category:"No",font:zu.DOUBLECIRCLED},{interval:["277F","2789"],base:w.DIGIT,subst:{"277F":"1F10B"},offset:0,category:"No",font:zu.CIRCLEDSANSSERIF},{interval:["2789","2793"],base:w.DIGIT,subst:{2789:"1F10C"},offset:0,category:"No",font:zu.NEGATIVECIRCLEDSANSSERIF},{interval:["FF10","FF19"],base:w.DIGIT,subst:{},offset:0,category:"Nd",font:T.FULLWIDTH},{interval:["1D7CE","1D7D7"],base:w.DIGIT,subst:{},offset:0,category:"Nd",font:T.BOLD},{interval:["1D7D8","1D7E1"],base:w.DIGIT,subst:{},offset:0,category:"Nd",font:T.DOUBLESTRUCK},{interval:["1D7E2","1D7EB"],base:w.DIGIT,subst:{},offset:0,category:"Nd",font:T.SANSSERIF},{interval:["1D7EC","1D7F5"],base:w.DIGIT,subst:{},offset:0,category:"Nd",font:T.SANSSERIFBOLD},{interval:["1D7F6","1D7FF"],base:w.DIGIT,subst:{},offset:0,category:"Nd",font:T.MONOSPACE},{interval:["1F101","1F10A"],base:w.DIGIT,subst:{},offset:0,category:"No",font:zu.COMMA},{interval:["24B6","24CF"],base:w.LATINCAP,subst:{},capital:!0,category:"So",font:zu.CIRCLED},{interval:["24D0","24E9"],base:w.LATINSMALL,subst:{},capital:!1,category:"So",font:zu.CIRCLED},{interval:["1F110","1F129"],base:w.LATINCAP,subst:{},capital:!0,category:"So",font:zu.PARENTHESIZED},{interval:["249C","24B5"],base:w.LATINSMALL,subst:{},capital:!1,category:"So",font:zu.PARENTHESIZED},{interval:["1F130","1F149"],base:w.LATINCAP,subst:{},capital:!0,category:"So",font:zu.SQUARED},{interval:["1F170","1F189"],base:w.LATINCAP,subst:{},capital:!0,category:"So",font:zu.NEGATIVESQUARED},{interval:["1F150","1F169"],base:w.LATINCAP,subst:{},capital:!0,category:"So",font:zu.NEGATIVECIRCLED}],Tp=new Map;function wp(t,e){return t+e.split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}for(const P of _p){const B=wp(P.base,P.font),F=vp(P.interval,P.subst);let t=Tp.get(B);t?t.unicode=t.unicode.concat(F):((t=P).unicode=F,Tp.set(B,t))}(i=Ku=Ku||{}).PUNCTUATION="punctuation",i.FENCE="fence",i.NUMBER="number",i.IDENTIFIER="identifier",i.TEXT="text",i.OPERATOR="operator",i.RELATION="relation",i.LARGEOP="largeop",i.FUNCTION="function",i.ACCENT="accent",i.FENCED="fenced",i.FRACTION="fraction",i.PUNCTUATED="punctuated",i.RELSEQ="relseq",i.MULTIREL="multirel",i.INFIXOP="infixop",i.PREFIXOP="prefixop",i.POSTFIXOP="postfixop",i.APPL="appl",i.INTEGRAL="integral",i.BIGOP="bigop",i.SQRT="sqrt",i.ROOT="root",i.LIMUPPER="limupper",i.LIMLOWER="limlower",i.LIMBOTH="limboth",i.SUBSCRIPT="subscript",i.SUPERSCRIPT="superscript",i.UNDERSCORE="underscore",i.OVERSCORE="overscore",i.TENSOR="tensor",i.TABLE="table",i.MULTILINE="multiline",i.MATRIX="matrix",i.VECTOR="vector",i.CASES="cases",i.ROW="row",i.LINE="line",i.CELL="cell",i.ENCLOSE="enclose",i.INFERENCE="inference",i.RULELABEL="rulelabel",i.CONCLUSION="conclusion",i.PREMISES="premises",i.UNKNOWN="unknown",i.EMPTY="empty";const C=Object.assign({},Ku),I=((t=Ju=Ju||{}).COMMA="comma",t.SEMICOLON="semicolon",t.ELLIPSIS="ellipsis",t.FULLSTOP="fullstop",t.QUESTION="question",t.EXCLAMATION="exclamation",t.QUOTES="quotes",t.DASH="dash",t.TILDE="tilde",t.PRIME="prime",t.DEGREE="degree",t.VBAR="vbar",t.COLON="colon",t.OPENFENCE="openfence",t.CLOSEFENCE="closefence",t.APPLICATION="application",t.DUMMY="dummy",t.UNIT="unit",t.LABEL="label",t.OPEN="open",t.CLOSE="close",t.TOP="top",t.BOTTOM="bottom",t.NEUTRAL="neutral",t.METRIC="metric",t.LATINLETTER="latinletter",t.GREEKLETTER="greekletter",t.OTHERLETTER="otherletter",t.NUMBERSET="numbersetletter",t.INTEGER="integer",t.FLOAT="float",t.OTHERNUMBER="othernumber",t.INFTY="infty",t.MIXED="mixed",t.MULTIACCENT="multiaccent",t.OVERACCENT="overaccent",t.UNDERACCENT="underaccent",t.UNDEROVER="underover",t.SUBSUP="subsup",t.LEFTSUB="leftsub",t.LEFTSUPER="leftsuper",t.RIGHTSUB="rightsub",t.RIGHTSUPER="rightsuper",t.LEFTRIGHT="leftright",t.ABOVEBELOW="abovebelow",t.INTERVAL="interval",t.SETEMPTY="set empty",t.SETEXT="set extended",t.SETSINGLE="set singleton",t.SETCOLLECT="set collection",t.STRING="string",t.SPACE="space",t.ANNOTATION="annotation",t.TEXT="text",t.SEQUENCE="sequence",t.ENDPUNCT="endpunct",t.STARTPUNCT="startpunct",t.NEGATIVE="negative",t.POSITIVE="positive",t.NEGATION="negation",t.MULTIOP="multiop",t.PREFIXOP="prefix operator",t.POSTFIXOP="postfix operator",t.LIMFUNC="limit function",t.INFIXFUNC="infix function",t.PREFIXFUNC="prefix function",t.POSTFIXFUNC="postfix function",t.SIMPLEFUNC="simple function",t.COMPFUNC="composed function",t.SUM="sum",t.INTEGRAL="integral",t.GEOMETRY="geometry",t.BOX="box",t.BLOCK="block",t.ADDITION="addition",t.MULTIPLICATION="multiplication",t.SUBTRACTION="subtraction",t.IMPLICIT="implicit",t.DIVISION="division",t.VULGAR="vulgar",t.EQUALITY="equality",t.INEQUALITY="inequality",t.ARROW="arrow",t.ELEMENT="element",t.NONELEMENT="nonelement",t.REELEMENT="reelement",t.RENONELEMENT="renonelement",t.SET="set",t.DETERMINANT="determinant",t.ROWVECTOR="rowvector",t.BINOMIAL="binomial",t.SQUAREMATRIX="squarematrix",t.CYCLE="cycle",t.MULTILINE="multiline",t.MATRIX="matrix",t.VECTOR="vector",t.CASES="cases",t.TABLE="table",t.CAYLEY="cayley",t.PROOF="proof",t.LEFT="left",t.RIGHT="right",t.UP="up",t.DOWN="down",t.FINAL="final",t.SINGLE="single",t.HYP="hyp",t.AXIOM="axiom",t.LOGIC="logic",t.UNKNOWN="unknown",t.MGLYPH="mglyph",Object.assign({},Ju)),Cp=((Q=Yu=Yu||{}).CALIGRAPHIC="caligraphic",Q.CALIGRAPHICBOLD="caligraphic-bold",Q.OLDSTYLE="oldstyle",Q.OLDSTYLEBOLD="oldstyle-bold",Q.UNKNOWN="unknown",Object.assign(Object.assign(Object.assign({},T),Yu),zu)),Ip=((et=$u=$u||{}).ALLLETTERS="allLetters",et.D="d",et.BAR="bar",et.TILDE="tilde",Object.assign(Object.assign({},w),$u));const Lp={functionApplication:String.fromCodePoint(8289),invisibleTimes:String.fromCodePoint(8290),invisibleComma:String.fromCodePoint(8291),invisiblePlus:String.fromCodePoint(8292)};class Sp extends Map{get(t){return super.get(t)||{role:I.UNKNOWN,type:C.UNKNOWN,font:Cp.UNKNOWN}}}class kp extends Map{set(t,e,i=""){return super.set(this.secKey(e,t),i||e),this}has(t,e){return super.has(this.secKey(e,t))}get(t,e){return super.get(this.secKey(e,t))}secKey(t,e){return e?t+" "+e:""+t}}const Rp={Meaning:new Sp,Secondary:new kp,FencesHoriz:new Map,FencesVert:new Map,LatexCommands:new Map};function Op(t,e){for(const i of t)Rp.Meaning.set(i,{role:e.role||I.UNKNOWN,type:e.type||C.UNKNOWN,font:e.font||Cp.UNKNOWN}),e.secondary&&Rp.Secondary.set(i,e.secondary)}function Mp(t,i,e=1){const s={},r=function(){let t=[];for(const e of i)Array.isArray(e)?t=t.concat(Ap(e,{}).map(t=>parseInt(t,16))):t.push(parseInt(e,16));return t}();for(const i of r)s[i]||(t.set(String.fromCodePoint(i),String.fromCodePoint(i+e)),s[i]=!0,s[i+e]=!0)}var L,Dp,S,Pp,Bp,Fp,Z=["cos","cot","csc","sec","sin","tan","arccos","arccot","arccsc","arcsec","arcsin","arctan"].concat(["cosh","coth","csch","sech","sinh","tanh","arcosh","arcoth","arcsch","arsech","arsinh","artanh"],["deg","det","dim","hom","ker","Tr"],["log","ln","lg","exp","gcd","lcm","arg","im","re","Pr"]);function Up(t,i,s,e,r,n=[],a={},o={}){const l=Tp.get(wp(t,e));if(l){l.unicode.forEach(e=>{Rp.Meaning.set(e,{type:i,role:s,font:r}),n.forEach(t=>Rp.Secondary.set(e,t))});var c,h,d=l.unicode,u=a;for([c,h]of Object.entries(u)){const u=d[c];void 0!==u&&Rp.Meaning.set(u,h)}var p,m,g=l.unicode,f=o;for([p,m]of Object.entries(f)){const f=g[p];void 0!==f&&Rp.Secondary.set(f,m)}}}[{set:["23","26","40","5c","a1","a7","b6","bf","2017",["2022","2025"],"2027","203b","203c",["2041","2043"],["2047","2049"],["204b","204d"],"2050","2055","2056",["2058","205e"],"2234","2235","fe45","fe46","fe5f","fe60","fe68","fe6b","ff03","ff06","ff0f","ff20","ff3c"],type:C.PUNCTUATION,role:I.UNKNOWN},{set:["22","ab","bb","2dd",["2018","201f"],"2039","203a",["301d","301f"],"fe10","ff02","ff07"],type:C.PUNCTUATION,role:I.QUOTES},{set:["3b","204f","2a1f","2a3e","fe14","fe54","ff1b"],type:C.PUNCTUATION,role:I.SEMICOLON},{set:["3f","203d","fe16","fe56","ff1f"],type:C.PUNCTUATION,role:I.QUESTION},{set:["21","fe15","fe57","ff01"],type:C.PUNCTUATION,role:I.EXCLAMATION},{set:["5e","60","a8","aa","b4","ba","2c7",["2d8","2da"],"2040","207a","207d","207e","ff3e","ff40"],type:C.PUNCTUATION,role:I.OVERACCENT},{set:["b8","2db","2038","203f","2054","208a","208d","208e"],type:C.PUNCTUATION,role:I.UNDERACCENT},{set:["3a","2982","fe13","fe30","fe55","ff1a"],type:C.PUNCTUATION,role:I.COLON},{set:["2c","2063","fe50","ff0c"],type:C.PUNCTUATION,role:I.COMMA},{set:["2026",["22ee","22f1"],"fe19"],type:C.PUNCTUATION,role:I.ELLIPSIS},{set:["2e","fe52","ff0e"],type:C.PUNCTUATION,role:I.FULLSTOP},{set:["2d","207b","208b","2212","2796","fe63","ff0d"],type:C.OPERATOR,role:I.DASH,secondary:Ip.BAR},{set:["5f","af",["2010","2015"],"203e","208b",["fe49","fe4f"],"fe58","ff3f","ffe3"],type:C.PUNCTUATION,role:I.DASH,secondary:Ip.BAR},{set:["7e","2dc","2f7","303","330","334","2053","223c","223d","301c","ff5e"],type:C.OPERATOR,role:I.TILDE,secondary:Ip.TILDE},{set:["27","2b9","2ba",["2032","2037"],"2057"],type:C.PUNCTUATION,role:I.PRIME},{set:["b0"],type:C.PUNCTUATION,role:I.DEGREE},{set:["2b","b1","2064","2213","2214","2228","222a",["228c","228e"],"2294","2295","229d","229e","22bb","22bd","22c4","22ce","22d3","2304","271b","271c","2795","27cf","29fa","29fb","29fe",["2a22","2a28"],"2a2d","2a2e","2a39","2a42","2a45","2a46","2a48","2a4a","2a4c","2a4f","2a50","2a52","2a54","2a56","2a57","2a59","2a5b","2a5d",["2a61","2a63"],"2adc","2add","fe62","ff0b"],type:C.OPERATOR,role:I.ADDITION},{set:["2a","b7","d7","2020","2021","204e","2051","2062",["2217","2219"],"2227","2229","2240","2293","2297",["2299","229b"],"22a0","22a1","22b9","22bc",["22c5","22cc"],"22cf","22d2","22d4","2303","2305","2306","25cb","2715","2716","27ce","27d1",["29d1","29d7"],"29e2","2a1d",["2a2f","2a37"],["2a3b","2a3d"],"2a40","2a43","2a44","2a47","2a49","2a4b","2a4d","2a4e","2a51","2a53","2a55","2a58","2a5a","2a5c",["2a5e","2a60"],"2ada","2adb","fe61","ff0a"],type:C.OPERATOR,role:I.MULTIPLICATION},{set:["2d","af","2010","2011","2052","207b","208b","2212","2216","2238","2242","2296","229f","2796","29ff",["2a29","2a2c"],"2a3a","2a41","fe63","ff0d"],type:C.OPERATOR,role:I.SUBTRACTION},{set:["2f","f7","2044","2215","2298","2797","27cc","29bc",["29f5","29f9"],"2a38"],type:C.OPERATOR,role:I.DIVISION},{set:["25","2030","2031","ff05","fe6a"],type:C.OPERATOR,role:I.POSTFIXOP},{set:["ac","2200","2201","2203","2204","2206",["221a","221c"],"2310","ffe2"],type:C.OPERATOR,role:I.PREFIXOP},{set:["2320","2321","23aa","23ae","23af","23b2","23b3","23b6","23b7"],type:C.OPERATOR,role:I.PREFIXOP},{set:["1d7ca","1d7cb"],type:C.OPERATOR,role:I.PREFIXOP,font:Cp.BOLD},{set:["3d","7e","207c","208c","221d","2237",["223a","223f"],"2243","2245","2248",["224a","224e"],["2251","225f"],"2261","2263","229c","22cd","22d5","29e4","29e6","2a66","2a67",["2a6a","2a6c"],["2a6c","2a78"],"fe66","ff1d"],type:C.RELATION,role:I.EQUALITY},{set:["3c","3e","2241","2242","2244","2246","2247","2249","224f","2250","2260","2262",["2264","2281"],"22b0","22b1",["22d6","22e1"],["22e6","22e9"],["2976","2978"],"29c0","29c1","29e1","29e3","29e5",["2a79","2abc"],["2af7","2afa"],"fe64","fe65","ff1c","ff1e"],type:C.RELATION,role:I.INEQUALITY},{set:[["2282","228b"],["228f","2292"],["22b2","22b8"],"22d0","22d1",["22e2","22e5"],["22ea","22ed"],"27c3","27c4",["27c7","27c9"],["27d5","27d7"],"27dc",["2979","297b"],"29df",["2abd","2ad8"]],type:C.RELATION,role:I.SET},{set:["2236",["27e0","27e5"],"292b","292c",["29b5","29bb"],"29be","29bf",["29c2","29d0"]],type:C.RELATION,role:I.UNKNOWN},{set:["2205",["29b0","29b4"]],type:C.IDENTIFIER,role:I.SETEMPTY},{set:["1ab2","221e",["29dc","29de"]],type:C.IDENTIFIER,role:I.INFTY},{set:["22a2","22a3",["22a6","22af"],"27da","27db","27dd","27de","2ade",["2ae2","2ae6"],"2aec","2aed"],type:C.RELATION,role:I.LOGIC},{set:["22a4","22a5","22ba","27d8","27d9","27df","2adf","2ae0",["2ae7","2aeb"],"2af1"],type:C.IDENTIFIER,role:I.LOGIC},{set:[["2190","21ff"],"2301","2324","238b","2794",["2798","27af"],["27b1","27be"],["27f0","27ff"],["2900","292a"],["292d","2975"],["297c","297f"],["2b00","2b11"],["2b30","2b4c"],["ffe9","ffec"]],type:C.RELATION,role:I.ARROW},{set:["2208","220a",["22f2","22f9"],"22ff","27d2","2ad9"],type:C.OPERATOR,role:I.ELEMENT},{set:["2209"],type:C.OPERATOR,role:I.NONELEMENT},{set:["220b","220d",["22fa","22fe"]],type:C.OPERATOR,role:I.REELEMENT},{set:["220c"],type:C.OPERATOR,role:I.RENONELEMENT},{set:[["220f","2211"],["22c0","22c3"],["2a00","2a0b"],"2a3f","2afc","2aff"],type:C.LARGEOP,role:I.SUM},{set:["2140"],type:C.LARGEOP,role:I.SUM,font:Cp.DOUBLESTRUCK},{set:[["222b","2233"],["2a0c","2a17"],["2a17","2a1c"]],type:C.LARGEOP,role:I.INTEGRAL},{set:[["2500","257F"]],type:C.RELATION,role:I.BOX},{set:[["2580","259F"]],type:C.IDENTIFIER,role:I.BLOCK},{set:[["25A0","25FF"],["2B12","2B2F"],["2B50","2B59"]],type:C.RELATION,role:I.GEOMETRY},{set:["220e","2300","2302","2311","29bd","29e0",["29e8","29f3"],"2a1e","2afe","ffed","ffee"],type:C.OPERATOR,role:I.GEOMETRY},{set:[["221f","2222"],"22be","22bf",["2312","2314"],"237c","27c0",["299b","29af"]],type:C.OPERATOR,role:I.GEOMETRY},{set:["24",["a2","a5"],"b5","2123",["2125","2127"],"212a","212b","fe69","ff04","ffe0","ffe1","ffe5","ffe6"],type:C.IDENTIFIER,role:I.UNKNOWN},{set:["a9","ae","210f","2114","2116","2117",["211e","2122"],"212e","2132",["2139","213b"],["2141","2144"],"214d","214e",["1f12a","1f12c"],"1f18a"],type:C.IDENTIFIER,role:I.OTHERLETTER},{set:["2224","2226","2239","2307","27b0","27bf","27c1","27c2","27ca","27cb","27cd","27d0","27d3","27d4","2981","2999","299a","29e7","29f4","2a20","2a21","2a64","2a65","2a68","2a69","2ae1",["2aee","2af0"],"2af2","2af3","2af5","2af6","2afb","2afd"],type:C.OPERATOR,role:I.UNKNOWN},{set:["2605","2606","26aa","26ab",["2720","274d"]],type:C.OPERATOR,role:I.UNKNOWN},{set:[["2145","2149"]],type:C.IDENTIFIER,role:I.LATINLETTER,font:Cp.DOUBLESTRUCKITALIC,secondary:Ip.ALLLETTERS},{set:[["213c","213f"]],type:C.IDENTIFIER,role:I.GREEKLETTER,font:Cp.DOUBLESTRUCK,secondary:Ip.ALLLETTERS},{set:["3d0","3d7","3f6",["1d26","1d2a"],"1d5e","1d60",["1d66","1d6a"]],type:C.IDENTIFIER,role:I.GREEKLETTER,font:Cp.NORMAL,secondary:Ip.ALLLETTERS},{set:[["2135","2138"]],type:C.IDENTIFIER,role:I.OTHERLETTER,font:Cp.NORMAL,secondary:Ip.ALLLETTERS},{set:["131","237"],type:C.IDENTIFIER,role:I.LATINLETTER,font:Cp.NORMAL},{set:["1d6a4","1d6a5"],type:C.IDENTIFIER,role:I.LATINLETTER,font:Cp.ITALIC},{set:["2113","2118"],type:C.IDENTIFIER,role:I.LATINLETTER,font:Cp.SCRIPT},{set:[["c0","d6"],["d8","f6"],["f8","1bf"],["1c4","2af"],["1d00","1d25"],["1d6b","1d9a"],["1e00","1ef9"],["363","36f"],["1dd3","1de6"],["1d62","1d65"],"1dca","2071","207f",["2090","209c"],"2c7c"],type:C.IDENTIFIER,role:I.LATINLETTER,font:Cp.NORMAL},{set:[["00bc","00be"],["2150","215f"],"2189"],type:C.NUMBER,role:I.FLOAT},{set:["23E8",["3248","324f"]],type:C.NUMBER,role:I.INTEGER},{set:[["214A","214C"],"2705","2713","2714","2717","2718"],type:C.IDENTIFIER,role:I.UNKNOWN},{set:["20","a0","ad",["2000","200f"],["2028","202f"],["205f","2060"],"206a","206b","206e","206f","feff",["fff9","fffb"]],type:C.TEXT,role:I.SPACE},{set:["7c","a6","2223","23b8","23b9","23d0","2758",["fe31","fe34"],"ff5c","ffe4","ffe8"],type:C.FENCE,role:I.NEUTRAL},{set:["2016","2225","2980","2af4"],type:C.FENCE,role:I.METRIC}].forEach(t=>{var i=t["set"],t=function(t,e){var i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(i[r[s]]=t[r[s]]);return i}(t,["set"]);return Op(function(){let t=[];for(const e of i)Array.isArray(e)?t=t.concat(vp(e)):t.push(String.fromCodePoint(parseInt(e,16)));return t}(),t)}),Mp(Rp.FencesVert,["23b4",["23dc","23e1"],["fe35","fe44"],"fe47"]),Mp(Rp.FencesHoriz,["28","2045","207D","208D",["2308","230f"],["231c","231f"],"2329","23b0",["2768","2775"],"27c5",["27e6","27ef"],["2983","2998"],["29d8","29db"],"29fc",["2e22","2e29"],["3008","3011"],["3014","301b"],"fd3e","fe17",["fe59","fe5e"],"ff08","ff5f","ff62"]),Mp(Rp.FencesHoriz,["5b","7b","ff3b","ff5b"],2),Mp(Rp.FencesHoriz,[["239b","23a6"]],3),Mp(Rp.FencesHoriz,[["23a7","23a9"]],4),Op([...Rp.FencesHoriz.keys()],{type:C.FENCE,role:I.OPEN}),Op([...Rp.FencesHoriz.values()],{type:C.FENCE,role:I.CLOSE}),Op([...Rp.FencesVert.keys()],{type:C.FENCE,role:I.TOP}),Op([...Rp.FencesVert.values()],{type:C.FENCE,role:I.BOTTOM});for([Bp,Fp]of Object.entries(Cp)){Bp=zu[Bp]?Cp.UNKNOWN:Fp===Cp.FULLWIDTH?Cp.NORMAL:Fp;Up(w.LATINCAP,C.IDENTIFIER,I.LATINLETTER,Fp,Bp,[Ip.ALLLETTERS]),Up(w.LATINSMALL,C.IDENTIFIER,I.LATINLETTER,Fp,Bp,[Ip.ALLLETTERS],{},{3:Ip.D}),Up(w.GREEKCAP,C.IDENTIFIER,I.GREEKLETTER,Fp,Bp,[Ip.ALLLETTERS]),Up(w.GREEKSMALL,C.IDENTIFIER,I.GREEKLETTER,Fp,Bp,[Ip.ALLLETTERS],{0:{type:C.OPERATOR,role:I.PREFIXOP,font:Bp},26:{type:C.OPERATOR,role:I.PREFIXOP,font:Bp}}),Up(w.DIGIT,C.NUMBER,I.INTEGER,Fp,Bp)}Op(["inf","lim","liminf","limsup","max","min","sup","injlim","projlim"],{type:C.FUNCTION,role:I.LIMFUNC}),Op(Z,{type:C.FUNCTION,role:I.PREFIXFUNC}),Op(["mod","rem"],{type:C.OPERATOR,role:I.PREFIXFUNC});const qp=[];function jp(i,s){for(let t,e=0;t=qp[e];e++){var r=t.compare(i,s);if(0!==r)return r}return 0}function Hp(t,e){return t.match(/^.+:.+$/)||!e?t:t+":"+e}new class{constructor(t,e=null){this.comparator=t,this.type=e,t=this,qp.push(t)}compare(t,e){return this.type&&this.type===t.type&&this.type===e.type?this.comparator(t,e):0}}(function(t,e){return t.role===I.SIMPLEFUNC?1:e.role===I.SIMPLEFUNC?-1:0},C.IDENTIFIER);class Gp extends Map{set(t,e){return super.set(Hp(t,e.font),e),this}setNode(t){this.set(t.textContent,t.meaning())}get(t,e=null){return super.get(Hp(t,e))}getNode(t){return this.get(t.textContent,t.font)}}class Vp extends Map{add(t,e){const i=this.get(t);i?i.push(e):super.set(t,[e])}get(t,e=null){return super.get(Hp(t,e))}getNode(t){return this.get(t.textContent,t.font)}minimize(){for(var[t,e]of this)1===e.length&&this.delete(t)}isMultiValued(){for(const t of this.values())if(1<t.length)return!0;return!1}}class Wp extends Vp{add(t,e){super.add(Hp(t,e.font),e)}addNode(t){this.add(t.textContent,t)}toString(){const t=[];for(var[e,i]of this){var s=Array(e.length+3).join(" "),i=i.map(t=>t.toString()).join("\n"+s);t.push(e+": "+i)}return t.join("\n")}collateMeaning(){const t=new Xp;for(var[e,i]of this)t.set(e,i.map(t=>t.meaning()));return t}}class Xp extends Vp{add(t,e){const i=this.get(t,e.font);i&&i.find(function(t){return t.type===e.type&&t.role===e.role&&t.font===e.font})||super.add(Hp(t,e.font),e)}addNode(t){this.add(t.textContent,t.meaning())}toString(){const t=[];for(var[e,i]of this){var s=Array(e.length+3).join(" "),i=i.map(t=>`{type: ${t.type}, role: ${t.role}, font: ${t.font}}`).join("\n"+s);t.push(e+": "+i)}return t.join("\n")}reduce(){for(var[t,e]of this)1!==e.length&&this.set(t,function(t){if(t.length<=1)return t;const e=t.slice(),i=(e.sort(jp),[]);for(var s;s=e.pop(),i.push(s),s&&e.length&&0===jp(e[e.length-1],s););return i}(e))}default(){const t=new Gp;for(var[e,i]of this)1===i.length&&t.set(e,i[0]);return t}newDefault(){var t=this.default(),e=(this.reduce(),this.default());return t.size!==e.size?e:null}}(e=L=L||{}).ANNOTATION="ANNOTATION",e.ANNOTATIONXML="ANNOTATION-XML",e.MACTION="MACTION",e.MALIGNGROUP="MALIGNGROUP",e.MALIGNMARK="MALIGNMARK",e.MATH="MATH",e.MENCLOSE="MENCLOSE",e.MERROR="MERROR",e.MFENCED="MFENCED",e.MFRAC="MFRAC",e.MGLYPH="MGLYPH",e.MI="MI",e.MLABELEDTR="MLABELEDTR",e.MMULTISCRIPTS="MMULTISCRIPTS",e.MN="MN",e.MO="MO",e.MOVER="MOVER",e.MPADDED="MPADDED",e.MPHANTOM="MPHANTOM",e.MPRESCRIPTS="MPRESCRIPTS",e.MROOT="MROOT",e.MROW="MROW",e.MS="MS",e.MSPACE="MSPACE",e.MSQRT="MSQRT",e.MSTYLE="MSTYLE",e.MSUB="MSUB",e.MSUBSUP="MSUBSUP",e.MSUP="MSUP",e.MTABLE="MTABLE",e.MTD="MTD",e.MTEXT="MTEXT",e.MTR="MTR",e.MUNDER="MUNDER",e.MUNDEROVER="MUNDEROVER",e.NONE="NONE",e.SEMANTICS="SEMANTICS";const zp=Object.values(L),Kp=[L.MO,L.MI,L.MN,L.MTEXT,L.MS,L.MSPACE],Jp=[L.MERROR,L.MPHANTOM,L.MALIGNGROUP,L.MALIGNMARK,L.MPRESCRIPTS,L.ANNOTATION,L.ANNOTATIONXML],Yp=[L.MATH,L.MROW,L.MPADDED,L.MACTION,L.NONE,L.MSTYLE,L.SEMANTICS],$p=[L.MROOT,L.MSQRT],Qp=["aria-label","exact-speech","alt"];function Zp(t){return t&&mp(t)===L.MATH}function tm(t){return t&&(Jp.includes(mp(t))||!zp.includes(mp(t)))}function em(t){return t&&Yp.includes(mp(t))}function im(i){const s=[];for(let t,e=0;t=i[e];e++)if(t.nodeType===Xu.ELEMENT_NODE){const i=mp(t);Jp.includes(i)||Yp.includes(i)&&0===t.childNodes.length||s.push(t)}return s}function sm(e,t){var i;if(null!=(i=t.attributes)&&i.length){const i=t.attributes;for(let t=i.length-1;0<=t;t--){const s=i[t].name;s.match(/^ext/)&&(e.attributes[s]=i[t].value,e.nobreaking=!0),Qp.includes(s)&&(e.attributes["ext-speech"]=i[t].value,e.nobreaking=!0),s.match(/texclass$/)&&(e.attributes.texclass=i[t].value),"data-latex"===s.toLowerCase()&&(e.attributes.latex=i[t].value),"href"===s&&(e.attributes.href=i[t].value,e.nobreaking=!0)}}}function rm(t){return t&&t.embellished&&0<t.childNodes.length?rm(t.childNodes[0]):t}function nm(i,s,r){r&&i.reverse();const n=[];for(let t,e=0;t=i[e];e++){if(s(t))return r?{head:i.slice(e+1).reverse(),div:t,tail:n.reverse()}:{head:n,div:t,tail:i.slice(e+1)};n.push(t)}return r?{head:[],div:null,tail:n.reverse()}:{head:n,div:null,tail:[]}}function am(t,e){let i=t;const s=[],r=[];for(var n;n=nm(i,e),r.push(n.head),s.push(n.div),i=n.tail,n.div;);return s.pop(),{rel:s,comp:r}}(Wt=Dp=Dp||{}).EMBELLISHED="embellished",Wt.FENCEPOINTER="fencepointer",Wt.FONT="font",Wt.ID="id",Wt.ANNOTATION="annotation",Wt.ROLE="role",Wt.TYPE="type",Wt.CHILDREN="children",Wt.CONTENT="content",Wt.TEXT="$t";class om{static fromXml(t){const e=parseInt(t.getAttribute("id"),10),i=new om(e);return i.type=t.tagName,om.setAttribute(i,t,"role"),om.setAttribute(i,t,"font"),om.setAttribute(i,t,"embellished"),om.setAttribute(i,t,"fencepointer","fencePointer"),t.getAttribute("annotation")&&i.parseAnnotation(t.getAttribute("annotation")),sm(i,t),om.processChildren(i,t),i}static setAttribute(t,e,i,s){s=s||i;e=e.getAttribute(i);e&&(t[s]=e)}static processChildren(e,t){for(const i of cp(t.childNodes))if(i.nodeType===Xu.TEXT_NODE)e.textContent=i.textContent;else{const t=cp(i.childNodes).map(om.fromXml);t.forEach(t=>t.parent=e),"CONTENT"===mp(i)?e.contentNodes=t:e.childNodes=t}}constructor(t){this.id=t,this.mathml=[],this.parent=null,this.type=C.UNKNOWN,this.role=I.UNKNOWN,this.font=Cp.UNKNOWN,this.embellished=null,this.fencePointer="",this.childNodes=[],this.textContent="",this.mathmlTree=null,this.contentNodes=[],this.annotation={},this.attributes={},this.nobreaking=!1}querySelectorAll(i){let s=[];for(let t,e=0;t=this.childNodes[e];e++)s=s.concat(t.querySelectorAll(i));for(let t,e=0;t=this.contentNodes[e];e++)s=s.concat(t.querySelectorAll(i));return i(this)&&s.unshift(this),s}xml(r,n){function t(t,e){const i=e.map(function(t){return t.xml(r,n)}),s=r.createElementNS("",t);for(let t,e=0;t=i[e];e++)s.appendChild(t);return s}const e=r.createElementNS("",this.type);return n||this.xmlAttributes(e),e.textContent=this.textContent,0<this.contentNodes.length&&e.appendChild(t(Dp.CONTENT,this.contentNodes)),0<this.childNodes.length&&e.appendChild(t(Dp.CHILDREN,this.childNodes)),e}toString(t=!1){var e=hp("<snode/>");return gp(this.xml(e.ownerDocument,t))}allAttributes(){const t=[];return t.push([Dp.ROLE,this.role]),this.font!==Cp.UNKNOWN&&t.push([Dp.FONT,this.font]),Object.keys(this.annotation).length&&t.push([Dp.ANNOTATION,this.annotationXml()]),this.embellished&&t.push([Dp.EMBELLISHED,this.embellished]),this.fencePointer&&t.push([Dp.FENCEPOINTER,this.fencePointer]),t.push([Dp.ID,this.id.toString()]),t}annotationXml(){const e=[];for(const[i,t]of Object.entries(this.annotation))t.forEach(t=>e.push(i+":"+t));return e.join(";")}attributesXml(){const t=[];for(var[e,i]of Object.entries(this.attributes))t.push(e+":"+om.escapeValue(i));return t.join(";")}toJson(){const i={};i[Dp.TYPE]=this.type;var s=this.allAttributes();for(let t,e=0;t=s[e];e++)i[t[0]]=t[1].toString();return this.textContent&&(i[Dp.TEXT]=this.textContent),this.childNodes.length&&(i[Dp.CHILDREN]=this.childNodes.map(function(t){return t.toJson()})),this.contentNodes.length&&(i[Dp.CONTENT]=this.contentNodes.map(function(t){return t.toJson()})),i}updateContent(t,e){var e=e?t.replace(/^[ \f\n\r\t\v\u200b]*/,"").replace(/[ \f\n\r\t\v\u200b]*$/,""):t.trim();this.textContent!==(t=t&&!e?t:e)&&(e=Rp.Meaning.get(t.replace(/\s/g," ")),this.textContent=t,this.role=e.role,this.type=e.type,this.font=e.font)}addMathmlNodes(i){for(let t,e=0;t=i[e];e++)-1===this.mathml.indexOf(t)&&this.mathml.push(t)}appendChild(t){this.childNodes.push(t),this.addMathmlNodes(t.mathml),t.parent=this}replaceChild(e,i){var t,s=this.childNodes.indexOf(e);-1!==s&&(e.parent=null,(i.parent=this).childNodes[s]=i,s=e.mathml.filter(function(t){return-1===i.mathml.indexOf(t)}),t=i.mathml.filter(function(t){return-1===e.mathml.indexOf(t)}),this.removeMathmlNodes(s),this.addMathmlNodes(t))}appendContentNode(t){t&&(this.contentNodes.push(t),this.addMathmlNodes(t.mathml),t.parent=this)}removeContentNode(t){t&&-1!==(t=this.contentNodes.indexOf(t))&&this.contentNodes.slice(t,1)}equals(s){if(!s)return!1;if(this.type!==s.type||this.role!==s.role||this.textContent!==s.textContent||this.childNodes.length!==s.childNodes.length||this.contentNodes.length!==s.contentNodes.length)return!1;for(let t,e,i=0;t=this.childNodes[i],e=s.childNodes[i];i++)if(!t.equals(e))return!1;for(let t,e,i=0;t=this.contentNodes[i],e=s.contentNodes[i];i++)if(!t.equals(e))return!1;return!0}displayTree(){console.info(this.displayTree_(0))}addAnnotation(t,e){e&&this.addAnnotation_(t,e)}getAnnotation(t){return this.annotation[t]||[]}hasAnnotation(t,e){const i=this.annotation[t];return!!i&&-1!==i.indexOf(e)}parseAnnotation(t){const i=t.split(";");for(let t=0,e=i.length;t<e;t++){var s=i[t].split(":");this.addAnnotation(s[0],s[1])}}meaning(){return{type:this.type,role:this.role,font:this.font}}xmlAttributes(i){var s=this.allAttributes();for(let t,e=0;t=s[e];e++)i.setAttribute(t[0],t[1]);this.addExternalAttributes(i)}addExternalAttributes(t){for(var[e,i]of Object.entries(this.attributes))t.setAttribute(e,i)}static escapeValue(t){return t.replace(/;/g,"\\0003B")}parseAttributes(t){if(t){const i=t.split(";");for(let t=0,e=i.length;t<e;t++){const[s,...r]=i[t].split(":");s&&(this.attributes[s]=r.join("").replace(/\\0003B/g,";"))}}}removeMathmlNodes(i){const s=this.mathml;for(let t,e=0;t=i[e];e++){const i=s.indexOf(t);-1!==i&&s.splice(i,1)}this.mathml=s}displayTree_(e){e++;var i=Array(e).join("  ");let s="";s=(s=s+("\n"+i+this.toString())+"\n"+i+"MathmlTree:")+"\n"+i+this.mathmlTreeString()+"\n"+i+"MathML:";for(let t,e=0;t=this.mathml[e];e++)s+="\n"+i+t.toString();return s+="\n"+i+"Begin Content",this.contentNodes.forEach(function(t){s+=t.displayTree_(e)}),s=s+("\n"+i+"End Content")+("\n"+i+"Begin Children"),this.childNodes.forEach(function(t){s+=t.displayTree_(e)}),s+="\n"+i+"End Children"}mathmlTreeString(){return this.mathmlTree?this.mathmlTree.toString():"EMPTY"}addAnnotation_(t,e){const i=this.annotation[t];i&&!i.includes(e)?i.push(e):this.annotation[t]=[e]}}class lm{constructor(){this.leafMap=new Wp,this.defaultMap=new Gp,this.idCounter_=-1}makeNode(t){return this.createNode_(t)}makeUnprocessed(t){const e=this.createNode_();return e.mathml=[t],e.mathmlTree=t,e}makeEmptyNode(){const t=this.createNode_();return t.type=C.EMPTY,t}makeContentNode(t){const e=this.createNode_();return e.updateContent(t),e}makeMultipleContentNodes(e,i){const s=[];for(let t=0;t<e;t++)s.push(this.makeContentNode(i));return s}makeLeafNode(t,e){if(!t)return this.makeEmptyNode();const i=this.makeContentNode(t);i.font=e||i.font;t=this.defaultMap.getNode(i);return t&&(i.type=t.type,i.role=t.role,i.font=t.font),this.leafMap.addNode(i),i}makeBranchNode(t,e,i,s){const r=this.createNode_();return s&&r.updateContent(s),r.type=t,r.childNodes=e,r.contentNodes=i,e.concat(i).forEach(function(t){(t.parent=r).addMathmlNodes(t.mathml)}),r}createNode_(t){return void 0!==t?this.idCounter_=Math.max(this.idCounter_,t):t=++this.idCounter_,new om(t)}}function k(t,e){return t.type===e}function cm(t,e){return t.embellished===e}function hm(t,e){return t.role===e}function dm(t){return k(t,C.FENCE)||k(t,C.PUNCTUATION)||k(t,C.OPERATOR)||k(t,C.RELATION)}function um(t){return Em(t)&&!hm(t,I.DIVISION)||k(t,C.APPL)||fm(t)}function pm(t){return Em(t)||fm(t)}function mm(t,e){return e&&k(e,C.IDENTIFIER)&&Rp.Secondary.has(t.textContent,Ip.D)}function gm(t){var e;if(k(t,C.IDENTIFIER))return(e=t.textContent[0])&&t.textContent[1]&&Rp.Secondary.has(e,Ip.D)}function fm(t){return Nm(t)||ym(t)}function bm(t){return t.embellished||((e=t.type)===C.OPERATOR||e===C.RELATION||e===C.FENCE||e===C.PUNCTUATION?t.type:null);var e}function Em(t){return k(t,C.OPERATOR)||cm(t,C.OPERATOR)}function Nm(t){return k(t,C.RELATION)||cm(t,C.RELATION)}function ym(t){return k(t,C.PUNCTUATION)||cm(t,C.PUNCTUATION)}function xm(t){return k(t,C.FENCE)||cm(t,C.FENCE)}function Am(t){return t&&xm(t)&&(!t.embellished||function t(e){return!e.embellished||!function(t){return k(t,C.TENSOR)&&(!k(t.childNodes[1],C.EMPTY)||!k(t.childNodes[2],C.EMPTY))&&(!k(t.childNodes[3],C.EMPTY)||!k(t.childNodes[4],C.EMPTY))}(e)&&(!hm(e,I.CLOSE)||!k(e,C.TENSOR))&&(!hm(e,I.OPEN)||!k(e,C.SUBSCRIPT)&&!k(e,C.SUPERSCRIPT))&&t(e.childNodes[0])}(t))}function vm(t){return!!t&&(k(t,C.TABLE)||k(t,C.MULTILINE))}function _m(t){return!!t&&Tm(t)&&vm(t.childNodes[0])}function Tm(t){return!!t&&k(t,C.FENCED)&&(hm(t,I.LEFTRIGHT)||Pm(t))&&1===t.childNodes.length}function wm(t){return t.childNodes.every(function(t){return t.childNodes.length<=1})}function Cm(t,e,i){return 1===e.length&&(t[i].type===C.PUNCTUATION||t[i].embellished===C.PUNCTUATION)&&t[i]===e[0]}function Im(t){return k(t,C.IDENTIFIER)&&hm(t,I.SIMPLEFUNC)}const Lm=[C.PUNCTUATION,C.PUNCTUATED,C.RELSEQ,C.MULTIREL,C.TABLE,C.MULTILINE,C.CASES,C.INFERENCE],Sm=[C.LIMUPPER,C.LIMLOWER,C.LIMBOTH,C.SUBSCRIPT,C.SUPERSCRIPT,C.UNDERSCORE,C.OVERSCORE,C.TENSOR];function km(t){return(e=t).type===C.NUMBER&&(e.role===I.INTEGER||e.role===I.FLOAT)||t.role===I.VULGAR||t.role===I.MIXED;var e}function Rm(t){var e=t.childNodes;return t.role===I.UNIT&&(!e.length||e[0].role===I.UNIT)}function Om(t){var e=t.childNodes;return t.type===C.INFIXOP&&(t.role===I.MULTIPLICATION||t.role===I.IMPLICIT)&&e.length&&(Rm(e[0])||km(e[0]))&&t.childNodes.slice(1).every(Rm)}function Mm(t){return t.type===C.INFIXOP&&(t.role===I.IMPLICIT||t.role===I.UNIT&&!!t.contentNodes.length&&t.contentNodes[0].textContent===Lp.invisibleTimes)}function Dm(t){return t.type===C.INFIXOP&&t.role===I.IMPLICIT}function Pm(t){return t.role===I.NEUTRAL||t.role===I.METRIC}function Bm(t,e){return Pm(t)&&Pm(e)&&rm(t).textContent===rm(e).textContent}function Fm(t){return Pm(t)&&(!t.embellished||t.type!==C.SUPERSCRIPT&&t.type!==C.SUBSCRIPT&&(t.type!==C.TENSOR||t.childNodes[3].type===C.EMPTY&&t.childNodes[4].type===C.EMPTY))}function Um(t){return Pm(t)&&(!t.embellished||t.type!==C.TENSOR||t.childNodes[1].type===C.EMPTY&&t.childNodes[2].type===C.EMPTY)}function qm(t){return[I.ELEMENT,I.NONELEMENT,I.REELEMENT,I.RENONELEMENT].includes(t.role)}const R={factory:null,options:new Zu,updateFactory:function(t){R.factory=t},heuristics:new Map,flags:{combine_juxtaposition:!0,convert_juxtaposition:!0,multioperator:!0},blacklist:{},add:function(t){var e=t.name;R.heuristics.set(e,t),R.flags[e]||(R.flags[e]=!1)},run:function(t,e,i){const s=R.heuristics.get(t);return s&&!R.blacklist[t]&&(R.flags[t]||s.applicable(e))?s.apply(e):i?i(e):e}};class O{static getInstance(){return O.instance=O.instance||new O,O.instance}static tableToMultiline(i){if(!wm(i))return R.run("rewrite_subcases",i,O.classifyTable);i.type=C.MULTILINE;for(let t,e=0;t=i.childNodes[e];e++)O.rowToLine_(t,I.MULTILINE);var t;return 1!==i.childNodes.length||k(t=i.childNodes[0],C.LINE)&&t.contentNodes.length&&hm(t.contentNodes[0],I.LABEL)||!Tm(i.childNodes[0].childNodes[0])||O.tableToMatrixOrVector_(O.rewriteFencedLine_(i)),O.binomialForm_(i),O.classifyMultiline(i),i}static number(t){t.type!==C.UNKNOWN&&t.type!==C.IDENTIFIER||(t.type=C.NUMBER),O.meaningFromContent(t,O.numberRole_),O.exprFont_(t)}static classifyMultiline(t){let e=0;var i=t.childNodes.length;let s;for(;e<i&&(!(s=t.childNodes[e])||!s.childNodes.length);)e++;if(!(e>=i)){const r=s.childNodes[0].role;r!==I.UNKNOWN&&t.childNodes.every(function(t){t=t.childNodes[0];return!t||t.role===r&&(k(t,C.RELATION)||k(t,C.RELSEQ))})&&(t.role=r)}}static classifyTable(t){var e=O.computeColumns_(t);return O.classifyByColumns_(t,e,I.EQUALITY)||O.classifyByColumns_(t,e,I.INEQUALITY,[I.EQUALITY])||O.classifyByColumns_(t,e,I.ARROW)||O.detectCaleyTable(t),t}static detectCaleyTable(t){if(!t.mathmlTree)return!1;const e=t.mathmlTree,i=e.getAttribute("columnlines"),s=e.getAttribute("rowlines");return!(!i||!s||!O.cayleySpacing(i)||!O.cayleySpacing(s)||(t.role=I.CAYLEY,0))}static cayleySpacing(t){const e=t.split(" ");return("solid"===e[0]||"dashed"===e[0])&&e.slice(1).every(t=>"none"===t)}static proof(t,e,i){e=O.separateSemantics(e);return O.getInstance().proof(t,e,i)}static findSemantics(t,e,i){i=null==i?null:i,t=O.getSemantics(t);return!(!t||!t[e]||null!=i&&t[e]!==i)}static getSemantics(t){t=t.getAttribute("semantics");return t?O.separateSemantics(t):null}static removePrefix(t){const[,...e]=t.split("_");return e.join("_")}static separateSemantics(t){const i={};return t.split(";").forEach(function(t){var[t,e]=t.split(":");i[O.removePrefix(t)]=e}),i}static matchSpaces_(i,s){for(let t,e=0;t=s[e];e++){const s=i[e].mathmlTree,n=i[e+1].mathmlTree;var r;s&&n&&((r=s.nextSibling)&&r!==n&&(r=O.getSpacer_(r))&&(t.mathml.push(r),t.mathmlTree=r,t.role=I.SPACE))}}static getSpacer_(t){if(mp(t)===L.MSPACE)return t;for(;em(t)&&1===t.childNodes.length;)if(mp(t=t.childNodes[0])===L.MSPACE)return t;return null}static fenceToPunct_(t){var e=O.FENCE_TO_PUNCT_[t.role];if(e){for(;t.embellished;)t.embellished=C.PUNCTUATION,hm(t,I.SUBSUP)||hm(t,I.UNDEROVER)||(t.role=e),t=t.childNodes[0];t.type=C.PUNCTUATION,t.role=e}}static classifyFunction_(e,i){if(e.type===C.APPL||e.type===C.BIGOP||e.type===C.INTEGRAL)return"";if(i[0]&&i[0].textContent===Lp.functionApplication){O.getInstance().funcAppls[e.id]=i.shift();let t=I.SIMPLEFUNC;return R.run("simple2prefix",e),e.role!==I.PREFIXFUNC&&e.role!==I.LIMFUNC||(t=e.role),O.propagateFunctionRole_(e,t),"prefix"}return O.CLASSIFY_FUNCTION_[e.role]||((i=e).type===C.IDENTIFIER||i.role===I.LATINLETTER||i.role===I.GREEKLETTER||i.role===I.OTHERLETTER?"simple":"")}static propagateFunctionRole_(t,e){t&&t.type!==C.INFIXOP&&(hm(t,I.SUBSUP)||hm(t,I.UNDEROVER)||(t.role=e),O.propagateFunctionRole_(t.childNodes[0],e))}static getFunctionOp_(i,s){if(s(i))return i;for(let t,e=0;t=i.childNodes[e];e++){const i=O.getFunctionOp_(t,s);if(i)return i}return null}static tableToMatrixOrVector_(t){const i=t.childNodes[0];k(i,C.MULTILINE)?O.tableToVector_(t):O.tableToMatrix_(t),t.contentNodes.forEach(i.appendContentNode.bind(i));for(let t,e=0;t=i.childNodes[e];e++)O.assignRoleToRow_(t,O.getComponentRoles_(i));return i.parent=null,i}static tableToVector_(t){const e=t.childNodes[0];e.type=C.VECTOR,1!==e.childNodes.length?O.binomialForm_(e):O.tableToSquare_(t)}static binomialForm_(t){hm(t,I.UNKNOWN)&&2===t.childNodes.length&&(t.role=I.BINOMIAL,t.childNodes[0].role=I.BINOMIAL,t.childNodes[1].role=I.BINOMIAL)}static tableToMatrix_(t){const e=t.childNodes[0];e.type=C.MATRIX,e.childNodes&&0<e.childNodes.length&&e.childNodes[0].childNodes&&e.childNodes.length===e.childNodes[0].childNodes.length?O.tableToSquare_(t):e.childNodes&&1===e.childNodes.length&&(e.role=I.ROWVECTOR)}static tableToSquare_(t){const e=t.childNodes[0];hm(e,I.UNKNOWN)&&(Pm(t)?e.role=I.DETERMINANT:e.role=I.SQUAREMATRIX)}static getComponentRoles_(t){var e=t.role;return e&&e!==I.UNKNOWN?e:t.type.toLowerCase()||I.UNKNOWN}static tableToCases_(i,t){for(let t,e=0;t=i.childNodes[e];e++)O.assignRoleToRow_(t,I.CASES);return i.type=C.CASES,i.appendContentNode(t),wm(i)&&O.binomialForm_(i),i}static rewriteFencedLine_(t){const e=t.childNodes[0],i=t.childNodes[0].childNodes[0],s=t.childNodes[0].childNodes[0].childNodes[0];return i.parent=t.parent,t.parent=i,s.parent=e,i.childNodes=[t],e.childNodes=[s],i}static rowToLine_(e,t){t=t||I.UNKNOWN;k(e,C.ROW)&&(e.type=C.LINE,e.role=t,1===e.childNodes.length&&k(e.childNodes[0],C.CELL)&&(e.childNodes=e.childNodes[0].childNodes,e.childNodes.forEach(function(t){t.parent=e})))}static assignRoleToRow_(t,e){k(t,C.LINE)?t.role=e:k(t,C.ROW)&&(t.role=e,t.childNodes.forEach(function(t){k(t,C.CELL)&&(t.role=e)}))}static nextSeparatorFunction_(t){let e;if(t){if(t.match(/^\s+$/))return null;e=t.replace(/\s/g,"").split("").filter(function(t){return t})}else e=[","];return function(){return 1<e.length?e.shift():e[0]}}static meaningFromContent(t,e){const i=[...t.textContent].filter(t=>t.match(/[^\s]/)),s=i.map(t=>Rp.Meaning.get(t));e(t,i,s)}static numberRole_(t,e,i){if(t.role===I.UNKNOWN)return i.every(function(t){return t.type===C.NUMBER&&t.role===I.INTEGER||t.type===C.PUNCTUATION&&t.role===I.COMMA})?(t.role=I.INTEGER,void("0"===e[0]&&t.addAnnotation("general","basenumber"))):void(i.every(function(t){return t.type===C.NUMBER&&t.role===I.INTEGER||t.type===C.PUNCTUATION})?t.role=I.FLOAT:t.role=I.OTHERNUMBER)}static exprFont_(t){t.font===Cp.UNKNOWN&&O.compSemantics(t,"font",Cp)}static compSemantics(t,i,s){var e=[...t.textContent].map(t=>Rp.Meaning.get(t)).reduce(function(t,e){return t&&e[i]&&e[i]!==s.UNKNOWN&&e[i]!==t?t===s.UNKNOWN?e[i]:null:t},s.UNKNOWN);e&&(t[i]=e)}static purgeFences_(e){const i=e.rel,s=e.comp,r=[],n=[];for(;0<i.length;){const e=i.shift();let t=s.shift();Am(e)?(r.push(e),n.push(t)):(O.fenceToPunct_(e),t.push(e),t=t.concat(s.shift()),s.unshift(t))}return n.push(s.shift()),{rel:r,comp:n}}static rewriteFencedNode_(t){var e=t.contentNodes[0],i=t.contentNodes[1];let s=O.rewriteFence_(t,e);return t.contentNodes[0]=s.fence,s=O.rewriteFence_(s.node,i),t.contentNodes[1]=s.fence,(t.contentNodes[0].parent=t).contentNodes[1].parent=t,s.node.parent=null,s.node}static rewriteFence_(t,e){if(!e.embellished)return{node:t,fence:e};const i=e.childNodes[0],s=O.rewriteFence_(t,i);return k(e,C.SUPERSCRIPT)||k(e,C.SUBSCRIPT)||k(e,C.TENSOR)?(hm(e,I.SUBSUP)||(e.role=t.role),i!==s.node&&(e.replaceChild(i,s.node),i.parent=t),O.propagateFencePointer_(e,i),{node:e,fence:s.fence}):(e.replaceChild(i,s.fence),e.mathmlTree&&-1===e.mathml.indexOf(e.mathmlTree)&&e.mathml.push(e.mathmlTree),{node:s.node,fence:e})}static propagateFencePointer_(t,e){t.fencePointer=e.fencePointer||e.id.toString(),t.embellished=null}static classifyByColumns_(t,e,i,s=[]){const r=[i].concat(s);return!!(3===e.length&&O.testColumns_(e,1,t=>O.isPureRelation_(t,r))||2===e.length&&(O.testColumns_(e,1,t=>O.isEndRelation_(t,r)||O.isPureRelation_(t,r))||O.testColumns_(e,0,t=>O.isEndRelation_(t,r,!0)||O.isPureRelation_(t,r))))&&(t.role=i,!0)}static isEndRelation_(e,t,i){i=i?e.childNodes.length-1:0;return k(e,C.RELSEQ)&&t.some(t=>hm(e,t))&&k(e.childNodes[i],C.EMPTY)}static isPureRelation_(e,t){return k(e,C.RELATION)&&t.some(t=>hm(e,t))}static computeColumns_(e){const s=[];for(let i,t=0;i=e.childNodes[t];t++)for(let t,e=0;t=i.childNodes[e];e++)s[e]?s[e].push(t):s[e]=[t];return s}static testColumns_(t,e,i){const s=t[e];return!!s&&s.some(function(t){return t.childNodes.length&&i(t.childNodes[0])})&&s.every(function(t){return!t.childNodes.length||i(t.childNodes[0])})}setNodeFactory(t){O.getInstance().factory_=t,R.updateFactory(O.getInstance().factory_)}getNodeFactory(){return O.getInstance().factory_}identifierNode(t,e,i){if("MathML-Unit"===i)t.type=C.IDENTIFIER,t.role=I.UNIT;else if(!e&&1===t.textContent.length&&(t.role===I.INTEGER||t.role===I.LATINLETTER||t.role===I.GREEKLETTER)&&t.font===Cp.NORMAL)return t.font=Cp.ITALIC,R.run("simpleNamedFunction",t);return t.type===C.UNKNOWN&&(t.type=C.IDENTIFIER),O.exprFont_(t),R.run("simpleNamedFunction",t)}implicitNode(t){if(t=O.getInstance().getMixedNumbers_(t),1===(t=O.getInstance().combineUnits_(t)).length)return t[0];t=O.getInstance().implicitNode_(t);return R.run("combine_juxtaposition",t)}text(t,e){return O.exprFont_(t),t.type=C.TEXT,e===L.ANNOTATIONXML?t.role=I.ANNOTATION:e===L.MS?t.role=I.STRING:e===L.MSPACE||t.textContent.match(/^\s*$/)?t.role=I.SPACE:/\s/.exec(t.textContent)?t.role=I.TEXT:t.role=I.UNKNOWN,t}row(t){return 0===(t=t.filter(function(t){return!k(t,C.EMPTY)})).length?O.getInstance().factory_.makeEmptyNode():(t=O.getInstance().getFencesInRow_(t),t=O.getInstance().tablesInRow(t),t=O.getInstance().getPunctuationInRow_(t),t=O.getInstance().getTextInRow_(t),t=O.getInstance().getFunctionsInRow_(t),O.getInstance().relationsInRow_(t))}limitNode(t,e){if(!e.length)return O.getInstance().factory_.makeEmptyNode();let i,s=e[0],r=C.UNKNOWN;if(!e[1])return s;if(R.run("op_with_limits",e),function t(e){return k(e,C.LARGEOP)||k(e,C.LIMBOTH)||k(e,C.LIMLOWER)||k(e,C.LIMUPPER)||k(e,C.FUNCTION)&&hm(e,I.LIMFUNC)||(k(e,C.OVERSCORE)||k(e,C.UNDERSCORE))&&t(e.childNodes[0])}(s)){var n=(i=O.MML_TO_LIMIT_[t]).length;if(r=i.type,e=e.slice(0,i.length+1),1===n&&dm(e[1])||2===n&&dm(e[1])&&dm(e[2]))return i=O.MML_TO_BOUNDS_[t],O.getInstance().accentNode_(s,e,i.type,i.length,i.accent);if(2===n){if(dm(e[1]))return s=O.getInstance().accentNode_(s,[s,e[1]],{MSUBSUP:C.SUBSCRIPT,MUNDEROVER:C.UNDERSCORE}[t],1,!0),e[2]?O.getInstance().makeLimitNode_(s,[s,e[2]],null,C.LIMUPPER):s;if(e[2]&&dm(e[2]))return s=O.getInstance().accentNode_(s,[s,e[2]],{MSUBSUP:C.SUPERSCRIPT,MUNDEROVER:C.OVERSCORE}[t],1,!0),O.getInstance().makeLimitNode_(s,[s,e[1]],null,C.LIMLOWER);e[n]||(r=C.LIMLOWER)}return O.getInstance().makeLimitNode_(s,e,null,r)}return i=O.MML_TO_BOUNDS_[t],O.getInstance().accentNode_(s,e,i.type,i.length,i.accent)}tablesInRow(t){let i=am(t,_m),s=[];for(let t,e=0;t=i.rel[e];e++)(s=s.concat(i.comp.shift())).push(O.tableToMatrixOrVector_(t));s=s.concat(i.comp.shift()),i=am(s,vm),s=[];for(let t,e=0;t=i.rel[e];e++){const n=i.comp.shift();0<(r=n).length&&hm(r[r.length-1],I.OPENFENCE)&&O.tableToCases_(t,n.pop()),(s=s.concat(n)).push(t)}var r;return s.concat(i.comp.shift())}mfenced(e,i,t,s){if(t&&0<s.length){const e=O.nextSeparatorFunction_(t),i=[s.shift()];s.forEach(t=>{i.push(O.getInstance().factory_.makeContentNode(e())),i.push(t)}),s=i}return e&&i?O.getInstance().horizontalFencedNode_(O.getInstance().factory_.makeContentNode(e),O.getInstance().factory_.makeContentNode(i),s):(e&&s.unshift(O.getInstance().factory_.makeContentNode(e)),i&&s.push(O.getInstance().factory_.makeContentNode(i)),O.getInstance().row(s))}fractionLikeNode(t,e,i,s){let r;if(s||!function(t){if(t){if(["negativeveryverythinmathspace","negativeverythinmathspace","negativethinmathspace","negativemediummathspace","negativethickmathspace","negativeverythickmathspace","negativeveryverythickmathspace"].includes(t))return 1;t=t.match(/[0-9.]+/);return t&&0===parseFloat(t[0])}}(i))return r=O.getInstance().fractionNode_(t,e),s&&r.addAnnotation("general","bevelled"),r;{const i=O.getInstance().factory_.makeBranchNode(C.LINE,[t],[]),s=O.getInstance().factory_.makeBranchNode(C.LINE,[e],[]);return r=O.getInstance().factory_.makeBranchNode(C.MULTILINE,[i,s],[]),O.binomialForm_(r),O.classifyMultiline(r),r}}tensor(t,e,i,s,r){const n=O.getInstance().factory_.makeBranchNode(C.TENSOR,[t,O.getInstance().scriptNode_(e,I.LEFTSUB),O.getInstance().scriptNode_(i,I.LEFTSUPER),O.getInstance().scriptNode_(s,I.RIGHTSUB),O.getInstance().scriptNode_(r,I.RIGHTSUPER)],[]);return n.role=t.role,n.embellished=bm(t),n}pseudoTensor(t,e,i){var s=t=>!k(t,C.EMPTY),r=e.filter(s).length,s=i.filter(s).length;if(!r&&!s)return t;const n=r?s?L.MSUBSUP:L.MSUB:L.MSUP,a=[t];return r&&a.push(O.getInstance().scriptNode_(e,I.RIGHTSUB,!0)),s&&a.push(O.getInstance().scriptNode_(i,I.RIGHTSUPER,!0)),O.getInstance().limitNode(n,a)}font(t){return O.MATHJAX_FONTS[t]||t}proof(t,e,i){if(e.inference||e.axiom||console.log("Noise"),e.axiom){const e=O.getInstance().cleanInference(t.childNodes),s=e.length?O.getInstance().factory_.makeBranchNode(C.INFERENCE,i(e),[]):O.getInstance().factory_.makeEmptyNode();return s.role=I.AXIOM,s.mathmlTree=t,s}const s=O.getInstance().inference(t,e,i);return e.proof&&(s.role=I.PROOF,s.childNodes[0].role=I.FINAL),s}inference(t,e,i){if(e.inferenceRule){const e=O.getInstance().getFormulas(t,[],i);return O.getInstance().factory_.makeBranchNode(C.INFERENCE,[e.conclusion,e.premises],[])}const s=e.labelledRule,r=cp(t.childNodes),n=[],a=("left"!==s&&"both"!==s||n.push(O.getInstance().getLabel(t,r,i,I.LEFT)),"right"!==s&&"both"!==s||n.push(O.getInstance().getLabel(t,r,i,I.RIGHT)),O.getInstance().getFormulas(t,r,i)),o=O.getInstance().factory_.makeBranchNode(C.INFERENCE,[a.conclusion,a.premises],n);return o.mathmlTree=t,o}getLabel(t,e,i,s){const r=O.getInstance().findNestedRow(e,"prooflabel",s),n=O.getInstance().factory_.makeBranchNode(C.RULELABEL,i(cp(r.childNodes)),[]);return n.role=s,n.mathmlTree=r,n}getFormulas(t,e,i){const s=e.length?O.getInstance().findNestedRow(e,"inferenceRule"):t,r="up"===O.getSemantics(s).inferenceRule,n=r?s.childNodes[1]:s.childNodes[0],a=r?s.childNodes[0]:s.childNodes[1],o=n.childNodes[0].childNodes[0],l=cp(o.childNodes[0].childNodes),c=[];let h=1;for(const t of l)h%2&&c.push(t.childNodes[0]),h++;const d=i(c),u=i(cp(a.childNodes[0].childNodes))[0],p=O.getInstance().factory_.makeBranchNode(C.PREMISES,d,[]),m=(p.mathmlTree=o,O.getInstance().factory_.makeBranchNode(C.CONCLUSION,[u],[]));return m.mathmlTree=a.childNodes[0].childNodes[0],{conclusion:m,premises:p}}findNestedRow(t,e,i){return O.getInstance().findNestedRow_(t,e,0,i)}cleanInference(t){return cp(t).filter(function(t){return"MSPACE"!==mp(t)})}operatorNode(t){return t.type===C.UNKNOWN&&(t.type=C.OPERATOR),R.run("multioperator",t)}constructor(){this.funcAppls={},this.splitRoles=new Map([[I.SUBTRACTION,I.NEGATIVE],[I.ADDITION,I.POSITIVE]]),this.splitOps=["âˆ’","-","â€","â€‘","+"],this.factory_=new lm,R.updateFactory(this.factory_)}implicitNode_(t){const e=O.getInstance().factory_.makeMultipleContentNodes(t.length-1,Lp.invisibleTimes),i=(O.matchSpaces_(t,e),O.getInstance().infixNode_(t,e[0]));return i.role=I.IMPLICIT,e.forEach(function(t){t.parent=i}),i.contentNodes=e,i}infixNode_(t,e){let i=O.getInstance().factory_.makeBranchNode(C.INFIXOP,t,[e],rm(e).textContent);return i.role=e.role,i=R.run("propagateInterval",i),R.run("propagateSimpleFunction",i)}explicitMixed_(i){var s=am(i,function(t){return t.textContent===Lp.invisiblePlus});if(!s.rel.length)return i;let r=[];for(let t,e=0;t=s.rel[e];e++){const n=s.comp[e],a=s.comp[e+1],o=n.length-1;if(n[o]&&a[0]&&k(n[o],C.NUMBER)&&!hm(n[o],I.MIXED)&&k(a[0],C.FRACTION)){const i=O.getInstance().factory_.makeBranchNode(C.NUMBER,[n[o],a[0]],[]);i.role=I.MIXED,(r=r.concat(n.slice(0,o))).push(i),a.shift()}else(r=r.concat(n)).push(t)}return r.concat(s.comp[s.comp.length-1])}concatNode_(t,e,i){if(0===e.length)return t;const s=e.map(function(t){return rm(t).textContent}).join(" "),r=O.getInstance().factory_.makeBranchNode(i,[t],e,s);return 1<e.length&&(r.role=I.MULTIOP),r}prefixNode_(t,e){const i=this.splitSingles(e);let s=t;for(;0<i.length;){const t=i.pop();s=O.getInstance().concatNode_(s,t,C.PREFIXOP),1===t.length&&-1!==this.splitOps.indexOf(t[0].textContent)&&(s.role=this.splitRoles.get(t[0].role))}return s}splitSingles(t){let e=0;const i=[];let s=0;for(;s<t.length;){var r=t[s];!this.splitRoles.has(r.role)||t[s-1]&&t[s-1].role===r.role||t[s+1]&&t[s+1].role===r.role||-1===this.splitOps.indexOf(r.textContent)||(i.push(t.slice(e,s)),i.push(t.slice(s,s+1)),e=s+1),s++}return e<s&&i.push(t.slice(e,s)),i}postfixNode_(t,e){return e.length?O.getInstance().concatNode_(t,e,C.POSTFIXOP):t}combineUnits_(e){const i=am(e,function(t){return!hm(t,I.UNIT)});if(e.length===i.rel.length)return i.rel;const s=[];var r,n;do{const e=i.comp.shift();r=i.rel.shift();let t=null;(n=s.pop())&&(e.length&&km(n)?e.unshift(n):s.push(n)),1===e.length&&(t=e.pop()),1<e.length&&((t=O.getInstance().implicitNode_(e)).role=I.UNIT),t&&s.push(t),r&&s.push(r)}while(r);return s}getMixedNumbers_(t){const i=am(t,function(t){return k(t,C.FRACTION)&&hm(t,I.VULGAR)});if(!i.rel.length)return t;let s=[];for(let t,e=0;t=i.rel[e];e++){const r=i.comp[e],n=r.length-1;if(r[n]&&k(r[n],C.NUMBER)&&(hm(r[n],I.INTEGER)||hm(r[n],I.FLOAT))){const i=O.getInstance().factory_.makeBranchNode(C.NUMBER,[r[n],t],[]);i.role=I.MIXED,(s=s.concat(r.slice(0,n))).push(i)}else(s=s.concat(r)).push(t)}return s.concat(i.comp[i.comp.length-1])}getTextInRow_(t){if(0===t.length)return t;if(1===t.length)return t[0].type===C.TEXT&&t[0].role===I.UNKNOWN&&(t[0].role=I.ANNOTATION),t;const{rel:i,comp:s}=am(t,t=>k(t,C.TEXT));if(0===i.length)return t;const r=[];let n=s.shift();for(;0<i.length;){let t=i.shift(),e=s.shift();const o=[];for(;!e.length&&i.length&&t.role!==I.SPACE&&i[0].role!==I.SPACE;)o.push(t),t=i.shift(),e=s.shift();if(o.length){n.length&&r.push(O.getInstance().row(n)),o.push(t);const i=O.getInstance().dummyNode_(o);r.push(i),n=e}else{var a;n=t.role!==I.UNKNOWN?(n.length&&r.push(O.getInstance().row(n)),r.push(t),e):(a=Rp.Meaning.get(t.textContent)).type!==C.PUNCTUATION?a.type===C.UNKNOWN?(O.meaningFromContent(t,(t,e,i)=>{if(t.role===I.UNKNOWN){if(O.numberRole_(t,e,i),t.role===I.OTHERNUMBER)return i.some(t=>t.type!==C.NUMBER&&t.type!==C.IDENTIFIER)?(t.type=C.TEXT,void(t.role=I.ANNOTATION)):void(t.role=I.UNKNOWN);t.type=C.NUMBER}}),t.type!==C.TEXT||t.role===I.UNKNOWN?(t.role===I.UNKNOWN&&(i.length||e.length?e.length&&e[0].type===C.FENCED?(t.type=C.FUNCTION,t.role=I.PREFIXFUNC):t.role=I.TEXT:(t.type=C.IDENTIFIER,t.role=I.UNIT)),n.push(t),n.concat(e)):(n.length&&r.push(O.getInstance().row(n)),r.push(t),e)):(t.type=a.type,t.role=a.role,t.font=a.font,t.addAnnotation("general","text"),n.push(t),n.concat(e)):(t.role=a.role,t.font=a.font,n.length&&r.push(O.getInstance().row(n)),r.push(t),e)}}return 0<n.length&&r.push(O.getInstance().row(n)),1<r.length?[O.getInstance().dummyNode_(r)]:r}relationsInRow_(t){const e=am(t,Nm),i=e.rel[0];if(!i)return O.getInstance().operationsInRow_(t);if(1===t.length)return t[0];t=e.comp.map(O.getInstance().operationsInRow_);let s;return e.rel.some(function(t){return!t.equals(i)})?(s=O.getInstance().factory_.makeBranchNode(C.MULTIREL,t,e.rel),e.rel.every(function(t){return t.role===i.role})&&(s.role=i.role)):(s=O.getInstance().factory_.makeBranchNode(C.RELSEQ,t,e.rel,rm(i).textContent)).role=i.role,s}operationsInRow_(t){if(0===t.length)return O.getInstance().factory_.makeEmptyNode();if(1===(t=O.getInstance().explicitMixed_(t)).length)return t[0];const e=[];for(;0<t.length&&Em(t[0]);)e.push(t.shift());if(0===t.length)return O.getInstance().prefixNode_(e.pop(),e);if(1===t.length)return O.getInstance().prefixNode_(t[0],e);var i=nm(t=R.run("convert_juxtaposition",t),Em),s=O.getInstance().wrapFactor(e,i);return O.getInstance().addFactor(s,i)}wrapPostfix(t){var e;(null==(e=t.div)?void 0:e.role)===I.POSTFIXOP&&(t.tail.length&&t.tail[0].type!==C.OPERATOR?t.div.role=I.DIVISION:(t.head=[O.getInstance().postfixNode_(O.getInstance().implicitNode(t.head),[t.div])],t.div=t.tail.shift(),O.getInstance().wrapPostfix(t)))}wrapFactor(t,e){return O.getInstance().wrapPostfix(e),O.getInstance().prefixNode_(O.getInstance().implicitNode(e.head),t)}addFactor(t,e){return e.div?O.getInstance().operationsTree_(e.tail,t,e.div):(Om(t)&&(t.role=I.UNIT),t)}operationsTree_(t,e,i,s=[]){if(0===t.length){if(s.unshift(i),e.type!==C.INFIXOP)return O.getInstance().postfixNode_(e,s);{const t=O.getInstance().postfixNode_(e.childNodes.pop(),s);return e.appendChild(t),e}}t=nm(t,Em);if(0===t.head.length)return s.push(t.div),O.getInstance().operationsTree_(t.tail,e,i,s);s=O.getInstance().wrapFactor(s,t),e=O.getInstance().appendOperand_(e,i,s);return O.getInstance().addFactor(e,t)}appendOperand_(t,e,i){return t.type!==C.INFIXOP?O.getInstance().infixNode_([t,i],e):O.getInstance().appendDivisionOp_(t,e,i)||(O.getInstance().appendExistingOperator_(t,e,i)?t:e.role===I.MULTIPLICATION?O.getInstance().appendMultiplicativeOp_(t,e,i):O.getInstance().appendAdditiveOp_(t,e,i))}appendDivisionOp_(t,e,i){return e.role===I.DIVISION?Mm(t)?O.getInstance().infixNode_([t,i],e):O.getInstance().appendLastOperand_(t,e,i):t.role===I.DIVISION?O.getInstance().infixNode_([t,i],e):null}appendLastOperand_(t,e,i){let s=t,r=t.childNodes[t.childNodes.length-1];for(;r&&r.type===C.INFIXOP&&!Mm(r);)r=(s=r).childNodes[t.childNodes.length-1];i=O.getInstance().infixNode_([s.childNodes.pop(),i],e);return s.appendChild(i),t}appendMultiplicativeOp_(t,e,i){if(Mm(t))return O.getInstance().infixNode_([t,i],e);let s=t,r=t.childNodes[t.childNodes.length-1];for(;r&&r.type===C.INFIXOP&&!Mm(r);)r=(s=r).childNodes[t.childNodes.length-1];i=O.getInstance().infixNode_([s.childNodes.pop(),i],e);return s.appendChild(i),t}appendAdditiveOp_(t,e,i){return O.getInstance().infixNode_([t,i],e)}appendExistingOperator_(t,e,i){return!(!t||t.type!==C.INFIXOP||Mm(t))&&(t.contentNodes[0].equals(e)?(t.appendContentNode(e),t.appendChild(i),!0):O.getInstance().appendExistingOperator_(t.childNodes[t.childNodes.length-1],e,i))}getFencesInRow_(t){let e=am(t,xm);t=(e=O.purgeFences_(e)).comp.shift();return O.getInstance().fences_(e.rel,e.comp,[],[t])}fences_(t,e,i,s){if(0===t.length&&0===i.length)return s[0];const r=R.run("bracketed_interval",[t[0],t[1],...e[0]||[]],()=>null);if(r){t.shift(),t.shift(),e.shift();const n=s.pop()||[];return s.push([...n,r,...e.shift()]),O.getInstance().fences_(t,e,i,s)}const n=t=>hm(t,I.OPEN);if(0===t.length){const t=s.shift();for(;0<i.length;){if(n(i[0])){const e=i.shift();O.fenceToPunct_(e),t.push(e)}else{const e=nm(i,n),r=e.head.length-1,a=O.getInstance().neutralFences_(e.head,s.slice(0,r));s=s.slice(r),t.push(...a),e.div&&e.tail.unshift(e.div),i=e.tail}t.push(...s.shift())}return t}const a=i[i.length-1],o=t[0].role;if(o===I.OPEN||Pm(t[0])&&(!a||!Bm(t[0],a))){i.push(t.shift());const r=e.shift();return r&&s.push(r),O.getInstance().fences_(t,e,i,s)}if(a&&o===I.CLOSE&&a.role===I.OPEN){const r=O.getInstance().horizontalFencedNode_(i.pop(),t.shift(),s.pop());return s.push(s.pop().concat([r],e.shift())),O.getInstance().fences_(t,e,i,s)}if(a&&Bm(t[0],a)){if(!Fm(a)||!Um(t[0])){i.push(t.shift());const r=e.shift();return r&&s.push(r),O.getInstance().fences_(t,e,i,s)}const r=O.getInstance().horizontalFencedNode_(i.pop(),t.shift(),s.pop());return s.push(s.pop().concat([r],e.shift())),O.getInstance().fences_(t,e,i,s)}if(a&&o===I.CLOSE&&Pm(a)&&i.some(n)){const r=nm(i,n,!0),a=s.pop(),o=s.length-r.tail.length+1,c=O.getInstance().neutralFences_(r.tail,s.slice(o));s=s.slice(0,o);var l=O.getInstance().horizontalFencedNode_(r.div,t.shift(),s.pop().concat(c,a));return s.push(s.pop().concat([l],e.shift())),O.getInstance().fences_(t,e,r.head,s)}const c=t.shift();return O.fenceToPunct_(c),s.push(s.pop().concat([c],e.shift())),O.getInstance().fences_(t,e,i,s)}neutralFences_(t,e){if(0===t.length)return t;if(1===t.length)return O.fenceToPunct_(t[0]),t;const i=t.shift();if(!Fm(i)){O.fenceToPunct_(i);const s=e.shift();return s.unshift(i),s.concat(O.getInstance().neutralFences_(t,e))}const s=nm(t,function(t){return Bm(t,i)});if(!s.div){O.fenceToPunct_(i);const s=e.shift();return s.unshift(i),s.concat(O.getInstance().neutralFences_(t,e))}if(!Um(s.div))return O.fenceToPunct_(s.div),t.unshift(i),O.getInstance().neutralFences_(t,e);const r=O.getInstance().combineFencedContent_(i,s.div,s.head,e);if(0<s.tail.length){const t=r.shift(),e=O.getInstance().neutralFences_(s.tail,r);return t.concat(e)}return r[0]}combineFencedContent_(t,e,i,s){if(0===i.length){const i=O.getInstance().horizontalFencedNode_(t,e,s.shift());return 0<s.length?s[0].unshift(i):s=[[i]],s}const r=s.shift(),n=i.length-1,a=s.slice(0,n),o=(s=s.slice(n)).shift(),l=O.getInstance().neutralFences_(i,a);r.push(...l),r.push(...o);i=O.getInstance().horizontalFencedNode_(t,e,r);return 0<s.length?s[0].unshift(i):s=[[i]],s}horizontalFencedNode_(t,e,i){i=O.getInstance().row(i);let s=O.getInstance().factory_.makeBranchNode(C.FENCED,[i],[t,e]);return t.role===I.OPEN?(O.getInstance().classifyHorizontalFence_(s),s=R.run("propagateComposedFunction",s)):s.role=t.role,s=R.run("detect_cycle",s),O.rewriteFencedNode_(s)}classifyHorizontalFence_(t){if(R.run("interval_heuristic",t),t.role!==I.INTERVAL){t.role=I.LEFTRIGHT;var e=t.childNodes;if((s=(i=t).contentNodes[0])&&-1!==["{","ï¹›","ï½›"].indexOf(s.textContent)&&(s=i.contentNodes[1])&&-1!==["}","ï¹œ","ï½"].indexOf(s.textContent)&&!(1<e.length))if(0===e.length||e[0].type===C.EMPTY)t.role=I.SETEMPTY;else{var i=e[0].type;if(1===e.length&&function t(e){var i=e.type;return-1===Lm.indexOf(i)&&(i!==C.INFIXOP||e.role===I.IMPLICIT)&&(i===C.FENCED?e.role!==I.LEFTRIGHT||t(e.childNodes[0]):-1===Sm.indexOf(i)||t(e.childNodes[0]))}(e[0]))t.role=I.SETSINGLE;else{var s=e[0].role;if(i===C.PUNCTUATED&&s===I.SEQUENCE){if(e[0].contentNodes[0].role!==I.COMMA)return 1!==e[0].contentNodes.length||e[0].contentNodes[0].role!==I.VBAR&&e[0].contentNodes[0].role!==I.COLON?void 0:(t.role=I.SETEXT,void O.getInstance().setExtension_(t));t.role=I.SETCOLLECT}}}}}setExtension_(t){const e=t.childNodes[0].childNodes[0];e&&e.type===C.INFIXOP&&1===e.contentNodes.length&&qm(e.contentNodes[0])&&(e.addAnnotation("set","intensional"),e.contentNodes[0].addAnnotation("set","intensional"))}getPunctuationInRow_(i){if(i.length<=1)return i;const s=t=>{t=t.type;return"punctuation"===t||"text"===t||"operator"===t||"relation"===t},e=am(i,function(t){if(!ym(t))return!1;if(ym(t)&&!hm(t,I.ELLIPSIS))return!0;t=i.indexOf(t);if(0===t)return!i[1]||!s(i[1]);var e=i[t-1];if(t===i.length-1)return!s(e);t=i[t+1];return!s(e)||!s(t)});if(0===e.rel.length)return i;let r=[],n=e.comp.shift(),a=(0<n.length&&r.push(O.getInstance().row(n)),0);for(;0<e.comp.length;){let t=[];const s=a;for(;t.push(e.rel[a++]),n=e.comp.shift(),e.rel[a]&&n&&0===n.length;);t=R.run("ellipses",t),e.rel.splice(s,a-s,...t),a=s+t.length,r=r.concat(t),n&&0<n.length&&r.push(O.getInstance().row(n))}return 1===r.length&&1===e.rel.length?r:[O.getInstance().punctuatedNode_(r,e.rel)]}punctuatedNode_(e,t){const i=O.getInstance().factory_.makeBranchNode(C.PUNCTUATED,e,t);if(t.length===e.length){const e=t[0].role;if(e!==I.UNKNOWN&&t.every(function(t){return t.role===e}))return i.role=e,i}var s=t[0];return Cm(e,t,0)?i.role=s.childNodes.length&&!s.embellished?s.role:I.STARTPUNCT:Cm(e,t,e.length-1)?i.role=s.childNodes.length&&!s.embellished?s.role:I.ENDPUNCT:t.every(t=>hm(t,I.DUMMY))?i.role=I.TEXT:t.every(t=>hm(t,I.SPACE))?i.role=I.SPACE:i.role=I.SEQUENCE,i}dummyNode_(t){const e=O.getInstance().factory_.makeMultipleContentNodes(t.length-1,Lp.invisibleComma);return e.forEach(function(t){t.role=I.DUMMY}),O.getInstance().punctuatedNode_(t,e)}accentRole_(t,e){if(!dm(t))return!1;var i=t.textContent,i=Rp.Secondary.get(i,Ip.BAR)||Rp.Secondary.get(i,Ip.TILDE)||t.role;return t.role=e===C.UNDERSCORE?I.UNDERACCENT:I.OVERACCENT,t.addAnnotation("accent",i),!0}accentNode_(t,e,i,s,r){var n=(e=e.slice(0,s+1))[1],a=e[2];let o;if(!r&&a&&((o=O.getInstance().factory_.makeBranchNode(C.SUBSCRIPT,[t,n],[])).role=I.SUBSUP,e=[o,a],i=C.SUPERSCRIPT),r){const s=O.getInstance().accentRole_(n,i);a&&(i=O.getInstance().accentRole_(a,C.OVERSCORE)&&!s?(e=[o=O.getInstance().factory_.makeBranchNode(C.OVERSCORE,[t,a],[]),n],C.UNDERSCORE):(e=[o=O.getInstance().factory_.makeBranchNode(C.UNDERSCORE,[t,n],[]),a],C.OVERSCORE),o.role=I.UNDEROVER)}return O.getInstance().makeLimitNode_(t,e,o,i)}makeLimitNode_(t,e,i,s){if(s===C.LIMUPPER&&t.type===C.LIMLOWER)return t.childNodes.push(e[1]),(e[1].parent=t).type=C.LIMBOTH,t;if(s===C.LIMLOWER&&t.type===C.LIMUPPER)return t.childNodes.splice(1,-1,e[1]),(e[1].parent=t).type=C.LIMBOTH,t;const r=O.getInstance().factory_.makeBranchNode(s,e,[]),n=bm(t);return i&&(i.embellished=n),r.embellished=n,r.role=t.role,r}getFunctionsInRow_(t,e){const i=e||[];if(0===t.length)return i;var e=t.shift(),s=O.classifyFunction_(e,t);if(!s)return i.push(e),O.getInstance().getFunctionsInRow_(t,i);t=O.getInstance().getFunctionsInRow_(t,[]),e=O.getInstance().getFunctionArgs_(e,t,s);return i.concat(e)}getFunctionArgs_(t,e,i){let s,r,n;switch(i){case"integral":{const i=O.getInstance().getIntegralArgs_(e);if(!i.intvar&&!i.integrand.length)return i.rest.unshift(t),i.rest;const s=O.getInstance().row(i.integrand);return n=O.getInstance().integralNode_(t,s,i.intvar),R.run("intvar_from_fraction",n),i.rest.unshift(n),i.rest}case"prefix":if(e[0]&&e[0].type===C.FENCED){const i=e.shift();return Pm(i)||(i.role=I.LEFTRIGHT),n=O.getInstance().functionNode_(t,i),e.unshift(n),e}if((s=nm(e,um)).head.length)r=O.getInstance().row(s.head),s.div&&s.tail.unshift(s.div);else{if(!s.div||!k(s.div,C.APPL))return e.unshift(t),e;r=s.div}return n=O.getInstance().functionNode_(t,r),s.tail.unshift(n),s.tail;case"bigop":return(s=nm(e,pm)).head.length?(r=O.getInstance().row(s.head),n=O.getInstance().bigOpNode_(t,r),s.div&&s.tail.unshift(s.div),s.tail.unshift(n),s.tail):(e.unshift(t),e);default:{if(0===e.length)return[t];const i=e[0];return i.type===C.FENCED&&!Pm(i)&&function(){var t=i.childNodes;if(0===t.length)return 1;if(!(1<t.length)){const e=t[0];if(e.type===C.INFIXOP){if(e.role!==I.IMPLICIT)return;if(e.childNodes.some(t=>k(t,C.INFIXOP)))return}return 1}}()?(i.role=I.LEFTRIGHT,O.propagateFunctionRole_(t,I.SIMPLEFUNC),n=O.getInstance().functionNode_(t,e.shift()),e.unshift(n)):e.unshift(t),e}}}getIntegralArgs_(t,e=[]){if(0===t.length){const t=nm(e,pm);return t.div&&t.tail.unshift(t.div),{integrand:t.head,intvar:null,rest:t.tail}}R.run("intvar_from_implicit",t);const i=t[0];if(fm(i)){const{integrand:i,rest:s}=O.getInstance().getIntegralArgs_(e);return{integrand:i,intvar:null,rest:s.concat(t)}}if(gm(i))return i.role=I.INTEGRAL,{integrand:e,intvar:i,rest:t.slice(1)};if(t[1]&&mm(i,t[1])){const r=O.getInstance().prefixNode_(t[1],[i]);return r.role=I.INTEGRAL,{integrand:e,intvar:r,rest:t.slice(2)}}return e.push(t.shift()),O.getInstance().getIntegralArgs_(t,e)}functionNode_(t,e){const i=O.getInstance().factory_.makeContentNode(Lp.functionApplication),s=O.getInstance().funcAppls[t.id];s&&(i.mathmlTree=s.mathmlTree,i.mathml=s.mathml,i.annotation=s.annotation,i.attributes=s.attributes,delete O.getInstance().funcAppls[t.id]),i.type=C.PUNCTUATION,i.role=I.APPLICATION;var r=O.getFunctionOp_(t,function(t){return k(t,C.FUNCTION)||k(t,C.IDENTIFIER)&&hm(t,I.SIMPLEFUNC)});return O.getInstance().functionalNode_(C.APPL,[t,e],r,[i])}bigOpNode_(t,e){var i=O.getFunctionOp_(t,t=>k(t,C.LARGEOP));return O.getInstance().functionalNode_(C.BIGOP,[t,e],i,[])}integralNode_(t,e,i){e=e||O.getInstance().factory_.makeEmptyNode(),i=i||O.getInstance().factory_.makeEmptyNode();var s=O.getFunctionOp_(t,t=>k(t,C.LARGEOP));return O.getInstance().functionalNode_(C.INTEGRAL,[t,e,i],s,[])}functionalNode_(t,e,i,s){var r=e[0];let n;i&&(n=i.parent,s.push(i));const a=O.getInstance().factory_.makeBranchNode(t,e,s);return a.role=r.role,n&&(i.parent=n),a}fractionNode_(t,e){const i=O.getInstance().factory_.makeBranchNode(C.FRACTION,[t,e],[]);return i.role=i.childNodes.every(function(t){return k(t,C.NUMBER)&&hm(t,I.INTEGER)})?I.VULGAR:i.childNodes.every(Rm)?I.UNIT:I.DIVISION,R.run("propagateSimpleFunction",i)}scriptNode_(t,e,i){let s;switch(t.length){case 0:s=O.getInstance().factory_.makeEmptyNode();break;case 1:if(s=t[0],i)return s;break;default:s=O.getInstance().dummyNode_(t)}return s.role=e,s}findNestedRow_(i,s,r,n){if(3<r)return null;for(let t,e=0;t=i[e];e++){const i=mp(t);if(i!==L.MSPACE){if(i===L.MROW)return O.getInstance().findNestedRow_(cp(t.childNodes),s,r+1,n);if(O.findSemantics(t,s,n))return t}}return null}}O.FENCE_TO_PUNCT_={[I.METRIC]:I.METRIC,[I.NEUTRAL]:I.VBAR,[I.OPEN]:I.OPENFENCE,[I.CLOSE]:I.CLOSEFENCE},O.MML_TO_LIMIT_={[L.MSUB]:{type:C.LIMLOWER,length:1},[L.MUNDER]:{type:C.LIMLOWER,length:1},[L.MSUP]:{type:C.LIMUPPER,length:1},[L.MOVER]:{type:C.LIMUPPER,length:1},[L.MSUBSUP]:{type:C.LIMBOTH,length:2},[L.MUNDEROVER]:{type:C.LIMBOTH,length:2}},O.MML_TO_BOUNDS_={[L.MSUB]:{type:C.SUBSCRIPT,length:1,accent:!1},[L.MSUP]:{type:C.SUPERSCRIPT,length:1,accent:!1},[L.MSUBSUP]:{type:C.SUBSCRIPT,length:2,accent:!1},[L.MUNDER]:{type:C.UNDERSCORE,length:1,accent:!0},[L.MOVER]:{type:C.OVERSCORE,length:1,accent:!0},[L.MUNDEROVER]:{type:C.UNDERSCORE,length:2,accent:!0}},O.CLASSIFY_FUNCTION_={[I.INTEGRAL]:"integral",[I.SUM]:"bigop",[I.PREFIXFUNC]:"prefix",[I.LIMFUNC]:"prefix",[I.SIMPLEFUNC]:"prefix",[I.COMPFUNC]:"prefix"},O.MATHJAX_FONTS={"-tex-caligraphic":Cp.CALIGRAPHIC,"-tex-caligraphic-bold":Cp.CALIGRAPHICBOLD,"-tex-calligraphic":Cp.CALIGRAPHIC,"-tex-calligraphic-bold":Cp.CALIGRAPHICBOLD,"-tex-oldstyle":Cp.OLDSTYLE,"-tex-oldstyle-bold":Cp.OLDSTYLEBOLD,"-tex-mathit":Cp.ITALIC};class jm extends class{constructor(t){this.type=t,this.factory_=new lm}getFactory(){return this.factory_}setFactory(t){this.factory_=t}getType(){return this.type}parseList(i){const s=[];for(let t,e=0;t=i[e];e++)s.push(this.parse(t));return s}}{static getAttribute_(t,e,i){if(!t.hasAttribute(e))return i;const s=t.getAttribute(e);return s.match(/^\s*$/)?null:s}constructor(t){super("MathML"),this.options=t,R.options=t,this.parseMap_=new Map([[L.SEMANTICS,this.semantics_.bind(this)],[L.MATH,this.rows_.bind(this)],[L.MROW,this.rows_.bind(this)],[L.MPADDED,this.rows_.bind(this)],[L.MSTYLE,this.rows_.bind(this)],[L.MFRAC,this.fraction_.bind(this)],[L.MSUB,this.limits_.bind(this)],[L.MSUP,this.limits_.bind(this)],[L.MSUBSUP,this.limits_.bind(this)],[L.MOVER,this.limits_.bind(this)],[L.MUNDER,this.limits_.bind(this)],[L.MUNDEROVER,this.limits_.bind(this)],[L.MROOT,this.root_.bind(this)],[L.MSQRT,this.sqrt_.bind(this)],[L.MTABLE,this.table_.bind(this)],[L.MLABELEDTR,this.tableLabeledRow_.bind(this)],[L.MTR,this.tableRow_.bind(this)],[L.MTD,this.tableCell_.bind(this)],[L.MS,this.text_.bind(this)],[L.MTEXT,this.text_.bind(this)],[L.MSPACE,this.space_.bind(this)],[L.ANNOTATIONXML,this.text_.bind(this)],[L.MI,this.identifier_.bind(this)],[L.MN,this.number_.bind(this)],[L.MO,this.operator_.bind(this)],[L.MFENCED,this.fenced_.bind(this)],[L.MENCLOSE,this.enclosed_.bind(this)],[L.MMULTISCRIPTS,this.multiscripts_.bind(this)],[L.ANNOTATION,this.empty_.bind(this)],[L.NONE,this.empty_.bind(this)],[L.MACTION,this.action_.bind(this)]]);const e={type:C.IDENTIFIER,role:I.NUMBERSET,font:Cp.DOUBLESTRUCK};["C","H","N","P","Q","R","Z","â„‚","â„","â„•","â„™","â„š","â„","â„¤"].forEach((t=>this.getFactory().defaultMap.set(t,e)).bind(this))}parse(t){O.getInstance().setNodeFactory(this.getFactory());const e=cp(t.childNodes),i=mp(t),s=this.parseMap_.get(i),r=(s||this.dummy_.bind(this))(t,e);return sm(r,t),-1===[L.MATH,L.MROW,L.MPADDED,L.MSTYLE,L.SEMANTICS,L.MACTION].indexOf(i)&&(r.mathml.unshift(t),r.mathmlTree=t),r}semantics_(t,e){return e.length?this.parse(e[0]):this.getFactory().makeEmptyNode()}rows_(t,e){const i=t.getAttribute("semantics");if(i&&i.match("bspr_"))return O.proof(t,i,this.parseList.bind(this));let s;if(1===(e=im(e)).length)(s=this.parse(e[0])).type!==C.EMPTY||s.mathmlTree||(s.mathmlTree=t);else{const i=R.run("function_from_identifiers",t);s=i&&i!==t?i:O.getInstance().row(this.parseList(e))}return s.mathml.unshift(t),s}fraction_(t,e){if(!e.length)return this.getFactory().makeEmptyNode();var i=this.parse(e[0]),e=e[1]?this.parse(e[1]):this.getFactory().makeEmptyNode();return O.getInstance().fractionLikeNode(i,e,t.getAttribute("linethickness"),"true"===t.getAttribute("bevelled"))}limits_(t,e){return O.getInstance().limitNode(mp(t),this.parseList(e))}root_(t,e){return e[1]?this.getFactory().makeBranchNode(C.ROOT,[this.parse(e[1]),this.parse(e[0])],[]):this.sqrt_(t,e)}sqrt_(t,e){e=this.parseList(im(e));return this.getFactory().makeBranchNode(C.SQRT,[O.getInstance().row(e)],[])}table_(t,e){const i=t.getAttribute("semantics");if(i&&i.match("bspr_"))return O.proof(t,i,this.parseList.bind(this));const s=this.getFactory().makeBranchNode(C.TABLE,this.parseList(e),[]);return s.mathmlTree=t,O.tableToMultiline(s)}tableRow_(t,e){const i=this.getFactory().makeBranchNode(C.ROW,this.parseList(e),[]);return i.role=I.TABLE,i}tableLabeledRow_(t,e){if(!e.length)return this.tableRow_(t,e);const i=this.parse(e[0]),s=(i.role=I.LABEL,(null==(t=i.childNodes[0])?void 0:t.type)===C.TEXT&&(i.childNodes[0].role=I.LABEL),this.getFactory().makeBranchNode(C.ROW,this.parseList(e.slice(1)),[i]));return s.role=I.TABLE,s}tableCell_(t,e){e=this.parseList(im(e)),e=e.length?1===e.length&&k(e[0],C.EMPTY)?e:[O.getInstance().row(e)]:[];const i=this.getFactory().makeBranchNode(C.CELL,e,[]);return i.role=I.TABLE,i}space_(t,e){const i=t.getAttribute("width"),s=i&&i.match(/[a-z]*$/);if(!s)return this.empty_(t,e);var r=s[0],n=parseFloat(i.slice(0,s.index)),r={cm:.4,pc:.5,em:.5,ex:1,in:.15,pt:5,mm:5}[r];if(!r||isNaN(n)||n<r)return this.empty_(t,e);n=this.getFactory().makeUnprocessed(t);return O.getInstance().text(n,mp(t))}text_(t,e){const i=this.leaf_(t,e);return t.textContent?(i.updateContent(t.textContent,!0),O.getInstance().text(i,mp(t))):i}identifier_(t,e){e=this.leaf_(t,e);return O.getInstance().identifierNode(e,O.getInstance().font(t.getAttribute("mathvariant")),t.getAttribute("class"))}number_(t,e){t=this.leaf_(t,e);return O.number(t),t}operator_(t,e){t=this.leaf_(t,e);return O.getInstance().operatorNode(t),t}fenced_(t,e){var e=this.parseList(im(e)),i=jm.getAttribute_(t,"separators",","),s=jm.getAttribute_(t,"open","("),t=jm.getAttribute_(t,"close",")"),s=O.getInstance().mfenced(s,t,i,e);return O.getInstance().tablesInRow([s])[0]}enclosed_(t,e){const i=this.parseList(im(e)),s=this.getFactory().makeBranchNode(C.ENCLOSE,[O.getInstance().row(i)],[]);return s.role=t.getAttribute("notation")||I.UNKNOWN,s}multiscripts_(t,i){if(!i.length)return this.getFactory().makeEmptyNode();var e=this.parse(i.shift());if(!i.length)return e;const s=[],r=[],n=[],a=[];let o=!1,l=0;for(let t,e=0;t=i[e];e++)mp(t)!==L.MPRESCRIPTS?((o?1&l?s:r:1&l?n:a).push(t),l++):(o=!0,l=0);return im(s).length||im(r).length?O.getInstance().tensor(e,this.parseList(r),this.parseList(s),this.parseList(a),this.parseList(n)):O.getInstance().pseudoTensor(e,this.parseList(a),this.parseList(n))}empty_(t,e){return this.getFactory().makeEmptyNode()}action_(t,e){const i=e[t.hasAttribute("selection")?parseInt(t.getAttribute("selection"),10)-1:0],s=this.parse(i);return s.mathmlTree=i,s}dummy_(t,e){const i=this.getFactory().makeUnprocessed(t);return i.role=t.tagName,i.textContent=t.textContent,i}leaf_(t,e){if(1===e.length&&e[0].nodeType!==Xu.TEXT_NODE){const i=this.getFactory().makeUnprocessed(t);return i.role=e[0].tagName,sm(i,e[0]),i}const i=this.getFactory().makeLeafNode(t.textContent,O.getInstance().font(t.getAttribute("mathvariant")));return t.hasAttribute("data-latex")&&Rp.LatexCommands.set(t.getAttribute("data-latex"),t.textContent),i}}class Hm{constructor(t,e,i=t=>!1){this.name=t,this.apply=e,this.applicable=i}}class Gm extends Hm{}class Vm extends Hm{}function Wm(t,e){const i=[];for(;t.length||e.length;)t.length&&i.push(t.shift()),e.length&&i.push(e.shift());return i}const Xm="data-semantic-",zm=((Xt=S=S||{}).ADDED="data-semantic-added",Xt.ALTERNATIVE="data-semantic-alternative",Xt.CHILDREN="data-semantic-children",Xt.COLLAPSED="data-semantic-collapsed",Xt.CONTENT="data-semantic-content",Xt.EMBELLISHED="data-semantic-embellished",Xt.FENCEPOINTER="data-semantic-fencepointer",Xt.FONT="data-semantic-font",Xt.ID="data-semantic-id",Xt.ANNOTATION="data-semantic-annotation",Xt.ATTRIBUTES="data-semantic-attributes",Xt.OPERATOR="data-semantic-operator",Xt.OWNS="data-semantic-owns",Xt.PARENT="data-semantic-parent",Xt.POSTFIX="data-semantic-postfix",Xt.PREFIX="data-semantic-prefix",Xt.ROLE="data-semantic-role",Xt.SPEECH="data-semantic-speech",Xt.STRUCTURE="data-semantic-structure",Xt.SUMMARY="data-semantic-summary",Xt.TYPE="data-semantic-type",[S.ADDED,S.ALTERNATIVE,S.CHILDREN,S.COLLAPSED,S.CONTENT,S.EMBELLISHED,S.FENCEPOINTER,S.FONT,S.ID,S.ANNOTATION,S.ATTRIBUTES,S.OPERATOR,S.OWNS,S.PARENT,S.POSTFIX,S.PREFIX,S.ROLE,S.SPEECH,S.STRUCTURE,S.SUMMARY,S.TYPE]);function Km(t){return t.map(function(t){return t.id}).join(",")}function Jm(i,t){i.setAttribute(S.TYPE,t.type);var s=t.allAttributes();for(let t,e=0;t=s[e];e++)i.setAttribute(Xm+t[0].toLowerCase(),t[1]);t.childNodes.length&&i.setAttribute(S.CHILDREN,Km(t.childNodes)),t.contentNodes.length&&i.setAttribute(S.CONTENT,Km(t.contentNodes)),t.parent&&i.setAttribute(S.PARENT,t.parent.id.toString());var e=t.attributesXml();e&&i.setAttribute(S.ATTRIBUTES,e);{e=i;const r=[];return t.role===I.MGLYPH&&r.push("image"),t.attributes.href&&r.push("link"),void(r.length&&e.setAttribute(S.POSTFIX,r.join(" ")))}}function Ym(){const t=up("mrow");return t.setAttribute(S.ADDED,"true"),t}class M{static fromTree(t){return M.fromNode(t.root)}static fromNode(t){return new M(M.fromNode_(t))}static fromString(t){return new M(M.fromString_(t))}static simpleCollapseStructure(t){return"number"==typeof t}static contentCollapseStructure(t){return!!t&&!M.simpleCollapseStructure(t)&&"c"===t[0]}static interleaveIds(t,e){return Wm(M.collapsedLeafs(t),M.collapsedLeafs(e))}static collapsedLeafs(...t){return t.reduce((t,e)=>{return t.concat((t=e,M.simpleCollapseStructure(t)?[t]:M.contentCollapseStructure(t[1])?t.slice(2):t.slice(1)))},[])}static fromStructure(t,e,i){return new M(M.tree_(t,e.root,i))}static combineContentChildren(t,e,i,s){switch(t){case C.RELSEQ:case C.INFIXOP:case C.MULTIREL:return Wm(s,i);case C.PREFIXOP:return i.concat(s);case C.POSTFIXOP:return s.concat(i);case C.MATRIX:case C.VECTOR:case C.FENCED:return s.unshift(i[0]),s.push(i[1]),s;case C.CASES:return s.unshift(i[0]),s;case C.APPL:return[s[0],i[0],s[1]];case C.ROOT:return[s[0],s[1]];case C.ROW:case C.LINE:return i.length&&s.unshift(i[0]),s;default:return s}}static makeSexp_(t){return M.simpleCollapseStructure(t)?t.toString():M.contentCollapseStructure(t)?"(c "+t.slice(1).map(M.makeSexp_).join(" ")+")":"("+t.map(M.makeSexp_).join(" ")+")"}static fromString_(t){let e=t.replace(/\(/g,"[");return e=(e=(e=e.replace(/\)/g,"]")).replace(/ /g,",")).replace(/c/g,'"c"'),JSON.parse(e)}static fromNode_(t){if(!t)return[];const e=t.contentNodes;let i;e.length&&(i=e.map(M.fromNode_)).unshift("c");const s=t.childNodes;if(!s.length)return e.length?[t.id,i]:t.id;const r=s.map(M.fromNode_);return e.length&&r.unshift(i),r.unshift(t.id),r}static tree_(s,t,r,n=0,e=1,i=1){if(!t)return[];const a=t.id,o=[a];var l=s;if(sp.getInstance().mode===wu.HTTP){let t=l;for(;t&&!t.evaluate;)t=t.parentNode;t&&t.evaluate?np.currentDocument=t:l.ownerDocument&&(np.currentDocument=l.ownerDocument)}l=function(t,e){let i;try{i=(s=t,r=e,n=np.result.ORDERED_NODE_ITERATOR_TYPE,np.evaluate(s,r,new lp,n,null))}catch(t){return[]}var s,r,n;const a=[];for(let t=i.iterateNext();t;t=i.iterateNext())a.push(t);return a}(`.//self::*[@${S.ID}=${a}]`,s)[0];if(!t.childNodes.length)return M.addAria(l,n,e,i,r),t.id;var c=M.combineContentChildren(t.type,t.role,t.contentNodes.map(function(t){return t}),t.childNodes.map(function(t){return t}));l&&M.addOwns_(l,c);for(let t,e=0,i=c.length;t=c[e];e++)o.push(M.tree_(s,t,r,n+1,e+1,i));return M.addAria(l,n,e,i,r),o}static addAria(t,e,i,s,r){var n=!r.tree||e?"treeitem":"tree";r.aria&&t&&(t.setAttribute("aria-level",e.toString()),t.setAttribute("aria-posinset",i.toString()),t.setAttribute("aria-setsize",s.toString()),t.setAttribute("role",n),t.hasAttribute(S.OWNS)&&t.setAttribute("aria-owns",t.getAttribute(S.OWNS)))}static addOwns_(t,e){const i=t.getAttribute(S.COLLAPSED),s=i?M.realLeafs_(M.fromString(i).array):e.map(t=>t.id);t.setAttribute(S.OWNS,s.join(" "))}static realLeafs_(e){if(M.simpleCollapseStructure(e))return[e];if(M.contentCollapseStructure(e))return[];let i=[];for(let t=1;t<e.length;t++)i=i.concat(M.realLeafs_(e[t]));return i}constructor(t){this.parents=null,this.levelsMap=null,this.array=t=0===t?t:t||[]}populate(){this.parents&&this.levelsMap||(this.parents={},this.levelsMap={},this.populate_(this.array,this.array,[]))}toString(){return M.makeSexp_(this.array)}populate_(i,t,s){if(M.simpleCollapseStructure(i))return this.levelsMap[i]=t,void(this.parents[i]=i===s[0]?s.slice(1):s);const r=M.contentCollapseStructure(i)?i.slice(1):i,n=[r[0]].concat(s);for(let t=0,e=r.length;t<e;t++){const s=r[t];this.populate_(s,i,n)}}isRoot(t){return t===this.levelsMap[t][0]}directChildren(t){return this.isRoot(t)?this.levelsMap[t].slice(1).map(t=>M.simpleCollapseStructure(t)?t:M.contentCollapseStructure(t)?t[1]:t[0]):[]}subtreeNodes(t){if(!this.isRoot(t))return[];const i=(t,e)=>{M.simpleCollapseStructure(t)?e.push(t):(t=M.contentCollapseStructure(t)?t.slice(1):t).forEach(t=>i(t,e))},e=this.levelsMap[t],s=[];return i(e.slice(1),s),s}}function $m(t,e,i){let s=null;if(!t.length)return s;const r=i[i.length-1],n=r&&r.length,a=e&&e.length,o=O.getInstance();if(n&&a){if(e[0].type===C.INFIXOP&&e[0].role===I.IMPLICIT)return s=t.pop(),r.push(o.postfixNode_(r.pop(),t)),s;s=t.shift();const i=o.prefixNode_(e.shift(),t);return e.unshift(i),s}return n?r.push(o.postfixNode_(r.pop(),t)):a&&e.unshift(o.prefixNode_(e.shift(),t)),s}function Qm(t){return t.childNodes[0]&&t.childNodes[0].childNodes[0]&&mp(t.childNodes[0])===L.MPADDED&&mp(t.childNodes[0].childNodes[0])===L.MPADDED&&mp(t.childNodes[0].childNodes[t.childNodes[0].childNodes.length-1])===L.MPHANTOM}R.add(new Gm("combine_juxtaposition",function(i){for(let t,e=i.childNodes.length-1;t=i.childNodes[e];e--)Dm(t)&&!t.nobreaking&&(i.childNodes.splice(e,1,...t.childNodes),i.contentNodes.splice(e,0,...t.contentNodes),t.childNodes.concat(t.contentNodes).forEach(function(t){t.parent=i}),i.addMathmlNodes(t.mathml));return i})),R.add(new Gm("propagateSimpleFunction",t=>(t.type!==C.INFIXOP&&t.type!==C.FRACTION||!t.childNodes.every(Im)||(t.role=I.COMPFUNC),t),t=>"clearspeak"===R.options.domain)),R.add(new Gm("simpleNamedFunction",t=>(t.role!==I.UNIT&&-1!==["f","g","h","F","G","H"].indexOf(t.textContent)&&(t.role=I.SIMPLEFUNC),t),t=>"clearspeak"===R.options.domain)),R.add(new Gm("propagateComposedFunction",t=>(t.type===C.FENCED&&t.childNodes[0].role===I.COMPFUNC&&(t.role=I.COMPFUNC),t),t=>"clearspeak"===R.options.domain)),R.add(new Gm("multioperator",t=>{t.role!==I.UNKNOWN||t.textContent.length<=1||(O.compSemantics(t,"role",I),O.compSemantics(t,"type",C))})),R.add(new Vm("convert_juxtaposition",s=>{let r=am(s,function(t){return t.textContent===Lp.invisibleTimes&&t.type===C.OPERATOR});s=(r=r.rel.length?function(t){const e=[],i=[];let s=t.comp.shift(),r=null,n=[];for(;t.comp.length;)if(n=[],s.length)r&&e.push(r),i.push(s),r=t.rel.shift(),s=t.comp.shift();else{for(r&&n.push(r);!s.length&&t.comp.length;)s=t.comp.shift(),n.push(t.rel.shift());r=$m(n,s,i)}return n.length||s.length?(e.push(r),i.push(s)):(n.push(r),$m(n,s,i)),{rel:e,comp:i}}(r):r).comp[0];for(let t,e,i=1;t=r.comp[i],e=r.rel[i-1];i++)s.push(e),s=s.concat(t);return(r=am(s,function(t){return t.textContent===Lp.invisibleTimes&&(t.type===C.OPERATOR||t.type===C.INFIXOP)})).rel.length?function t(e,i,s){if(!i.length)return e;const r=e.pop(),n=i.shift(),a=s.shift();if(n.type===C.INFIXOP&&(n.role===I.IMPLICIT||n.role===I.UNIT)){Wu.getInstance().output("Juxta Heuristic Case 2");const o=(r?[r,n]:[n]).concat(a);return t(e.concat(o),i,s)}if(!r)return Wu.getInstance().output("Juxta Heuristic Case 3"),t([n].concat(a),i,s);const o=a.shift();if(!o){Wu.getInstance().output("Juxta Heuristic Case 9");const a=R.factory.makeBranchNode(C.INFIXOP,[r,i.shift()],[n],n.textContent);return a.role=I.IMPLICIT,R.run("combine_juxtaposition",a),i.unshift(a),t(e,i,s)}if(Em(r)||Em(o))return Wu.getInstance().output("Juxta Heuristic Case 4"),t(e.concat([r,n,o]).concat(a),i,s);let l=null;return Dm(r)&&Dm(o)?(Wu.getInstance().output("Juxta Heuristic Case 5"),r.contentNodes.push(n),r.contentNodes=r.contentNodes.concat(o.contentNodes),r.childNodes.push(o),r.childNodes=r.childNodes.concat(o.childNodes),o.childNodes.forEach(t=>t.parent=r),(n.parent=r).addMathmlNodes(n.mathml),r.addMathmlNodes(o.mathml),l=r):Dm(r)?(Wu.getInstance().output("Juxta Heuristic Case 6"),r.contentNodes.push(n),r.childNodes.push(o),o.parent=r,(n.parent=r).addMathmlNodes(n.mathml),r.addMathmlNodes(o.mathml),l=r):Dm(o)?(Wu.getInstance().output("Juxta Heuristic Case 7"),o.contentNodes.unshift(n),o.childNodes.unshift(r),r.parent=o,(n.parent=o).addMathmlNodes(n.mathml),o.addMathmlNodes(r.mathml),l=o):(Wu.getInstance().output("Juxta Heuristic Case 8"),(l=R.factory.makeBranchNode(C.INFIXOP,[r,o],[n],n.textContent)).role=I.IMPLICIT),e.push(l),t(e.concat(a),i,s)}(r.comp.shift(),r.rel,r.comp):s})),R.add(new Gm("simple2prefix",t=>(1<t.textContent.length&&!t.textContent[0].match(/[A-Z]/)&&(t.role=I.PREFIXFUNC),t),t=>"braille"===R.options.modality&&t.type===C.IDENTIFIER)),R.add(new Gm("detect_cycle",t=>{t.type=C.MATRIX,t.role=I.CYCLE;const e=t.childNodes[0];return e.type=C.ROW,e.role=I.CYCLE,e.textContent="",e.contentNodes=[],t},t=>t.type===C.FENCED&&t.childNodes[0].type===C.INFIXOP&&t.childNodes[0].role===I.IMPLICIT&&t.childNodes[0].childNodes.every(function(t){return t.type===C.NUMBER})&&t.childNodes[0].contentNodes.every(function(t){return t.role===I.SPACE}))),R.add(new Vm("intvar_from_implicit",function(t){var e=t[0].childNodes;t.splice(0,1,...e)},t=>t[0]&&Mm(t[0]))),R.add(new Gm("intvar_from_fraction",function(t){const e=t.childNodes[1],i=e.childNodes[0];if(gm(i))i.role=I.INTEGRAL;else if(Mm(i)){const s=i.childNodes.length,r=i.childNodes[s-2],n=i.childNodes[s-1];if(gm(n))n.role=I.INTEGRAL;else if(mm(r,n)){const t=O.getInstance().prefixNode_(n,[r]);t.role=I.INTEGRAL,2===s?e.childNodes[0]=t:(i.childNodes.pop(),i.contentNodes.pop(),(i.childNodes[s-2]=t).parent=i)}}},t=>{if(t.type!==C.INTEGRAL)return!1;var[,t,e]=t.childNodes;return e.type===C.EMPTY&&t.type===C.FRACTION})),R.add(new Gm("rewrite_subcases",function(i){i.addAnnotation("Emph","top");let t=[];if(i.hasAnnotation("Emph","left")){const e=tg(i.childNodes[0].childNodes[0].childNodes[0],!0);e.forEach(t=>t.addAnnotation("Emph","left")),t=t.concat(e);for(let t,e=0;t=i.childNodes[e];e++)t.childNodes.shift()}if(t.push(i),i.hasAnnotation("Emph","right")){const e=tg(i.childNodes[0].childNodes[i.childNodes[0].childNodes.length-1].childNodes[0]);e.forEach(t=>t.addAnnotation("Emph","left")),t=t.concat(e),i.childNodes[0].childNodes.pop()}O.tableToMultiline(i);const e=O.getInstance().row(t),s=i.annotation.Emph;return i.annotation.Emph=["table"],s.forEach(t=>e.addAnnotation("Emph",t)),e},i=>{let s=!0,r=!0;if(Qm(i.childNodes[0].childNodes[0].mathmlTree)){for(let t,e=1;t=i.childNodes[e];e++)if(t.childNodes[0].childNodes.length){s=!1;break}}else s=!1;if(s&&i.addAnnotation("Emph","left"),Qm(i.childNodes[0].childNodes[i.childNodes[0].childNodes.length-1].mathmlTree)){const s=i.childNodes[0].childNodes.length;for(let t,e=1;t=i.childNodes[e];e++)if(t.childNodes.length>=s){r=!1;break}}else r=!1;return r&&i.addAnnotation("Emph","right"),s||r}));const Zm=[C.PUNCTUATED,C.RELSEQ,C.MULTIREL,C.INFIXOP,C.PREFIXOP,C.POSTFIXOP];function tg(t,e){if(!t.childNodes.length)return ig(t),[t];let i=null;if(t.type!==C.PUNCTUATED||(e?t.role!==I.ENDPUNCT:t.role!==I.STARTPUNCT)||ig((s=t.childNodes)[e?s.length-1:0])&&(t=s[e?0:s.length-1],i=s[e?s.length-1:0]),-1===Zm.indexOf(t.type))return i?e?[t,i]:[i,t]:[t];{var s=t.childNodes;ig(s[e?s.length-1:0]);const r=M.combineContentChildren(t.type,t.role,t.contentNodes,t.childNodes);return i&&(e?r.push(i):r.unshift(i)),r}}const eg={[I.METRIC]:I.METRIC,[I.VBAR]:I.NEUTRAL,[I.OPENFENCE]:I.OPEN,[I.CLOSEFENCE]:I.CLOSE};function ig(t){var e;if(t.type===C.PUNCTUATION)return e=eg[t.role],e&&(t.role=e,t.type=C.FENCE,t.addAnnotation("Emph","fence"),1)}function sg(t,e,i,s=i){const r=[];for(;t&&t.role===i;)r.push(t),t=e.shift();return r.length?(t&&e.unshift(t),[1===r.length?r[0]:function(t,e){const i=R.factory.makeBranchNode(C.PUNCTUATION,t,[]);return i.role=e,i}(r,s),e]):[t,e]}function rg(t){return["[","ï¼»"].includes(t)}function ng(t){return["]","ï¼½"].includes(t)}function ag(t){return["(","â½","â‚"].includes(t)}function og(t){return[")","â¾","â‚"].includes(t)}function lg(t){return t.role===I.INFTY||t.type===C.PREFIXOP&&t.childNodes[0].role===I.INFTY}function cg(t){var e=t.childNodes[0];if(t.type!==C.FENCED||(null==e?void 0:e.type)!==C.PUNCTUATED||3!==(null==e?void 0:e.childNodes.length)||1!==(null==e?void 0:e.contentNodes.length)||(null==e?void 0:e.childNodes[1].role)!==I.COMMA)return!1;var e=t.childNodes[0].childNodes[0],i=t.childNodes[0].childNodes[2],s=t.contentNodes[0].textContent,t=t.contentNodes[1].textContent;return!!(rg(s)&&og(t)||ag(s)&&ng(t))||!(!ag(s)||!og(t)||!lg(e)&&!lg(i))}function hg(t){return t.hasAnnotation("clearspeak","simple")}function dg(t){return t.type===C.IDENTIFIER&&(t.role===I.LATINLETTER||t.role===I.GREEKLETTER||t.role===I.OTHERLETTER||t.role===I.SIMPLEFUNC)}function ug(t){return t.type===C.NUMBER&&(t.role===I.INTEGER||t.role===I.FLOAT)}function pg(t){return ug(t)||function(t){if(mg("Fraction_Over")||mg("Fraction_FracOver"))return!1;if(t.type!==C.FRACTION||t.role!==I.VULGAR)return!1;if(mg("Fraction_Ordinal"))return!0;var e=parseInt(t.childNodes[0].textContent,10),t=parseInt(t.childNodes[1].textContent,10);return 0<e&&e<20&&0<t&&t<11}(t)}function mg(t){return sp.getInstance().options.style===t}R.add(new Vm("ellipses",t=>{const e=[];let i=t.shift();for(;i;)[i,t]=sg(i,t,I.FULLSTOP,I.ELLIPSIS),[i,t]=sg(i,t,I.DASH),e.push(i),i=t.shift();return e},t=>1<t.length)),R.add(new Vm("op_with_limits",t=>{const e=t[0];return e.type=C.LARGEOP,e.role=I.SUM,t},t=>t[0].type===C.OPERATOR&&t.slice(1).some(t=>t.type===C.RELSEQ||t.type===C.MULTIREL||t.type===C.INFIXOP&&t.role===I.ELEMENT||t.type===C.PUNCTUATED&&t.role===I.SEQUENCE))),R.add(new class extends Hm{}("function_from_identifiers",t=>{var e=cp(t.childNodes).map(t=>t.textContent.trim()).join("");if(Rp.Meaning.get(e).type===C.UNKNOWN)return t;const i=R.factory.makeLeafNode(e,O.getInstance().font(t.getAttribute("mathvariant")));return i.mathmlTree=t,i},t=>{const e=cp(t.childNodes);return!(e.length<2)&&e.every(t=>mp(t)===L.MI&&Rp.Meaning.get(t.textContent.trim()).role===I.LATINLETTER)})),R.add(new Vm("bracketed_interval",t=>{const e=t[0],i=t[1],s=t.slice(2),r=O.getInstance().row(s),n=R.factory.makeBranchNode(C.FENCED,[r],[e,i]);return n.role=I.INTERVAL,n},t=>{var e=t[0],i=t[1],t=t.slice(2);if(!(e&&i&&(ng(e.textContent)&&(rg(i.textContent)||ng(i.textContent))||rg(i.textContent)&&(rg(e.textContent)||ng(e.textContent)))))return!1;if(1===t.length&&t[0].type===C.PUNCTUATED&&1===t[0].contentNodes.length)return!0;i=am(t,ym);return!(1!==i.rel.length||!i.comp[0].length||!i.comp[1].length)})),R.add(new Gm("interval_heuristic",t=>(t.role=I.INTERVAL,t),t=>cg(t))),R.add(new Gm("propagateInterval",t=>(t.childNodes.forEach(t=>{cg(t)&&(t.role=I.INTERVAL)}),t),t=>qm(t))),yp(new fp("clearspeak","simple",function(t){return pg(t=t)||(dg(e=t)||e.type===C.INFIXOP&&e.role===I.IMPLICIT&&(2===e.childNodes.length&&(dg(e.childNodes[0])||pg(e.childNodes[0]))&&dg(e.childNodes[1])||3===e.childNodes.length&&pg(e.childNodes[0])&&dg(e.childNodes[1])&&dg(e.childNodes[2])))||(e=t).type===C.PUNCTUATED&&e.role===I.ENDPUNCT&&2===e.childNodes.length&&e.childNodes[1].role===I.DEGREE&&(dg(e.childNodes[0])||ug(e.childNodes[0])||e.childNodes[0].type===C.PREFIXOP&&e.childNodes[0].role===I.NEGATIVE&&(dg(e.childNodes[0].childNodes[0])||ug(e.childNodes[0].childNodes[0])))||(e=t).type===C.PREFIXOP&&e.role===I.NEGATIVE&&hg(e.childNodes[0])&&e.childNodes[0].type!==C.PREFIXOP&&e.childNodes[0].type!==C.APPL&&e.childNodes[0].type!==C.PUNCTUATED||(e=t).type===C.APPL&&(e.childNodes[0].role===I.PREFIXFUNC||e.childNodes[0].role===I.SIMPLEFUNC)&&(hg(e.childNodes[1])||e.childNodes[1].type===C.FENCED&&hg(e.childNodes[1].childNodes[0]))?"simple":"";var e})),xp("clearspeak","simple"),yp(new fp("clearspeak","unit",function(t){return(t=t).type===C.TEXT&&t.role!==I.LABEL||t.type===C.PUNCTUATED&&t.role===I.TEXT&&ug(t.childNodes[0])&&function(e){for(let t=0;t<e.length-1;t++)if(e[t].type!==C.TEXT||""!==e[t].textContent)return;return e[e.length-1].type===C.TEXT}(t.childNodes.slice(1))||t.type===C.IDENTIFIER&&t.role===I.UNIT||t.type===C.INFIXOP&&(t.role===I.IMPLICIT||t.role===I.UNIT)?"unit":""})),xp("clearspeak","unit");const gg=[C.MULTIREL,C.RELSEQ,C.APPL,C.ROW,C.LINE],fg=[C.SUBSCRIPT,C.SUPERSCRIPT,C.OVERSCORE,C.UNDERSCORE];function bg(t,e){var i,t=t.parent;if(t)return i=t.type,-1!==gg.indexOf(i)||i===C.PREFIXOP&&t.role===I.NEGATIVE&&!e.script&&!e.enclosed||i===C.PREFIXOP&&t.role===I.GEOMETRY||!(i!==C.PUNCTUATED||e.enclosed&&t.role!==I.TEXT)}yp(new bp("nemeth","number",function(t,e){return t.childNodes.length?(-1!==fg.indexOf(t.type)&&(e.script=!0),t.type===C.FENCED?(e.number=!1,e.enclosed=!0):t.type===C.PREFIXOP&&t.role!==I.GEOMETRY&&t.role!==I.NEGATIVE?e.number=!1:bg(t,e)&&(e.number=!0,e.enclosed=!1),["",e]):(bg(t,e)&&(e.number=!0,e.script=!1,e.enclosed=!1),[e.number?"number":"",{number:!1,enclosed:e.enclosed,script:e.script}])},{number:!0})),xp("nemeth","number"),yp(new bp("depth","depth",function(t){return t.parent?[parseInt(t.parent.annotation.depth[0])+1]:[1]})),xp("depth","depth");class Eg{static empty(){const t=hp("<math/>"),e=new Eg(t,new Zu);return e.mathml=t,e}static fromNode(t,e){const i=Eg.empty();return i.root=t,e&&(i.mathml=e),i}static fromRoot(t,e){let i=t;for(;i.parent;)i=i.parent;const s=Eg.fromNode(i);return e&&(s.mathml=e),s}static fromXml(t){const e=Eg.empty();return t.childNodes[0]&&(e.root=om.fromXml(t.childNodes[0])),e}constructor(t,e){this.mathml=t,this.options=e,this.parser=new jm(e),this.root=this.parser.parse(t),this.collator=this.parser.getFactory().leafMap.collateMeaning();var i=this.collator.newDefault(),s=(i&&(this.parser=new jm(e),this.parser.getFactory().defaultMap=i,this.root=this.parser.parse(t)),Ng.visit(this.root,{}),this.root);for(const r of Ep.values())r.active&&r.annotate(s);for(const n of Np.values())n.active&&n.visit(s,Object.assign({},n.def))}xml(t){const e=hp("<stree></stree>"),i=this.root.xml(e.ownerDocument,t);return e.appendChild(i),e}toString(t){return gp(this.xml(t))}formatXml(t){return pp(this.toString(t))}displayTree(){this.root.displayTree()}replaceNode(t,e){const i=t.parent;i?i.replaceChild(t,e):this.root=e}toJson(){const t={};return t.stree=this.root.toJson(),t}}const Ng=new bp("general","unit",(t,e)=>(Om(t)&&(t.role=I.UNIT),!1));const yg=[],xg=!0,Ag=new Map;function vg(t){Wu.getInstance().generate(()=>["WALKING START: ",t.toString()]);const e=function(i){for(let t,e=0;t=yg[e];e++)if(t.test(i))return t.constr(i);return null}(t);let i;if(e)return i=e.getMathml(),Wu.getInstance().generate(()=>["WALKING END: ",t.toString()]),Ig(i);if(1===t.mathml.length){if(Wu.getInstance().output("Walktree Case 0"),!t.childNodes.length)return Wu.getInstance().output("Walktree Case 0.1"),Jm(i=t.mathml[0],t),Wu.getInstance().generate(()=>["WALKING END: ",t.toString()]),Ig(i);const e=t.childNodes[0];if(1===t.childNodes.length&&e.type===C.EMPTY)return Wu.getInstance().output("Walktree Case 0.2"),Jm(i=t.mathml[0],t),i.appendChild(vg(e)),Wu.getInstance().generate(()=>["WALKING END: ",t.toString()]),Ig(i);t.childNodes.forEach(t=>{t.mathml.length||(t.mathml=[Mg(t)])})}var s=t.contentNodes.map(Rg),r=(Dg(t,s),t.childNodes.map(vg)),s=M.combineContentChildren(t.type,t.role,s,r);if(null===(i=t.mathmlTree))Wu.getInstance().output("Walktree Case 1"),i=_g(s,t);else{const t=wg(s);Wu.getInstance().output("Walktree Case 2"),i=t?(Wu.getInstance().output("Walktree Case 2.1"),Sg(t)):(Wu.getInstance().output("Walktree Case 2.2"),Pg(i))}return function(i,e,s){if(e.length&&(1!==e.length||i!==e[0])){const l=s.role===I.IMPLICIT&&R.flags.combine_juxtaposition?function(t,e,i){const s=[];let r=cp(t.childNodes),n=!1;for(;r.length;){const t=r.shift();if(t.hasAttribute(S.TYPE))s.push(t);else{const i=function(t,e){const i=[];let s=cp(t.childNodes);for(;s.length;){const t=s.shift();t.nodeType===Xu.ELEMENT_NODE&&(t.hasAttribute(S.TYPE)||-1!==e.indexOf(t)?i.push(t):s=cp(t.childNodes).concat(s))}return i}(t,e);0!==i.length&&(1!==i.length?(n?t.setAttribute("AuxiliaryImplicit",!0):n=!0,r=i.concat(r)):s.push(t))}}const a=[],o=i.childNodes.map(function(t){return t.mathmlTree});for(;o.length;){const t=o.pop();if(t){if(-1!==s.indexOf(t))break;-1!==e.indexOf(t)&&a.unshift(t)}}return s.concat(a)}(i,e,s):cp(i.childNodes);if(!l.length)return e.forEach(function(t){i.appendChild(t)});let t=0;for(;e.length;){const s=e[0];if(l[t]===s||function(i,s){var t=Lp.functionApplication;if(i&&s&&i.textContent&&s.textContent&&i.textContent===t&&s.textContent===t&&"true"===s.getAttribute(S.ADDED)){for(let t,e=0;t=i.attributes[e];e++)s.hasAttribute(t.nodeName)||s.setAttribute(t.nodeName,t.nodeValue);return dp(i,s),1}return}(l[t],s))e.shift(),t++;else if(l[t]&&-1===e.indexOf(l[t]))t++;else if(function(t,e){if(!t)return;do{if((t=Sg(t))===e)return 1}while(t);return}(s,i))e.shift();else{var r=l[t];if(r){{n=void 0;a=void 0;o=void 0;var n=i;var a=r;var o=s;let t=a,e=Sg(t);for(;e&&e.firstChild===t&&!t.hasAttribute("AuxiliaryImplicit")&&e!==n;)e=Sg(t=e);e&&(e.insertBefore(o,t),t.removeAttribute("AuxiliaryImplicit"))}e.shift()}else if(s.parentNode)i=Sg(s),e.shift();else{const l=e[1];l&&l.parentNode?((i=Sg(l)).insertBefore(s,l),e.shift()):i.insertBefore(s,null),e.shift()}}}}}(i=Og(i),s,t),Ag.has(t.id)||(Ag.set(t.id,!0),Jm(i,t)),Wu.getInstance().generate(()=>["WALKING END: ",t.toString()]),Ig(i)}function _g(t,e){const i=function(t){var e=wg(t);if(!e)return{type:Pp.INVALID,node:null};var i=wg(t.slice().reverse());if(e===i)return{type:Pp.VALID,node:e};const s=Cg(e),r=function(t,e){let i=0;for(;t[i]&&-1===e.indexOf(t[i]);)i++;return t.slice(0,i+1)}(s,t),n=Cg(i,function(t){return-1!==r.indexOf(t)}),a=n[0],o=r.indexOf(a);return-1===o?{type:Pp.INVALID,node:null}:{type:r.length!==s.length?Pp.PRUNED:(e=r[o+1],t=n[1],e&&t&&!e.previousSibling&&!t.nextSibling?Pp.VALID:Pp.INVALID),node:a}}(t);let s=i.node;var r=i.type;if(r!==Pp.VALID||!em(s)||!s.parentNode&&e.parent)if(Wu.getInstance().output("Walktree Case 1.1"),s=Ym(),r===Pp.PRUNED)Wu.getInstance().output("Walktree Case 1.1.0"),s=function(e,t,i){let s=function t(e){const i=cp(e.childNodes);if(!i)return e;const s=i.filter(function(t){return t.nodeType===Xu.ELEMENT_NODE&&!tm(t)});return 1===s.length&&em(s[0])&&!s[0].hasAttribute(S.TYPE)?t(s[0]):e}(t);if(Zp(s)){Wu.getInstance().output("Walktree Case 1.1.0.0"),Tg(s,e),cp(s.childNodes).forEach(function(t){e.appendChild(t)});const t=e;e=s,s=t}t=i.indexOf(t);return dp(i[t]=s,e),e.appendChild(s),i.forEach(function(t){e.appendChild(t)}),e}(s,i.node,t);else if(t[0]){Wu.getInstance().output("Walktree Case 1.1.1");const e=wg(t);if(e){const i=function(t,e){const i=cp(t.childNodes);let s=1/0,r=-1/0;return e.forEach(function(t){t=i.indexOf(t);-1!==t&&(s=Math.min(s,t),r=Math.max(r,t))}),i.slice(s,r+1)}(Sg(e),t);dp(e,s),i.forEach(function(t){s.appendChild(t)})}else Tg(s,t[0]),s=t[0]}return e.mathmlTree||(e.mathmlTree=s),s}function Tg(t,e){for(const i of zm)t.hasAttribute(i)&&(e.setAttribute(i,t.getAttribute(i)),t.removeAttribute(i))}function wg(t){let e=0,i=null;for(;!i&&e<t.length;)t[e].parentNode&&(i=t[e]),e++;return i}function Cg(t,e){const i=e||(t=>!1),s=[t];for(;!i(t)&&!Zp(t)&&t.parentNode;)t=Sg(t),s.unshift(t);return s}function Ig(t){for(;!Zp(t)&&function(e){var t=Sg(e);return t&&em(t)&&cp(t.childNodes).every(function(t){return t===e||Lg(t)})}(t);)t=Sg(t);return t}function Lg(t){if(t.nodeType!==Xu.ELEMENT_NODE)return!0;if(!t||tm(t))return!0;var e=cp(t.childNodes);return!(!em(t)&&e.length||(e=t)&&$p.includes(mp(e))||t.hasAttribute(S.TYPE)||(e=t)&&mp(e)===L.MGLYPH&&(!(e=e.parentNode)||!Kp.includes(mp(e))))&&cp(t.childNodes).every(Lg)}function Sg(t){return t.parentNode}function kg(t,e){const i=new M(e);t.setAttribute(S.COLLAPSED,i.toString())}function Rg(t){if(t.mathml.length)return vg(t);var e=xg?Mg(t):Ym();return t.mathml=[e],e}function Og(i){if(mp(i)!==L.MFENCED)return i;const s=Ym();for(let t,e=0;t=i.attributes[e];e++)-1===["open","close","separators"].indexOf(t.name)&&s.setAttribute(t.name,t.value);return cp(i.childNodes).forEach(function(t){s.appendChild(t)}),dp(i,s),s}function Mg(t){const e=up("mo"),i=(s=t.textContent,Vu.f.document.createTextNode(s));var s;return e.appendChild(i),Jm(e,t),e.setAttribute(S.ADDED,"true"),e}function Dg(t,e){const i=t.type+(t.textContent?","+t.textContent:"");e.forEach(function(t){Pg(t).setAttribute(S.OPERATOR,i)})}function Pg(t){const i=cp(t.childNodes);if(!i)return t;const s=i.filter(function(t){return!Lg(t)}),r=[];for(let t,e=0;t=s[e];e++)if(em(t)&&t.getAttribute(S.TYPE)!==C.PUNCTUATION){const i=Pg(t);i&&i!==t&&r.push(i)}else r.push(t);return 1===r.length?r[0]:t}function Bg(t){return pp(t.toString()).toString().replace(new RegExp(Xm,"g"),"")}function Fg(i,t){const s=!!t,r=t||[],n=i.parent,a=i.contentNodes.map(function(t){return t.id}),o=(a.unshift("c"),[i.id,a]);for(let t,e=0;t=i.childNodes[e];e++){const i=vg(t),a=(r.push(i),Pg(i));n&&!s&&a.setAttribute(S.PARENT,n.id.toString()),o.push(t.id)}return o}(Zt=Pp=Pp||{}).VALID="valid",Zt.INVALID="invalid",Zt.PRUNED="pruned";class Ug{constructor(t){this.semantic=t}}class qg extends Ug{static test(t){return!t.mathmlTree&&t.type===C.LINE&&t.role===I.BINOMIAL}constructor(t){super(t),this.mml=t.mathmlTree}getMathml(){if(!this.semantic.childNodes.length)return this.mml;const t=this.semantic.childNodes[0];if(this.mml=vg(t),this.mml.hasAttribute(S.TYPE)){const t=Ym();dp(this.mml,t),t.appendChild(this.mml),this.mml=t}return Jm(this.mml,this.semantic),this.mml}}class jg extends Ug{static test(t){if(!t.mathmlTree||!t.childNodes.length)return!1;var e=mp(t.mathmlTree),t=t.childNodes[0].role;return e===L.MSUBSUP&&t===I.SUBSUP||e===L.MUNDEROVER&&t===I.UNDEROVER}constructor(t){super(t),this.mml=t.mathmlTree}getMathml(){const t=this.semantic.childNodes[0],e=t.childNodes[0],i=this.semantic.childNodes[1],s=t.childNodes[1],r=vg(i),n=vg(e),a=vg(s);return Jm(this.mml,this.semantic),this.mml.setAttribute(S.CHILDREN,Km([e,s,i])),[n,a,r].forEach(t=>Pg(t).setAttribute(S.PARENT,this.mml.getAttribute(S.ID))),this.mml.setAttribute(S.TYPE,t.role),kg(this.mml,[this.semantic.id,[t.id,e.id,s.id],i.id]),this.mml}}class Hg extends Ug{static multiscriptIndex(t){return t.type===C.PUNCTUATED&&t.contentNodes[0].role===I.DUMMY?Fg(t):(vg(t),t.id)}static createNone_(t){const e=up("none");return t&&Jm(e,t),e.setAttribute(S.ADDED,"true"),e}constructor(t){super(t),this.mml=t.mathmlTree}completeMultiscript(t,e){const i=cp(this.mml.childNodes).slice(1);let s=0;var r=t=>{for(const e of t){const t=i[s];if(t&&e===parseInt(t.getAttribute(S.ID)))t.setAttribute(S.PARENT,this.semantic.id.toString()),s++;else if(t&&e===parseInt(Pg(t).getAttribute(S.ID)))Pg(t).setAttribute(S.PARENT,this.semantic.id.toString()),s++;else{const i=this.semantic.querySelectorAll(t=>t.id===e);this.mml.insertBefore(Hg.createNone_(i[0]),t||null)}}};r(t),i[s]&&mp(i[s])!==L.MPRESCRIPTS?this.mml.insertBefore(i[s],up("mprescripts")):s++,r(e)}}class Gg extends Hg{static test(t){return!!t.mathmlTree&&(mp(t.mathmlTree)===L.MMULTISCRIPTS&&(t.type===C.SUPERSCRIPT||t.type===C.SUBSCRIPT))}constructor(t){super(t)}getMathml(){let t,e,i;if(Jm(this.mml,this.semantic),this.semantic.childNodes[0]&&this.semantic.childNodes[0].role===I.SUBSUP){const r=this.semantic.childNodes[0];t=r.childNodes[0],e=Hg.multiscriptIndex(this.semantic.childNodes[1]),i=Hg.multiscriptIndex(r.childNodes[1]);var s=[this.semantic.id,[r.id,t.id,i],e];kg(this.mml,s),this.mml.setAttribute(S.TYPE,r.role),this.completeMultiscript(M.interleaveIds(i,e),[])}else{t=this.semantic.childNodes[0],e=Hg.multiscriptIndex(this.semantic.childNodes[1]);const i=[this.semantic.id,t.id,e];kg(this.mml,i)}const r=M.collapsedLeafs(i||[],e);return Pg(vg(t)).setAttribute(S.PARENT,this.semantic.id.toString()),r.unshift(t.id),this.mml.setAttribute(S.CHILDREN,r.join(",")),this.mml}}class Vg extends Hg{static test(t){return!!t.mathmlTree&&t.type===C.TENSOR}constructor(t){super(t)}getMathml(){vg(this.semantic.childNodes[0]);var t=Hg.multiscriptIndex(this.semantic.childNodes[1]),e=Hg.multiscriptIndex(this.semantic.childNodes[2]),i=Hg.multiscriptIndex(this.semantic.childNodes[3]),s=Hg.multiscriptIndex(this.semantic.childNodes[4]),r=(Jm(this.mml,this.semantic),[this.semantic.id,this.semantic.childNodes[0].id,t,e,i,s]);kg(this.mml,r);const n=M.collapsedLeafs(t,e,i,s);return n.unshift(this.semantic.childNodes[0].id),this.mml.setAttribute(S.CHILDREN,n.join(",")),this.completeMultiscript(M.interleaveIds(i,s),M.interleaveIds(t,e)),this.mml}}class Wg extends Ug{static test(t){return!(!t.mathmlTree||!t.fencePointer||t.mathmlTree.getAttribute("data-semantic-type"))}static makeEmptyNode_(t){const e=Ym(),i=new om(t);return i.type=C.EMPTY,i.mathmlTree=e,i}static fencedMap_(t,e){e[t.id]=t.mathmlTree,t.embellished&&Wg.fencedMap_(t.childNodes[0],e)}constructor(t){super(t),this.fenced=null,this.fencedMml=null,this.fencedMmlNodes=[],this.ofence=null,this.ofenceMml=null,this.ofenceMap={},this.cfence=null,this.cfenceMml=null,this.cfenceMap={},this.parentCleanup=[]}getMathml(){return this.getFenced_(),this.fencedMml=vg(this.fenced),this.getFencesMml_(),this.fenced.type!==C.EMPTY||this.fencedMml.parentNode||(this.fencedMml.setAttribute(S.ADDED,"true"),this.cfenceMml.parentNode.insertBefore(this.fencedMml,this.cfenceMml)),this.getFencedMml_(),this.rewrite_()}fencedElement(t){return t.type===C.FENCED||t.type===C.MATRIX||t.type===C.VECTOR}getFenced_(){let t=this.semantic;for(;!this.fencedElement(t);)t=t.childNodes[0];this.fenced=t.childNodes[0],this.ofence=t.contentNodes[0],this.cfence=t.contentNodes[1],Wg.fencedMap_(this.ofence,this.ofenceMap),Wg.fencedMap_(this.cfence,this.cfenceMap)}getFencedMml_(){let t=this.ofenceMml.nextSibling;for(t=t===this.fencedMml?t:this.fencedMml;t&&t!==this.cfenceMml;)this.fencedMmlNodes.push(t),t=t.nextSibling}getFencesMml_(){let t=this.semantic;const e=Object.keys(this.ofenceMap),i=Object.keys(this.cfenceMap);for(;!(this.ofenceMml&&this.cfenceMml||t===this.fenced);)-1===e.indexOf(t.fencePointer)||this.ofenceMml||(this.ofenceMml=t.mathmlTree),-1===i.indexOf(t.fencePointer)||this.cfenceMml||(this.cfenceMml=t.mathmlTree),t=t.childNodes[0];this.ofenceMml||(this.ofenceMml=this.ofence.mathmlTree),this.cfenceMml||(this.cfenceMml=this.cfence.mathmlTree),this.ofenceMml&&(this.ofenceMml=Ig(this.ofenceMml)),this.cfenceMml&&(this.cfenceMml=Ig(this.cfenceMml))}rewrite_(){let i=this.semantic,s=null;var t=this.introduceNewLayer_();for(Jm(t,this.fenced.parent);!this.fencedElement(i);){var e=i.mathmlTree,r=this.specialCase_(i,e);if(r)i=r;else{Jm(e,i);const s=[];for(let t,e=1;t=i.childNodes[e];e++)s.push(vg(t));i=i.childNodes[0]}var r=up("dummy"),n=e.childNodes[0];dp(e,r),dp(t,e),dp(e.childNodes[0],t),dp(r,n),s=s||e}return vg(this.ofence),vg(this.cfence),this.cleanupParents_(),s||t}specialCase_(t,e){var i=mp(e);let s,r=null;if(i===L.MSUBSUP?(r=t.childNodes[0],s=jg):i===L.MMULTISCRIPTS&&(t.type===C.SUPERSCRIPT||t.type===C.SUBSCRIPT?s=Gg:t.type===C.TENSOR&&(s=Vg),r=s&&t.childNodes[0]&&t.childNodes[0].role===I.SUBSUP?t.childNodes[0]:t),!r)return null;var i=r.childNodes[0],n=Wg.makeEmptyNode_(i.id);return r.childNodes[0]=n,e=new s(t).getMathml(),r.childNodes[0]=i,this.parentCleanup.push(e),r.childNodes[0]}introduceNewLayer_(){const t=this.fullFence(this.ofenceMml),e=this.fullFence(this.cfenceMml);let i=Ym();if(dp(this.fencedMml,i),this.fencedMmlNodes.forEach(t=>i.appendChild(t)),i.insertBefore(t,this.fencedMml),i.appendChild(e),!i.parentNode){const t=Ym();for(;0<i.childNodes.length;)t.appendChild(i.childNodes[0]);i.appendChild(t),i=t}return i}fullFence(t){var e=this.fencedMml.parentNode;let i=t;for(;i.parentNode&&i.parentNode!==e;)i=i.parentNode;return i}cleanupParents_(){this.parentCleanup.forEach(function(t){var e=t.childNodes[1].getAttribute(S.PARENT);t.childNodes[0].setAttribute(S.PARENT,e)})}}class Xg extends Ug{static test(t){return!!t.mathmlTree&&t.hasAnnotation("Emph","top")}constructor(t){super(t),this.mrows=[],this.mml=t.mathmlTree}getMathml(){if(this.recurseToTable(this.semantic),this.mrows.length){const t=Ym();this.mml.parentNode.insertBefore(t,this.mml);for(const e of this.mrows)t.appendChild(e);t.appendChild(this.mml)}return this.mml}recurseToTable(t){var e;if(t.hasAnnotation("Emph","top")||t.hasAnnotation("Emph","fence")||!t.hasAnnotation("Emph","left")&&!t.hasAnnotation("Emph","right")){if(!t.mathmlTree||mp(t.mathmlTree)===L.MTABLE&&null!=(e=t.annotation.Emph)&&e.length&&"table"!==t.annotation.Emph[0]){const e=Ym();Jm(e,t),this.mrows.unshift(e)}else{if(mp(t.mathmlTree)===L.MTABLE&&null!=(e=t.annotation.Emph)&&e.length&&"table"===t.annotation.Emph[0])return void this.finalizeTable(t);Jm(t.mathmlTree,t)}if(t.childNodes.forEach(this.recurseToTable.bind(this)),t.textContent||"punctuated"===t.type){const e=t.contentNodes.map(t=>{const e=Rg(t);return e.hasAttribute("data-semantic-added")?this.mrows.unshift(e):this.recurseToTable(t),e});Dg(t,e)}else t.contentNodes.forEach(this.recurseToTable.bind(this))}else vg(t)}finalizeTable(t){Jm(t.mathmlTree,t),t.contentNodes.forEach(t=>{vg(t)}),t.childNodes.forEach(t=>{vg(t)})}}class zg extends Ug{static test(t){if(!t.mathmlTree||!t.childNodes.length)return!1;var e=mp(t.mathmlTree),t=t.type;return(t===C.LIMUPPER||t===C.LIMLOWER)&&(e===L.MSUBSUP||e===L.MUNDEROVER)||t===C.LIMBOTH&&(e===L.MSUB||e===L.MUNDER||e===L.MSUP||e===L.MOVER)}static walkTree_(t){t&&vg(t)}constructor(t){super(t),this.mml=t.mathmlTree}getMathml(){const t=this.semantic.childNodes;return this.semantic.type!==C.LIMBOTH&&3<=this.mml.childNodes.length&&(this.mml=_g([this.mml],this.semantic)),Jm(this.mml,this.semantic),t[0].mathmlTree||(t[0].mathmlTree=this.semantic.mathmlTree),t.forEach(zg.walkTree_),this.mml}}class Kg extends Ug{static test(t){return!!t.mathmlTree&&t.type===C.LINE}constructor(t){super(t),this.mml=t.mathmlTree}getMathml(){return this.semantic.contentNodes.length&&vg(this.semantic.contentNodes[0]),this.semantic.childNodes.length&&vg(this.semantic.childNodes[0]),Jm(this.mml,this.semantic),this.mml}}class Jg extends Ug{static test(t){return!!t.mathmlTree&&(t.type===C.INFERENCE||t.type===C.PREMISES)}constructor(t){super(t),this.mml=t.mathmlTree}getMathml(){return this.semantic.childNodes.length&&(this.semantic.contentNodes.forEach(function(t){vg(t),Jm(t.mathmlTree,t)}),this.semantic.childNodes.forEach(function(t){vg(t)}),Jm(this.mml,this.semantic),this.mml.getAttribute("data-semantic-id")===this.mml.getAttribute("data-semantic-parent")&&this.mml.removeAttribute("data-semantic-parent")),this.mml}}class Yg extends Ug{static test(t){return t.type===C.MATRIX||t.type===C.VECTOR||t.type===C.CASES}constructor(t){super(t),this.inner=[],this.mml=t.mathmlTree}getMathml(){const t=Rg(this.semantic.contentNodes[0]),e=this.semantic.contentNodes[1]?Rg(this.semantic.contentNodes[1]):null;if(this.inner=this.semantic.childNodes.map(vg),this.mml)if(mp(this.mml)===L.MFENCED){var i=this.mml.childNodes;this.mml.insertBefore(t,i[0]||null),e&&this.mml.appendChild(e),this.mml=Og(this.mml)}else{const s=[t,this.mml];e&&s.push(e),this.mml=_g(s,this.semantic)}else this.mml=_g([t].concat(this.inner,[e]),this.semantic);return Jm(this.mml,this.semantic),this.mml}}class $g extends Ug{static test(t){return t.type===C.PUNCTUATED&&(t.role===I.TEXT||t.contentNodes.every(t=>t.role===I.DUMMY))}constructor(t){super(t),this.mml=t.mathmlTree}getMathml(){var t=[],e=Fg(this.semantic,t);return this.mml=_g(t,this.semantic),Jm(this.mml,this.semantic),this.mml.removeAttribute(S.CONTENT),kg(this.mml,e),this.mml}}function Qg(t,e){var i,s,r,t=t.cloneNode(!0);return t=i=t,r=e,s=new Eg(t,r),t=e,Wu.getInstance().generate(()=>["Original MathML",Bg(i)]),Ag.clear(),vg(s.root),t.structure&&i.setAttribute(S.STRUCTURE,M.fromStructure(i,s,t).toString()),Wu.getInstance().generate(()=>["Semantic Tree\n",Bg(s),"Semantically enriched MathML\n",Bg(i)]),i}yg.push({test:zg.test,constr:t=>new zg(t)},{test:Wg.test,constr:t=>new Wg(t)},{test:jg.test,constr:t=>new jg(t)},{test:Vg.test,constr:t=>new Vg(t)},{test:Gg.test,constr:t=>new Gg(t)},{test:Kg.test,constr:t=>new Kg(t)},{test:qg.test,constr:t=>new qg(t)},{test:Jg.test,constr:t=>new Jg(t)},{test:Xg.test,constr:t=>new Xg(t)},{test:Yg.test,constr:t=>new Yg(t)},{test:$g.test,constr:t=>new $g(t)});const Zg=new qu({AbsoluteValue:["Auto","AbsEnd","Cardinality","Determinant"],Bar:["Auto","Conjugate"],Caps:["Auto","SayCaps"],CombinationPermutation:["Auto","ChoosePermute"],Currency:["Auto","Position","Prefix"],Ellipses:["Auto","AndSoOn"],Enclosed:["Auto","EndEnclose"],Exponent:["Auto","AfterPower","Ordinal","OrdinalPower","Exponent"],Fraction:["Auto","EndFrac","FracOver","General","GeneralEndFrac","Ordinal","Over","OverEndFrac","Per"],Functions:["Auto","None","Reciprocal"],Inference:["Auto","Long"],ImpliedTimes:["Auto","MoreImpliedTimes","None"],Log:["Auto","LnAsNaturalLog"],Matrix:["Auto","Combinatoric","EndMatrix","EndVector","SilentColNum","SpeakColNum","Vector"],MultiLineLabel:["Auto","Case","Constraint","Equation","Line","None","Row","Step"],MultiLineOverview:["Auto","None"],MultiLinePausesBetweenColumns:["Auto","Long","Short"],MultsymbolDot:["Auto","Dot"],MultsymbolX:["Auto","By","Cross"],Paren:["Auto","CoordPoint","Interval","Silent","Speak","SpeakNestingLevel"],Prime:["Auto","Angle","Length"],Roots:["Auto","PosNegSqRoot","PosNegSqRootEnd","RootEnd"],SetMemberSymbol:["Auto","Belongs","Element","Member","In"],Sets:["Auto","SilentBracket","woAll"],TriangleSymbol:["Auto","Delta"],Trig:["Auto","ArcTrig","TrigInverse","Reciprocal"],VerticalLine:["Auto","Divides","Given","SuchThat"]}),tf="Auto";function ef(t){const i=t.split(":"),s={},r=Zg.getProperties(),n=Object.keys(r);for(let t,e=0;t=i[e];e++){const i=t.split("_");var a;-1!==n.indexOf(i[0])&&((a=i[1])&&a!==tf&&-1!==r[i[0]].indexOf(a)&&(s[i[0]]=i[1]))}return s}function sf(e){const i=Object.keys(e),s=[];for(let t=0;t<i.length;t++)s.push(i[t]+"_"+e[i[t]]);return s.length?s.join(":"):ju.DEFAULT_VALUE}const rf=Qu.u.LOCALES,nf=t=>sp.getInstance().setup(t),af=()=>sp.getInstance().json(),of=t=>{var e=t,t=sp.getInstance().options,i=hp(e);try{return Qg(i,t)}catch(e){return console.error(e),i}},lf=hp,cf=function(t,e,i){if("default"===t)return e+"_"+i;const s=ef(t);return s[e]=i,sf(s)},hf=ef,df=sf;var uf=function(t,a,o,l){return new(o=o||Promise)(function(i,e){function s(t){try{n(l.next(t))}catch(t){e(t)}}function r(t){try{n(l.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(s,r)}n((l=l.apply(t,a||[])).next())})};let pf={},mf=null;function gf(t){var t=null==t?void 0:t.match(/^clearspeak-(.*)/);return mf=null!=(t=null!=(t=t&&t[1])?t:mf)?t:"default"}const ff=new Map,bf=new Map;let Ef=0;function Nf(o,l,c){return uf(this,void 0,void 0,function*(){const e=t=>{c(o.factory.get("subMenu")(o.factory,{items:t,id:"Clearspeak"},l))};if(o.settings.speech&&o.settings.enrich){var i=o.pool.lookup("locale").getValue();if(yield function(t,e){return uf(this,void 0,void 0,function*(){ff.has(e)||(yield t.mathItem.generatorPool.getLocalePreferences(ff))})}(o,i),ff.get(i)){const r=function(e,t){const i=ff.get(t);{var s=e;t=Object.keys(i);const a=s.pool.lookup("speechRules"),o=gf(s.settings.speechRules);pf=hf(o);for(const o of t)s.factory.get("variable")(s.factory,{name:"csprf_"+o,setter:t=>{pf[o]=t,a.setValue("clearspeak-"+df(pf))},getter:()=>pf[o]||"Auto"},s.pool)}const r=[];for(const e of Object.getOwnPropertyNames(i))r.push({title:e,values:i[e].map(t=>t.replace(RegExp("^"+e+"_"),"")),variable:"csprf_"+e});const n=e.factory.get("selectionBox")(e.factory,{title:"Clearspeak Preferences",signature:"",order:"alphabetic",grid:"square",selections:r},e);return{type:"command",id:"ClearspeakPreferences",content:"Select Preferences",action:()=>n.post(0,0)}}(o,i);let t=[];if(o.settings.speech){const l=o.mathItem,c=null==(s=null==l?void 0:l.explorers)?void 0:s.speech,e=gf(o.settings.speechRules),r=(t=t.concat([{type:"radio",content:"No Preferences",id:"clearspeak-default",variable:"speechRules"},{type:"radio",content:"Current Preferences",id:"clearspeak-"+e,variable:"speechRules"},{type:"rule"}]),null==c?void 0:c.refocus),n=null!=(s=null==r?void 0:r.getAttribute("data-semantic-id"))?s:null,a=Ef++;yield l.generatorPool.getRelevantPreferences(l,n,bf,a);var s=bf.get(a);if(bf.delete(a),s){const o=function(e,t,i){const s=ff.get(i);return[{type:"label",content:"Preferences for "+t},{type:"rule"}].concat(s[t].map(function(t){const[s,r]=t.split("_");return{type:"radioCompare",content:r,id:"clearspeak-"+cf(e,s,r),variable:"speechRules",comparator:(t,e)=>{if(t===e)return!0;if("Auto"!==r)return!1;var[t,i]=t.split("-"),[e]=e.split("-");return t===e&&!hf(i)[s]}}}))}(e,s,i);t=t.concat(o)}}t.splice(2,0,r),e(t)}else e([])}else e([])})}Uu.DynamicSubmenus.set("Clearspeak",[Nf,"speech"]);let yf=null;function xf(t,e,i){if(yf)i(yf);else{const s=[];for(const t of rf.keys())"nemeth"!==t&&"euro"!==t&&s.push({type:"radio",id:t,content:rf.get(t)||t,variable:"locale"});s.sort((t,e)=>t.content.localeCompare(e.content,"en")),i(yf=t.factory.get("subMenu")(t.factory,{items:s,id:"Language"},e))}}Uu.DynamicSubmenus.set("A11yLanguage",[xf,"speech"]);const Af="MacOS"===Ws.os;function vf(t){const e=Ws.document,i=e.createElement("textarea");i.value=t,i.setAttribute("readonly",""),i.style.cssText="height: 1px; width: 1px; padding: 1px; position: absolute; left: -10px",e.body.appendChild(i),i.select();try{e.execCommand("copy")}catch(t){alert("Can't copy to clipboard: "+t.message)}e.body.removeChild(i)}function _f(a,o,l){return(i,t)=>{var e=function(){var t;let e=null==(t=i.mathItem)?void 0:t.root;for(;e&&!e.isKind("semantics");){if(e.isToken||1!==e.childNodes.length)return null;e=e.childNodes[0]}return e}(),s=o,r=l;if(e)for(const n of e.childNodes)if(n.isKind("annotation")){const e=function(t,e){var i=t.attributes.get("encoding");for(const t of Object.keys(e))if(e[t].includes(i))return t;return null}(n,s);if(e){const s=n.childNodes.reduce((t,e)=>t+e.toString(),"");r.push([e,s])}}return a.attachMenu(i),Cf(i,t,l,()=>a.post())}}function Tf(s){return(t,e)=>{var i=s.slice();return s.length=0,Cf(t,e,i,()=>vf(wf.trim()))}}let wf="";function Cf(t,e,i,s){return t.factory.get("subMenu")(t.factory,{items:i.map(([t,e])=>({type:"command",id:t,content:t,action:()=>{wf=e,s()}})),id:"annotations"},e)}class If extends mu{static fromJson(t,{content:e,variable:i,id:s,comparator:r},n){return new this(n,e,i,s,r)}constructor(t,e,i,s,r){super(t,e,i,s),this.comparator=r,this.role="menuitemradiocompare"}updateAria(){this.html.setAttribute("aria-checked",this.comparator(this.variable.getValue(),this.id)?"true":"false")}updateSpan(){this.span.style.display=this.comparator(this.variable.getValue(),this.id)?"":"none"}}class Lf extends ya{constructor(){super(...arguments),this.options={filterSRE:!0,filterTex:!0,texHints:!0,semantics:!1},this.mathItem=null}visitTree(t,e=null,i={}){return this.mathItem=e,mr(this.options,i),this.visitNode(t,"")}visitTeXAtomNode(t,e){return this.options.texHints?super.visitDefault(t,e):t.childNodes[0]&&1===t.childNodes[0].childNodes.length?this.visitNode(t.childNodes[0],e):`${e}<mrow${this.getAttributes(t)}>\n`+this.childNodeMml(t,e+"  ","\n")+e+"</mrow>"}visitMathNode(t,e){if(!this.options.semantics||"TeX"!==this.mathItem.inputJax.name)return super.visitDefault(t,e);var i=t.childNodes.length&&1<t.childNodes[0].childNodes.length;return""+e+`<math${this.getAttributes(t)}>
${e}  <semantics>
`+(i?e+"    <mrow>\n":"")+this.childNodeMml(t,e+(i?"      ":"    "),"\n")+(i?e+"    </mrow>\n":"")+e+'    <annotation encoding="application/x-tex">'+this.mathItem.math+`</annotation>
${e}  </semantics>
${e}</math>`}getAttributeList(t){const e=super.getAttributeList(t);if(this.options.filterTex&&(delete e["data-latex"],delete e["data-latex-item"]),this.options.filterSRE){const t=Object.keys(e).filter(t=>t.match(/^(?:data-semantic-.*?|data-speech-node|role|aria-(?:level|posinset|setsize|owns))$/));for(const i of t)delete e[i]}return e}}class Sf extends uu{keydown(t){if("a"===t.key&&(t.ctrlKey||t.metaKey))return this.selectAll(),void this.stop(t);super.keydown(t)}selectAll(){document.getSelection().selectAllChildren(this.html.querySelector(".CtxtMenu_InfoContent").firstChild)}copyToClipboard(){this.selectAll();try{document.execCommand("copy")}catch(t){alert("Can't copy to clipboard: "+t.message)}document.getSelection().removeAllRanges()}generateHtml(){super.generateHtml();const t=this.html.querySelector("span."+v.INFOSIGNATURE).appendChild(document.createElement("input"));t.type="button",t.value="Copy to Clipboard",t.addEventListener("click",t=>this.copyToClipboard())}}function kf(t,a,o,l){return new(o=o||Promise)(function(i,e){function s(t){try{n(l.next(t))}catch(t){e(t)}}function r(t){try{n(l.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(s,r)}n((l=l.apply(t,a||[])).next())})}var Rf,Of;const Mf=Gs;class D{get isLoading(){return 0<D.loading}get loadingPromise(){return this.isLoading?(D._loadingPromise||(D._loadingPromise=new Promise((t,e)=>{D._loadingOK=t,D._loadingFailed=e})),D._loadingPromise):Promise.resolve()}postInfo(t){this.menu.mathItem&&(this.menu.nofocus=!!this.menu.mathItem.outputData.nofocus),t.post()}constructor(t,e={}){this.settings=null,this.defaultSettings=null,this.menu=null,this.current=null,this.MmlVisitor=new Lf,this.jax={CHTML:null,SVG:null},this.rerenderStart=u.LAST,this.requiredExtensions=[],this.about=new uu('<b style="font-size:120%;">MathJax</b> v'+va.version,()=>{const t=[];return t.push("Input Jax: "+this.document.inputJax.map(t=>t.name).join(", ")),t.push("Output Jax: "+this.document.outputJax.name),t.push("Document Type: "+this.document.kind),t.join("<br/>")},'<a href="https://www.mathjax.org">www.mathjax.org</a>'),this.help=new uu("<b>MathJax Help</b>",()=>["<p><b>MathJax</b> is a JavaScript library that allows page"," authors to include mathematics within their web pages."," As a reader, you don't need to do anything to make that happen.</p>","<p><b>Browsers</b>: MathJax works with all modern browsers including"," Edge, Firefox, Chrome, Safari, Opera, and most mobile browsers.</p>","<p><b>Math Menu</b>: MathJax adds a contextual menu to equations."," Right-click or CTRL-click on any mathematics to access the menu.</p>",'<div style="margin-left: 1em;">',"<p><b>Show Math As:</b> These options allow you to view the formula's"," source markup (as MathML or in its original format).</p>","<p><b>Copy to Clipboard:</b> These options copy the formula's source markup,"," as MathML or in its original format, to the clipboard"," (in browsers that support that).</p>","<p><b>Math Settings:</b> These give you control over features of MathJax,"," such the size of the mathematics, the mechanism used to display equations,"," how to handle equations that are too wide, and the language to use for"," MathJax's menus and error messages (not yet implemented in v4).","</p>","<p><b>Accessibility</b>: MathJax can work with screen"," readers to make mathematics accessible to the visually impaired."," Turn on speech or braille generation to enable creation of speech strings"," and the ability to investigate expressions interactively.  You can control"," the style of the explorer in its menu.</p>","</div>","<p><b>Math Zoom</b>: If you are having difficulty reading an"," equation, MathJax can enlarge it to help you see it better, or"," you can scale all the math on the page to make it larger."," Turn these features on in the <b>Math Settings</b> menu.</p>","<p><b>Preferences</b>: MathJax uses your browser's localStorage database"," to save the preferences set via this menu locally in your browser.  These"," are not used to track you, and are not transferred or used remotely by"," MathJax in any way.</p>"].join("\n"),'<a href="https://www.mathjax.org">www.mathjax.org</a>'),this.mathmlCode=new Sf("MathJax MathML Expression",()=>{if(!this.menu.mathItem)return"";var t=this.toMML(this.menu.mathItem);return"<pre>"+this.formatSource(t)+"</pre>"},""),this.originalText=new Sf("MathJax Original Source",()=>{if(!this.menu.mathItem)return"";var t=this.menu.mathItem.math;return'<pre style="font-size:125%; margin:0">'+this.formatSource(t)+"</pre>"},""),this.annotationBox=new Sf("MathJax Annotation Text",()=>{var t=wf;return'<pre style="font-size:125%; margin:0">'+this.formatSource(t)+"</pre>"},""),this.svgImage=new Sf("MathJax SVG Image",()=>'<div id="svg-image" style="font-family: monospace; font-size:125%; margin:0">Generative SVG Image...</div>',""),this.speechText=new Sf("MathJax Speech Text",()=>this.menu.mathItem?'<div style="font-size:125%; margin:0">'+this.formatSource(this.menu.mathItem.outputData.speech)+"</div>":"",""),this.brailleText=new Sf("MathJax Braille Code",()=>this.menu.mathItem?'<div style="font-size:125%; margin:0">'+this.formatSource(this.menu.mathItem.outputData.braille)+"</div>":"",""),this.errorMessage=new Sf("MathJax Error Message",()=>this.menu.mathItem?'<pre style="font-size:125%; margin:0">'+this.formatSource(this.menu.errorMsg)+"</pre>":"",""),this.zoomBox=new uu("MathJax Zoomed Expression",()=>{if(!this.menu.mathItem)return"";const t=this.menu.mathItem.typesetRoot.cloneNode(!0);return t.style.margin="0",'<div style="font-size: '+1.25*parseFloat(this.settings.zscale)+'%">'+t.outerHTML+"</div>"},""),this.document=t,this.options=mr(pr({},this.constructor.OPTIONS),e),this.initSettings(),this.mergeUserSettings(),this.initMenu(),this.applySettings()}initSettings(){var t;this.settings=this.options.settings,this.jax=this.options.jax;const e=this.document.outputJax;this.jax[e.name]=e,this.settings.renderer=e.name,this.settings.scale=e.options.scale,e.options.displayOverflow&&(this.settings.overflow=e.options.displayOverflow.substring(0,1).toUpperCase()+e.options.displayOverflow.substring(1).toLowerCase()),this.settings.breakInline=null==(t=e.options.linebreaks)?void 0:t.inline,this.defaultSettings=Object.assign({},this.document.options.a11y,this.settings),this.setA11y({roleDescription:this.settings.roleDescription})}initMenu(){const t=new Su([["contextMenu",Uu.fromJson.bind(Uu)],["radioCompare",If.fromJson.bind(If)]]),e=(this.menu=t.parse({type:"contextMenu",id:"MathJax_Menu",pool:[this.variable("showSRE"),this.variable("showTex"),this.variable("texHints"),this.variable("semantics"),this.variable("zoom"),this.variable("zscale"),this.variable("renderer",t=>this.setRenderer(t)),this.variable("overflow",t=>this.setOverflow(t)),this.variable("breakInline",t=>this.setInlineBreaks(t)),this.variable("alt"),this.variable("cmd"),this.variable("ctrl"),this.variable("shift"),this.variable("scale",t=>this.setScale(t)),this.a11yVar("speech",t=>this.setSpeech(t)),this.a11yVar("braille",t=>this.setBraille(t)),this.variable("brailleCode",t=>this.setBrailleCode(t)),this.a11yVar("highlight",t=>this.setHighlight(t)),this.a11yVar("backgroundColor"),this.a11yVar("backgroundOpacity"),this.a11yVar("foregroundColor"),this.a11yVar("foregroundOpacity"),this.a11yVar("subtitles"),this.a11yVar("viewBraille"),this.a11yVar("voicing"),this.a11yVar("roleDescription",()=>this.setRoleDescription()),this.a11yVar("help"),this.a11yVar("locale",t=>this.setLocale(t)),this.variable("speechRules",t=>{var[t,e]=t.split("-");this.document.options.sre.domain=t,this.document.options.sre.style=e,this.rerender(u.COMPILED)}),this.a11yVar("magnification"),this.a11yVar("magnify"),this.a11yVar("treeColoring"),this.a11yVar("infoType"),this.a11yVar("infoRole"),this.a11yVar("infoPrefix"),this.variable("autocollapse"),this.variable("collapsible",t=>this.setCollapsible(t)),this.variable("enrich",t=>this.setEnrichment(t)),this.variable("inTabOrder",t=>this.setTabOrder(t)),this.a11yVar("tabSelects"),this.variable("assistiveMml",t=>this.setAssistiveMml(t))],items:[this.submenu("Show","Show Math As",[this.command("MathMLcode","MathML Code",()=>this.postInfo(this.mathmlCode)),this.command("Original","Original Form",()=>this.postInfo(this.originalText)),this.rule(),this.command("Speech","Speech Text",()=>this.postInfo(this.speechText),{disabled:!0}),this.command("Braille","Braille Code",()=>this.postInfo(this.brailleText),{disabled:!0}),this.command("SVG","SVG Image",()=>this.postSvgImage(),{disabled:!0}),this.submenu("ShowAnnotation","Annotation"),this.rule(),this.command("Error","Error Message",()=>this.postInfo(this.errorMessage),{disabled:!0})]),this.submenu("Copy","Copy to Clipboard",[this.command("MathMLcode","MathML Code",()=>this.copyMathML()),this.command("Original","Original Form",()=>this.copyOriginal()),this.rule(),this.command("Speech","Speech Text",()=>this.copySpeechText(),{disabled:!0}),this.command("Braille","Braille Code",()=>this.copyBrailleText(),{disabled:!0}),this.command("SVG","SVG Image",()=>this.copySvgImage(),{disabled:!0}),this.submenu("CopyAnnotation","Annotation"),this.rule(),this.command("Error","Error Message",()=>this.copyErrorMessage(),{disabled:!0})]),this.rule(),this.submenu("Settings","Math Settings",[this.submenu("Renderer","Math Renderer",this.radioGroup("renderer",[["CHTML"],["SVG"]])),this.submenu("Overflow","Wide Expressions",[this.radioGroup("overflow",[["Overflow"],["Scroll"],["Linebreak"],["Scale"],["Truncate"],["Elide"]]),this.rule(),this.checkbox("BreakInline","Allow In-line Breaks","breakInline")]),this.rule(),this.submenu("MathmlIncludes","MathML/SVG has",[this.checkbox("showSRE","Semantic attributes","showSRE"),this.checkbox("showTex","LaTeX attributes","showTex"),this.checkbox("texHints","TeX hints","texHints"),this.checkbox("semantics","Original as annotation","semantics")]),this.submenu("Language","Language"),this.rule(),this.submenu("ZoomTrigger","Zoom Trigger",[this.command("ZoomNow","Zoom Once Now",()=>this.zoom(null,"",this.menu.mathItem)),this.rule(),this.radioGroup("zoom",[["Click"],["DoubleClick","Double-Click"],["NoZoom","No Zoom"]]),this.rule(),this.label("TriggerRequires","Trigger Requires:"),this.checkbox(Af?"Option":"Alt",Af?"Option":"Alt","alt"),this.checkbox("Command","Command","cmd",{hidden:!Af}),this.checkbox("Control","Control","ctrl",{hiddne:Af}),this.checkbox("Shift","Shift","shift")]),this.submenu("ZoomFactor","Zoom Factor",this.radioGroup("zscale",[["150%"],["175%"],["200%"],["250%"],["300%"],["400%"]])),this.rule(),this.command("Scale","Scale All Math...",()=>this.scaleAllMath()),this.rule(),this.command("Reset","Reset to defaults",()=>this.resetDefaults())]),this.rule(),this.label("Accessibility","Â Â  Accessibility:"),this.submenu("Speech","Â  Â  Speech",[this.checkbox("Generate","Generate","speech"),this.checkbox("Subtitles","Show Subtitles","subtitles"),this.checkbox("Auto Voicing","Auto Voicing","voicing"),this.rule(),this.label("Rules","Rules:"),this.submenu("Mathspeak","Mathspeak",this.radioGroup("speechRules",[["mathspeak-default","Verbose"],["mathspeak-brief","Brief"],["mathspeak-sbrief","Superbrief"]])),this.submenu("Clearspeak","Clearspeak",this.radioGroup("speechRules",[["clearspeak-default","Auto"]])),this.rule(),this.submenu("A11yLanguage","Language")]),this.submenu("Braille","Â  Â  Braille",[this.checkbox("Generate","Generate","braille"),this.checkbox("Subtitles","Show Subtitles","viewBraille"),this.rule(),this.label("Code","Code Format:"),this.radioGroup("brailleCode",[["nemeth","Nemeth"],["ueb","UEB"],["euro","Euro"]])]),this.submenu("Explorer","Â  Â  Explorer",[this.submenu("Highlight","Highlight",[this.submenu("Background","Background",this.radioGroup("backgroundColor",[["Blue"],["Red"],["Green"],["Yellow"],["Cyan"],["Magenta"],["White"],["Black"]])),{type:"slider",variable:"backgroundOpacity",content:" "},this.submenu("Foreground","Foreground",this.radioGroup("foregroundColor",[["Black"],["White"],["Magenta"],["Cyan"],["Yellow"],["Green"],["Red"],["Blue"]])),{type:"slider",variable:"foregroundOpacity",content:" "},this.rule(),this.radioGroup("highlight",[["None"],["Hover"],["Flame"]]),this.rule(),this.checkbox("TreeColoring","Tree Coloring","treeColoring")]),this.submenu("Magnification","Magnification",[this.radioGroup("magnification",[["None"],["Keyboard"],["Mouse"]]),this.rule(),this.radioGroup("magnify",[["200%"],["300%"],["400%"],["500%"]])]),this.submenu("Semantic Info","Semantic Info",[this.checkbox("Type","Type","infoType"),this.checkbox("Role","Role","infoRole"),this.checkbox("Prefix","Prefix","infoPrefix")]),this.rule(),this.submenu("Role Description","Describe math as",[this.radioGroup("roleDescription",[["MathJax expression"],["MathJax"],["math"],["clickable math"],["explorable math"],["none"]])]),this.checkbox("Math Help","Help message on focus","help")]),this.submenu("Options","Â  Â  Options",[this.checkbox("Enrich","Semantic Enrichment","enrich"),this.checkbox("Collapsible","Collapsible Math","collapsible"),this.checkbox("AutoCollapse","Auto Collapse","autocollapse",{disabled:!0}),this.rule(),this.checkbox("InTabOrder","Include in Tab Order","inTabOrder"),this.submenu("TabSelects","Tabbing Focuses on",[this.radioGroup("tabSelects",[["all","Whole Expression"],["last","Last Explored Node"]])]),this.rule(),this.checkbox("AssistiveMml","Include Hidden MathML","assistiveMml")]),this.rule(),this.command("About","About MathJax",()=>this.postInfo(this.about)),this.command("Help","MathJax Help",()=>this.postInfo(this.help))]}),this.menu);e.settings=this.settings,e.findID("Settings","Overflow","Elide").disable(),e.findID("Braille","ueb").hide(),e.setJax(this.jax),this.attachDialogMenus(e),this.checkLoadableItems();var i=[];Uu.DynamicSubmenus.set("ShowAnnotation",[_f(this.annotationBox,this.options.annotationTypes,i),""]),Uu.DynamicSubmenus.set("CopyAnnotation",[Tf(i),""]),i=this.document.document,Mu||(Fu(ku,i),Mu=!0,Bu(i)),i=this.document.document,Du||(Fu(Ru,i),Du=!0,Bu(i))}attachDialogMenus(t){this.about.attachMenu(t),this.help.attachMenu(t),this.originalText.attachMenu(t),this.mathmlCode.attachMenu(t),this.originalText.attachMenu(t),this.svgImage.attachMenu(t),this.speechText.attachMenu(t),this.brailleText.attachMenu(t),this.errorMessage.attachMenu(t),this.zoomBox.attachMenu(t)}checkLoadableItems(){var t,e;if(Mf&&Mf._&&Mf.loader&&Mf.startup){var i=this.settings,s=this.document.options;!(i.enrich||i.speech&&s.enableSpeech||i.braille&&s.enableBraille)||null!=(e=null==(t=Mf._)?void 0:t.a11y)&&e.explorer||this.loadA11y("explorer"),!i.collapsible||null!=(t=null==(s=Mf._)?void 0:s.a11y)&&t.complexity||this.loadA11y("complexity"),!i.assistiveMml||null!=(s=null==(e=Mf._)?void 0:e.a11y)&&s["assistive-mml"]||this.loadA11y("assistive-mml")}else{const t=this.menu;for(const e of Object.keys(this.jax))this.jax[e]||t.findID("Settings","Renderer",e).disable();t.findID("Speech").disable(),t.findID("Braille").disable(),t.findID("Explorer").disable(),t.findID("Options","AutoCollapse").disable(),t.findID("Options","Collapsible").disable(),t.findID("Options","Enrich").disable(),t.findID("Options","AssistiveMml").disable()}}enableAccessibilityItems(t,e){const i=this.menu.findID(t).submenu;for(const t of i.items.slice(1))t instanceof gu||(!e||t instanceof nu&&!t.submenu.items.length?t.disable():t.enable())}mergeUserSettings(){try{var t=localStorage.getItem(D.MENU_STORAGE);if(!t)return;Object.assign(this.settings,JSON.parse(t)),this.setA11y(this.settings)}catch(t){console.log("MathJax localStorage error: "+t.message)}}saveUserSettings(){const t={};for(const e of Object.keys(this.settings))this.settings[e]!==this.defaultSettings[e]&&(t[e]=this.settings[e]);try{Object.keys(t).length?localStorage.setItem(D.MENU_STORAGE,JSON.stringify(t)):localStorage.removeItem(D.MENU_STORAGE)}catch(t){console.log("MathJax localStorage error: "+t.message)}}setA11y(t){var e;null!=(e=null==(e=Mf._)?void 0:e.a11y)&&e.explorer&&Mf._.a11y.explorer_ts.setA11yOptions(this.document,t)}getA11y(t){var e;if(null!=(e=null==(e=Mf._)?void 0:e.a11y)&&e.explorer)return(void 0!==this.document.options.a11y[t]?this.document.options.a11y:this.document.options.sre)[t]}applySettings(){this.setTabOrder(this.settings.inTabOrder),this.document.options.enableAssistiveMml=this.settings.assistiveMml,this.enableAccessibilityItems("Speech",this.settings.speech),this.enableAccessibilityItems("Braille",this.settings.braille),this.setAccessibilityMenus();const i=this.settings.renderer.replace(/[^a-zA-Z0-9]/g,"")||"CHTML";(D._loadingPromise||Promise.resolve()).then(()=>{const t=this.settings,e=this.document.outputJax.options;if(e.scale=parseFloat(t.scale),e.displayOverflow=t.overflow.toLowerCase(),e.linebreaks&&(e.linebreaks.inline=t.breakInline),!t.speechRules){const i=this.document.options.sre;t.speechRules=`${i.domain||"clearspeak"}-`+(i.style||"default")}i!==this.defaultSettings.renderer&&this.document.whenReady(()=>this.setRenderer(i,!1))})}setOverflow(t){this.document.outputJax.options.displayOverflow=t.toLowerCase(),D.loading||this.document.rerenderPromise()}setInlineBreaks(t){this.document.outputJax.options.linebreaks.inline=t,D.loading||this.document.rerenderPromise()}setScale(t){this.document.outputJax.options.scale=parseFloat(t),D.loading||this.document.rerenderPromise()}setRenderer(s,r=!0){if(Object.hasOwn(this.jax,s)&&this.jax[s])return this.setOutputJax(s,r);const n=s.toLowerCase();return new Promise((e,i)=>{this.loadComponent("output/"+n,()=>{const t=Mf.startup;if(!(n in t.constructors))return i(new Error(`Component ${n} not loaded`));t.useOutput(n,!0),t.output=t.getOutputJax(),t.output.setAdaptor(this.document.adaptor),t.output.initialize(),this.jax[s]=t.output,this.setOutputJax(s,r).then(()=>e()).catch(t=>i(t))})})}setOutputJax(t,e=!0){this.jax[t].setAdaptor(this.document.adaptor),this.document.outputJax=this.jax[t];const i=this.loadRequiredExtensions();return e?i.then(()=>va.handleRetriesFor(()=>this.rerender())):i.then(()=>{})}loadRequiredExtensions(){const t=this.document.outputJax.name.toLowerCase(),e=[];for(const i of this.requiredExtensions)e.push(Mf.loader.load(`[${i}]/`+t));return this.requiredExtensions=[],Promise.all(e)}addRequiredExtensions(t){t&&(t=new Set([...this.requiredExtensions,...t]),this.requiredExtensions=[...t])}setTabOrder(t){const e=this.menu.findID("Options","TabSelects");t?e.enable():e.disable(),this.menu.store.inTaborder(t)}setAssistiveMml(t){!(this.document.options.enableAssistiveMml=t)||null!=(t=null==(t=Mf._)?void 0:t.a11y)&&t["assistive-mml"]?this.rerender():this.loadA11y("assistive-mml")}setAccessibilityMenus(){const t=this.settings.enrich,e=t?"enable":"disable",i=(["Speech","Braille","Explorer"].forEach(t=>this.menu.findID(t)[e]()),this.document.options);(i.enableSpeech=i.enableBraille=i.enableExplorer=t)||(this.settings.collapsible=!1,this.document.options.enableCollapsible=!1)}setSpeech(t){this.enableAccessibilityItems("Speech",t),!(this.document.options.enableSpeech=t)||null!=(t=null==(t=Mf._)?void 0:t.a11y)&&t.explorer?this.rerender(u.COMPILED):this.loadA11y("explorer")}setBraille(t){this.enableAccessibilityItems("Braille",t),!(this.document.options.enableBraille=t)||null!=(t=null==(t=Mf._)?void 0:t.a11y)&&t.explorer?this.rerender(u.COMPILED):this.loadA11y("explorer")}setBrailleCode(t){this.document.options.sre.braille=t,this.rerender(u.COMPILED)}setLocale(t){this.document.options.sre.locale=t,this.rerender(u.COMPILED)}setRoleDescription(){this.rerender(u.COMPILED)}setEnrichment(t){this.document.options.enableEnrichment=t,this.setAccessibilityMenus(),!t||null!=(t=null==(t=Mf._)?void 0:t.a11y)&&t.explorer?this.rerender(u.COMPILED):this.loadA11y("explorer")}setCollapsible(t){(this.document.options.enableComplexity=t)&&!this.settings.enrich&&(this.settings.enrich=this.document.options.enableEnrichment=!0,this.setAccessibilityMenus()),t||this.menu.pool.lookup("highlight").setValue("None"),!t||null!=(t=null==(t=Mf._)?void 0:t.a11y)&&t.complexity?this.rerender(u.COMPILED):(this.loadA11y("complexity"),null!=(t=null==(t=Mf._)?void 0:t.a11y)&&t.explorer||this.loadA11y("explorer"))}setHighlight(t){var e,i;if("None"!==t){if(!this.settings.collapsible){const t=this.menu.pool.lookup("collapsible");t.setValue(!0),null!=(i=null==(e=t.items[0])?void 0:e.executeCallbacks_)&&i.call(e)}D.loadingPromises.has("a11y/complexity")||this.rerender(u.COMPILED)}}scaleAllMath(){const t=(100*parseFloat(this.settings.scale)).toFixed(1).replace(/.0$/,""),e=prompt("Scale all mathematics (compared to surrounding text) by",t+"%");if(this.current){const t=this.menu.mathItem.explorers.speech;t.refocus=this.current,t.focus()}if(e)if(e.match(/^\s*\d+(\.\d*)?\s*%?\s*$/)){const t=parseFloat(e)/100;t?this.menu.pool.lookup("scale").setValue(String(t)):alert("The scale should not be zero")}else alert("The scale should be a percentage (e.g., 120%)")}resetDefaults(){D.loading++;const t=this.menu.pool,e=this.defaultSettings;for(const i of Object.keys(e)){const s=t.lookup(i);if(s){if(s.getValue()!==e[i]){s.setValue(e[i]);const t=s.items[0];t&&t.executeCallbacks_()}}else Object.hasOwn(this.settings,i)&&(this.settings[i]=e[i])}D.loading--,this.rerender(u.COMPILED)}checkComponent(t){t=D.loadingPromises.get(t);t&&va.retryAfter(t)}loadComponent(t,e){if(!D.loadingPromises.has(t)){const s=Mf.loader;var i;s&&(D.loading++,i=s.load(t).then(()=>{D.loading--,D.loadingPromises.delete(t),0===D.loading&&D._loadingPromise&&(D._loadingPromise=null,D._loadingOK()),e()}).catch(t=>{D._loadingPromise?(D._loadingPromise=null,D._loadingFailed(t)):console.log(t)}),D.loadingPromises.set(t,i))}}loadA11y(s){const r=!u.ENRICHED;this.loadComponent("a11y/"+s,()=>{var t;const e=Mf.startup;va.handlers.unregister(e.handler),e.handler=e.getHandler(),va.handlers.register(e.handler);var i=this.document;this.document=e.document=e.getDocument(),this.document.processed=i.processed,this.document.menu=this,i.webworker&&(this.document.webworker=i.webworker),this.setA11y(this.settings),this.defaultSettings=Object.assign({},this.document.options.a11y,(null==(t=null==(t=Mf.config)?void 0:t.options)?void 0:t.a11y)||{},this.defaultSettings),this.document.outputJax.reset(),this.transferMathList(i),this.document.processed=i.processed,D._loadingPromise||(this.document.outputJax.reset(),va.handleRetriesFor(()=>{this.rerender("complexity"===s||r?u.COMPILED:u.TYPESET)}))})}transferMathList(t){const e=this.document.options.MathItem;for(const i of t.math){const t=new e;Object.assign(t,i),this.document.math.push(t)}}formatSource(t){return t.trim().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}toMML(t){return this.MmlVisitor.visitTree(t.root,t,{filterSRE:!this.settings.showSRE,filterTex:!this.settings.showTex,texHints:this.settings.texHints,semantics:this.settings.semantics&&"MathML"!==t.inputJax.name})}toSVG(t){const e=this.jax.SVG;if(!e)return Promise.resolve("SVG can't be produced.<br>Try switching to SVG output first.");const i=e.adaptor,s=e.options.fontCache,r=!!t.root.getProperty("process-breaks");if("global"!==s&&(t.display||!r)&&"SVG"===i.getAttribute(t.typesetRoot,"jax"))for(const e of i.childNodes(t.typesetRoot))if("svg"===i.kind(e))return Promise.resolve(this.formatSvg(i.serializeXML(e)));return this.typesetSVG(t,s,r)}typesetSVG(s,r,n){return kf(this,void 0,void 0,function*(){const t=this.jax.SVG,e=t.html("div"),i=("global"===r&&(t.options.fontCache="local"),s.root);return s.root=i.copy(!0),s.root.setInheritedAttributes({},s.display,0,!1),n&&(t.unmarkInlineBreaks(s.root),s.root.setProperty("inlineMarked",!1)),va.handleRetriesFor(()=>{t.toDOM(s,e,t.document)}).then(()=>(s.root=i,t.options.fontCache=r,this.formatSvg(t.adaptor.innerHTML(e))))})}formatSvg(t){var e=this.constructor.SvgCss;return t=(t=t.match(/^<svg.*?><defs>/)?t.replace(/<defs>/,`<defs><style>${e}</style>`):t.replace(/^(<svg.*?>)/,`$1<defs><style>${e}</style></defs>`)).replace(/ (?:role|focusable)=".*?"/g,"").replace(/"currentColor"/g,'"black"'),this.settings.showSRE||(t=t.replace(/ (?:data-semantic-.*?|data-speech-node|role|aria-(?:level|posinset|setsize|owns))=".*?"/g,"")),this.settings.showTex||(t=t.replace(/ data-latex(?:-item)?=".*?"/g,"")),`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
`+(t=this.settings.texHints?t:t.replace(/ data-mjx-(?:texclass|alternate|variant|pseudoscript|smallmatrix|mathaccent|auto-op|script-align|vbox)=".*?"/g,"").replace(/ data-mml-node="TeXAtom"/g,""))}postSvgImage(){this.postInfo(this.svgImage),this.toSVG(this.menu.mathItem).then(t=>{this.svgImage.html.querySelector("#svg-image").innerHTML=this.formatSource(t).replace(/\n/g,"<br>")})}zoom(t,e,i){t&&!this.isZoomEvent(t,e)||(this.menu.mathItem=i,t&&this.menu.post(t),this.postInfo(this.zoomBox))}isZoomEvent(t,e){return this.settings.zoom===e&&(!this.settings.alt||t.altKey)&&(!this.settings.ctrl||t.ctrlKey)&&(!this.settings.cmd||t.metaKey)&&(!this.settings.shift||t.shiftKey)}rerender(t=u.TYPESET){this.rerenderStart=Math.min(t,this.rerenderStart);const e=Mf.startup;!D.loading&&e.hasTypeset&&e.document.whenReady(()=>kf(this,void 0,void 0,function*(){this.rerenderStart<=u.COMPILED&&this.document.reset({inputJax:[]}),yield this.document.rerenderPromise(this.rerenderStart),this.rerenderStart=u.LAST}))}copyMathML(){vf(this.toMML(this.menu.mathItem))}copyOriginal(){vf(this.menu.mathItem.math.trim())}copySvgImage(){this.toSVG(this.menu.mathItem).then(t=>{vf(t)})}copySpeechText(){vf(this.menu.mathItem.outputData.speech)}copyBrailleText(){vf(this.menu.mathItem.outputData.braille)}copyErrorMessage(){vf(this.menu.errorMsg.trim())}addMenu(t){this.addEvents(t),this.menu.store.insert(t.typesetRoot),t.typesetRoot.tabIndex=this.settings.inTabOrder?0:-1}addEvents(i){const t=i.typesetRoot;t.addEventListener("mousedown",()=>{var t;this.menu.mathItem=i,this.current=null==(t=null==(t=i.explorers)?void 0:t.speech)?void 0:t.current},!0),t.addEventListener("contextmenu",()=>{var t;const e=null==(t=(this.menu.mathItem=i).explorers)?void 0:t.speech;e&&(i.outputData.nofocus=!this.current,e.refocus=this.current)},!0),t.addEventListener("keydown",()=>this.menu.mathItem=i,!0),t.addEventListener("click",t=>this.zoom(t,"Click",i),!0),t.addEventListener("dblclick",t=>this.zoom(t,"DoubleClick",i),!0)}clear(){this.menu.store.clear()}variable(e,i){return{name:e,getter:()=>this.settings[e],setter:t=>{this.settings[e]=t,i&&i(t),this.saveUserSettings()}}}a11yVar(e,i){return{name:e,getter:()=>this.getA11y(e),setter:t=>{this.settings[e]=t,this.setA11y({[e]:t}),i&&i(t),this.saveUserSettings()}}}submenu(t,e,i=[],s=!1){let r=[];for(const t of i)Array.isArray(t)?r=r.concat(t):r.push(t);return{type:"submenu",id:t,content:e,menu:{items:r},disabled:0===r.length||s}}command(t,e,i,s={}){return Object.assign({type:"command",id:t,content:e,action:i},s)}checkbox(t,e,i,s={}){return Object.assign({type:"checkbox",id:t,content:e,variable:i},s)}radioGroup(e,t){return t.map(t=>this.radio(t[0],t[1]||t[0],e))}radio(t,e,i,s={}){return Object.assign({type:"radio",id:t,content:e,variable:i},s)}label(t,e){return{type:"label",id:t,content:e}}rule(){return{type:"rule"}}}function Df(t){return class extends t{addMenu(t,e=!1){this.state()>=u.CONTEXT_MENU||(this.isEscaped||!t.options.enableMenu&&!e||t.menu.addMenu(this),this.state(u.CONTEXT_MENU))}getMenus(t){t.menu.menu.store.sort()}checkLoading(t){t.checkLoading()}}}function Pf(t){var e=class extends t{constructor(...t){super(...t),this.menu=new this.options.MenuClass(this,this.options.menuOptions);const e=this.constructor.ProcessBits,i=(e.has("context-menu")||e.allocate("context-menu"),this.options.MathItem=Df(this.options.MathItem),this.menu.settings),s=this.options,r=s.enableEnrichment=i.enrich;s.enableSpeech=i.speech&&r,s.enableBraille=i.braille&&r,s.enableComplexity=i.collapsible&&r,s.enableExplorer=r}addMenu(){if(!this.processed.isSet("context-menu")){for(const t of this.math)t.addMenu(this);this.processed.set("context-menu")}return this}getMenus(){this.menu.menu.store.sort()}checkLoading(){let t=!0;try{this._checkLoading(),t=!1}catch(t){if(!t.retry)throw t}return t}_checkLoading(){return this.menu.isLoading&&va.retryAfter(this.menu.loadingPromise.catch(t=>console.log(t))),this.options.enableComplexity&&this.menu.checkComponent("a11y/complexity"),this.options.enableExplorer&&this.menu.checkComponent("a11y/explorer"),this}state(t,e=!1){return super.state(t,e),t<u.CONTEXT_MENU&&this.processed.clear("context-menu"),this}};return e.OPTIONS=Object.assign(Object.assign({enableEnrichment:!0,enableComplexity:!0,enableSpeech:!0,enableBraille:!0,enableExplorer:!0,enrichSpeech:"none",enrichError:(t,e,i)=>console.warn("Enrichment Error:",i)},t.OPTIONS),{MenuClass:D,menuOptions:D.OPTIONS,enableMenu:!0,sre:t.OPTIONS.sre||lr({}),a11y:t.OPTIONS.a11y||lr({}),renderActions:lr(Object.assign(Object.assign({},t.OPTIONS.renderActions),{addMenu:[u.CONTEXT_MENU],getMenus:[u.INSERTED+5,!1],checkLoading:[u.UNPROCESSED+1,t=>t.checkLoading(),"",!1]}))}),e}function Bf(t){return t.documentClass=Pf(t.documentClass),t}D.MENU_STORAGE="MathJax-Menu-Settings",D.OPTIONS={settings:{showSRE:!1,showTex:!1,texHints:!0,semantics:!1,zoom:"NoZoom",zscale:"200%",renderer:"CHTML",alt:!1,cmd:!1,ctrl:!1,shift:!1,scale:1,overflow:"Scroll",breakInline:!0,autocollapse:!1,collapsible:!1,enrich:!0,inTabOrder:!0,assistiveMml:!1,speech:!0,braille:!0,brailleCode:"nemeth",speechRules:"clearspeak-default",roleDescription:"math",tabSelects:"all"},jax:{CHTML:null,SVG:null},annotationTypes:lr({TeX:["TeX","LaTeX","application/x-tex"],StarMath:["StarMath 5.0"],Maple:["Maple"],ContentMathML:["MathML-Content","application/mathml-content+xml"],OpenMath:["OpenMath"]})},D.SvgCss=["svg a{fill:blue;stroke:blue}",'[data-mml-node="merror"]>g{fill:red;stroke:red}','[data-mml-node="merror"]>rect[data-background]{fill:yellow;stroke:none}',"[data-frame],[data-line]{stroke-width:70px;fill:none}",".mjx-dashed{stroke-dasharray:140}",".mjx-dotted{stroke-linecap:round;stroke-dasharray:0,140}","use[data-c]{stroke-width:3px}"].join(""),D.loading=0,D.loadingPromises=new Map,D._loadingPromise=null,D._loadingOK=null,D._loadingFailed=null,Dr("CONTEXT_MENU",170),MathJax.loader&&MathJax.loader.checkVersion("ui/menu",Bs,"ui"),Hs({_:{a11y:{speech:{SpeechMenu:ps}},ui:{menu:{AnnotationMenu:gs,MJContextMenu:ds,Menu:Ns,MenuHandler:ys,MenuUtil:ms,MmlVisitor:bs,RadioCompare:fs,SelectableInfo:Es}}}}),MathJax.startup&&Vs&&MathJax.startup.extendHandler(t=>Bf(t),20);const Ff="http://www.w3.org/1998/Math/MathML";class Uf extends wr{findMath(t){var e=new Set,i=(this.findMathNodes(t,e),this.findMathPrefixed(t,e),this.adaptor.root(this.adaptor.document));return"html"===this.adaptor.kind(i)&&0===e.size&&this.findMathNS(t,e),this.processMath(e)}findMathNodes(t,e){for(const i of this.adaptor.tags(t,"math"))e.add(i)}findMathPrefixed(t,e){const i=this.adaptor.root(this.adaptor.document);for(const s of this.adaptor.allAttributes(i))if("xmlns:"===s.name.substring(0,6)&&s.value===Ff){const i=s.name.substring(6);for(const r of this.adaptor.tags(t,i+":math"))e.add(r)}}findMathNS(t,e){for(const i of this.adaptor.tags(t,"math",Ff))e.add(i)}processMath(t){const e=this.adaptor,i=[];for(const s of t.values())if("mjx-assistive-mml"!==e.kind(e.parent(s))){const t="block"===e.getAttribute(s,"display")||"display"===e.getAttribute(s,"mode"),r={node:s,n:0,delim:""},n={node:s,n:0,delim:""};i.push({math:e.outerHTML(s),start:r,end:n,display:t})}return i}}Uf.OPTIONS={};class qf{constructor(t={}){var e=this.constructor;this.options=mr(pr({},e.OPTIONS),t)}setMmlFactory(t){this.factory=t}compile(t){const e=this.makeNode(t);return e.verifyTree(this.options.verify),e.setInheritedAttributes({},!1,0,!1),e.walkTree(this.markMrows),e}makeNode(t){const e=this.adaptor;let i=!1;var s=e.kind(t).replace(/^.*:/,"");let r=e.getAttribute(t,"data-mjx-texclass")||"",n=(r=r&&(this.filterAttribute("data-mjx-texclass",r)||""))&&"mrow"===s?"TeXAtom":s;for(const a of this.filterClassList(e.allClasses(t)))a.match(/^MJX-TeXAtom-/)&&"mrow"===s?(r=a.substring(12),n="TeXAtom"):"MJX-fixedlimits"===a&&(i=!0);return this.factory.getNodeClass(n)?this.createMml(n,t,r,i):this.unknownNode(n,t)}createMml(t,e,i,s){const r=this.factory.create(t);return"TeXAtom"!==t||"OP"!==i||s||(r.setProperty("movesupsub",!0),r.attributes.setInherited("movablelimits",!0)),i&&(r.texClass=h[i],r.setProperty("texClass",r.texClass)),this.addAttributes(r,e),this.checkClass(r,e),this.addChildren(r,e),r}unknownNode(t,e){return this.factory.getNodeClass("html")&&this.options.allowHtmlInTokenNodes?this.factory.create("html").setHTML(e,this.adaptor):(this.error('Unknown node type "'+t+'"'),null)}addAttributes(t,e){let i=!1;for(const r of this.adaptor.allAttributes(e)){const e=r.name,n=this.filterAttribute(e,r.value);if(null!==n&&"xmlns"!==e)if("data-mjx-"===e.substring(0,9))switch(e.substring(9)){case"alternate":t.setProperty("variantForm",!0);break;case"variant":t.attributes.set("mathvariant",n),t.setProperty("ignore-variant",!0),i=!0;break;case"smallmatrix":t.setProperty("smallmatrix",!0),t.setProperty("useHeight",!1);break;case"mathaccent":t.setProperty("mathaccent","true"===n);break;case"auto-op":t.setProperty("autoOP","true"===n);break;case"script-align":t.setProperty("scriptalign",n);break;case"vbox":t.setProperty("vbox",n);break;default:t.attributes.set(e,n)}else{var s;"class"!==e&&("true"===(s=n.toLowerCase())||"false"===s?t.attributes.set(e,"true"===s):i&&"mathvariant"===e||t.attributes.set(e,n))}}}filterAttribute(t,e){return e}filterClassList(t){return t}addChildren(t,e){if(0!==t.arity){const i=this.adaptor;for(const s of i.childNodes(e)){const e=i.kind(s);if("#comment"!==e)if("#text"===e)this.addText(t,s);else if(t.isKind("annotation-xml"))t.appendChild(this.factory.create("XML").setXML(s,i));else{const e=t.appendChild(this.makeNode(s));0===e.arity&&i.childNodes(s).length&&!e.isKind("html")&&(this.options.fixMisplacedChildren?this.addChildren(t,s):e.mError("There should not be children for "+e.kind+" nodes",this.options.verify,!0))}}t.isToken&&this.trimSpace(t)}}addText(t,e){let i=this.adaptor.value(e);(t.isToken||t.getProperty("isChars"))&&t.arity?(t.isToken&&(i=Ha(i),i=this.normalizeSpace(i)),t.appendChild(this.factory.create("text").setText(i))):i.match(/\S/)&&this.error('Unexpected text node "'+i+'"')}checkClass(t,e){const i=[];for(const s of this.filterClassList(this.adaptor.allClasses(e)))"MJX-"===s.substring(0,4)?"MJX-variant"===s?t.setProperty("variantForm",!0):"MJX-TeXAtom"!==s.substring(0,11)&&t.attributes.set("mathvariant",this.fixCalligraphic(s.substring(3))):i.push(s);i.length&&t.attributes.set("class",i.join(" "))}fixCalligraphic(t){return t.replace(/caligraphic/,"calligraphic")}markMrows(t){if(t.isKind("mrow")&&!t.isInferred&&2<=t.childNodes.length){const e=t.childNodes[0],i=t.childNodes[t.childNodes.length-1];e.isKind("mo")&&e.attributes.get("fence")&&e.attributes.get("stretchy")&&i.isKind("mo")&&i.attributes.get("fence")&&i.attributes.get("stretchy")&&(e.childNodes.length&&t.setProperty("open",e.getText()),i.childNodes.length&&t.setProperty("close",i.getText()))}}normalizeSpace(t){return t.replace(/[\t\n\r]/g," ").replace(/  +/g," ")}trimSpace(t){let e=t.childNodes[0];e&&(e.isKind("text")&&e.setText(e.getText().replace(/^ +/,"")),(e=t.childNodes[t.childNodes.length-1]).isKind("text")&&e.setText(e.getText().replace(/ +$/,"")))}error(t){throw new Error(t)}}qf.OPTIONS={MmlFactory:null,allowHtmlInTokenNodes:!1,fixMisplacedChildren:!0,verify:Object.assign({},o.verifyDefaults),translateEntities:!0};class jf extends Cr{constructor(t={}){var[t,e,i]=fr(t,Uf.OPTIONS,qf.OPTIONS);super(t),this.findMathML=this.options.FindMathML||new Uf(e),this.mathml=this.options.MathMLCompile||new qf(i),this.mmlFilters=new Js(this.options.mmlFilters)}setAdaptor(t){super.setAdaptor(t),this.findMathML.adaptor=t,this.mathml.adaptor=t}setMmlFactory(t){super.setMmlFactory(t),this.mathml.setMmlFactory(t)}get processStrings(){return!1}compile(e,i){let s=e.start.node;if(!s||!e.end.node||this.options.forceReparse||"#text"===this.adaptor.kind(s)){let t=this.executeFilters(this.preFilters,e,i,(e.math||"<math></math>").trim());"html"===this.options.parseAs&&(t=`<html><head></head><body>${t}</body></html>`);var r=this.checkForErrors(this.adaptor.parse(t,"text/"+this.options.parseAs)),r=this.adaptor.body(r);1!==this.adaptor.childNodes(r).length&&this.error("MathML must consist of a single element"),s=this.adaptor.remove(this.adaptor.firstChild(r)),"math"!==this.adaptor.kind(s).replace(/^[a-z]+:/,"")&&this.error("MathML must be formed by a <math> element, not <"+this.adaptor.kind(s)+">")}s=this.executeFilters(this.mmlFilters,e,i,s);let t=this.mathml.compile(s);return t=this.executeFilters(this.postFilters,e,i,t),e.display="block"===t.attributes.get("display"),t}checkForErrors(t){var e=this.adaptor.tags(this.adaptor.body(t),"parsererror")[0];return e&&(""===this.adaptor.textContent(e)&&this.error("Error processing MathML"),this.options.parseError.call(this,e)),t}error(t){throw new Error(t)}findMath(t){return this.findMathML.findMath(t)}}jf.NAME="MathML",jf.OPTIONS=pr({parseAs:"html",forceReparse:!1,mmlFilters:[],FindMathML:null,MathMLCompile:null,parseError:function(t){this.error(this.adaptor.textContent(t).replace(/\n.*/g,""))}},Cr.OPTIONS),MathJax.loader&&MathJax.loader.checkVersion("input/mml",Bs,"input"),Hs({_:{input:{mathml_ts:vs,mathml:{FindMathML:xs,MathMLCompile:As}}}}),MathJax.loader&&MathJax.loader.pathFilters.add(t=>(t.name=t.name.replace(/\/util\/entities\/.*?\.js/,"/input/mml/entities.js"),!0)),MathJax.loader&&MathJax.loader.checkVersion("a11y/sre",Bs,"a11y"),Hs({_:{a11y:{sre_ts:us}}}),Dr("ENRICHED",u.COMPILED+10);class Hf extends ya{visitTree(t,e){this.mactionId=0;t=super.visitTree(t);return this.mactionId&&(e.inputData.hasMaction=!0),t}visitHtmlNode(t,e){return t.getSerializedXML()}visitMactionNode(t,e){const[i,s]=0===t.childNodes.length?["",""]:["\n",e],r=this.childNodeMml(t,e+"  ",i);let n=this.getAttributes(t);if("toggle"===t.attributes.get("actiontype")){const e=++this.mactionId;t.setProperty("mactionId",e),n=` data-maction-id="${e}" selection="${t.attributes.get("selection")}"`+n.replace(/ selection="\d+"/,"").replace(/ data-maction-id="\d+"/,"")}return`${e}<maction${n}>`+(r.match(/\S/)?i+r+s:"")+"</maction>"}}function Gf(t,r,e){return class extends t{constructor(){super(...arguments),this.toMathML=e}serializeMml(t){if("outerHTML"in t)return t.outerHTML;if("undefined"!=typeof Element&&"undefined"!=typeof window&&t instanceof Element){const e=window.document.createElement("div");return e.appendChild(t),e.innerHTML}return t.toString()}enrich(e,t=!1){if(!(this.state()>=u.ENRICHED)){if(!this.isEscaped&&(e.options.enableEnrichment||t)){const t=new e.options.MathItem("",r);try{var i=this.inputData.originalMml?this.adjustSelections():this.inputData.originalMml=this.toMathML(this.root,this),s=of(i);this.inputData.enrichedMml=t.math=this.serializeMml(s),t.math=t.math.replace(/ role="treeitem"/g,' data-speech-node="true"').replace(/ aria-(?:posinset|owns|setsize)=".*?"/g,""),t.display=this.display,t.compile(e),this.root=t.root}catch(t){e.options.enrichError(e,this,t)}}this.state(u.ENRICHED)}}toEnriched(t){return this.serializeMml(of(t))}unEnrich(t){var e=this.inputData.originalMml;if(e){const i=new t.options.MathItem("",r);i.math=e,i.display=this.display,i.compile(t),this.root=i.root}}adjustSelections(){const t=this.inputData.originalMml;if(!this.inputData.hasMaction)return t;const s=[];return this.root.walkTree(t=>{t.isKind("maction")&&(s[t.attributes.get("data-maction-id")]=t)}),t.replace(/(data-maction-id="(\d+)" selection=)"\d+"/g,(t,e,i)=>`${e}"${s[i].attributes.get("selection")}"`)}}}function Vf(t,s){var e;return(e=class extends t{constructor(...t){super(...t),s.setMmlFactory(this.mmlFactory);const e=this.constructor.ProcessBits,i=(e.has("enriched")||e.allocate("enriched"),new Hf(this.mmlFactory));this.options.MathItem=Gf(this.options.MathItem,s,(t,e)=>i.visitTree(t,e))}enrich(){if(!this.processed.isSet("enriched")){if(this.options.enableEnrichment){nf(this.options.sre);for(const t of this.math)t.enrich(this)}this.processed.set("enriched")}return this}enrichError(t,e,i){console.warn("Enrichment error:",i)}state(t,e=!1){if(super.state(t,e),t<u.ENRICHED&&(this.processed.clear("enriched"),t>=u.COMPILED))for(const t of this.math)t.unEnrich(this);return this}}).OPTIONS=Object.assign(Object.assign({},t.OPTIONS),{enableEnrichment:!0,enrichError:(t,e,i)=>t.enrichError(t,e,i),renderActions:lr(Object.assign(Object.assign({},t.OPTIONS.renderActions),{enrich:[u.ENRICHED]})),sre:lr({speech:"none",locale:"en",domain:"clearspeak",style:"default",braille:"nemeth",structure:!0,aria:!0})}),e}function Wf(t,e){return e.setAdaptor(t.adaptor),t.documentClass=Vf(t.documentClass,e),t}MathJax.loader&&MathJax.loader.checkVersion("a11y/semantic-enrich",Bs,"a11y"),Hs({_:{a11y:{"semantic-enrich":_s}}}),MathJax.startup&&MathJax.startup.extendHandler(t=>Wf(t,new jf({allowHtmlInTokenNodes:!0})));const Xf=["pitch","rate","volume"];function zf(t){const e=lf(t),i=[],s=[];return function t(e,i,s,r={}){for(const n of e)if(3!==n.nodeType){if(1===n.nodeType){const e=n,a=e.tagName;if("speak"===a)continue;if("prosody"===a){t(Array.from(n.childNodes),i,s,Jf(e,r));continue}switch(a){case"break":i.push({pause:e.getAttribute("time")});break;case"mark":i.push({mark:e.getAttribute("name")});break;case"say-as":{const o=e.textContent;i.push(Object.assign({text:o,character:!0},r)),s.push(o);break}}}}else{const e=n.textContent.trim();e&&(s.push(e),i.push(Object.assign({text:e},r)))}}(Array.from(e.childNodes),i,s),[s.join(" "),i]}const Kf={pitch:(t,e)=>t/100*1,volume:(t,e)=>t/100*.5,rate:(t,e)=>t/100*1};function Jf(t,e){const i={};for(const a of Xf)if(t.hasAttribute(a)){var[s,r]=function(t){t=t.match(Yf);return t?[t[1],t[2]]:(console.warn("Something went wrong with the prosody matching."),["","100"])}(t.getAttribute(a));if(!s){i[a]="volume"===a?.5:1;continue}var n=e[a]||("volume"===a?.5:1),r=Kf[a](parseInt(r,10),s);i[a]="-"===s?n-r:n+r}return i}const Yf=/([+-]?)([0-9]+)%/;function $f(t,e,i,s=" "){if(!t)return"";const r=[t];return e&&r.unshift(e),i&&r.push(i),r.join(s)}function Qf(t,e="en",i="100"){return zf(`<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="${e}"><prosody rate="${i}%">${t}</prosody></speak>`)}function Zf(){const t=new AudioContext,e=t.createOscillator();e.frequency.value=300,e.connect(t.destination),e.start(t.currentTime),e.stop(t.currentTime+.05)}($t=Rf=Rf||{})[$t.NONE=0]="NONE",$t[$t.DEPTH=1]="DEPTH",$t[$t.SUMMARY=2]="SUMMARY",(Yt=Of=Of||{}).SPEECH="data-semantic-speech-none",Yt.SPEECH_SSML="data-semantic-speech",Yt.SUMMARY="data-semantic-summary-none",Yt.SUMMARY_SSML="data-semantic-summary",Yt.PREFIX="data-semantic-prefix-none",Yt.PREFIX_SSML="data-semantic-prefix",Yt.POSTFIX="data-semantic-postfix-none",Yt.POSTFIX_SSML="data-semantic-postfix",Yt.BRAILLE="data-semantic-braille";class tb{constructor(){this.promise=Promise.resolve(),this.adaptor=null,this._options={},this._init=!1}set element(t){this._element=t}get element(){return this._element}set options(t){this._options=Object.assign({},(null==t?void 0:t.sre)||{},{enableSpeech:t.enableSpeech,enableBraille:t.enableBraille}),delete this._options.custom}get options(){return this._options}init(t,e,i){this.options=t,this._init||(this.adaptor=e,this.webworker=i,this._init=!0)}update(t){Object.assign(this.options,t)}Speech(t){var e=t.outputData.mml,i=Object.assign({},this.options,{modality:"speech"});return this.promise=this.webworker.Speech(e,i,t)}SpeechFor(t,e){var i=Object.assign({},this.options,{modality:"speech"});return this.webworker.speechFor(e,i,t)}cancel(t){var e;null!=(e=this.webworker)&&e.Cancel(t)}updateRegions(t,e,i){e.Update(this.getLabel(t)),i.Update(this.getBraille(t))}getOptions(t){var e;return{locale:null!=(e=this.adaptor.getAttribute(t,"data-semantic-locale"))?e:"",domain:null!=(e=this.adaptor.getAttribute(t,"data-semantic-domain"))?e:"",style:null!=(e=this.adaptor.getAttribute(t,"data-semantic-style"))?e:"",domain2style:null!=(e=this.adaptor.getAttribute(t,"data-semantic-domain2style"))?e:""}}nextRules(t){var e=this.getOptions(t.typesetRoot);return this.update(e),this.promise=this.webworker.nextRules(t.outputData.mml,Object.assign({},this.options,{modality:"speech"}),t)}nextStyle(t,e){var i=this.getOptions(e.typesetRoot);return this.update(i),this.promise=this.webworker.nextStyle(e.outputData.mml,Object.assign({},this.options,{modality:"speech"}),this.adaptor.getAttribute(t,"data-semantic-id"),e)}getLabel(t,e=0,i=" "){const s=this.adaptor;return $f(s.getAttribute(t,Of.SPEECH_SSML),s.getAttribute(t,Of.PREFIX_SSML),s.getAttribute(t,Of.POSTFIX_SSML),i)||s.getAttribute(t,"aria-label")}getBraille(t){const e=this.adaptor;return e.getAttribute(t,"aria-braillelabel")||e.getAttribute(t,Of.BRAILLE)}getLocalePreferences(t){return this.promise=this.webworker.clearspeakLocalePreferences(this.options,t)}getRelevantPreferences(t,e,i,s){t=t.outputData.mml;return this.promise=this.webworker.clearspeakRelevantPreferences(t,e,i,s)}}function eb(t,a,o,l){return new(o=o||Promise)(function(i,e){function s(t){try{n(l.next(t))}catch(t){e(t)}}function r(t){try{n(l.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(s,r)}n((l=l.apply(t,a||[])).next())})}class ib{constructor(t,e,i,s){this.cmd=t,this.item=e,this.resolve=i,this.reject=s}}class sb{constructor(t,e){this.adaptor=t,this.options=e,this.ready=!1,this.tasks=[],this.Commands={Ready(t,e){t.ready=!0,t.postNext()},Finished(t,e){const i=t.tasks.shift();e.success?i.resolve(e.result):i.reject(e.error),t.postNext()},Log(t,e){t.options.debug&&console.log("Log:",e)}}}Start(){return eb(this,void 0,void 0,function*(){if(this.ready)throw Error("Worker already started");this.worker=yield this.adaptor.createWorker(this.Listener.bind(this),this.options)})}debug(t,...e){this.options.debug&&console.info(t,...e)}Listener(t){this.debug("Worker  >>>  Client:",t.data),Object.hasOwn(this.Commands,t.data.cmd)?this.Commands[t.data.cmd](this,t.data.data):this.debug("Invalid command from worker: "+t.data.cmd)}Post(i,s){var t=new Promise((t,e)=>{this.tasks.push(new ib(i,s,t,e))});return this.ready&&1===this.tasks.length&&this.postNext(),t}postNext(){var t;this.tasks.length&&(t=Object.assign({},this.tasks[0].cmd,{debug:this.options.debug}),this.worker.postMessage(t))}Cancel(e){var t=this.tasks.findIndex(t=>t.item===e);0<t&&(this.tasks[t].reject(`Task ${this.tasks[t].cmd.cmd} cancelled`),this.tasks.splice(t,1))}Setup(t){return this.Post({cmd:"setup",data:{domain:t.domain,style:t.style,locale:t.locale,modality:t.modality}})}Speech(t,e,i){return eb(this,void 0,void 0,function*(){this.Attach(i,e.enableSpeech,e.enableBraille,yield this.Post({cmd:"speech",data:{mml:t,options:e}},i))})}nextRules(t,e,i){return eb(this,void 0,void 0,function*(){this.Attach(i,e.enableSpeech,e.enableBraille,yield this.Post({cmd:"nextRules",data:{mml:t,options:e}},i))})}nextStyle(t,e,i,s){return eb(this,void 0,void 0,function*(){this.Attach(s,e.enableSpeech,e.enableBraille,yield this.Post({cmd:"nextStyle",data:{mml:t,options:e,nodeId:i}},s))})}speechFor(e,i,s){return eb(this,void 0,void 0,function*(){var t=yield this.Post({cmd:"speech",data:{mml:e,options:i}},s);return JSON.parse(t)})}Attach(e,i,t,s){var s=JSON.parse(s),r=e.typesetRoot;if(r){this.setSpecialAttributes(r,s.options,"data-semantic-",["locale","domain","style","domain2style"]);const n=this.adaptor;this.setSpecialAttributes(r,s.translations,"data-semantic-");for(const[e,i]of Object.entries(s.mactions)){let t=n.getElement("#"+e,r);t&&n.childNodes(t)[0]&&(t=n.childNodes(t)[0],n.setAttribute(t,"data-semantic-type","dummy"),this.setSpecialAttributes(t,i,""))}this.setSpeechAttributes(n.childNodes(r)[0],"",s,i,t),i&&(s.label&&(n.setAttribute(r,Of.SPEECH,s.label),n.setAttribute(r,Of.SPEECH_SSML,s.ssml),e.outputData.speech=s.label),n.setAttribute(r,"data-speech-attached","true")),t&&(s.braillelabel&&(n.setAttribute(r,Of.BRAILLE,s.braillelabel),e.outputData.braille=s.braillelabel),s.braille&&n.setAttribute(r,"data-braille-attached","true"))}}setSpeechAttribute(t,e,i,s){const r=this.adaptor,n=r.getAttribute(t,"data-semantic-id");if(r.removeAttribute(t,"data-speech-node"),i&&e.speech[n]["speech-none"]){r.setAttribute(t,"data-speech-node","true");for(var[a,o]of Object.entries(e.speech[n]))a=a.replace(/-ssml$/,""),o&&r.setAttribute(t,"data-semantic-"+a,o)}if(s&&null!=(s=null==(i=e.braille)?void 0:i[n])&&s["braille-none"]){r.setAttribute(t,"data-speech-node","true");const i=e.braille[n]["braille-none"];r.setAttribute(t,Of.BRAILLE,i)}}setSpeechAttributes(t,e,i,s,r){const n=this.adaptor;if(!t||"#text"===n.kind(t)||"#comment"===n.kind(t))return e;n.hasAttribute(t,"data-semantic-id")&&(this.setSpeechAttribute(t,i,s,r),e||n.hasAttribute(t,"data-semantic-parent")||(e=n.getAttribute(t,"data-semantic-id")));for(const a of Array.from(n.childNodes(t)))e=this.setSpeechAttributes(a,e,i,s,r);return e}setSpecialAttributes(t,e,i,s){if(e)for(const r of s=s||Object.keys(e)){const s=e[r];s&&this.adaptor.setAttribute(t,""+i+r.toLowerCase(),s)}}Detach(t){t=t.typesetRoot;this.adaptor.removeAttribute(t,"data-speech-attached"),this.adaptor.removeAttribute(t,"data-braille-attached"),this.detachSpeech(t)}detachSpeech(t){const e=this.adaptor,i=e.childNodes(t);if(i){if("#text"!==e.kind(t))for(const i of["none","summary-none","speech","speech-none","summary","braille"])e.removeAttribute(t,"data-semantic-"+i);for(const t of i)this.detachSpeech(t)}}Terminate(){this.debug("Terminating pending tasks");for(const t of this.tasks)t.reject(t.cmd.data.cmd+" cancelled by WorkerHandler termination");return this.tasks=[],this.debug("Terminating worker"),this.worker.terminate()}Stop(){return eb(this,void 0,void 0,function*(){if(!this.worker)throw Error("Worker has not been started");yield this.Terminate(),this.worker=null,this.ready=!1})}clearspeakLocalePreferences(e,i){return eb(this,void 0,void 0,function*(){yield this.Post({cmd:"localePreferences",data:{options:e}}).then(t=>{i.set(e.locale,JSON.parse(t))})})}clearspeakRelevantPreferences(t,e,i,s){return eb(this,void 0,void 0,function*(){yield this.Post({cmd:"relevantPreferences",data:{mml:t,id:e}}).then(t=>{i.set(s,t)})})}}const rb=Gs.config||{},nb=()=>(rb?.loader?.paths?.mathjax||rb?.__dirname||"/")+"/sre";var ab=function(t,a,o,l){return new(o=o||Promise)(function(i,e){function s(t){try{n(l.next(t))}catch(t){e(t)}}function r(t){try{n(l.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(s,r)}n((l=l.apply(t,a||[])).next())})};function ob(t){return class extends t{constructor(){super(...arguments),this.generatorPool=new tb}attachSpeech(e){var t;this.outputData.speechPromise=null,this.state()>=u.ATTACHSPEECH||(this.state(u.ATTACHSPEECH),!this.isEscaped&&(e.options.enableSpeech||e.options.enableBraille)&&e.options.enableEnrichment&&(e.getWebworker(),this.generatorPool.init(e.options,e.adaptor,e.webworker),this.outputData.mml=this.toMathML(this.root,this),t=this.generatorPool.Speech(this).catch(t=>e.options.speechError(e,this,t)),e.savePromise(t),this.outputData.speechPromise=t))}detachSpeech(t){t.webworker.Detach(this)}speechFor(e){return ab(this,void 0,void 0,function*(){e=this.toEnriched(e);var t=yield this.generatorPool.SpeechFor(this,e);return[t.label,t.braillelabel]})}clear(){this.generatorPool.cancel(this)}}}function lb(t){var e=class extends t{constructor(...t){super(...t),this.webworker=null;const e=this.constructor.ProcessBits;e.has("attach-speech")||e.allocate("attach-speech"),this.options.MathItem=ob(this.options.MathItem)}getWebworker(){this.webworker||(this.webworker=new sb(this.adaptor,this.options.worker),this.webworker.Start())}attachSpeech(){if(!this.processed.isSet("attach-speech")){var t=this.options;if(t.enableEnrichment&&(t.enableSpeech||t.enableBraille)){this.getWebworker();for(const e of this.math)e.attachSpeech(this)}this.processed.set("attach-speech")}return this}speechError(t,e,i){console.warn("Speech generation error:",i)}state(t,e=!1){if(super.state(t,e),t<u.ATTACHSPEECH&&(this.processed.clear("attach-speech"),t>=u.TYPESET))for(const t of this.math)t.detachSpeech(this);return this}done(){const e=Object.create(null,{done:{get:()=>super.done}});return ab(this,void 0,void 0,function*(){var t;return yield null==(t=this.webworker)?void 0:t.Stop(),e.done.call(this)})}};return e.OPTIONS=Object.assign(Object.assign({},t.OPTIONS),{enableSpeech:!0,enableBraille:!0,speechError:(t,e,i)=>t.speechError(t,e,i),renderActions:lr(Object.assign(Object.assign({},t.OPTIONS.renderActions),{attachSpeech:[u.ATTACHSPEECH]})),worker:{path:nb(),maps:nb().replace(/[cm]js\/a11y\/sre$/,"bundle/sre/mathmaps"),worker:"speech-worker.js",debug:!1},a11y:lr({speech:!0,braille:!0})}),e}function cb(t,e){return(t=!t.documentClass.prototype.enrich&&e?Wf(t,e):t).documentClass=lb(t.documentClass),t}if(Dr("ATTACHSPEECH",u.INSERTED+10),MathJax.loader&&MathJax.loader.checkVersion("a11y/speech",Bs,"a11y"),Hs({_:{a11y:{speech_ts:Is,speech:{GeneratorPool:ws,SpeechUtil:Ts,WebWorker:Cs}}}}),MathJax.loader){let t=zs.resolvePath("[sre]",!1),e=zs.resolvePath("[mathmaps]",!1);if(Vs)t=new URL(t,location).href,e=new URL(e,location).href;else{const F="undefined"!=typeof require?require:MathJax.config.loader.require;F?.resolve?(t=F.resolve(t+"/require.mjs").replace(/\/[^\/]*$/,""),e=F.resolve(e+"/base.json").replace(/\/[^\/]*$/,"")):t=e=""}t&&js(MathJax.config,"options",{worker:{path:t,maps:e}})}MathJax.startup&&MathJax.startup.extendHandler(t=>cb(t));const hb={red:{red:255,green:0,blue:0},green:{red:0,green:255,blue:0},blue:{red:0,green:0,blue:255},yellow:{red:255,green:255,blue:0},cyan:{red:0,green:255,blue:255},magenta:{red:255,green:0,blue:255},white:{red:255,green:255,blue:255},black:{red:0,green:0,blue:0}};function db(t,e){const i=hb[t.color]||hb[e.color];return i.alpha=null!=(t=t.alpha)?t:e.alpha,`rgba(${(t=i).red},${t.green},${t.blue},${null!=(t=t.alpha)?t:1})`}const ub={color:"blue",alpha:1},pb={color:"black",alpha:1};let mb=0;class gb{constructor(){this.counter=mb++,this.ATTR="sre-highlight-"+this.counter.toString(),this.mactionName="",this.currentHighlights=[]}highlight(t){this.currentHighlights.push(t.map(t=>{var e=this.highlightNode(t);return this.setHighlighted(t),e}))}highlightAll(t){var i=this.getMactionNodes(t);for(let t,e=0;t=i[e];e++)this.highlight([t])}unhighlight(){const t=this.currentHighlights.pop();t&&t.forEach(t=>{this.isHighlighted(t.node)&&(this.unhighlightNode(t),this.unsetHighlighted(t.node))})}unhighlightAll(){for(;0<this.currentHighlights.length;)this.unhighlight()}setColor(t,e){this._foreground=db(e,pb),this._background=db(t,ub)}get foreground(){return this._foreground}get background(){return this._background}getMactionNodes(t){return Array.from(t.getElementsByClassName(this.mactionName))}isMactionNode(t){const e=t.className||t.getAttribute("class");return!!e&&!!e.match(new RegExp(this.mactionName))}isHighlighted(t){return t.hasAttribute(this.ATTR)}setHighlighted(t){t.setAttribute(this.ATTR,"true")}unsetHighlighted(t){t.removeAttribute(this.ATTR)}}class fb extends gb{constructor(){super(),this.mactionName="mjx-maction"}highlightNode(t){var e={node:t,background:t.style.backgroundColor,foreground:t.style.color};return this.isHighlighted(t)||(t.style.backgroundColor=this.background,t.style.color=this.foreground),e}unhighlightNode(t){t.node.style.backgroundColor=t.background,t.node.style.color=t.foreground}isMactionNode(t){return(null==(t=t.tagName)?void 0:t.toUpperCase())===this.mactionName.toUpperCase()}getMactionNodes(t){return Array.from(t.getElementsByTagName(this.mactionName))}}function bb(t,e,i){const s=new Eb[i];return s.setColor(t,e),s}const Eb={SVG:class extends gb{constructor(){super(),this.mactionName="maction"}highlightNode(t){let e;if(this.isHighlighted(t))return e={node:t,background:this.background,foreground:this.foreground};if("svg"===t.tagName||"MJX-CONTAINER"===t.tagName)return e={node:t,background:t.style.backgroundColor,foreground:t.style.color},t.style.backgroundColor=this.background,t.style.color=this.foreground,e;const i=document.createElementNS("http://www.w3.org/2000/svg","rect");i.setAttribute("sre-highlighter-added","true");var s=t.getBBox(),s=(i.setAttribute("x",(s.x-40).toString()),i.setAttribute("y",(s.y-40).toString()),i.setAttribute("width",(s.width+80).toString()),i.setAttribute("height",(s.height+80).toString()),t.getAttribute("transform"));return s&&i.setAttribute("transform",s),i.setAttribute("fill",this.background),t.setAttribute(this.ATTR,"true"),t.parentNode.insertBefore(i,t),e={node:t,foreground:t.getAttribute("fill")},"rect"!==t.nodeName&&t.setAttribute("fill",this.foreground),e}setHighlighted(t){"svg"===t.tagName&&super.setHighlighted(t)}unhighlightNode(t){const e=t.node.previousSibling;if(e&&e.hasAttribute("sre-highlighter-added"))return t.foreground?t.node.setAttribute("fill",t.foreground):t.node.removeAttribute("fill"),void t.node.parentNode.removeChild(e);t.node.style.backgroundColor=t.background,t.node.style.color=t.foreground}isMactionNode(t){return t.getAttribute("data-mml-node")===this.mactionName}getMactionNodes(t){return Array.from(t.querySelectorAll(`[data-mml-node="${this.mactionName}"]`))}},CHTML:fb,generic:fb};class Nb{constructor(t){this.document=t,this.CLASS=this.constructor,this.AddStyles()}AddStyles(){if(!this.CLASS.styleAdded){const t=this.document.adaptor.node("style");t.innerHTML=this.CLASS.style.cssText,this.document.adaptor.head(this.document.adaptor.document).appendChild(t),this.CLASS.styleAdded=!0}}AddElement(){if(!this.div){const t=this.document.adaptor.node("div");t.classList.add(this.CLASS.className),this.div=t,this.inner=this.document.adaptor.node("div"),this.div.appendChild(this.inner),this.document.adaptor.body(this.document.adaptor.document).appendChild(this.div)}}Show(t,e){this.AddElement(),this.position(t),this.highlight(e),this.div.classList.add(this.CLASS.className+"_Show")}Hide(){this.div&&(this.div.parentNode.removeChild(this.div),this.div=null,this.inner=null)}stackRegions(t){t=t.getBoundingClientRect();let i=0,s=Number.POSITIVE_INFINITY;var r=this.document.adaptor.document.getElementsByClassName(this.CLASS.className+"_Show");for(let t,e=0;t=r[e];e++)t!==this.div&&(i=Math.max(t.getBoundingClientRect().bottom,i),s=Math.min(t.getBoundingClientRect().left,s));var e=(i||t.bottom+10)+window.scrollY,t=(s<Number.POSITIVE_INFINITY?s:t.left)+window.scrollX;this.div.style.top=e+"px",this.div.style.left=t+"px"}}Nb.styleAdded=!1;class yb extends Nb{Clear(){}Update(){}Hide(){}Show(){}AddElement(){}AddStyles(){}position(){}highlight(t){}}class xb extends Nb{Clear(){this.div&&(this.Update(""),this.inner.style.top="",this.inner.style.backgroundColor="")}Update(t){t&&this.AddElement(),this.inner&&(this.inner.textContent="",this.inner.textContent=t||"Â ")}position(t){this.stackRegions(t)}highlight(t){this.div&&(this.inner.style.backgroundColor=t.background,this.inner.style.color=t.foreground)}}class Ab extends xb{}Ab.className="MJX_ToolTip",Ab.style=new Wa({["."+Ab.className]:{width:"auto",height:"auto",opacity:1,"text-align":"center","border-radius":"4px",padding:0,"border-bottom":"1px dotted black",position:"absolute",display:"inline-block","background-color":"white","z-index":202},["."+Ab.className+" > div"]:{"border-radius":"inherit",padding:"0 2px"}});class vb extends xb{}vb.className="MJX_LiveRegion",vb.style=new Wa({["."+vb.className]:{position:"absolute",top:0,display:"none",width:"auto",height:"auto",padding:0,opacity:1,"z-index":"202",left:0,right:0,margin:"0 auto","background-color":"white","box-shadow":"0px 5px 20px #888",border:"2px solid #CCCCCC"},["."+vb.className+"_Show"]:{display:"block"}});class _b extends vb{constructor(){super(...arguments),this.active=!1,this.node=null,this.clear=!1,this.highlighter=bb({color:"red"},{color:"black"},this.document.outputJax.name),this.voiceRequest=!1,this.voiceCancelled=!1}Show(t,e){super.Update("Â "),this.node=t,super.Show(t,e)}Update(t){this.voiceRequest?this.makeVoice(t):(speechSynthesis.onvoiceschanged=(()=>this.voiceRequest=!0).bind(this),new Promise(t=>{setTimeout(()=>{this.voiceRequest?t(!0):setTimeout(()=>{this.voiceRequest=!0,t(!0)},100)},100)}).then(()=>this.makeVoice(t)))}makeVoice(t){this.active=this.document.options.a11y.voicing&&!!speechSynthesis.getVoices().length,speechSynthesis.cancel(),this.clear=!0;var[t,e]=Qf(t,this.document.options.sre.locale,this.document.options.sre.rate);super.Update(t),this.active&&t&&this.makeUtterances(e,this.document.options.sre.locale)}makeUtterances(e,t){this.voiceCancelled=!1;let i=null;for(const s of e)if(s.mark){if(!i){this.highlightNode(s.mark,!0);continue}i.addEventListener("end",t=>{this.voiceCancelled||this.highlightNode(s.mark)})}else if(s.pause){const e=parseInt(s.pause.match(/^[0-9]+/)[0]);if(isNaN(e)||!i)continue;i.addEventListener("end",t=>{speechSynthesis.pause(),setTimeout(()=>{speechSynthesis.resume()},e)})}else i=new SpeechSynthesisUtterance(s.text),s.rate&&(i.rate=s.rate),s.pitch&&(i.pitch=s.pitch),i.lang=t,speechSynthesis.speak(i);i&&i.addEventListener("end",t=>{this.highlighter.unhighlight()})}Hide(){this.cancelVoice(),super.Hide()}cancelVoice(){this.voiceCancelled=!0,speechSynthesis.cancel(),this.highlighter.unhighlight()}highlightNode(t,e=!1){this.highlighter.unhighlight();t=Array.from(this.node.querySelectorAll(`[data-semantic-id="${t}"]`));this.clear&&!e||this.highlighter.highlight(t),this.clear=!1}}class Tb extends Nb{position(t){var e=t.getBoundingClientRect(),i=this.div.getBoundingClientRect();let s,r=e.left+e.width/2-i.width/2;switch(r=r<0?0:r,r+=window.scrollX,this.document.options.a11y.align){case"top":s=e.top-i.height-10;break;case"bottom":s=e.bottom+10;break;default:s=e.top+e.height/2-i.height/2}s=(s+=window.scrollY)<0?0:s,this.div.style.top=s+"px",this.div.style.left=r+"px"}highlight(t){!this.div||this.inner.firstChild&&!this.inner.firstChild.hasAttribute("sre-highlight")||(this.inner.style.backgroundColor=t.background,this.inner.style.color=t.foreground)}Show(t,e){this.AddElement(),this.div.style.fontSize=this.document.options.a11y.magnify,this.Update(t),super.Show(t,e)}Clear(){this.div&&(this.inner.textContent="",this.inner.style.top="",this.inner.style.backgroundColor="")}Update(t){if(this.div){this.Clear();const e=this.cloneNode(t),i=e.querySelector("[data-mjx-clone]");this.inner.style.backgroundColor=t.style.backgroundColor,i.style.backgroundColor="",i.classList.remove("mjx-selected"),this.inner.appendChild(e),this.position(t)}}cloneNode(e){let i=e.cloneNode(!0);if(i.setAttribute("data-mjx-clone","true"),"MJX-CONTAINER"!==i.nodeName){"g"!==i.nodeName&&(i.style.marginLeft=i.style.marginRight="0");let t=e;for(;t&&"MJX-CONTAINER"!==t.nodeName;)t=t.parentNode;if("MJX-MATH"!==i.nodeName&&"svg"!==i.nodeName&&"svg"===(i=t.firstChild.cloneNode(!1).appendChild(i).parentNode).nodeName){i.firstChild.setAttribute("transform","matrix(1 0 0 -1 0 0)");const s=parseFloat(i.getAttribute("viewBox").split(/ /)[2]),r=parseFloat(i.getAttribute("width")),{x:n,y:a,width:o,height:l}=e.getBBox();i.setAttribute("viewBox",[n,-(a+l),o,l].join(" ")),i.removeAttribute("style"),i.setAttribute("width",r/s*o+"ex"),i.setAttribute("height",r/s*l+"ex"),t.setAttribute("sre-highlight","false")}(i=t.cloneNode(!1).appendChild(i).parentNode).style.margin="0"}return i}}Tb.className="MJX_HoverRegion",Tb.style=new Wa({["."+Tb.className]:{display:"block",position:"absolute",width:"max-content",height:"auto",padding:0,opacity:1,"z-index":"202",margin:"0 auto","background-color":"white","line-height":0,"box-shadow":"0px 10px 20px #888",border:"2px solid #CCCCCC"},["."+Tb.className+" > div"]:{overflow:"hidden"}});class wb{get highlighter(){return this.pool.highlighter}static stopEvent(t){t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopImmediatePropagation?t.stopImmediatePropagation():t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0}static create(t,e,i,s,...r){return new this(t,e,i,s,...r)}constructor(t,e,i,s){this.document=t,this.pool=e,this.region=i,this.node=s,this.stoppable=!0,this.events=[],this._active=!1}Events(){return this.events}get active(){return this._active}set active(t){this._active=t}Attach(){this.AddEvents()}Detach(){this.RemoveEvents()}Start(){this.active=!0}Stop(){this.active&&(this.region.Clear(),this.region.Hide(),this.active=!1)}AddEvents(){for(var[t,e]of this.events)this.node.addEventListener(t,e)}RemoveEvents(){for(var[t,e]of this.events)this.node.removeEventListener(t,e)}Update(t=0){}stopEvent(t){this.stoppable&&wb.stopEvent(t)}}function Cb(t,a,o,l){return new(o=o||Promise)(function(i,e){function s(t){try{n(l.next(t))}catch(t){e(t)}}function r(t){try{n(l.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(s,r)}n((l=l.apply(t,a||[])).next())})}const Ib="[data-speech-node]";function Lb(t,e=!0){return t.shiftKey&&e||t.metaKey||t.altKey||t.ctrlKey}const Sb=new Map([["MacOS",["on MacOS and iOS using VoiceOver",", or the VoiceOver arrow keys to select an expression"]],["Windows",["in Windows using NVDA or JAWS",". The screen reader should enter focus or forms mode automatically\nwhen the expression gets the browser focus, but if not, you can toggle\nfocus mode using NVDA+space in NVDA; for JAWS, Enter should start\nforms mode while Numpad Plus leaves it.  Also note that you can use\nthe NVDA or JAWS key plus the arrow keys to explore the expression\neven in browse mode, and you can use NVDA+shift+arrow keys to\nnavigate out of an expression that has the focus in NVDA"]],["Unix",["in Unix using Orca",", and Orca should enter focus mode automatically.  If not, use the\nOrca+a key to toggle focus mode on or off.  Also note that you can use\nOrca+arrow keys to explore expressions even in browse mode"]],["unknown",["with a Screen Reader.",""]]]);class kb extends wb{get generators(){var t;return null==(t=this.item)?void 0:t.generatorPool}get role(){return this.item.ariaRole}get description(){return this.item.roleDescription}get none(){return this.item.none}FocusIn(t){this.item.outputData.nofocus?this.item.outputData.nofocus=!1:(this.clicked||this.Start(),this.clicked=null)}FocusOut(t){this.current&&!this.focusSpeech&&(this.setCurrent(null),this.Stop(),document.hasFocus()||this.focusTop())}KeyDown(t){if(this.pendingIndex.shift(),this.region.cancelVoice(),!Lb(t,!1)){const e=this.constructor,i=1===t.key.length?t.key.toLowerCase():t.key,[s,r]=e.keyMap.get(i)||[],n=s?void 0===r||this.active?s(this,t):r:this.undefinedKey(t);n||(this.stopEvent(t),!1===n&&this.sound&&this.NoMove())}}MouseDown(t){var e,i;this.pendingIndex=[],this.region.cancelVoice(),Lb(t)||2===t.buttons?this.item.outputData.nofocus=!0:(i=this.findClicked(t.target,t.x,t.y))!==this.document.infoIcon?(null!=(e=document.getSelection())&&e.removeAllRanges(),t.target.getAttribute("sre-highlighter-added")?this.refocus=i:this.clicked=i):this.stopEvent(t)}Click(t){var e;{if(!Lb(t)&&2!==t.buttons&&"Range"!==document.getSelection().type)return(e=this.findClicked(t.target,t.x,t.y))===this.document.infoIcon?(this.stopEvent(t),void this.help()):void(e&&!this.node.contains(e)||(this.stopEvent(t),this.refocus=e,this.triggerLinkMouse()||this.Start()));this.FocusOut(null)}}DblClick(t){var e=null!=(e=document.getSelection().direction)?e:"none";Lb(t)||2===t.buttons||"none"!==e?this.FocusOut(null):(this.stopEvent(t),this.refocus=this.rootNode(),this.Start())}spaceKey(){return this.refocus=this.current,!0}hKey(){this.refocus=this.current,this.help()}escapeKey(){return this.Stop(),this.focusTop(),!0}enterKey(t){if(this.active)if(this.triggerLinkKeyboard(t))this.Stop();else{const t=this.actionable(this.current);if(!t)return!1;(this.refocus=t).dispatchEvent(new Event("click"))}else this.Start()}homeKey(){this.setCurrent(this.rootNode())}moveDown(t){return t?this.moveToNeighborCell(1,0):this.moveTo(this.firstNode(this.current))}moveUp(t){return t?this.moveToNeighborCell(-1,0):this.moveTo(this.getParent(this.current))}moveRight(t){return t?this.moveToNeighborCell(0,1):this.moveTo(this.nextSibling(this.current))}moveLeft(t){return t?this.moveToNeighborCell(0,-1):this.moveTo(this.prevSibling(this.current))}moveTo(t){if(!t)return!1;this.setCurrent(t)}moveToNeighborCell(t,e){var i=this.tableCell(this.current);if(!i)return!1;var[s,r]=this.cellPosition(i);return null!=s&&(!!(i=this.cellAt(this.cellTable(i),s+t,r+e))&&void this.setCurrent(i))}undefinedKey(t){return!this.active||Lb(t)}addMark(){this.current===this.marks[this.marks.length-1]?this.setCurrent(this.current):(this.currentMark=this.marks.length-1,this.marks.push(this.current),this.speak("Position marked"))}prevMark(){if(this.currentMark<0){if(0===this.marks.length)return void this.setCurrent(this.lastMark||this.rootNode());this.currentMark=this.marks.length-1}var t=this.currentMark;this.setCurrent(this.marks[t]),this.currentMark=t-1}clearMarks(){this.marks=[],this.currentMark=-1,this.prevMark()}autoVoice(){var t=!this.document.options.a11y.voicing;this.document.menu?this.document.menu.menu.pool.lookup("voicing").setValue(t):this.document.options.a11y.voicing=t,this.Update()}numberKey(t){if(!this.tableCell(this.current))return!1;if(0===t&&(t=10),this.pendingIndex.length){const e=this.cellTable(this.tableCell(this.current)),i=this.cellAt(e,this.pendingIndex[0]-1,t-1);if(this.pendingIndex=[],this.speak(String(t)),!i)return!1;setTimeout(()=>this.setCurrent(i),500)}else this.pendingIndex=[null,t],this.speak(`Jump to row ${t} and column`)}depth(){var t;if("d"===this.speechType)this.setCurrent(this.current);else{this.speechType="d";const e=[[null!=(t=this.node.getAttribute("data-semantic-level"))?t:"Level",null!=(t=this.current.getAttribute("aria-level"))?t:"0"].join(" ").trim()],i=this.actionable(this.current);i&&e.unshift(null!=(t=this.node.getAttribute("1"===i.getAttribute("toggle")?"data-semantic-expandable":"data-semantic-collapsible"))?t:""),this.speak(e.join(" "),this.current.getAttribute(Of.BRAILLE))}}summary(){var t;"x"===this.speechType?this.setCurrent(this.current):(this.speechType="x",t=this.current.getAttribute(Of.SUMMARY),this.speak(t,this.current.getAttribute(Of.BRAILLE),this.SsmlAttributes(this.current,Of.SUMMARY_SSML)))}nextRules(){this.node.removeAttribute("data-speech-attached"),this.restartAfter(this.generators.nextRules(this.item))}nextStyle(){this.node.removeAttribute("data-speech-attached"),this.restartAfter(this.generators.nextStyle(this.current,this.item))}details(){const t=this.actionable(this.current);if(t&&t.getAttribute("data-collapsible")&&"1"===t.getAttribute("toggle")&&"z"!==this.speechType){this.speechType="z";const i=this.nodeId(this.current);let e,t=(this.item.root.walkTree(t=>{t.attributes.get("data-semantic-id")===i&&(e=t)}),this.item.toMathML(e,this.item));t=(t=e.isKind("math")?t:`<math>${t}</math>`).replace(/ (?:data-semantic-|aria-|data-speech-|data-latex).*?=".*?"/g,""),this.item.speechFor(t).then(([t,e])=>this.speak(t,e))}else this.setCurrent(this.current)}help(){const t=this.document.adaptor,e=t.node("mjx-help-background"),i=t=>{e.remove(),this.node.focus(),this.stopEvent(t)};e.addEventListener("click",i);var s=t.node("mjx-help-sizer",{},[t.node("mjx-help-dialog",{tabindex:0,role:"dialog","aria-labeledby":"mjx-help-label"},[t.node("h1",{id:"mjx-help-label"},[t.text("MathJax Expression Explorer Help")]),t.node("div"),t.node("input",{type:"button",value:"Close"})])]);e.append(s);const r=s.firstChild;r.addEventListener("click",t=>this.stopEvent(t)),r.lastChild.addEventListener("click",i),r.addEventListener("keydown",t=>{"Escape"===t.code&&i(t)});var[s,n]=Sb.get(Ws.os);r.childNodes[1].innerHTML=`
<H2>Exploring expressions ${s}</h2>

<p>The mathematics on this page is being rendered by <a
href="https://www.mathjax.org/" target="_blank">MathJax</a>, which
generates both the text spoken by screen readers, as well as the
visual layout for sighted users.</p>

<p>Expressions typeset by MathJax can be explored interactively, and
are focusable.  You can use the <kbd>Tab</kbd> key to move to a typeset
expression${n}.  Initially, the expression will be read in full,
but you can use the following keys to explore the expression
further:<p>

<ul>

<li><kbd>Down Arrow</kbd> moves one level deeper into the expression to
allow you to explore the current subexpression term by term.</li>

<li><kbd>Up Arrow</kbd> moves back up a level within the expression.</li>

<li><kbd>Right Arrow</kbd> moves to the next term in the current
subexpression.</li>

<li><kbd>Left Arrow</kbd> moves to the next term in the current
subexpression.</li>

<li><kbd>Shift</kbd>+<kbd>Arrow</kbd> moves to a neighboring cell within a table.

<li><kbd>0-9</kbd>+<kbd>0-9</kbd> jumps to a cell by its index in the table, where 0 = 10.

<li><kbd>Home</kbd> takes you to the top of the expression.</li>

<li><kbd>Enter</kbd> or <kbd>Return</kbd> clicks a link or activates an active
subexpression.</li>

<li><kbd>Space</kbd> opens the MathJax contextual menu where you can view
or copy the source format of the expression, or modify MathJax's
settings.</li>

<li><kbd>Escape</kbd> exits the expression explorer.</li>

<li><kbd>x</kbd> gives a summary of the current subexpression.</li>

<li><kbd>z</kbd> gives the full text of a collapsed expression.</li>

<li><kbd>d</kbd> gives the current depth within the expression.</li>

<li><kbd>s</kbd> starts or stops auto-voicing with synchronized highlighting.</li>

<li><kbd>v</kbd> marks the current position in the expression.</li>

<li><kbd>p</kbd> cycles through the marked positions in the expression.</li>

<li><kbd>u</kbd> clears all marked positions and returns to the starting position.</li>

<li><kbd>&gt;</kbd> cycles through the available speech rule sets
(MathSpeak, ClearSpeak).</li>

<li><kbd>&lt;</kbd> cycles through the verbosity levels for the current
rule set.</li>

<li><kbd>h</kbd> produces this help listing.</li>
</ul>

<p>The MathJax contextual menu allows you to enable or disable speech
or Braille generation for mathematical expressions, the language to
use for the spoken mathematics, and other features of MathJax.  In
particular, the Explorer submenu allows you to specify how the
mathematics should be identified in the page (e.g., by saying "math"
when the expression is spoken), and whether or not to include a
message about the letter "h" bringing up this dialog box.</p>

<p>The contextual menu also provides options for viewing or copying a
MathML version of the expression or its original source format,
creating an SVG version of the expression, and viewing various other
information.</p>

<p>For more help, see the <a
href="https://docs.mathjax.org/en/latest/basic/accessibility.html"
targe="_blank">MathJax accessibility documentation.</a></p>
`,document.body.append(e),r.focus()}setCurrent(t,e=!1){if(this.speechType="",document.hasFocus()||(this.refocus=this.current),this.node.setAttribute("aria-busy","true"),this.current){for(const t of this.getSplitNodes(this.current))t.classList.remove("mjx-selected");this.pool.unhighlight(),"last"===this.document.options.a11y.tabSelects&&(this.refocus=this.current),t||(this.lastMark=this.current,this.removeSpeech()),this.current=null}if(this.current=t,this.currentMark=-1,this.current){var i=this.getSplitNodes(this.current);for(const t of i)t.classList.add("mjx-selected");this.pool.highlight(i),this.addSpeech(t,e)}this.node.removeAttribute("aria-busy")}getSplitNodes(t){var e=this.nodeId(t);return e?Array.from(this.node.querySelectorAll(`[data-semantic-id="${e}"]`)):[t]}addSpeech(t,e){var i;null!=(i=this.img)&&i.remove();let s=[t.getAttribute(Of.PREFIX),t.getAttribute(Of.SPEECH),t.getAttribute(Of.POSTFIX)].join(" ").trim();if(e){let t=this.description===this.none?"":", "+this.description;this.document.options.a11y.help&&(t+=", press h for help"),s+=t}this.speak(s,t.getAttribute(Of.BRAILLE),this.SsmlAttributes(t,Of.SPEECH_SSML)),this.node.setAttribute("tabindex","-1")}removeSpeech(){this.speech&&(this.speech.remove(),this.speech=null,this.img&&this.node.append(this.img),this.node.setAttribute("tabindex","0"))}speak(t,e="",i=null,s=this.none){const r=this.speech;this.speech=document.createElement("mjx-speech"),this.speech.setAttribute("role",this.role),this.speech.setAttribute("aria-label",t),this.speech.setAttribute(Of.SPEECH,t),i&&(this.speech.setAttribute(Of.PREFIX_SSML,i[0]||""),this.speech.setAttribute(Of.SPEECH_SSML,i[1]||""),this.speech.setAttribute(Of.POSTFIX_SSML,i[2]||"")),e&&this.speech.setAttribute("aria-braillelabel",e),this.speech.setAttribute("aria-roledescription",s),this.speech.setAttribute("tabindex","0"),this.node.append(this.speech),this.focusSpeech=!0,this.speech.focus(),this.focusSpeech=!1,this.Update(),r&&setTimeout(()=>r.remove(),100)}attachSpeech(){var t;const e=this.item,i=this.node;if(!i.hasAttribute("has-speech")){for(const t of Array.from(i.childNodes))t.setAttribute("aria-hidden","true");i.setAttribute("has-speech","true")}var s=e.roleDescription,s=(i.getAttribute(Of.SPEECH)||"")+(s?", "+s:"");null!=(t=this.img)&&t.remove(),this.img=this.document.adaptor.node("mjx-speech",{"aria-label":s,role:"img","aria-roledescription":e.none}),i.appendChild(this.img)}detachSpeech(){var t;const e=this.node;null!=(t=this.img)&&t.remove(),e.removeAttribute("has-speech");for(const t of Array.from(e.childNodes))t.removeAttribute("aria-hidden")}focus(){this.node.focus()}nodeId(t){return t.getAttribute("data-semantic-id")}parentId(t){return t.getAttribute("data-semantic-parent")}getNode(t){return t?this.node.querySelector(`[data-semantic-id="${t}"]`):null}getParent(t){return this.getNode(this.parentId(t))}childArray(t){return t?t.getAttribute("data-semantic-children").split(/,/):[]}isCell(t){return!!t&&this.cellTypes.includes(t.getAttribute("data-semantic-type"))}isRow(t){return!!t&&"row"===t.getAttribute("data-semantic-type")}tableCell(t){for(;t&&t!==this.node;){if(this.isCell(t))return t;t=t.parentNode}return null}cellTable(t){t=this.getParent(t);return this.isRow(t)?this.getParent(t):t}cellPosition(t){var e=this.getParent(t),t=this.childArray(e).indexOf(this.nodeId(t));if(!this.isRow(e))return[t,1];var i=this.getParent(e);return[this.childArray(i).indexOf(this.nodeId(e)),t]}cellAt(t,e,i){t=this.getNode(this.childArray(t)[e]);return this.isRow(t)?this.getNode(this.childArray(t)[i]):1===i?t:null}firstNode(t){const e=t.getAttribute("data-semantic-owns");if(!e)return t.querySelector(Ib);for(const t of e.split(/ /)){const e=this.getNode(t);if(null!=e&&e.hasAttribute("data-speech-node"))return e}return t.querySelector(Ib)}rootNode(){const t=this.node.querySelector("[data-semantic-structure]");if(!t)return this.node.querySelector(Ib);var e=t.getAttribute("data-semantic-structure").split(/ /)[0].replace("(","");return this.getNode(e)}nextSibling(t){var e=this.parentId(t);if(!e)return null;const i=null==(e=this.getNode(e).getAttribute("data-semantic-owns"))?void 0:e.split(/ /);if(!i)return null;let s,r=i.indexOf(this.nodeId(t));for(;(s=this.getNode(i[++r]))&&!s.hasAttribute("data-speech-node"););return s}prevSibling(t){var e=this.parentId(t);if(!e)return null;const i=null==(e=this.getNode(e).getAttribute("data-semantic-owns"))?void 0:e.split(/ /);if(!i)return null;let s,r=i.indexOf(this.nodeId(t));for(;(s=this.getNode(i[--r]))&&!s.hasAttribute("data-speech-node"););return s}findClicked(t,e,i){const s=this.document.infoIcon;if(s===t||s.contains(t))return s;if("SVG"!==this.node.getAttribute("jax"))return t.closest(Ib);let r=null,n=this.node;for(;n;){n.matches(Ib)&&(r=n);const t=Array.from(n.childNodes);n=null;for(const s of t)if(s!==this.speech&&s!==this.img&&"rect"!==s.tagName.toLowerCase()){const{left:t,right:r,top:a,bottom:o}=s.getBoundingClientRect();if(t<=e&&e<=r&&a<=i&&i<=o){n=s;break}}}return r}focusTop(){this.focusSpeech=!0,this.node.focus(),this.focusSpeech=!1}SsmlAttributes(t,e){return[t.getAttribute(Of.PREFIX_SSML),t.getAttribute(e),t.getAttribute(Of.POSTFIX_SSML)]}restartAfter(e){return Cb(this,void 0,void 0,function*(){yield e,this.attachSpeech();var t=this.current;this.current=null,this.pool.unhighlight(),this.setCurrent(t)})}constructor(t,e,i,s,r,n,a,o){super(t,e,null,s),this.document=t,this.pool=e,this.region=i,this.node=s,this.brailleRegion=r,this.magnifyRegion=n,this.item=o,this.sound=!1,this.current=null,this.clicked=null,this.refocus=null,this.focusSpeech=!1,this.restarted=null,this.speech=null,this.speechType="",this.img=null,this.attached=!1,this.eventsAttached=!1,this.marks=[],this.currentMark=-1,this.lastMark=null,this.pendingIndex=[],this.cellTypes=["cell","line"],this.events=super.Events().concat([["focusin",this.FocusIn.bind(this)],["focusout",this.FocusOut.bind(this)],["keydown",this.KeyDown.bind(this)],["mousedown",this.MouseDown.bind(this)],["click",this.Click.bind(this)],["dblclick",this.DblClick.bind(this)]])}findStartNode(){let t=this.refocus||this.current;return!t&&this.restarted&&(t=this.node.querySelector(this.restarted)),this.refocus=this.restarted=null,t}Start(){const i=Object.create(null,{Start:{get:()=>super.Start}});return Cb(this,void 0,void 0,function*(){var t,e;this.attached&&!this.active&&(this.document.activeItem=this.item,this.item.state()<u.ATTACHSPEECH&&(this.item.attachSpeech(this.document),yield this.generators.promise),this.focusSpeech||(this.node.classList.add("mjx-explorer-active"),this.node.append(this.document.infoIcon),t=this.findStartNode(),this.setCurrent(t||this.rootNode(),!t),i.Start.call(this),(e=(t=this.document.options).a11y).subtitles&&e.speech&&t.enableSpeech&&this.region.Show(this.node,this.highlighter),e.viewBraille&&e.braille&&t.enableBraille&&this.brailleRegion.Show(this.node,this.highlighter),e.keyMagnifier&&this.magnifyRegion.Show(this.current,this.highlighter),this.Update()))})}Stop(){var t;this.active&&(t=this.description,this.node.getAttribute("aria-roledescription")!==t&&this.node.setAttribute("aria-roledescription",t),this.node.classList.remove("mjx-explorer-active"),this.document.infoIcon.remove(),this.pool.unhighlight(),this.magnifyRegion.Hide(),this.region.Hide(),this.brailleRegion.Hide()),super.Stop()}Update(){this.active&&(this.region.node=this.node,this.generators.updateRegions(this.speech||this.node,this.region,this.brailleRegion),this.magnifyRegion.Update(this.current))}Attach(){this.attached||(super.Attach(),this.node.setAttribute("tabindex","0"),this.attached=!0)}Detach(){var t;super.RemoveEvents(),this.node.removeAttribute("role"),this.node.removeAttribute("aria-roledescription"),this.node.removeAttribute("aria-label"),null!=(t=this.img)&&t.remove(),this.active&&this.node.setAttribute("tabindex","0"),this.attached=!1}NoMove(){Zf()}AddEvents(){this.eventsAttached||(super.AddEvents(),this.eventsAttached=!0)}actionable(t){t=null==t?void 0:t.parentNode;return t&&this.highlighter.isMactionNode(t)?t:null}triggerLinkKeyboard(t){return this.current?this.triggerLink(this.current):t.target instanceof HTMLAnchorElement&&(t.target.dispatchEvent(new MouseEvent("click")),!0)}triggerLink(t){var e;if(null!=(e=null==t?void 0:t.getAttribute("data-semantic-postfix"))&&e.match(/(^| )link($| )/))for(;t&&t!==this.node;){if(t instanceof HTMLAnchorElement)return t.dispatchEvent(new MouseEvent("click")),setTimeout(()=>this.FocusOut(null),50),!0;t=t.parentNode}return!1}triggerLinkMouse(){let t=this.refocus;for(;t&&t!==this.node;){if(this.triggerLink(t))return!0;t=t.parentNode}return!1}semanticFocus(){const t=[];let e="data-semantic-id",i=this.current||this.refocus||this.node;const s=this.actionable(i);s&&(e=s.hasAttribute("data-maction-id")?"data-maction-id":"id",i=s,t.push(Ib));var r=i.getAttribute(e);return r&&t.unshift(`[${e}="${r}"]`),t.join(" ")}}kb.keyMap=new Map([["Tab",[()=>!0]],["Escape",[t=>t.escapeKey()]],["Enter",[(t,e)=>t.enterKey(e)]],["Home",[t=>t.homeKey()]],["ArrowDown",[(t,e)=>t.moveDown(e.shiftKey),!0]],["ArrowUp",[(t,e)=>t.moveUp(e.shiftKey),!0]],["ArrowLeft",[(t,e)=>t.moveLeft(e.shiftKey),!0]],["ArrowRight",[(t,e)=>t.moveRight(e.shiftKey),!0]],[" ",[t=>t.spaceKey()]],["h",[t=>t.hKey()]],[">",[t=>t.nextRules(),!1]],["<",[t=>t.nextStyle(),!1]],["x",[t=>t.summary(),!1]],["z",[t=>t.details(),!1]],["d",[t=>t.depth(),!1]],["v",[t=>t.addMark(),!1]],["p",[t=>t.prevMark(),!1]],["u",[t=>t.clearMarks(),!1]],["s",[t=>t.autoVoice(),!1]],...[..."0123456789"].map(e=>[e,[t=>t.numberKey(parseInt(e)),!1]])]);class Rb extends wb{constructor(){super(...arguments),this.events=super.Events().concat([["mouseover",this.MouseOver.bind(this)],["mouseout",this.MouseOut.bind(this)]])}MouseOver(t){this.Start()}MouseOut(t){this.Stop()}}class Ob extends Rb{constructor(t,e,i,s,r,n){super(t,e,i,s),this.document=t,this.pool=e,this.region=i,this.node=s,this.nodeQuery=r,this.nodeAccess=n}MouseOut(t){this.highlighter.unhighlight(),this.region.Hide(),super.MouseOut(t)}MouseOver(t){super.MouseOver(t);var t=t.target,[t,e]=this.getNode(t);t&&(this.highlighter.unhighlight(),this.highlighter.highlight([t]),this.region.Update(e),this.region.Show(t,this.highlighter))}getNode(t){const e=t;for(;t&&t!==this.node;){if(this.nodeQuery(t))return[t,this.nodeAccess(t)];t=t.parentNode}for(t=e;t;){if(this.nodeQuery(t))return[t,this.nodeAccess(t)];const e=t.childNodes[0];t=e&&"defs"===e.tagName?t.childNodes[1]:e}return[null,null]}}class Mb extends Ob{}class Db extends Ob{}class Pb extends Ob{constructor(t,e,i,s){super(t,e,new yb(t),s,t=>this.highlighter.isMactionNode(t),()=>{}),this.document=t,this.pool=e,this.node=s}}class Bb extends wb{constructor(t,e,i,s,r){super(t,e,null,s),this.document=t,this.pool=e,this.region=i,this.node=s,this.mml=r,this.stoppable=!1}Attach(){super.Attach(),this.Start()}Detach(){this.Stop(),super.Detach()}}class Fb extends Bb{Start(){this.active||(this.active=!0,this.highlighter.highlightAll(this.node))}Stop(){this.active&&this.highlighter.unhighlightAll(),this.active=!1}}class Ub extends Bb{constructor(){super(...arguments),this.contrast=new qb,this.leaves=[],this.modality="data-semantic-foreground"}Start(){this.active||(this.active=!0,this.node.hasAttribute("hasforegroundcolor")||(this.colorLeaves(),this.node.setAttribute("hasforegroundcolor","true")),this.leaves.forEach(t=>this.colorize(t)))}Stop(){this.active&&this.leaves.forEach(t=>this.uncolorize(t)),this.active=!1}colorLeaves(){this.leaves=Array.from(this.node.querySelectorAll("[data-semantic-id]:not([data-semantic-children])"));for(const t of this.leaves)t.setAttribute(this.modality,this.contrast.generate()),this.contrast.increment()}colorize(t){t.hasAttribute(this.modality)&&(t.setAttribute(this.modality+"-old",t.style.color),t.style.color=t.getAttribute(this.modality))}uncolorize(t){var e=this.modality+"-old";t.hasAttribute(e)&&(t.style.color=t.getAttribute(e))}}class qb{constructor(){this.hue=10,this.sat=100,this.light=50,this.incr=53}generate(){return qb.hsl2rgb(this.hue,this.sat,this.light)}increment(){this.hue=(this.hue+this.incr)%360}static hsl2rgb(t,e,i){e=1<e?e/100:e,i=1<i?i/100:i;var e=(1-Math.abs(2*i-1))*e,s=e*(1-Math.abs(t/60%2-1)),i=i-e/2;let r=0,n=0,a=0;return 0<=t&&t<60?[r,n,a]=[e,s,0]:60<=t&&t<120?[r,n,a]=[s,e,0]:120<=t&&t<180?[r,n,a]=[0,e,s]:180<=t&&t<240?[r,n,a]=[0,s,e]:240<=t&&t<300?[r,n,a]=[s,0,e]:300<=t&&t<360&&([r,n,a]=[e,0,s]),`rgb(${255*(r+i)}, ${255*(n+i)}, ${255*(a+i)})`}}class jb{constructor(t){this.document=t,this.speechRegion=new _b(this.document),this.brailleRegion=new vb(this.document),this.magnifier=new Tb(this.document),this.tooltip1=new Ab(this.document),this.tooltip2=new Ab(this.document),this.tooltip3=new Ab(this.document)}}const Hb={speech:(t,e,i,...s)=>{const r=kb.create(t,e,t.explorerRegions.speechRegion,i,t.explorerRegions.brailleRegion,t.explorerRegions.magnifier,s[0],s[1]);return r.sound=!0,r},mouseMagnifier:(t,e,i)=>Db.create(t,e,t.explorerRegions.magnifier,i,t=>t.hasAttribute("data-semantic-type"),t=>t),hover:(t,e,i)=>Pb.create(t,e,null,i),infoType:(t,e,i)=>Mb.create(t,e,t.explorerRegions.tooltip1,i,t=>t.hasAttribute("data-semantic-type"),t=>t.getAttribute("data-semantic-type")),infoRole:(t,e,i)=>Mb.create(t,e,t.explorerRegions.tooltip2,i,t=>t.hasAttribute("data-semantic-role"),t=>t.getAttribute("data-semantic-role")),infoPrefix:(t,e,i)=>Mb.create(t,e,t.explorerRegions.tooltip3,i,t=>{var e;return null==(e=t.hasAttribute)?void 0:e.call(t,"data-semantic-prefix-none")},t=>{var e;return null==(e=t.getAttribute)?void 0:e.call(t,"data-semantic-prefix-none")}),flame:(t,e,i)=>Fb.create(t,e,null,i),treeColoring:(t,e,i,...s)=>Ub.create(t,e,null,i,...s)};class Gb{constructor(){this.explorers={},this.attached=[],this._restart=[],this.speechExplorerKeys=["speech","braille","keyMagnifier"]}get highlighter(){if(this._renderer!==this.document.outputJax.name)return this._renderer=this.document.outputJax.name,this.setPrimaryHighlighter(),this._highlighter;var[t,e]=this.colorOptions();return this._highlighter.setColor(e,t),this._highlighter}init(t,e,i,s){this.document=t,this.mml=i,this.node=e,this.setPrimaryHighlighter();for(const t of Object.keys(Hb))this.explorers[t]=Hb[t](this.document,this,this.node,this.mml,s);this.setSecondaryHighlighter(),this.attach()}attach(){this.attached=[];const t=[],e=this.document.options.a11y;for(var[i,s]of Object.entries(this.explorers))s instanceof kb?(s.stoppable=!1,t.unshift(s),this.speechExplorerKeys.some(t=>this.document.options.a11y[t])?(s.Attach(),this.attached.push(i)):s.Detach()):e[i]||"speech"===i&&(e.braille||e.keyMagnifier)?(s.Attach(),this.attached.push(i)):s.Detach();for(const e of t)if(e.attached){e.stoppable=!0;break}}reattach(){for(const t of this.attached){const e=this.explorers[t];e.active&&(this._restart.push(t),e.Stop())}}restart(){this._restart.forEach(t=>{this.explorers[t].Start()}),this._restart=[]}setPrimaryHighlighter(){var[t,e]=this.colorOptions();this._highlighter=bb(e,t,this.document.outputJax.name)}setSecondaryHighlighter(){this.secondaryHighlighter=bb({color:"red"},{color:"black"},this.document.outputJax.name),this.speech.region.highlighter=this.secondaryHighlighter}highlight(t){this.highlighter.highlight(t)}unhighlight(){this.secondaryHighlighter.unhighlight(),this.highlighter.unhighlight()}get speech(){return this.explorers.speech}colorOptions(){const t=this.document.options.a11y;return[{color:t.foregroundColor.toLowerCase(),alpha:t.foregroundOpacity/100},{color:t.backgroundColor.toLowerCase(),alpha:t.backgroundOpacity/100}]}}const Vb="Unix"===Ws.os;function Wb(t,s){t=class extends t{constructor(){super(...arguments),this.refocus=null}get ariaRole(){return this.constructor.ariaRole}get roleDescription(){var t=this.constructor;return"none"===t.roleDescription?t.none:t.roleDescription}get none(){return this.constructor.none}attachSpeech(t){super.attachSpeech(t),null!=(t=null==(t=this.outputData.speechPromise)?void 0:t.then(()=>this.explorers.speech.attachSpeech()))&&t.then(()=>{var t;null!=(t=this.explorers)&&t.speech&&(this.explorers.speech.restarted=this.refocus),this.refocus=null,this.explorers&&this.explorers.restart()})}detachSpeech(t){super.detachSpeech(t),this.explorers.speech.detachSpeech()}explorable(t,e=!1){if(!(this.state()>=u.EXPLORER)){if(!this.isEscaped&&(t.options.enableExplorer||e)){const e=this.typesetRoot,i=s(this.root);this.explorers||(this.explorers=new Gb),this.explorers.init(t,e,i,this)}this.state(u.EXPLORER)}}state(t=null,e=!1){if(t<u.EXPLORER&&this.explorers)for(const t of Object.values(this.explorers.explorers))t.active&&t.Stop();return super.state(t,e)}rerender(t,e=u.RERENDER){var i=this.setTemporaryFocus(t);super.rerender(t,e),this.clearTemporaryFocus(i)}setTemporaryFocus(t){var e;let i=null;if(this.explorers){const s=this.explorers.speech;if(i=null!=s&&s.attached?t.tmpFocus:null){this.refocus=null!=(e=s.semanticFocus())?e:null;const r=t.adaptor;r.append(r.body(),i)}this.explorers.reattach(),null!=i&&i.focus()}return i}clearTemporaryFocus(t){var e;t&&(null!=(e=this.outputData.speechPromise)?e:Promise.resolve()).then(()=>setTimeout(()=>t.remove(),100))}};return t.ariaRole=Vb?"tree":"application",t.roleDescription="math",t.none="Â‘",t}function Xb(t){var e=class extends t{constructor(...t){super(...t),this.explorerRegions=null,this.activeItem=null;const e=this.constructor.ProcessBits,i=(e.has("explorer")||e.allocate("explorer"),new ya(this.mmlFactory)),s=this.options,r=(s.a11y.speechRules||(s.a11y.speechRules=s.sre.domain+"-"+s.sre.style),s.MathItem=Wb(s.MathItem,t=>i.visitTree(t))),n=(r.roleDescription=s.roleDescription,this.explorerRegions=new jb(this),"addStyles"in this&&this.addStyles(this.constructor.speechStyles),this.adaptor),a="http://www.w3.org/2000/svg";this.infoIcon=n.node("mjx-help",{},[n.node("svg",{viewBox:"0 0 18 18",xmlns:a,"aria-hidden":"true"},[n.node("circle",{stroke:"none"},[],a),n.node("circle",{},[],a),n.node("line",{x1:9,y1:9,x2:9,y2:13},[],a),n.node("line",{x1:9,y1:5.5,x2:9,y2:5.5},[],a)],a)]),this.tmpFocus=this.adaptor.node("mjx-focus",{tabIndex:0,style:{outline:"none",display:"block",position:"absolute",top:0,left:"-10px",width:"1px",height:"1px",overflow:"hidden"},role:r.ariaRole,"aria-label":r.none,"aria-roledescription":r.none})}explorable(){if(!this.processed.isSet("explorer")){if(this.options.enableExplorer)for(const t of this.math)t.explorable(this);this.processed.set("explorer")}return this}rerender(t){const e=this.activeItem,i=null==e?void 0:e.setTemporaryFocus(this);return super.rerender(t),null!=e&&e.clearTemporaryFocus(i),this}state(t,e=!1){return super.state(t,e),t<u.EXPLORER&&this.processed.clear("explorer"),this}};return e.OPTIONS=Object.assign(Object.assign({},t.OPTIONS),{enableExplorer:Vs,renderActions:lr(Object.assign(Object.assign({},t.OPTIONS.renderActions),{explorable:[u.EXPLORER]})),sre:lr(Object.assign(Object.assign({},t.OPTIONS.sre),{speech:"none"})),a11y:Object.assign(Object.assign({},t.OPTIONS.a11y),{align:"top",backgroundColor:"Blue",backgroundOpacity:20,flame:!1,foregroundColor:"Black",foregroundOpacity:100,highlight:"None",hover:!1,infoPrefix:!1,infoRole:!1,infoType:!1,keyMagnifier:!1,magnification:"None",magnify:"400%",mouseMagnifier:!1,subtitles:!1,treeColoring:!1,viewBraille:!1,voicing:!1,help:!0,roleDescription:"math",tabSelects:"all"})}),e.speechStyles={'mjx-container[has-speech="true"]':{position:"relative",cursor:"default"},"mjx-speech":{position:"absolute","z-index":-1,left:0,top:0,bottom:0,right:0},"mjx-speech:focus":{outline:"none"},"mjx-container .mjx-selected":{outline:"2px solid black"},"mjx-container > mjx-help":{display:"none",position:"absolute",top:"-.33em",right:"-.5em",width:".6em",height:".6em",cursor:"pointer"},'mjx-container[display="true"] > mjx-help':{right:0},"mjx-help > svg":{stroke:"black",width:"100%",height:"100%"},"mjx-help > svg > circle":{"stroke-width":"1.5px",cx:"9px",cy:"9px",r:"9px",fill:"white"},"mjx-help > svg > circle:nth-child(2)":{fill:"rgba(0, 0, 255, 0.2)",r:"7px"},"mjx-help > svg > line":{"stroke-width":"2.5px","stroke-linecap":"round"},"mjx-help:hover > svg > circle:nth-child(2)":{fill:"white"},"mjx-container.mjx-explorer-active > mjx-help":{display:"inline-flex","align-items":"center"},"mjx-help-sizer":{position:"fixed",width:"40%","max-width":"30em",top:"3em",left:"50%"},"mjx-help-dialog":{position:"absolute",width:"200%",left:"-100%",border:"3px outset","border-radius":"15px",color:"black","background-color":"#DDDDDD","z-index":"301","text-align":"right","font-style":"normal","text-indent":0,"text-transform":"none","line-height":"normal","letter-spacing":"normal","word-spacing":"normal","word-wrap":"normal",float:"none","box-shadow":"0px 10px 20px #808080",outline:"none"},"mjx-help-dialog > h1":{"font-size":"24px","text-align":"center",margin:".5em 0"},"mjx-help-dialog > div":{margin:"0 1em",padding:"3px",overflow:"auto",height:"20em",border:"2px inset black","background-color":"white","text-align":"left"},"mjx-help-dialog > input":{margin:".5em 2em"},"mjx-help-dialog kbd":{display:"inline-block",padding:"3px 5px","font-size":"11px","line-height":"10px",color:"#444d56","vertical-align":"middle","background-color":"#fafbfc",border:"solid 1.5px #c6cbd1","border-bottom-color":"#959da5","border-radius":"3px","box-shadow":"inset -.5px -1px 0 #959da5"},"mjx-help-dialog ul":{"list-style-type":"none"},"mjx-help-dialog li":{"margin-bottom":".5em"},"mjx-help-background":{position:"fixed",top:0,left:0,right:0,bottom:0}},e}function zb(t,e=null){return(t=t.documentClass.prototype.attachSpeech?t:cb(t,e)).documentClass=Xb(t.documentClass),t}function Kb(t,e,i){switch(e){case"speechRules":{const[e,s]=i.split("-");t.options.sre.domain=e,t.options.sre.style=s;break}case"magnification":switch(i){case"None":t.options.a11y.magnification=i,t.options.a11y.keyMagnifier=!1,t.options.a11y.mouseMagnifier=!1;break;case"Keyboard":t.options.a11y.magnification=i,t.options.a11y.keyMagnifier=!0,t.options.a11y.mouseMagnifier=!1;break;case"Mouse":t.options.a11y.magnification=i,t.options.a11y.keyMagnifier=!1,t.options.a11y.mouseMagnifier=!0}break;case"highlight":switch(i){case"None":t.options.a11y.highlight=i,t.options.a11y.hover=!1,t.options.a11y.flame=!1;break;case"Hover":t.options.a11y.highlight=i,t.options.a11y.hover=!0,t.options.a11y.flame=!1;break;case"Flame":t.options.a11y.highlight=i,t.options.a11y.hover=!1,t.options.a11y.flame=!0}break;case"locale":t.options.sre.locale=i;break;default:t.options.a11y[e]=i}}Dr("EXPLORER",u.INSERTED+30),MathJax.loader&&MathJax.loader.checkVersion("a11y/explorer",Bs,"a11y"),Hs({_:{a11y:{explorer_ts:Ps,explorer:{Explorer:ks,ExplorerPool:Ds,Highlighter:Ls,KeyExplorer:Rs,MouseExplorer:Os,Region:Ss,TreeExplorer:Ms}}}}),MathJax.startup&&Vs&&MathJax.startup.extendHandler(t=>zb(t)),Zs.preLoaded("a11y/sre","a11y/semantic-enrich","a11y/speech","a11y/explorer"),Zs.preLoaded("core","input/tex","output/svg","ui/menu"),Zs.saveVersion("tex-svg-nofont"),Jd.loadFont(function(t){return Zs.load(...er.load).then(()=>(t||function(){})()).then(()=>er.ready()).catch(t=>er.failed(t))},"svg",Gd,void 0)})()})();